(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{103:function(t,e,i){"use strict";e.a={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"}},119:function(t,e,i){"use strict";i.r(e);var r=i(94),n=i(4),o=i(12),a=i(13),s=i(34),h=i(6),c=i(5),l=i(41),g=i(95),_=i(35),u={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},d=["#00f","#0ff","#0f0","#ff0","#f00"];var p=function(t){function e(e){var i=e||{},r=Object(c.a)({},i);delete r.gradient,delete r.radius,delete r.blur,delete r.shadow,delete r.weight,t.call(this,r),this.gradient_=null,this.shadow_=void 0!==i.shadow?i.shadow:250,this.circleImage_=void 0,this.styleCache_=null,Object(n.a)(this,Object(o.b)(u.GRADIENT),this.handleGradientChanged_,this),this.setGradient(i.gradient?i.gradient:d),this.setBlur(void 0!==i.blur?i.blur:15),this.setRadius(void 0!==i.radius?i.radius:8),Object(n.a)(this,Object(o.b)(u.BLUR),this.handleStyleChanged_,this),Object(n.a)(this,Object(o.b)(u.RADIUS),this.handleStyleChanged_,this),this.handleStyleChanged_();var a,s=i.weight?i.weight:"weight";a="string"==typeof s?function(t){return t.get(s)}:s,this.setStyle(function(t,e){var i=a(t),r=void 0!==i?Object(h.a)(i,0,1):1,n=255*r|0,o=this.styleCache_[n];return o||(o=[new _.c({image:new g.a({opacity:r,src:this.circleImage_})})],this.styleCache_[n]=o),o}.bind(this)),this.setRenderOrder(null),Object(n.a)(this,l.a.RENDER,this.handleRender_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createCircle_=function(){var t=this.getRadius(),e=this.getBlur(),i=t+e+1,r=2*i,n=Object(a.a)(r,r);n.shadowOffsetX=n.shadowOffsetY=this.shadow_,n.shadowBlur=e,n.shadowColor="#000",n.beginPath();var o=i-this.shadow_;return n.arc(o,o,t,0,2*Math.PI,!0),n.fill(),n.canvas.toDataURL()},e.prototype.getBlur=function(){return this.get(u.BLUR)},e.prototype.getGradient=function(){return this.get(u.GRADIENT)},e.prototype.getRadius=function(){return this.get(u.RADIUS)},e.prototype.handleGradientChanged_=function(){this.gradient_=function(t){for(var e=Object(a.a)(1,256),i=e.createLinearGradient(0,0,1,256),r=1/(t.length-1),n=0,o=t.length;n<o;++n)i.addColorStop(n*r,t[n]);return e.fillStyle=i,e.fillRect(0,0,1,256),e.getImageData(0,0,1,256).data}(this.getGradient())},e.prototype.handleStyleChanged_=function(){this.circleImage_=this.createCircle_(),this.styleCache_=new Array(256),this.changed()},e.prototype.handleRender_=function(t){for(var e=t.context,i=e.canvas,r=e.getImageData(0,0,i.width,i.height),n=r.data,o=0,a=n.length;o<a;o+=4){var s=4*n[o+3];s&&(n[o]=this.gradient_[s],n[o+1]=this.gradient_[s+1],n[o+2]=this.gradient_[s+2])}e.putImageData(r,0,0)},e.prototype.setBlur=function(t){this.set(u.BLUR,t)},e.prototype.setGradient=function(t){this.set(u.GRADIENT,t)},e.prototype.setRadius=function(t){this.set(u.RADIUS,t)},e}(s.a),f=i(105),y=i(32),O=i(106),m=i(29),I=i(9),v=i(109),R=i(103),E=function(t){function e(e){var i=e||{},r=i.renderMode||R.a.HYBRID;Object(I.a)(null==r||r==R.a.IMAGE||r==R.a.HYBRID||r==R.a.VECTOR,28),i.declutter&&r==R.a.IMAGE&&(r=R.a.HYBRID),i.renderMode=r;var n=Object(c.a)({},i);delete n.preload,delete n.useInterimTilesOnError,t.call(this,n),this.setPreload(i.preload?i.preload:0),this.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),this.type=m.a.VECTOR_TILE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPreload=function(){return this.get(v.a.PRELOAD)},e.prototype.getUseInterimTilesOnError=function(){return this.get(v.a.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setPreload=function(t){this.set(v.a.PRELOAD,t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(v.a.USE_INTERIM_TILES_ON_ERROR,t)},e}(s.a);E.prototype.getSource;var T=E;i.d(e,"Group",function(){return r.a}),i.d(e,"Heatmap",function(){return p}),i.d(e,"Image",function(){return f.a}),i.d(e,"Layer",function(){return y.a}),i.d(e,"Tile",function(){return O.a}),i.d(e,"Vector",function(){return s.a}),i.d(e,"VectorTile",function(){return T})},34:function(t,e,i){"use strict";var r=i(29),n=i(32),o=i(61),a=i(5),s=i(35),h="renderOrder",c=function(t){function e(e){var i=e||{},n=Object(a.a)({},i);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,t.call(this,n),this.declutter_=void 0!==i.declutter&&i.declutter,this.renderBuffer_=void 0!==i.renderBuffer?i.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(i.style),this.updateWhileAnimating_=void 0!==i.updateWhileAnimating&&i.updateWhileAnimating,this.updateWhileInteracting_=void 0!==i.updateWhileInteracting&&i.updateWhileInteracting,this.renderMode_=i.renderMode||o.a.VECTOR,this.type=r.a.VECTOR}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.setDeclutter=function(t){this.declutter_=t},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(h)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(h,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:s.a,this.styleFunction_=null===t?void 0:Object(s.d)(this.style_),this.changed()},e.prototype.getRenderMode=function(){return this.renderMode_},e}(n.a);c.prototype.getSource,e.a=c},82:function(t,e,i){"use strict";i.d(e,"b",function(){return l});var r=i(13),n=i(4),o=i(40),a=i(2),s=i(30),h=i(71),c=function(t){function e(e,i,r,n,o,a){t.call(this),this.hitDetectionImage_=null,this.image_=e||new Image,null!==n&&(this.image_.crossOrigin=n),this.canvas_=a?document.createElement("canvas"):null,this.color_=a,this.imageListenerKeys_=null,this.imageState_=o,this.size_=r,this.src_=i,this.tainted_}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===s.a.LOADED){this.tainted_=!1;var t=Object(r.a)(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(t){this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(a.a.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=s.a.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=s.a.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],i=this.size_[1],n=Object(r.a)(e,i);n.fillRect(0,0,e,i),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==s.a.IDLE){this.imageState_=s.a.LOADING,this.imageListenerKeys_=[Object(n.b)(this.image_,a.a.ERROR,this.handleImageError_,this),Object(n.b)(this.image_,a.a.LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}},e.prototype.replaceColor_=function(){if(this.color_&&!this.isTainted_()){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);for(var e=t.getImageData(0,0,this.image_.width,this.image_.height),i=e.data,r=this.color_[0]/255,n=this.color_[1]/255,o=this.color_[2]/255,a=0,s=i.length;a<s;a+=4)i[a]*=r,i[a+1]*=n,i[a+2]*=o;t.putImageData(e,0,0)}},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(n.e),this.imageListenerKeys_=null},e}(o.a);function l(t,e,i,r,n,o){var a=h.a.get(e,r,o);return a||(a=new c(t,e,i,r,n,o),h.a.set(e,r,o,a)),a}e.a=c},94:function(t,e,i){"use strict";var r=i(3),n=i(25),o=i(21),a=i(12),s=i(50),h=i(9),c=i(4),l=i(2),g=i(1),_=i(58),u=i(5),d=i(16),p={LAYERS:"layers"},f=function(t){function e(e){var i=e||{},r=Object(u.a)({},i);delete r.layers;var o=i.layers;t.call(this,r),this.layersListenerKeys_=[],this.listenerKeys_={},Object(c.a)(this,Object(a.b)(p.LAYERS),this.handleLayersChanged_,this),o?Array.isArray(o)?o=new n.a(o.slice(),{unique:!0}):Object(h.a)("function"==typeof o.getArray,43):o=new n.a(void 0,{unique:!0}),this.setLayers(o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(c.e),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(Object(c.a)(t,o.a.ADD,this.handleLayersAdd_,this),Object(c.a)(t,o.a.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(c.e);Object(u.b)(this.listenerKeys_);for(var i=t.getArray(),n=0,a=i.length;n<a;n++){var h=i[n];this.listenerKeys_[Object(r.c)(h)]=[Object(c.a)(h,s.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(c.a)(h,l.a.CHANGE,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[Object(r.c)(e)]=[Object(c.a)(e,s.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(c.a)(e,l.a.CHANGE,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=t.element,i=Object(r.c)(e);this.listenerKeys_[i].forEach(c.e),delete this.listenerKeys_[i],this.changed()},e.prototype.getLayers=function(){return this.get(p.LAYERS)},e.prototype.setLayers=function(t){this.set(p.LAYERS,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],i=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});for(var r=this.getLayerState(),n=i,o=e.length;n<o;n++){var a=e[n];a.opacity*=r.opacity,a.visible=a.visible&&r.visible,a.maxResolution=Math.min(a.maxResolution,r.maxResolution),a.minResolution=Math.max(a.minResolution,r.minResolution),void 0!==r.extent&&(void 0!==a.extent?a.extent=Object(g.B)(a.extent,r.extent):a.extent=r.extent)}return e},e.prototype.getSourceState=function(){return d.a.READY},e}(_.a);e.a=f},95:function(t,e,i){"use strict";var r=i(3),n=i(30),o=i(9),a=i(44),s=i(4),h=i(2),c={FRACTION:"fraction",PIXELS:"pixels"},l=i(82),g={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},_=function(t){function e(e){var i=e||{},s=void 0!==i.opacity?i.opacity:1,h=void 0!==i.rotation?i.rotation:0,_=void 0!==i.scale?i.scale:1,u=void 0!==i.rotateWithView&&i.rotateWithView;t.call(this,{opacity:s,rotation:h,scale:_,rotateWithView:u}),this.anchor_=void 0!==i.anchor?i.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==i.anchorOrigin?i.anchorOrigin:g.TOP_LEFT,this.anchorXUnits_=void 0!==i.anchorXUnits?i.anchorXUnits:c.FRACTION,this.anchorYUnits_=void 0!==i.anchorYUnits?i.anchorYUnits:c.FRACTION,this.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null;var d=void 0!==i.img?i.img:null,p=void 0!==i.imgSize?i.imgSize:null,f=i.src;Object(o.a)(!(void 0!==f&&d),4),Object(o.a)(!d||d&&p,5),void 0!==f&&0!==f.length||!d||(f=d.src||Object(r.c)(d)),Object(o.a)(void 0!==f&&f.length>0,6);var y=void 0!==i.src?n.a.IDLE:n.a.LOADED;this.color_=void 0!==i.color?Object(a.a)(i.color):null,this.iconImage_=Object(l.b)(d,f,p,this.crossOrigin_,y,this.color_),this.offset_=void 0!==i.offset?i.offset:[0,0],this.offsetOrigin_=void 0!==i.offsetOrigin?i.offsetOrigin:g.TOP_LEFT,this.origin_=null,this.size_=void 0!==i.size?i.size:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==c.FRACTION||this.anchorYUnits_==c.FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==c.FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==c.FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=g.TOP_LEFT){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=g.TOP_RIGHT&&this.anchorOrigin_!=g.BOTTOM_RIGHT||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=g.BOTTOM_LEFT&&this.anchorOrigin_!=g.BOTTOM_RIGHT||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=g.TOP_LEFT){var e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),this.offsetOrigin_!=g.TOP_RIGHT&&this.offsetOrigin_!=g.BOTTOM_RIGHT||(t[0]=i[0]-e[0]-t[0]),this.offsetOrigin_!=g.BOTTOM_LEFT&&this.offsetOrigin_!=g.BOTTOM_RIGHT||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t,e){return Object(s.a)(this.iconImage_,h.a.CHANGE,t,e)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t,e){Object(s.c)(this.iconImage_,h.a.CHANGE,t,e)},e}(i(74).a);e.a=_}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvVmVjdG9yVGlsZVJlbmRlclR5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL0hlYXRtYXAuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL1ZlY3RvclRpbGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL1ZlY3Rvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvc3R5bGUvSWNvbkltYWdlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9Hcm91cC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvc3R5bGUvSWNvbkFuY2hvclVuaXRzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9zdHlsZS9JY29uT3JpZ2luLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9zdHlsZS9JY29uLmpzIl0sIm5hbWVzIjpbIl9fd2VicGFja19leHBvcnRzX18iLCJJTUFHRSIsIkhZQlJJRCIsIlZFQ1RPUiIsIlByb3BlcnR5IiwiQkxVUiIsIkdSQURJRU5UIiwiUkFESVVTIiwiREVGQVVMVF9HUkFESUVOVCIsImxheWVyX0hlYXRtYXAiLCJWZWN0b3JMYXllciIsIkhlYXRtYXAiLCJvcHRfb3B0aW9ucyIsIm9wdGlvbnMiLCJiYXNlT3B0aW9ucyIsIk9iamVjdCIsIm9iaiIsImdyYWRpZW50IiwicmFkaXVzIiwiYmx1ciIsInNoYWRvdyIsIndlaWdodCIsImNhbGwiLCJ0aGlzIiwiZ3JhZGllbnRfIiwic2hhZG93XyIsInVuZGVmaW5lZCIsImNpcmNsZUltYWdlXyIsInN0eWxlQ2FjaGVfIiwiZXZlbnRzIiwib2xfT2JqZWN0IiwiaGFuZGxlR3JhZGllbnRDaGFuZ2VkXyIsInNldEdyYWRpZW50Iiwic2V0Qmx1ciIsInNldFJhZGl1cyIsImhhbmRsZVN0eWxlQ2hhbmdlZF8iLCJ3ZWlnaHRGdW5jdGlvbiIsImZlYXR1cmUiLCJnZXQiLCJzZXRTdHlsZSIsInJlc29sdXRpb24iLCJvcGFjaXR5IiwibWF0aCIsImluZGV4Iiwic3R5bGUiLCJTdHlsZSIsImltYWdlIiwiSWNvbiIsInNyYyIsImJpbmQiLCJzZXRSZW5kZXJPcmRlciIsIkV2ZW50VHlwZSIsIlJFTkRFUiIsImhhbmRsZVJlbmRlcl8iLCJfX3Byb3RvX18iLCJwcm90b3R5cGUiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsImNyZWF0ZUNpcmNsZV8iLCJnZXRSYWRpdXMiLCJnZXRCbHVyIiwiaGFsZlNpemUiLCJzaXplIiwiY29udGV4dCIsImRvbSIsInNoYWRvd09mZnNldFgiLCJzaGFkb3dPZmZzZXRZIiwic2hhZG93Qmx1ciIsInNoYWRvd0NvbG9yIiwiYmVnaW5QYXRoIiwiY2VudGVyIiwiYXJjIiwiTWF0aCIsIlBJIiwiZmlsbCIsImNhbnZhcyIsInRvRGF0YVVSTCIsImdldEdyYWRpZW50IiwiY29sb3JzIiwiY3JlYXRlTGluZWFyR3JhZGllbnQiLCJzdGVwIiwibGVuZ3RoIiwiaSIsImlpIiwiYWRkQ29sb3JTdG9wIiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJnZXRJbWFnZURhdGEiLCJkYXRhIiwiY3JlYXRlR3JhZGllbnQiLCJBcnJheSIsImNoYW5nZWQiLCJldmVudCIsIndpZHRoIiwiaGVpZ2h0IiwidmlldzgiLCJhbHBoYSIsInB1dEltYWdlRGF0YSIsInNldCIsIlZlY3RvciIsIlZlY3RvclRpbGVfVmVjdG9yVGlsZUxheWVyIiwiVmVjdG9yVGlsZUxheWVyIiwicmVuZGVyTW9kZSIsIlZlY3RvclRpbGVSZW5kZXJUeXBlIiwiYXNzZXJ0cyIsImRlY2x1dHRlciIsInByZWxvYWQiLCJ1c2VJbnRlcmltVGlsZXNPbkVycm9yIiwic2V0UHJlbG9hZCIsInNldFVzZUludGVyaW1UaWxlc09uRXJyb3IiLCJ0eXBlIiwiTGF5ZXJUeXBlIiwiVkVDVE9SX1RJTEUiLCJnZXRQcmVsb2FkIiwiVGlsZVByb3BlcnR5IiwiUFJFTE9BRCIsImdldFVzZUludGVyaW1UaWxlc09uRXJyb3IiLCJVU0VfSU5URVJJTV9USUxFU19PTl9FUlJPUiIsImdldFNvdXJjZSIsIlZlY3RvclRpbGUiLCJfTGF5ZXJUeXBlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiX0xheWVyX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18iLCJfVmVjdG9yUmVuZGVyVHlwZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fIiwiX29ial9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fIiwiX3N0eWxlX1N0eWxlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18iLCJMYXllciIsInJlbmRlckJ1ZmZlciIsInVwZGF0ZVdoaWxlQW5pbWF0aW5nIiwidXBkYXRlV2hpbGVJbnRlcmFjdGluZyIsImRlY2x1dHRlcl8iLCJyZW5kZXJCdWZmZXJfIiwic3R5bGVfIiwic3R5bGVGdW5jdGlvbl8iLCJ1cGRhdGVXaGlsZUFuaW1hdGluZ18iLCJ1cGRhdGVXaGlsZUludGVyYWN0aW5nXyIsInJlbmRlck1vZGVfIiwiZ2V0RGVjbHV0dGVyIiwic2V0RGVjbHV0dGVyIiwiZ2V0UmVuZGVyQnVmZmVyIiwiZ2V0UmVuZGVyT3JkZXIiLCJnZXRTdHlsZSIsImdldFN0eWxlRnVuY3Rpb24iLCJnZXRVcGRhdGVXaGlsZUFuaW1hdGluZyIsImdldFVwZGF0ZVdoaWxlSW50ZXJhY3RpbmciLCJyZW5kZXJPcmRlciIsImdldFJlbmRlck1vZGUiLCJkIiwiX2RvbV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwiX2V2ZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fIiwiX2V2ZW50c19UYXJnZXRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyIsIl9ldmVudHNfRXZlbnRUeXBlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18iLCJfSW1hZ2VTdGF0ZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fIiwiX0ljb25JbWFnZUNhY2hlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X18iLCJJY29uSW1hZ2UiLCJFdmVudFRhcmdldCIsImNyb3NzT3JpZ2luIiwiaW1hZ2VTdGF0ZSIsImNvbG9yIiwiaGl0RGV0ZWN0aW9uSW1hZ2VfIiwiaW1hZ2VfIiwiSW1hZ2UiLCJjYW52YXNfIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY29sb3JfIiwiaW1hZ2VMaXN0ZW5lcktleXNfIiwiaW1hZ2VTdGF0ZV8iLCJzaXplXyIsInNyY18iLCJ0YWludGVkXyIsImlzVGFpbnRlZF8iLCJMT0FERUQiLCJkcmF3SW1hZ2UiLCJlIiwiZGlzcGF0Y2hDaGFuZ2VFdmVudF8iLCJkaXNwYXRjaEV2ZW50IiwiQ0hBTkdFIiwiaGFuZGxlSW1hZ2VFcnJvcl8iLCJFUlJPUiIsInVubGlzdGVuSW1hZ2VfIiwiaGFuZGxlSW1hZ2VMb2FkXyIsInJlcGxhY2VDb2xvcl8iLCJnZXRJbWFnZSIsInBpeGVsUmF0aW8iLCJnZXRJbWFnZVN0YXRlIiwiZ2V0SGl0RGV0ZWN0aW9uSW1hZ2UiLCJnZXRTaXplIiwiZ2V0U3JjIiwibG9hZCIsIklETEUiLCJMT0FESU5HIiwiTE9BRCIsImN0eCIsImdldENvbnRleHQiLCJpbWdEYXRhIiwiciIsImciLCJiIiwiZm9yRWFjaCIsImljb25JbWFnZSIsIl91dGlsX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18iLCJfQ29sbGVjdGlvbl9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fIiwiX0NvbGxlY3Rpb25FdmVudFR5cGVfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyIsIl9PYmplY3RfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyIsIl9PYmplY3RFdmVudFR5cGVfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyIsIl9hc3NlcnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X18iLCJfZXZlbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X18iLCJfZXZlbnRzX0V2ZW50VHlwZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfN19fIiwiX2V4dGVudF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOF9fIiwiX0Jhc2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzlfXyIsIl9vYmpfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEwX18iLCJfc291cmNlX1N0YXRlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMV9fIiwiTEFZRVJTIiwiTGF5ZXJHcm91cCIsIkJhc2VMYXllciIsImxheWVycyIsImxheWVyc0xpc3RlbmVyS2V5c18iLCJsaXN0ZW5lcktleXNfIiwiaGFuZGxlTGF5ZXJzQ2hhbmdlZF8iLCJpc0FycmF5Iiwic2xpY2UiLCJ1bmlxdWUiLCJnZXRBcnJheSIsInNldExheWVycyIsImhhbmRsZUxheWVyQ2hhbmdlXyIsImdldExheWVycyIsImlkIiwicHVzaCIsIkFERCIsImhhbmRsZUxheWVyc0FkZF8iLCJSRU1PVkUiLCJoYW5kbGVMYXllcnNSZW1vdmVfIiwibGF5ZXJzQXJyYXkiLCJsYXllciIsIlBST1BFUlRZQ0hBTkdFIiwiY29sbGVjdGlvbkV2ZW50Iiwia2V5IiwiZ2V0TGF5ZXJzQXJyYXkiLCJvcHRfYXJyYXkiLCJhcnJheSIsImdldExheWVyU3RhdGVzQXJyYXkiLCJvcHRfc3RhdGVzIiwic3RhdGVzIiwicG9zIiwib3duTGF5ZXJTdGF0ZSIsImdldExheWVyU3RhdGUiLCJsYXllclN0YXRlIiwidmlzaWJsZSIsIm1heFJlc29sdXRpb24iLCJtaW4iLCJtaW5SZXNvbHV0aW9uIiwibWF4IiwiZXh0ZW50IiwiZ2V0U291cmNlU3RhdGUiLCJSRUFEWSIsIkljb25BbmNob3JVbml0cyIsIkZSQUNUSU9OIiwiUElYRUxTIiwiSWNvbk9yaWdpbiIsIkJPVFRPTV9MRUZUIiwiQk9UVE9NX1JJR0hUIiwiVE9QX0xFRlQiLCJUT1BfUklHSFQiLCJJY29uX0ljb24iLCJJbWFnZVN0eWxlIiwicm90YXRpb24iLCJzY2FsZSIsInJvdGF0ZVdpdGhWaWV3IiwiYW5jaG9yXyIsImFuY2hvciIsIm5vcm1hbGl6ZWRBbmNob3JfIiwiYW5jaG9yT3JpZ2luXyIsImFuY2hvck9yaWdpbiIsImFuY2hvclhVbml0c18iLCJhbmNob3JYVW5pdHMiLCJhbmNob3JZVW5pdHNfIiwiYW5jaG9yWVVuaXRzIiwiY3Jvc3NPcmlnaW5fIiwiaW1nIiwiaW1nU2l6ZSIsInV0aWwiLCJJbWFnZVN0YXRlIiwiaWNvbkltYWdlXyIsIm9mZnNldF8iLCJvZmZzZXQiLCJvZmZzZXRPcmlnaW5fIiwib2Zmc2V0T3JpZ2luIiwib3JpZ2luXyIsImNsb25lIiwiZ2V0T3BhY2l0eSIsImdldFNjYWxlIiwiZ2V0Um90YXRpb24iLCJnZXRSb3RhdGVXaXRoVmlldyIsImdldEFuY2hvciIsInNldEFuY2hvciIsImdldENvbG9yIiwiZ2V0SW1hZ2VTaXplIiwiZ2V0SGl0RGV0ZWN0aW9uSW1hZ2VTaXplIiwiZ2V0T3JpZ2luIiwiaWNvbkltYWdlU2l6ZSIsImxpc3RlbkltYWdlQ2hhbmdlIiwibGlzdGVuZXIiLCJ0aGlzQXJnIiwidW5saXN0ZW5JbWFnZUNoYW5nZSJdLCJtYXBwaW5ncyI6IjJGQWlCZUEsRUFBQSxHQUNmQyxNQUFBLFFBQ0FDLE9BQUEsU0FDQUMsT0FBQSxvSUM2QkFDLEVBQUEsQ0FDQUMsS0FBQSxPQUNBQyxTQUFBLFdBQ0FDLE9BQUEsVUFRQUMsRUFBQSxxQ0E0UGUsSUFBQUMsRUEvT0osU0FBQUMsR0FDWCxTQUFBQyxFQUFBQyxHQUNBLElBQUFDLEVBQUFELEdBQUEsR0FFQUUsRUFBc0JDLE9BQUFDLEVBQUEsRUFBQUQsQ0FBTSxHQUFHRixVQUUvQkMsRUFBQUcsZ0JBQ0FILEVBQUFJLGNBQ0FKLEVBQUFLLFlBQ0FMLEVBQUFNLGNBQ0FOLEVBQUFPLE9BQ0FYLEVBQUFZLEtBQUFDLEtBQUFULEdBTUFT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QzFDaFAsS0FBQXVRLGVBQWdDM0IsRUFBVUUsZUFDMUN3QixFQUFBLEdBQUFlLEVBQUEsR0FBQTlPLEVBQUEsR0FBQStOLEVBQUEsSUFFQXRRLEtBQUF1USxlQUFnQzNCLEVBQVVDLGFBQzFDN08sS0FBQXVRLGVBQWdDM0IsRUFBVUUsZUFDMUN3QixFQUFBLEdBQUFlLEVBQUEsR0FBQTlPLEVBQUEsR0FBQStOLEVBQUEsSUFJQSxPQURBdFEsS0FBQXlRLFFBQUFILEVBQ0F0USxLQUFBeVEsU0FRQWpQLEVBQUFRLFVBQUFxSSxPQUFBLFdBQ0EsT0FBQXJLLEtBQUFvUSxXQUFBL0YsVUFPQTdJLEVBQUFRLFVBQUFvSSxRQUFBLFdBQ0EsT0FBQXBLLEtBQUFpSixNQUFBakosS0FBQWlKLE1BQUFqSixLQUFBb1EsV0FBQWhHLFdBTUE1SSxFQUFBUSxVQUFBc1Asa0JBQUEsU0FBQUMsRUFBQUMsR0FDQSxPQUFXaFMsT0FBQWMsRUFBQSxFQUFBZCxDQUFNUSxLQUFBb1EsV0FBa0J4TyxFQUFBLEVBQVM4SCxPQUM1QzZILEVBQUFDLElBV0FoUSxFQUFBUSxVQUFBc0ksS0FBQSxXQUNBdEssS0FBQW9RLFdBQUE5RixRQU1BOUksRUFBQVEsVUFBQXlQLG9CQUFBLFNBQUFGLEVBQUFDLEdBQ0loUyxPQUFBYyxFQUFBLEVBQUFkLENBQVFRLEtBQUFvUSxXQUFrQnhPLEVBQUEsRUFBUzhILE9BQ3ZDNkgsRUFBQUMsSUFHQWhRLEVBL1ZRLE9BZ1dOLEdBR2EvQyxFQUFBIiwiZmlsZSI6Im9sL2xheWVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL1ZlY3RvclRpbGVSZW5kZXJUeXBlXG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICogUmVuZGVyIG1vZGUgZm9yIHZlY3RvciB0aWxlczpcbiAqICAqIGAnaW1hZ2UnYDogVmVjdG9yIHRpbGVzIGFyZSByZW5kZXJlZCBhcyBpbWFnZXMuIEdyZWF0IHBlcmZvcm1hbmNlLCBidXRcbiAqICAgIHBvaW50IHN5bWJvbHMgYW5kIHRleHRzIGFyZSBhbHdheXMgcm90YXRlZCB3aXRoIHRoZSB2aWV3IGFuZCBwaXhlbHMgYXJlXG4gKiAgICBzY2FsZWQgZHVyaW5nIHpvb20gYW5pbWF0aW9ucy5cbiAqICAqIGAnaHlicmlkJ2A6IFBvbHlnb24gYW5kIGxpbmUgZWxlbWVudHMgYXJlIHJlbmRlcmVkIGFzIGltYWdlcywgc28gcGl4ZWxzXG4gKiAgICBhcmUgc2NhbGVkIGR1cmluZyB6b29tIGFuaW1hdGlvbnMuIFBvaW50IHN5bWJvbHMgYW5kIHRleHRzIGFyZSBhY2N1cmF0ZWx5XG4gKiAgICByZW5kZXJlZCBhcyB2ZWN0b3JzIGFuZCBjYW4gc3RheSB1cHJpZ2h0IG9uIHJvdGF0ZWQgdmlld3MuXG4gKiAgKiBgJ3ZlY3RvcidgOiBWZWN0b3IgdGlsZXMgYXJlIHJlbmRlcmVkIGFzIHZlY3RvcnMuIE1vc3QgYWNjdXJhdGUgcmVuZGVyaW5nXG4gKiAgICBldmVuIGR1cmluZyBhbmltYXRpb25zLCBidXQgc2xvd2VyIHBlcmZvcm1hbmNlIHRoYW4gdGhlIG90aGVyIG9wdGlvbnMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgSU1BR0U6ICdpbWFnZScsXG4gIEhZQlJJRDogJ2h5YnJpZCcsXG4gIFZFQ1RPUjogJ3ZlY3Rvcidcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZlY3RvclRpbGVSZW5kZXJUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9IZWF0bWFwXG4gKi9cbmltcG9ydCB7bGlzdGVufSBmcm9tICcuLi9ldmVudHMuanMnO1xuaW1wb3J0IHtnZXRDaGFuZ2VFdmVudFR5cGV9IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQge2NyZWF0ZUNhbnZhc0NvbnRleHQyRH0gZnJvbSAnLi4vZG9tLmpzJztcbmltcG9ydCBWZWN0b3JMYXllciBmcm9tICcuL1ZlY3Rvci5qcyc7XG5pbXBvcnQge2NsYW1wfSBmcm9tICcuLi9tYXRoLmpzJztcbmltcG9ydCB7YXNzaWdufSBmcm9tICcuLi9vYmouanMnO1xuaW1wb3J0IFJlbmRlckV2ZW50VHlwZSBmcm9tICcuLi9yZW5kZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJY29uIGZyb20gJy4uL3N0eWxlL0ljb24uanMnO1xuaW1wb3J0IFN0eWxlIGZyb20gJy4uL3N0eWxlL1N0eWxlLmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb3BhY2l0eT0xXSBPcGFjaXR5ICgwLCAxKS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Zpc2libGU9dHJ1ZV0gVmlzaWJpbGl0eS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gVGhlIGJvdW5kaW5nIGV4dGVudCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgVGhlIGxheWVyIHdpbGwgbm90IGJlXG4gKiByZW5kZXJlZCBvdXRzaWRlIG9mIHRoaXMgZXh0ZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6SW5kZXhdIFRoZSB6LWluZGV4IGZvciBsYXllciByZW5kZXJpbmcuICBBdCByZW5kZXJpbmcgdGltZSwgdGhlIGxheWVyc1xuICogd2lsbCBiZSBvcmRlcmVkLCBmaXJzdCBieSBaLWluZGV4IGFuZCB0aGVuIGJ5IHBvc2l0aW9uLiBXaGVuIGB1bmRlZmluZWRgLCBhIGB6SW5kZXhgIG9mIDAgaXMgYXNzdW1lZFxuICogZm9yIGxheWVycyB0aGF0IGFyZSBhZGRlZCB0byB0aGUgbWFwJ3MgYGxheWVyc2AgY29sbGVjdGlvbiwgb3IgYEluZmluaXR5YCB3aGVuIHRoZSBsYXllcidzIGBzZXRNYXAoKWBcbiAqIG1ldGhvZCB3YXMgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluUmVzb2x1dGlvbl0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIFRoZSBtYXhpbXVtIHJlc29sdXRpb24gKGV4Y2x1c2l2ZSkgYmVsb3cgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtBcnJheTxzdHJpbmc+fSBbZ3JhZGllbnQ9WycjMDBmJywgJyMwZmYnLCAnIzBmMCcsICcjZmYwJywgJyNmMDAnXV0gVGhlIGNvbG9yIGdyYWRpZW50XG4gKiBvZiB0aGUgaGVhdG1hcCwgc3BlY2lmaWVkIGFzIGFuIGFycmF5IG9mIENTUyBjb2xvciBzdHJpbmdzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyYWRpdXM9OF0gUmFkaXVzIHNpemUgaW4gcGl4ZWxzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtibHVyPTE1XSBCbHVyIHNpemUgaW4gcGl4ZWxzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtzaGFkb3c9MjUwXSBTaGFkb3cgc2l6ZSBpbiBwaXhlbHMuXG4gKiBAcHJvcGVydHkge3N0cmluZ3xmdW5jdGlvbihpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQpOm51bWJlcn0gW3dlaWdodD0nd2VpZ2h0J10gVGhlIGZlYXR1cmVcbiAqIGF0dHJpYnV0ZSB0byB1c2UgZm9yIHRoZSB3ZWlnaHQgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB3ZWlnaHQgZnJvbSBhIGZlYXR1cmUuIFdlaWdodCB2YWx1ZXNcbiAqIHNob3VsZCByYW5nZSBmcm9tIDAgdG8gMSAoYW5kIHZhbHVlcyBvdXRzaWRlIHdpbGwgYmUgY2xhbXBlZCB0byB0aGF0IHJhbmdlKS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9WZWN0b3JSZW5kZXJUeXBlLmpzXCIpLmRlZmF1bHR8c3RyaW5nfSBbcmVuZGVyTW9kZT0ndmVjdG9yJ10gUmVuZGVyIG1vZGUgZm9yIHZlY3RvciBsYXllcnM6XG4gKiAgKiBgJ2ltYWdlJ2A6IFZlY3RvciBsYXllcnMgYXJlIHJlbmRlcmVkIGFzIGltYWdlcy4gR3JlYXQgcGVyZm9ybWFuY2UsIGJ1dCBwb2ludCBzeW1ib2xzIGFuZFxuICogICAgdGV4dHMgYXJlIGFsd2F5cyByb3RhdGVkIHdpdGggdGhlIHZpZXcgYW5kIHBpeGVscyBhcmUgc2NhbGVkIGR1cmluZyB6b29tIGFuaW1hdGlvbnMuXG4gKiAgKiBgJ3ZlY3RvcidgOiBWZWN0b3IgbGF5ZXJzIGFyZSByZW5kZXJlZCBhcyB2ZWN0b3JzLiBNb3N0IGFjY3VyYXRlIHJlbmRlcmluZyBldmVuIGR1cmluZ1xuICogICAgYW5pbWF0aW9ucywgYnV0IHNsb3dlciBwZXJmb3JtYW5jZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc291cmNlL1ZlY3Rvci5qc1wiKS5kZWZhdWx0fSBbc291cmNlXSBTb3VyY2UuXG4gKi9cblxuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgUHJvcGVydHkgPSB7XG4gIEJMVVI6ICdibHVyJyxcbiAgR1JBRElFTlQ6ICdncmFkaWVudCcsXG4gIFJBRElVUzogJ3JhZGl1cydcbn07XG5cblxuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtBcnJheTxzdHJpbmc+fVxuICovXG52YXIgREVGQVVMVF9HUkFESUVOVCA9IFsnIzAwZicsICcjMGZmJywgJyMwZjAnLCAnI2ZmMCcsICcjZjAwJ107XG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBMYXllciBmb3IgcmVuZGVyaW5nIHZlY3RvciBkYXRhIGFzIGEgaGVhdG1hcC5cbiAqIE5vdGUgdGhhdCBhbnkgcHJvcGVydHkgc2V0IGluIHRoZSBvcHRpb25zIGlzIHNldCBhcyBhIHtAbGluayBtb2R1bGU6b2wvT2JqZWN0fkJhc2VPYmplY3R9XG4gKiBwcm9wZXJ0eSBvbiB0aGUgbGF5ZXIgb2JqZWN0OyBmb3IgZXhhbXBsZSwgc2V0dGluZyBgdGl0bGU6ICdNeSBUaXRsZSdgIGluIHRoZVxuICogb3B0aW9ucyBtZWFucyB0aGF0IGB0aXRsZWAgaXMgb2JzZXJ2YWJsZSwgYW5kIGhhcyBnZXQvc2V0IGFjY2Vzc29ycy5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50LmpzXCIpLlJlbmRlckV2ZW50XG4gKiBAYXBpXG4gKi9cbnZhciBIZWF0bWFwID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoVmVjdG9yTGF5ZXIpIHtcbiAgZnVuY3Rpb24gSGVhdG1hcChvcHRfb3B0aW9ucykge1xuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuXG4gICAgdmFyIGJhc2VPcHRpb25zID0gYXNzaWduKHt9LCBvcHRpb25zKTtcblxuICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy5ncmFkaWVudDtcbiAgICBkZWxldGUgYmFzZU9wdGlvbnMucmFkaXVzO1xuICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy5ibHVyO1xuICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy5zaGFkb3c7XG4gICAgZGVsZXRlIGJhc2VPcHRpb25zLndlaWdodDtcbiAgICBWZWN0b3JMYXllci5jYWxsKHRoaXMsIGJhc2VPcHRpb25zKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge1VpbnQ4Q2xhbXBlZEFycmF5fVxuICAgICAqL1xuICAgIHRoaXMuZ3JhZGllbnRfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnNoYWRvd18gPSBvcHRpb25zLnNoYWRvdyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zaGFkb3cgOiAyNTA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtzdHJpbmd8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMuY2lyY2xlSW1hZ2VfID0gdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdD4+fVxuICAgICAqL1xuICAgIHRoaXMuc3R5bGVDYWNoZV8gPSBudWxsO1xuXG4gICAgbGlzdGVuKHRoaXMsXG4gICAgICBnZXRDaGFuZ2VFdmVudFR5cGUoUHJvcGVydHkuR1JBRElFTlQpLFxuICAgICAgdGhpcy5oYW5kbGVHcmFkaWVudENoYW5nZWRfLCB0aGlzKTtcblxuICAgIHRoaXMuc2V0R3JhZGllbnQob3B0aW9ucy5ncmFkaWVudCA/IG9wdGlvbnMuZ3JhZGllbnQgOiBERUZBVUxUX0dSQURJRU5UKTtcblxuICAgIHRoaXMuc2V0Qmx1cihvcHRpb25zLmJsdXIgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuYmx1ciA6IDE1KTtcblxuICAgIHRoaXMuc2V0UmFkaXVzKG9wdGlvbnMucmFkaXVzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnJhZGl1cyA6IDgpO1xuXG4gICAgbGlzdGVuKHRoaXMsXG4gICAgICBnZXRDaGFuZ2VFdmVudFR5cGUoUHJvcGVydHkuQkxVUiksXG4gICAgICB0aGlzLmhhbmRsZVN0eWxlQ2hhbmdlZF8sIHRoaXMpO1xuICAgIGxpc3Rlbih0aGlzLFxuICAgICAgZ2V0Q2hhbmdlRXZlbnRUeXBlKFByb3BlcnR5LlJBRElVUyksXG4gICAgICB0aGlzLmhhbmRsZVN0eWxlQ2hhbmdlZF8sIHRoaXMpO1xuXG4gICAgdGhpcy5oYW5kbGVTdHlsZUNoYW5nZWRfKCk7XG5cbiAgICB2YXIgd2VpZ2h0ID0gb3B0aW9ucy53ZWlnaHQgPyBvcHRpb25zLndlaWdodCA6ICd3ZWlnaHQnO1xuICAgIHZhciB3ZWlnaHRGdW5jdGlvbjtcbiAgICBpZiAodHlwZW9mIHdlaWdodCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHdlaWdodEZ1bmN0aW9uID0gZnVuY3Rpb24oZmVhdHVyZSkge1xuICAgICAgICByZXR1cm4gZmVhdHVyZS5nZXQod2VpZ2h0KTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHdlaWdodEZ1bmN0aW9uID0gd2VpZ2h0O1xuICAgIH1cblxuICAgIHRoaXMuc2V0U3R5bGUoZnVuY3Rpb24oZmVhdHVyZSwgcmVzb2x1dGlvbikge1xuICAgICAgdmFyIHdlaWdodCA9IHdlaWdodEZ1bmN0aW9uKGZlYXR1cmUpO1xuICAgICAgdmFyIG9wYWNpdHkgPSB3ZWlnaHQgIT09IHVuZGVmaW5lZCA/IGNsYW1wKHdlaWdodCwgMCwgMSkgOiAxO1xuICAgICAgLy8gY2FzdCB0byA4IGJpdHNcbiAgICAgIHZhciBpbmRleCA9ICgyNTUgKiBvcGFjaXR5KSB8IDA7XG4gICAgICB2YXIgc3R5bGUgPSB0aGlzLnN0eWxlQ2FjaGVfW2luZGV4XTtcbiAgICAgIGlmICghc3R5bGUpIHtcbiAgICAgICAgc3R5bGUgPSBbXG4gICAgICAgICAgbmV3IFN0eWxlKHtcbiAgICAgICAgICAgIGltYWdlOiBuZXcgSWNvbih7XG4gICAgICAgICAgICAgIG9wYWNpdHk6IG9wYWNpdHksXG4gICAgICAgICAgICAgIHNyYzogdGhpcy5jaXJjbGVJbWFnZV9cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcbiAgICAgICAgXTtcbiAgICAgICAgdGhpcy5zdHlsZUNhY2hlX1tpbmRleF0gPSBzdHlsZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdHlsZTtcbiAgICB9LmJpbmQodGhpcykpO1xuXG4gICAgLy8gRm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMsIGRvbid0IHNvcnQgdGhlIGZlYXR1cmVzIGJlZm9yZSByZW5kZXJpbmcuXG4gICAgLy8gVGhlIHJlbmRlciBvcmRlciBpcyBub3QgcmVsZXZhbnQgZm9yIGEgaGVhdG1hcCByZXByZXNlbnRhdGlvbi5cbiAgICB0aGlzLnNldFJlbmRlck9yZGVyKG51bGwpO1xuXG4gICAgbGlzdGVuKHRoaXMsIFJlbmRlckV2ZW50VHlwZS5SRU5ERVIsIHRoaXMuaGFuZGxlUmVuZGVyXywgdGhpcyk7XG4gIH1cblxuICBpZiAoIFZlY3RvckxheWVyICkgSGVhdG1hcC5fX3Byb3RvX18gPSBWZWN0b3JMYXllcjtcbiAgSGVhdG1hcC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBWZWN0b3JMYXllciAmJiBWZWN0b3JMYXllci5wcm90b3R5cGUgKTtcbiAgSGVhdG1hcC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBIZWF0bWFwO1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IERhdGEgVVJMIGZvciBhIGNpcmNsZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIEhlYXRtYXAucHJvdG90eXBlLmNyZWF0ZUNpcmNsZV8gPSBmdW5jdGlvbiBjcmVhdGVDaXJjbGVfICgpIHtcbiAgICB2YXIgcmFkaXVzID0gdGhpcy5nZXRSYWRpdXMoKTtcbiAgICB2YXIgYmx1ciA9IHRoaXMuZ2V0Qmx1cigpO1xuICAgIHZhciBoYWxmU2l6ZSA9IHJhZGl1cyArIGJsdXIgKyAxO1xuICAgIHZhciBzaXplID0gMiAqIGhhbGZTaXplO1xuICAgIHZhciBjb250ZXh0ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKHNpemUsIHNpemUpO1xuICAgIGNvbnRleHQuc2hhZG93T2Zmc2V0WCA9IGNvbnRleHQuc2hhZG93T2Zmc2V0WSA9IHRoaXMuc2hhZG93XztcbiAgICBjb250ZXh0LnNoYWRvd0JsdXIgPSBibHVyO1xuICAgIGNvbnRleHQuc2hhZG93Q29sb3IgPSAnIzAwMCc7XG4gICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICB2YXIgY2VudGVyID0gaGFsZlNpemUgLSB0aGlzLnNoYWRvd187XG4gICAgY29udGV4dC5hcmMoY2VudGVyLCBjZW50ZXIsIHJhZGl1cywgMCwgTWF0aC5QSSAqIDIsIHRydWUpO1xuICAgIGNvbnRleHQuZmlsbCgpO1xuICAgIHJldHVybiBjb250ZXh0LmNhbnZhcy50b0RhdGFVUkwoKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBibHVyIHNpemUgaW4gcGl4ZWxzLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IEJsdXIgc2l6ZSBpbiBwaXhlbHMuXG4gICAqIEBhcGlcbiAgICogQG9ic2VydmFibGVcbiAgICovXG4gIEhlYXRtYXAucHJvdG90eXBlLmdldEJsdXIgPSBmdW5jdGlvbiBnZXRCbHVyICgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChQcm9wZXJ0eS5CTFVSKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgZ3JhZGllbnQgY29sb3JzIGFzIGFycmF5IG9mIHN0cmluZ3MuXG4gICAqIEByZXR1cm4ge0FycmF5PHN0cmluZz59IENvbG9ycy5cbiAgICogQGFwaVxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKi9cbiAgSGVhdG1hcC5wcm90b3R5cGUuZ2V0R3JhZGllbnQgPSBmdW5jdGlvbiBnZXRHcmFkaWVudCAoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7QXJyYXk8c3RyaW5nPn0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LkdSQURJRU5UKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgc2l6ZSBvZiB0aGUgcmFkaXVzIGluIHBpeGVscy5cbiAgICogQHJldHVybiB7bnVtYmVyfSBSYWRpdXMgc2l6ZSBpbiBwaXhlbC5cbiAgICogQGFwaVxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKi9cbiAgSGVhdG1hcC5wcm90b3R5cGUuZ2V0UmFkaXVzID0gZnVuY3Rpb24gZ2V0UmFkaXVzICgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChQcm9wZXJ0eS5SQURJVVMpKTtcbiAgfTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIEhlYXRtYXAucHJvdG90eXBlLmhhbmRsZUdyYWRpZW50Q2hhbmdlZF8gPSBmdW5jdGlvbiBoYW5kbGVHcmFkaWVudENoYW5nZWRfICgpIHtcbiAgICB0aGlzLmdyYWRpZW50XyA9IGNyZWF0ZUdyYWRpZW50KHRoaXMuZ2V0R3JhZGllbnQoKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBIZWF0bWFwLnByb3RvdHlwZS5oYW5kbGVTdHlsZUNoYW5nZWRfID0gZnVuY3Rpb24gaGFuZGxlU3R5bGVDaGFuZ2VkXyAoKSB7XG4gICAgdGhpcy5jaXJjbGVJbWFnZV8gPSB0aGlzLmNyZWF0ZUNpcmNsZV8oKTtcbiAgICB0aGlzLnN0eWxlQ2FjaGVfID0gbmV3IEFycmF5KDI1Nik7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50LmpzXCIpLmRlZmF1bHR9IGV2ZW50IFBvc3QgY29tcG9zZSBldmVudFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgSGVhdG1hcC5wcm90b3R5cGUuaGFuZGxlUmVuZGVyXyA9IGZ1bmN0aW9uIGhhbmRsZVJlbmRlcl8gKGV2ZW50KSB7XG4gICAgdmFyIGNvbnRleHQgPSBldmVudC5jb250ZXh0O1xuICAgIHZhciBjYW52YXMgPSBjb250ZXh0LmNhbnZhcztcbiAgICB2YXIgaW1hZ2UgPSBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgIHZhciB2aWV3OCA9IGltYWdlLmRhdGE7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdmlldzgubGVuZ3RoOyBpIDwgaWk7IGkgKz0gNCkge1xuICAgICAgdmFyIGFscGhhID0gdmlldzhbaSArIDNdICogNDtcbiAgICAgIGlmIChhbHBoYSkge1xuICAgICAgICB2aWV3OFtpXSA9IHRoaXMuZ3JhZGllbnRfW2FscGhhXTtcbiAgICAgICAgdmlldzhbaSArIDFdID0gdGhpcy5ncmFkaWVudF9bYWxwaGEgKyAxXTtcbiAgICAgICAgdmlldzhbaSArIDJdID0gdGhpcy5ncmFkaWVudF9bYWxwaGEgKyAyXTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29udGV4dC5wdXRJbWFnZURhdGEoaW1hZ2UsIDAsIDApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGJsdXIgc2l6ZSBpbiBwaXhlbHMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBibHVyIEJsdXIgc2l6ZSBpbiBwaXhlbHMuXG4gICAqIEBhcGlcbiAgICogQG9ic2VydmFibGVcbiAgICovXG4gIEhlYXRtYXAucHJvdG90eXBlLnNldEJsdXIgPSBmdW5jdGlvbiBzZXRCbHVyIChibHVyKSB7XG4gICAgdGhpcy5zZXQoUHJvcGVydHkuQkxVUiwgYmx1cik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgZ3JhZGllbnQgY29sb3JzIGFzIGFycmF5IG9mIHN0cmluZ3MuXG4gICAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gY29sb3JzIEdyYWRpZW50LlxuICAgKiBAYXBpXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqL1xuICBIZWF0bWFwLnByb3RvdHlwZS5zZXRHcmFkaWVudCA9IGZ1bmN0aW9uIHNldEdyYWRpZW50IChjb2xvcnMpIHtcbiAgICB0aGlzLnNldChQcm9wZXJ0eS5HUkFESUVOVCwgY29sb3JzKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBzaXplIG9mIHRoZSByYWRpdXMgaW4gcGl4ZWxzLlxuICAgKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIFJhZGl1cyBzaXplIGluIHBpeGVsLlxuICAgKiBAYXBpXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqL1xuICBIZWF0bWFwLnByb3RvdHlwZS5zZXRSYWRpdXMgPSBmdW5jdGlvbiBzZXRSYWRpdXMgKHJhZGl1cykge1xuICAgIHRoaXMuc2V0KFByb3BlcnR5LlJBRElVUywgcmFkaXVzKTtcbiAgfTtcblxuICByZXR1cm4gSGVhdG1hcDtcbn0oVmVjdG9yTGF5ZXIpKTtcblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gY29sb3JzIEEgbGlzdCBvZiBjb2xvcmVkLlxuICogQHJldHVybiB7VWludDhDbGFtcGVkQXJyYXl9IEFuIGFycmF5LlxuICovXG5mdW5jdGlvbiBjcmVhdGVHcmFkaWVudChjb2xvcnMpIHtcbiAgdmFyIHdpZHRoID0gMTtcbiAgdmFyIGhlaWdodCA9IDI1NjtcbiAgdmFyIGNvbnRleHQgPSBjcmVhdGVDYW52YXNDb250ZXh0MkQod2lkdGgsIGhlaWdodCk7XG5cbiAgdmFyIGdyYWRpZW50ID0gY29udGV4dC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgdmFyIHN0ZXAgPSAxIC8gKGNvbG9ycy5sZW5ndGggLSAxKTtcbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29sb3JzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoaSAqIHN0ZXAsIGNvbG9yc1tpXSk7XG4gIH1cblxuICBjb250ZXh0LmZpbGxTdHlsZSA9IGdyYWRpZW50O1xuICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuXG4gIHJldHVybiBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCB3aWR0aCwgaGVpZ2h0KS5kYXRhO1xufVxuXG5cbmV4cG9ydCBkZWZhdWx0IEhlYXRtYXA7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUhlYXRtYXAuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL1ZlY3RvclRpbGVcbiAqL1xuaW1wb3J0IExheWVyVHlwZSBmcm9tICcuLi9MYXllclR5cGUuanMnO1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IFRpbGVQcm9wZXJ0eSBmcm9tICcuL1RpbGVQcm9wZXJ0eS5qcyc7XG5pbXBvcnQgVmVjdG9yTGF5ZXIgZnJvbSAnLi9WZWN0b3IuanMnO1xuaW1wb3J0IFZlY3RvclRpbGVSZW5kZXJUeXBlIGZyb20gJy4vVmVjdG9yVGlsZVJlbmRlclR5cGUuanMnO1xuaW1wb3J0IHthc3NpZ259IGZyb20gJy4uL29iai5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSAoMCwgMSkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt2aXNpYmxlPXRydWVdIFZpc2liaWxpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBib3VuZGluZyBleHRlbnQgZm9yIGxheWVyIHJlbmRlcmluZy4gIFRoZSBsYXllciB3aWxsIG5vdCBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGlzIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4XSBUaGUgei1pbmRleCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgQXQgcmVuZGVyaW5nIHRpbWUsIHRoZSBsYXllcnNcbiAqIHdpbGwgYmUgb3JkZXJlZCwgZmlyc3QgYnkgWi1pbmRleCBhbmQgdGhlbiBieSBwb3NpdGlvbi4gV2hlbiBgdW5kZWZpbmVkYCwgYSBgekluZGV4YCBvZiAwIGlzIGFzc3VtZWRcbiAqIGZvciBsYXllcnMgdGhhdCBhcmUgYWRkZWQgdG8gdGhlIG1hcCdzIGBsYXllcnNgIGNvbGxlY3Rpb24sIG9yIGBJbmZpbml0eWAgd2hlbiB0aGUgbGF5ZXIncyBgc2V0TWFwKClgXG4gKiBtZXRob2Qgd2FzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIChleGNsdXNpdmUpIGJlbG93IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcmVuZGVyLmpzXCIpLk9yZGVyRnVuY3Rpb259IFtyZW5kZXJPcmRlcl0gUmVuZGVyIG9yZGVyLiBGdW5jdGlvbiB0byBiZSB1c2VkIHdoZW4gc29ydGluZ1xuICogZmVhdHVyZXMgYmVmb3JlIHJlbmRlcmluZy4gQnkgZGVmYXVsdCBmZWF0dXJlcyBhcmUgZHJhd24gaW4gdGhlIG9yZGVyIHRoYXQgdGhleSBhcmUgY3JlYXRlZC4gVXNlXG4gKiBgbnVsbGAgdG8gYXZvaWQgdGhlIHNvcnQsIGJ1dCBnZXQgYW4gdW5kZWZpbmVkIGRyYXcgb3JkZXIuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JlbmRlckJ1ZmZlcj0xMDBdIFRoZSBidWZmZXIgaW4gcGl4ZWxzIGFyb3VuZCB0aGUgdGlsZSBleHRlbnQgdXNlZCBieSB0aGVcbiAqIHJlbmRlcmVyIHdoZW4gZ2V0dGluZyBmZWF0dXJlcyBmcm9tIHRoZSB2ZWN0b3IgdGlsZSBmb3IgdGhlIHJlbmRlcmluZyBvciBoaXQtZGV0ZWN0aW9uLlxuICogUmVjb21tZW5kZWQgdmFsdWU6IFZlY3RvciB0aWxlcyBhcmUgdXN1YWxseSBnZW5lcmF0ZWQgd2l0aCBhIGJ1ZmZlciwgc28gdGhpcyB2YWx1ZSBzaG91bGQgbWF0Y2hcbiAqIHRoZSBsYXJnZXN0IHBvc3NpYmxlIGJ1ZmZlciBvZiB0aGUgdXNlZCB0aWxlcy4gSXQgc2hvdWxkIGJlIGF0IGxlYXN0IHRoZSBzaXplIG9mIHRoZSBsYXJnZXN0XG4gKiBwb2ludCBzeW1ib2wgb3IgbGluZSB3aWR0aC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9WZWN0b3JUaWxlUmVuZGVyVHlwZS5qc1wiKS5kZWZhdWx0fHN0cmluZ30gW3JlbmRlck1vZGU9J2h5YnJpZCddIFJlbmRlciBtb2RlIGZvciB2ZWN0b3IgdGlsZXM6XG4gKiAgKiBgJ2ltYWdlJ2A6IFZlY3RvciB0aWxlcyBhcmUgcmVuZGVyZWQgYXMgaW1hZ2VzLiBHcmVhdCBwZXJmb3JtYW5jZSwgYnV0IHBvaW50IHN5bWJvbHMgYW5kIHRleHRzXG4gKiAgICBhcmUgYWx3YXlzIHJvdGF0ZWQgd2l0aCB0aGUgdmlldyBhbmQgcGl4ZWxzIGFyZSBzY2FsZWQgZHVyaW5nIHpvb20gYW5pbWF0aW9ucy5cbiAqICAqIGAnaHlicmlkJ2A6IFBvbHlnb24gYW5kIGxpbmUgZWxlbWVudHMgYXJlIHJlbmRlcmVkIGFzIGltYWdlcywgc28gcGl4ZWxzIGFyZSBzY2FsZWQgZHVyaW5nIHpvb21cbiAqICAgIGFuaW1hdGlvbnMuIFBvaW50IHN5bWJvbHMgYW5kIHRleHRzIGFyZSBhY2N1cmF0ZWx5IHJlbmRlcmVkIGFzIHZlY3RvcnMgYW5kIGNhbiBzdGF5IHVwcmlnaHQgb25cbiAqICAgIHJvdGF0ZWQgdmlld3MuXG4gKiAgKiBgJ3ZlY3RvcidgOiBWZWN0b3IgdGlsZXMgYXJlIHJlbmRlcmVkIGFzIHZlY3RvcnMuIE1vc3QgYWNjdXJhdGUgcmVuZGVyaW5nIGV2ZW4gZHVyaW5nXG4gKiAgICBhbmltYXRpb25zLCBidXQgc2xvd2VyIHBlcmZvcm1hbmNlIHRoYW4gdGhlIG90aGVyIG9wdGlvbnMuXG4gKlxuICogV2hlbiBgZGVjbHV0dGVyYCBpcyBzZXQgdG8gYHRydWVgLCBgJ2h5YnJpZCdgIHdpbGwgYmUgdXNlZCBpbnN0ZWFkIG9mIGAnaW1hZ2UnYC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc291cmNlL1ZlY3RvclRpbGUuanNcIikuZGVmYXVsdH0gW3NvdXJjZV0gU291cmNlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gW21hcF0gU2V0cyB0aGUgbGF5ZXIgYXMgb3ZlcmxheSBvbiBhIG1hcC4gVGhlIG1hcCB3aWxsIG5vdCBtYW5hZ2VcbiAqIHRoaXMgbGF5ZXIgaW4gaXRzIGxheWVycyBjb2xsZWN0aW9uLCBhbmQgdGhlIGxheWVyIHdpbGwgYmUgcmVuZGVyZWQgb24gdG9wLiBUaGlzIGlzIHVzZWZ1bCBmb3JcbiAqIHRlbXBvcmFyeSBsYXllcnMuIFRoZSBzdGFuZGFyZCB3YXkgdG8gYWRkIGEgbGF5ZXIgdG8gYSBtYXAgYW5kIGhhdmUgaXQgbWFuYWdlZCBieSB0aGUgbWFwIGlzIHRvXG4gKiB1c2Uge0BsaW5rIG1vZHVsZTpvbC9NYXAjYWRkTGF5ZXJ9LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbZGVjbHV0dGVyPWZhbHNlXSBEZWNsdXR0ZXIgaW1hZ2VzIGFuZCB0ZXh0LiBEZWNsdXR0ZXJpbmcgaXMgYXBwbGllZCB0byBhbGxcbiAqIGltYWdlIGFuZCB0ZXh0IHN0eWxlcywgYW5kIHRoZSBwcmlvcml0eSBpcyBkZWZpbmVkIGJ5IHRoZSB6LWluZGV4IG9mIHRoZSBzdHlsZS4gTG93ZXIgei1pbmRleFxuICogbWVhbnMgaGlnaGVyIHByaW9yaXR5LiBXaGVuIHNldCB0byBgdHJ1ZWAsIGEgYHJlbmRlck1vZGVgIG9mIGAnaW1hZ2UnYCB3aWxsIGJlIG92ZXJyaWRkZW4gd2l0aFxuICogYCdoeWJyaWQnYC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVMaWtlfSBbc3R5bGVdIExheWVyIHN0eWxlLiBTZWVcbiAqIHtAbGluayBtb2R1bGU6b2wvc3R5bGV9IGZvciBkZWZhdWx0IHN0eWxlIHdoaWNoIHdpbGwgYmUgdXNlZCBpZiB0aGlzIGlzIG5vdCBkZWZpbmVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdXBkYXRlV2hpbGVBbmltYXRpbmc9ZmFsc2VdIFdoZW4gc2V0IHRvIGB0cnVlYCwgZmVhdHVyZSBiYXRjaGVzIHdpbGwgYmVcbiAqIHJlY3JlYXRlZCBkdXJpbmcgYW5pbWF0aW9ucy4gVGhpcyBtZWFucyB0aGF0IG5vIHZlY3RvcnMgd2lsbCBiZSBzaG93biBjbGlwcGVkLCBidXQgdGhlIHNldHRpbmdcbiAqIHdpbGwgaGF2ZSBhIHBlcmZvcm1hbmNlIGltcGFjdCBmb3IgbGFyZ2UgYW1vdW50cyBvZiB2ZWN0b3IgZGF0YS4gV2hlbiBzZXQgdG8gYGZhbHNlYCwgYmF0Y2hlc1xuICogd2lsbCBiZSByZWNyZWF0ZWQgd2hlbiBubyBhbmltYXRpb24gaXMgYWN0aXZlLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdXBkYXRlV2hpbGVJbnRlcmFjdGluZz1mYWxzZV0gV2hlbiBzZXQgdG8gYHRydWVgLCBmZWF0dXJlIGJhdGNoZXMgd2lsbCBiZVxuICogcmVjcmVhdGVkIGR1cmluZyBpbnRlcmFjdGlvbnMuIFNlZSBhbHNvIGB1cGRhdGVXaGlsZUFuaW1hdGluZ2AuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3ByZWxvYWQ9MF0gUHJlbG9hZC4gTG9hZCBsb3ctcmVzb2x1dGlvbiB0aWxlcyB1cCB0byBgcHJlbG9hZGAgbGV2ZWxzLiBgMGBcbiAqIG1lYW5zIG5vIHByZWxvYWRpbmcuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3JlbmRlci5qc1wiKS5PcmRlckZ1bmN0aW9ufSBbcmVuZGVyT3JkZXJdIFJlbmRlciBvcmRlci4gRnVuY3Rpb24gdG8gYmUgdXNlZCB3aGVuIHNvcnRpbmdcbiAqIGZlYXR1cmVzIGJlZm9yZSByZW5kZXJpbmcuIEJ5IGRlZmF1bHQgZmVhdHVyZXMgYXJlIGRyYXduIGluIHRoZSBvcmRlciB0aGF0IHRoZXkgYXJlIGNyZWF0ZWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLlN0eWxlTGlrZX0gW3N0eWxlXSBMYXllciBzdHlsZS4gU2VlXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3N0eWxlfSBmb3IgZGVmYXVsdCBzdHlsZSB3aGljaCB3aWxsIGJlIHVzZWQgaWYgdGhpcyBpcyBub3QgZGVmaW5lZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3VzZUludGVyaW1UaWxlc09uRXJyb3I9dHJ1ZV0gVXNlIGludGVyaW0gdGlsZXMgb24gZXJyb3IuXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIExheWVyIGZvciB2ZWN0b3IgdGlsZSBkYXRhIHRoYXQgaXMgcmVuZGVyZWQgY2xpZW50LXNpZGUuXG4gKiBOb3RlIHRoYXQgYW55IHByb3BlcnR5IHNldCBpbiB0aGUgb3B0aW9ucyBpcyBzZXQgYXMgYSB7QGxpbmsgbW9kdWxlOm9sL09iamVjdH5CYXNlT2JqZWN0fVxuICogcHJvcGVydHkgb24gdGhlIGxheWVyIG9iamVjdDsgZm9yIGV4YW1wbGUsIHNldHRpbmcgYHRpdGxlOiAnTXkgVGl0bGUnYCBpbiB0aGVcbiAqIG9wdGlvbnMgbWVhbnMgdGhhdCBgdGl0bGVgIGlzIG9ic2VydmFibGUsIGFuZCBoYXMgZ2V0L3NldCBhY2Nlc3NvcnMuXG4gKlxuICogQHBhcmFtIHtPcHRpb25zPX0gb3B0X29wdGlvbnMgT3B0aW9ucy5cbiAqIEBhcGlcbiAqL1xudmFyIFZlY3RvclRpbGVMYXllciA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFZlY3RvckxheWVyKSB7XG4gIGZ1bmN0aW9uIFZlY3RvclRpbGVMYXllcihvcHRfb3B0aW9ucykge1xuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuXG4gICAgdmFyIHJlbmRlck1vZGUgPSBvcHRpb25zLnJlbmRlck1vZGUgfHwgVmVjdG9yVGlsZVJlbmRlclR5cGUuSFlCUklEO1xuICAgIGFzc2VydChyZW5kZXJNb2RlID09IHVuZGVmaW5lZCB8fFxuICAgICAgIHJlbmRlck1vZGUgPT0gVmVjdG9yVGlsZVJlbmRlclR5cGUuSU1BR0UgfHxcbiAgICAgICByZW5kZXJNb2RlID09IFZlY3RvclRpbGVSZW5kZXJUeXBlLkhZQlJJRCB8fFxuICAgICAgIHJlbmRlck1vZGUgPT0gVmVjdG9yVGlsZVJlbmRlclR5cGUuVkVDVE9SLFxuICAgIDI4KTsgLy8gYHJlbmRlck1vZGVgIG11c3QgYmUgYCdpbWFnZSdgLCBgJ2h5YnJpZCdgIG9yIGAndmVjdG9yJ2BcbiAgICBpZiAob3B0aW9ucy5kZWNsdXR0ZXIgJiYgcmVuZGVyTW9kZSA9PSBWZWN0b3JUaWxlUmVuZGVyVHlwZS5JTUFHRSkge1xuICAgICAgcmVuZGVyTW9kZSA9IFZlY3RvclRpbGVSZW5kZXJUeXBlLkhZQlJJRDtcbiAgICB9XG4gICAgb3B0aW9ucy5yZW5kZXJNb2RlID0gcmVuZGVyTW9kZTtcblxuICAgIHZhciBiYXNlT3B0aW9ucyA9IC8qKiBAdHlwZSB7T2JqZWN0fSAqLyAoYXNzaWduKHt9LCBvcHRpb25zKSk7XG4gICAgZGVsZXRlIGJhc2VPcHRpb25zLnByZWxvYWQ7XG4gICAgZGVsZXRlIGJhc2VPcHRpb25zLnVzZUludGVyaW1UaWxlc09uRXJyb3I7XG5cbiAgICBWZWN0b3JMYXllci5jYWxsKC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9WZWN0b3IuanNcIikuT3B0aW9uc30gKi8gdGhpcywgKGJhc2VPcHRpb25zKSk7XG5cbiAgICB0aGlzLnNldFByZWxvYWQob3B0aW9ucy5wcmVsb2FkID8gb3B0aW9ucy5wcmVsb2FkIDogMCk7XG4gICAgdGhpcy5zZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yKG9wdGlvbnMudXNlSW50ZXJpbVRpbGVzT25FcnJvciAhPT0gdW5kZWZpbmVkID9cbiAgICAgIG9wdGlvbnMudXNlSW50ZXJpbVRpbGVzT25FcnJvciA6IHRydWUpO1xuXG4gICAgLyoqXG4gICAgKiBUaGUgbGF5ZXIgdHlwZS5cbiAgICAqIEBwcm90ZWN0ZWRcbiAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9MYXllclR5cGUuanNcIikuZGVmYXVsdH1cbiAgICAqL1xuICAgIHRoaXMudHlwZSA9IExheWVyVHlwZS5WRUNUT1JfVElMRTtcblxuICB9XG5cbiAgaWYgKCBWZWN0b3JMYXllciApIFZlY3RvclRpbGVMYXllci5fX3Byb3RvX18gPSBWZWN0b3JMYXllcjtcbiAgVmVjdG9yVGlsZUxheWVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFZlY3RvckxheWVyICYmIFZlY3RvckxheWVyLnByb3RvdHlwZSApO1xuICBWZWN0b3JUaWxlTGF5ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVmVjdG9yVGlsZUxheWVyO1xuXG4gIC8qKlxuICAqIFJldHVybiB0aGUgbGV2ZWwgYXMgbnVtYmVyIHRvIHdoaWNoIHdlIHdpbGwgcHJlbG9hZCB0aWxlcyB1cCB0by5cbiAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBsZXZlbCB0byBwcmVsb2FkIHRpbGVzIHVwIHRvLlxuICAqIEBvYnNlcnZhYmxlXG4gICogQGFwaVxuICAqL1xuICBWZWN0b3JUaWxlTGF5ZXIucHJvdG90eXBlLmdldFByZWxvYWQgPSBmdW5jdGlvbiBnZXRQcmVsb2FkICgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChUaWxlUHJvcGVydHkuUFJFTE9BRCkpO1xuICB9O1xuXG4gIC8qKlxuICAqIFdoZXRoZXIgd2UgdXNlIGludGVyaW0gdGlsZXMgb24gZXJyb3IuXG4gICogQHJldHVybiB7Ym9vbGVhbn0gVXNlIGludGVyaW0gdGlsZXMgb24gZXJyb3IuXG4gICogQG9ic2VydmFibGVcbiAgKiBAYXBpXG4gICovXG4gIFZlY3RvclRpbGVMYXllci5wcm90b3R5cGUuZ2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvciA9IGZ1bmN0aW9uIGdldFVzZUludGVyaW1UaWxlc09uRXJyb3IgKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge2Jvb2xlYW59ICovICh0aGlzLmdldChUaWxlUHJvcGVydHkuVVNFX0lOVEVSSU1fVElMRVNfT05fRVJST1IpKTtcbiAgfTtcblxuICAvKipcbiAgKiBTZXQgdGhlIGxldmVsIGFzIG51bWJlciB0byB3aGljaCB3ZSB3aWxsIHByZWxvYWQgdGlsZXMgdXAgdG8uXG4gICogQHBhcmFtIHtudW1iZXJ9IHByZWxvYWQgVGhlIGxldmVsIHRvIHByZWxvYWQgdGlsZXMgdXAgdG8uXG4gICogQG9ic2VydmFibGVcbiAgKiBAYXBpXG4gICovXG4gIFZlY3RvclRpbGVMYXllci5wcm90b3R5cGUuc2V0UHJlbG9hZCA9IGZ1bmN0aW9uIHNldFByZWxvYWQgKHByZWxvYWQpIHtcbiAgICB0aGlzLnNldChUaWxlUHJvcGVydHkuUFJFTE9BRCwgcHJlbG9hZCk7XG4gIH07XG5cbiAgLyoqXG4gICogU2V0IHdoZXRoZXIgd2UgdXNlIGludGVyaW0gdGlsZXMgb24gZXJyb3IuXG4gICogQHBhcmFtIHtib29sZWFufSB1c2VJbnRlcmltVGlsZXNPbkVycm9yIFVzZSBpbnRlcmltIHRpbGVzIG9uIGVycm9yLlxuICAqIEBvYnNlcnZhYmxlXG4gICogQGFwaVxuICAqL1xuICBWZWN0b3JUaWxlTGF5ZXIucHJvdG90eXBlLnNldFVzZUludGVyaW1UaWxlc09uRXJyb3IgPSBmdW5jdGlvbiBzZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yICh1c2VJbnRlcmltVGlsZXNPbkVycm9yKSB7XG4gICAgdGhpcy5zZXQoVGlsZVByb3BlcnR5LlVTRV9JTlRFUklNX1RJTEVTX09OX0VSUk9SLCB1c2VJbnRlcmltVGlsZXNPbkVycm9yKTtcbiAgfTtcblxuICByZXR1cm4gVmVjdG9yVGlsZUxheWVyO1xufShWZWN0b3JMYXllcikpO1xuXG5cbi8qKlxuICogUmV0dXJuIHRoZSBhc3NvY2lhdGVkIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1ZlY3RvclRpbGUgdmVjdG9ydGlsZXNvdXJjZX0gb2YgdGhlIGxheWVyLlxuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zb3VyY2UvVmVjdG9yVGlsZS5qc1wiKS5kZWZhdWx0fSBTb3VyY2UuXG4gKiBAYXBpXG4gKi9cblZlY3RvclRpbGVMYXllci5wcm90b3R5cGUuZ2V0U291cmNlO1xuZXhwb3J0IGRlZmF1bHQgVmVjdG9yVGlsZUxheWVyO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1WZWN0b3JUaWxlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9WZWN0b3JcbiAqL1xuaW1wb3J0IExheWVyVHlwZSBmcm9tICcuLi9MYXllclR5cGUuanMnO1xuaW1wb3J0IExheWVyIGZyb20gJy4vTGF5ZXIuanMnO1xuaW1wb3J0IFZlY3RvclJlbmRlclR5cGUgZnJvbSAnLi9WZWN0b3JSZW5kZXJUeXBlLmpzJztcbmltcG9ydCB7YXNzaWdufSBmcm9tICcuLi9vYmouanMnO1xuaW1wb3J0IHtjcmVhdGVEZWZhdWx0U3R5bGUsIHRvRnVuY3Rpb24gYXMgdG9TdHlsZUZ1bmN0aW9ufSBmcm9tICcuLi9zdHlsZS9TdHlsZS5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSAoMCwgMSkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt2aXNpYmxlPXRydWVdIFZpc2liaWxpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBib3VuZGluZyBleHRlbnQgZm9yIGxheWVyIHJlbmRlcmluZy4gIFRoZSBsYXllciB3aWxsIG5vdCBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGlzIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4XSBUaGUgei1pbmRleCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgQXQgcmVuZGVyaW5nIHRpbWUsIHRoZSBsYXllcnNcbiAqIHdpbGwgYmUgb3JkZXJlZCwgZmlyc3QgYnkgWi1pbmRleCBhbmQgdGhlbiBieSBwb3NpdGlvbi4gV2hlbiBgdW5kZWZpbmVkYCwgYSBgekluZGV4YCBvZiAwIGlzIGFzc3VtZWRcbiAqIGZvciBsYXllcnMgdGhhdCBhcmUgYWRkZWQgdG8gdGhlIG1hcCdzIGBsYXllcnNgIGNvbGxlY3Rpb24sIG9yIGBJbmZpbml0eWAgd2hlbiB0aGUgbGF5ZXIncyBgc2V0TWFwKClgXG4gKiBtZXRob2Qgd2FzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIChleGNsdXNpdmUpIGJlbG93IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcmVuZGVyLmpzXCIpLk9yZGVyRnVuY3Rpb259IFtyZW5kZXJPcmRlcl0gUmVuZGVyIG9yZGVyLiBGdW5jdGlvbiB0byBiZSB1c2VkIHdoZW4gc29ydGluZ1xuICogZmVhdHVyZXMgYmVmb3JlIHJlbmRlcmluZy4gQnkgZGVmYXVsdCBmZWF0dXJlcyBhcmUgZHJhd24gaW4gdGhlIG9yZGVyIHRoYXQgdGhleSBhcmUgY3JlYXRlZC4gVXNlXG4gKiBgbnVsbGAgdG8gYXZvaWQgdGhlIHNvcnQsIGJ1dCBnZXQgYW4gdW5kZWZpbmVkIGRyYXcgb3JkZXIuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JlbmRlckJ1ZmZlcj0xMDBdIFRoZSBidWZmZXIgaW4gcGl4ZWxzIGFyb3VuZCB0aGUgdmlld3BvcnQgZXh0ZW50IHVzZWQgYnkgdGhlXG4gKiByZW5kZXJlciB3aGVuIGdldHRpbmcgZmVhdHVyZXMgZnJvbSB0aGUgdmVjdG9yIHNvdXJjZSBmb3IgdGhlIHJlbmRlcmluZyBvciBoaXQtZGV0ZWN0aW9uLlxuICogUmVjb21tZW5kZWQgdmFsdWU6IHRoZSBzaXplIG9mIHRoZSBsYXJnZXN0IHN5bWJvbCwgbGluZSB3aWR0aCBvciBsYWJlbC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9WZWN0b3JSZW5kZXJUeXBlLmpzXCIpLmRlZmF1bHR8c3RyaW5nfSBbcmVuZGVyTW9kZT0ndmVjdG9yJ10gUmVuZGVyIG1vZGUgZm9yIHZlY3RvciBsYXllcnM6XG4gKiAgKiBgJ2ltYWdlJ2A6IFZlY3RvciBsYXllcnMgYXJlIHJlbmRlcmVkIGFzIGltYWdlcy4gR3JlYXQgcGVyZm9ybWFuY2UsIGJ1dCBwb2ludCBzeW1ib2xzIGFuZFxuICogICAgdGV4dHMgYXJlIGFsd2F5cyByb3RhdGVkIHdpdGggdGhlIHZpZXcgYW5kIHBpeGVscyBhcmUgc2NhbGVkIGR1cmluZyB6b29tIGFuaW1hdGlvbnMuXG4gKiAgKiBgJ3ZlY3RvcidgOiBWZWN0b3IgbGF5ZXJzIGFyZSByZW5kZXJlZCBhcyB2ZWN0b3JzLiBNb3N0IGFjY3VyYXRlIHJlbmRlcmluZyBldmVuIGR1cmluZ1xuICogICAgYW5pbWF0aW9ucywgYnV0IHNsb3dlciBwZXJmb3JtYW5jZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc291cmNlL1ZlY3Rvci5qc1wiKS5kZWZhdWx0fSBbc291cmNlXSBTb3VyY2UuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBbbWFwXSBTZXRzIHRoZSBsYXllciBhcyBvdmVybGF5IG9uIGEgbWFwLiBUaGUgbWFwIHdpbGwgbm90IG1hbmFnZVxuICogdGhpcyBsYXllciBpbiBpdHMgbGF5ZXJzIGNvbGxlY3Rpb24sIGFuZCB0aGUgbGF5ZXIgd2lsbCBiZSByZW5kZXJlZCBvbiB0b3AuIFRoaXMgaXMgdXNlZnVsIGZvclxuICogdGVtcG9yYXJ5IGxheWVycy4gVGhlIHN0YW5kYXJkIHdheSB0byBhZGQgYSBsYXllciB0byBhIG1hcCBhbmQgaGF2ZSBpdCBtYW5hZ2VkIGJ5IHRoZSBtYXAgaXMgdG9cbiAqIHVzZSB7QGxpbmsgbW9kdWxlOm9sL01hcCNhZGRMYXllcn0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtkZWNsdXR0ZXI9ZmFsc2VdIERlY2x1dHRlciBpbWFnZXMgYW5kIHRleHQuIERlY2x1dHRlcmluZyBpcyBhcHBsaWVkIHRvIGFsbFxuICogaW1hZ2UgYW5kIHRleHQgc3R5bGVzLCBhbmQgdGhlIHByaW9yaXR5IGlzIGRlZmluZWQgYnkgdGhlIHotaW5kZXggb2YgdGhlIHN0eWxlLiBMb3dlciB6LWluZGV4XG4gKiBtZWFucyBoaWdoZXIgcHJpb3JpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLlN0eWxlTGlrZX0gW3N0eWxlXSBMYXllciBzdHlsZS4gU2VlXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3N0eWxlfSBmb3IgZGVmYXVsdCBzdHlsZSB3aGljaCB3aWxsIGJlIHVzZWQgaWYgdGhpcyBpcyBub3QgZGVmaW5lZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3VwZGF0ZVdoaWxlQW5pbWF0aW5nPWZhbHNlXSBXaGVuIHNldCB0byBgdHJ1ZWAgYW5kIGByZW5kZXJNb2RlYFxuICogaXMgYHZlY3RvcmAsIGZlYXR1cmUgYmF0Y2hlcyB3aWxsIGJlIHJlY3JlYXRlZCBkdXJpbmcgYW5pbWF0aW9ucy4gVGhpcyBtZWFucyB0aGF0IG5vXG4gKiB2ZWN0b3JzIHdpbGwgYmUgc2hvd24gY2xpcHBlZCwgYnV0IHRoZSBzZXR0aW5nIHdpbGwgaGF2ZSBhIHBlcmZvcm1hbmNlIGltcGFjdCBmb3IgbGFyZ2VcbiAqIGFtb3VudHMgb2YgdmVjdG9yIGRhdGEuIFdoZW4gc2V0IHRvIGBmYWxzZWAsIGJhdGNoZXMgd2lsbCBiZSByZWNyZWF0ZWQgd2hlbiBubyBhbmltYXRpb25cbiAqIGlzIGFjdGl2ZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3VwZGF0ZVdoaWxlSW50ZXJhY3Rpbmc9ZmFsc2VdIFdoZW4gc2V0IHRvIGB0cnVlYCBhbmQgYHJlbmRlck1vZGVgXG4gKiBpcyBgdmVjdG9yYCwgZmVhdHVyZSBiYXRjaGVzIHdpbGwgYmUgcmVjcmVhdGVkIGR1cmluZyBpbnRlcmFjdGlvbnMuIFNlZSBhbHNvXG4gKiBgdXBkYXRlV2hpbGVBbmltYXRpbmdgLlxuICovXG5cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xudmFyIFByb3BlcnR5ID0ge1xuICBSRU5ERVJfT1JERVI6ICdyZW5kZXJPcmRlcidcbn07XG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBWZWN0b3IgZGF0YSB0aGF0IGlzIHJlbmRlcmVkIGNsaWVudC1zaWRlLlxuICogTm90ZSB0aGF0IGFueSBwcm9wZXJ0eSBzZXQgaW4gdGhlIG9wdGlvbnMgaXMgc2V0IGFzIGEge0BsaW5rIG1vZHVsZTpvbC9PYmplY3R+QmFzZU9iamVjdH1cbiAqIHByb3BlcnR5IG9uIHRoZSBsYXllciBvYmplY3Q7IGZvciBleGFtcGxlLCBzZXR0aW5nIGB0aXRsZTogJ015IFRpdGxlJ2AgaW4gdGhlXG4gKiBvcHRpb25zIG1lYW5zIHRoYXQgYHRpdGxlYCBpcyBvYnNlcnZhYmxlLCBhbmQgaGFzIGdldC9zZXQgYWNjZXNzb3JzLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIFZlY3RvckxheWVyID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoTGF5ZXIpIHtcbiAgZnVuY3Rpb24gVmVjdG9yTGF5ZXIob3B0X29wdGlvbnMpIHtcbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID9cbiAgICAgIG9wdF9vcHRpb25zIDogLyoqIEB0eXBlIHtPcHRpb25zfSAqLyAoe30pO1xuXG4gICAgdmFyIGJhc2VPcHRpb25zID0gYXNzaWduKHt9LCBvcHRpb25zKTtcblxuICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy5zdHlsZTtcbiAgICBkZWxldGUgYmFzZU9wdGlvbnMucmVuZGVyQnVmZmVyO1xuICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy51cGRhdGVXaGlsZUFuaW1hdGluZztcbiAgICBkZWxldGUgYmFzZU9wdGlvbnMudXBkYXRlV2hpbGVJbnRlcmFjdGluZztcbiAgICBMYXllci5jYWxsKHRoaXMsIGJhc2VPcHRpb25zKTtcblxuICAgIC8qKlxuICAgICogQHByaXZhdGVcbiAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICovXG4gICAgdGhpcy5kZWNsdXR0ZXJfID0gb3B0aW9ucy5kZWNsdXR0ZXIgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZGVjbHV0dGVyIDogZmFsc2U7XG5cbiAgICAvKipcbiAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgKiBAcHJpdmF0ZVxuICAgICovXG4gICAgdGhpcy5yZW5kZXJCdWZmZXJfID0gb3B0aW9ucy5yZW5kZXJCdWZmZXIgIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRpb25zLnJlbmRlckJ1ZmZlciA6IDEwMDtcblxuICAgIC8qKlxuICAgICogVXNlciBwcm92aWRlZCBzdHlsZS5cbiAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZUxpa2V9XG4gICAgKiBAcHJpdmF0ZVxuICAgICovXG4gICAgdGhpcy5zdHlsZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgKiBTdHlsZSBmdW5jdGlvbiBmb3IgdXNlIHdpdGhpbiB0aGUgbGlicmFyeS5cbiAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZUZ1bmN0aW9ufHVuZGVmaW5lZH1cbiAgICAqIEBwcml2YXRlXG4gICAgKi9cbiAgICB0aGlzLnN0eWxlRnVuY3Rpb25fID0gdW5kZWZpbmVkO1xuXG4gICAgdGhpcy5zZXRTdHlsZShvcHRpb25zLnN0eWxlKTtcblxuICAgIC8qKlxuICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgKiBAcHJpdmF0ZVxuICAgICovXG4gICAgdGhpcy51cGRhdGVXaGlsZUFuaW1hdGluZ18gPSBvcHRpb25zLnVwZGF0ZVdoaWxlQW5pbWF0aW5nICE9PSB1bmRlZmluZWQgP1xuICAgICAgb3B0aW9ucy51cGRhdGVXaGlsZUFuaW1hdGluZyA6IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAqIEBwcml2YXRlXG4gICAgKi9cbiAgICB0aGlzLnVwZGF0ZVdoaWxlSW50ZXJhY3RpbmdfID0gb3B0aW9ucy51cGRhdGVXaGlsZUludGVyYWN0aW5nICE9PSB1bmRlZmluZWQgP1xuICAgICAgb3B0aW9ucy51cGRhdGVXaGlsZUludGVyYWN0aW5nIDogZmFsc2U7XG5cbiAgICAvKipcbiAgICAqIEBwcml2YXRlXG4gICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9WZWN0b3JUaWxlUmVuZGVyVHlwZS5qc1wiKS5kZWZhdWx0fHN0cmluZ31cbiAgICAqL1xuICAgIHRoaXMucmVuZGVyTW9kZV8gPSBvcHRpb25zLnJlbmRlck1vZGUgfHwgVmVjdG9yUmVuZGVyVHlwZS5WRUNUT1I7XG5cbiAgICAvKipcbiAgICAqIFRoZSBsYXllciB0eXBlLlxuICAgICogQHByb3RlY3RlZFxuICAgICogQHR5cGUge2ltcG9ydChcIi4uL0xheWVyVHlwZS5qc1wiKS5kZWZhdWx0fVxuICAgICovXG4gICAgdGhpcy50eXBlID0gTGF5ZXJUeXBlLlZFQ1RPUjtcblxuICB9XG5cbiAgaWYgKCBMYXllciApIFZlY3RvckxheWVyLl9fcHJvdG9fXyA9IExheWVyO1xuICBWZWN0b3JMYXllci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBMYXllciAmJiBMYXllci5wcm90b3R5cGUgKTtcbiAgVmVjdG9yTGF5ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVmVjdG9yTGF5ZXI7XG5cbiAgLyoqXG4gICogQHJldHVybiB7Ym9vbGVhbn0gRGVjbHV0dGVyLlxuICAqL1xuICBWZWN0b3JMYXllci5wcm90b3R5cGUuZ2V0RGVjbHV0dGVyID0gZnVuY3Rpb24gZ2V0RGVjbHV0dGVyICgpIHtcbiAgICByZXR1cm4gdGhpcy5kZWNsdXR0ZXJfO1xuICB9O1xuXG4gIC8qKlxuICAqIEBwYXJhbSB7Ym9vbGVhbn0gZGVjbHV0dGVyIERlY2x1dHRlci5cbiAgKi9cbiAgVmVjdG9yTGF5ZXIucHJvdG90eXBlLnNldERlY2x1dHRlciA9IGZ1bmN0aW9uIHNldERlY2x1dHRlciAoZGVjbHV0dGVyKSB7XG4gICAgdGhpcy5kZWNsdXR0ZXJfID0gZGVjbHV0dGVyO1xuICB9O1xuXG4gIC8qKlxuICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFJlbmRlciBidWZmZXIuXG4gICovXG4gIFZlY3RvckxheWVyLnByb3RvdHlwZS5nZXRSZW5kZXJCdWZmZXIgPSBmdW5jdGlvbiBnZXRSZW5kZXJCdWZmZXIgKCkge1xuICAgIHJldHVybiB0aGlzLnJlbmRlckJ1ZmZlcl87XG4gIH07XG5cbiAgLyoqXG4gICogQHJldHVybiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0LCBpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQpOiBudW1iZXJ8bnVsbHx1bmRlZmluZWR9IFJlbmRlclxuICAqICAgICBvcmRlci5cbiAgKi9cbiAgVmVjdG9yTGF5ZXIucHJvdG90eXBlLmdldFJlbmRlck9yZGVyID0gZnVuY3Rpb24gZ2V0UmVuZGVyT3JkZXIgKCkge1xuICAgIHJldHVybiAoXG4gICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9yZW5kZXIuanNcIikuT3JkZXJGdW5jdGlvbnxudWxsfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LlJFTkRFUl9PUkRFUikpXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgKiBHZXQgdGhlIHN0eWxlIGZvciBmZWF0dXJlcy4gIFRoaXMgcmV0dXJucyB3aGF0ZXZlciB3YXMgcGFzc2VkIHRvIHRoZSBgc3R5bGVgXG4gICogb3B0aW9uIGF0IGNvbnN0cnVjdGlvbiBvciB0byB0aGUgYHNldFN0eWxlYCBtZXRob2QuXG4gICogQHJldHVybiB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVMaWtlfVxuICAqICAgICBMYXllciBzdHlsZS5cbiAgKiBAYXBpXG4gICovXG4gIFZlY3RvckxheWVyLnByb3RvdHlwZS5nZXRTdHlsZSA9IGZ1bmN0aW9uIGdldFN0eWxlICgpIHtcbiAgICByZXR1cm4gdGhpcy5zdHlsZV87XG4gIH07XG5cbiAgLyoqXG4gICogR2V0IHRoZSBzdHlsZSBmdW5jdGlvbi5cbiAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZUZ1bmN0aW9ufHVuZGVmaW5lZH0gTGF5ZXIgc3R5bGUgZnVuY3Rpb24uXG4gICogQGFwaVxuICAqL1xuICBWZWN0b3JMYXllci5wcm90b3R5cGUuZ2V0U3R5bGVGdW5jdGlvbiA9IGZ1bmN0aW9uIGdldFN0eWxlRnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnN0eWxlRnVuY3Rpb25fO1xuICB9O1xuXG4gIC8qKlxuICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHJlbmRlcmVkIGxheWVyIHNob3VsZCBiZSB1cGRhdGVkIHdoaWxlXG4gICogICAgIGFuaW1hdGluZy5cbiAgKi9cbiAgVmVjdG9yTGF5ZXIucHJvdG90eXBlLmdldFVwZGF0ZVdoaWxlQW5pbWF0aW5nID0gZnVuY3Rpb24gZ2V0VXBkYXRlV2hpbGVBbmltYXRpbmcgKCkge1xuICAgIHJldHVybiB0aGlzLnVwZGF0ZVdoaWxlQW5pbWF0aW5nXztcbiAgfTtcblxuICAvKipcbiAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSByZW5kZXJlZCBsYXllciBzaG91bGQgYmUgdXBkYXRlZCB3aGlsZVxuICAqICAgICBpbnRlcmFjdGluZy5cbiAgKi9cbiAgVmVjdG9yTGF5ZXIucHJvdG90eXBlLmdldFVwZGF0ZVdoaWxlSW50ZXJhY3RpbmcgPSBmdW5jdGlvbiBnZXRVcGRhdGVXaGlsZUludGVyYWN0aW5nICgpIHtcbiAgICByZXR1cm4gdGhpcy51cGRhdGVXaGlsZUludGVyYWN0aW5nXztcbiAgfTtcblxuICAvKipcbiAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci5qc1wiKS5PcmRlckZ1bmN0aW9ufG51bGx8dW5kZWZpbmVkfSByZW5kZXJPcmRlclxuICAqICAgICBSZW5kZXIgb3JkZXIuXG4gICovXG4gIFZlY3RvckxheWVyLnByb3RvdHlwZS5zZXRSZW5kZXJPcmRlciA9IGZ1bmN0aW9uIHNldFJlbmRlck9yZGVyIChyZW5kZXJPcmRlcikge1xuICAgIHRoaXMuc2V0KFByb3BlcnR5LlJFTkRFUl9PUkRFUiwgcmVuZGVyT3JkZXIpO1xuICB9O1xuXG4gIC8qKlxuICAqIFNldCB0aGUgc3R5bGUgZm9yIGZlYXR1cmVzLiAgVGhpcyBjYW4gYmUgYSBzaW5nbGUgc3R5bGUgb2JqZWN0LCBhbiBhcnJheVxuICAqIG9mIHN0eWxlcywgb3IgYSBmdW5jdGlvbiB0aGF0IHRha2VzIGEgZmVhdHVyZSBhbmQgcmVzb2x1dGlvbiBhbmQgcmV0dXJuc1xuICAqIGFuIGFycmF5IG9mIHN0eWxlcy4gSWYgaXQgaXMgYHVuZGVmaW5lZGAgdGhlIGRlZmF1bHQgc3R5bGUgaXMgdXNlZC4gSWZcbiAgKiBpdCBpcyBgbnVsbGAgdGhlIGxheWVyIGhhcyBubyBzdHlsZSAoYSBgbnVsbGAgc3R5bGUpLCBzbyBvbmx5IGZlYXR1cmVzXG4gICogdGhhdCBoYXZlIHRoZWlyIG93biBzdHlsZXMgd2lsbCBiZSByZW5kZXJlZCBpbiB0aGUgbGF5ZXIuIFNlZVxuICAqIHtAbGluayBtb2R1bGU6b2wvc3R5bGV9IGZvciBpbmZvcm1hdGlvbiBvbiB0aGUgZGVmYXVsdCBzdHlsZS5cbiAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR8QXJyYXk8aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdD58aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVGdW5jdGlvbnxudWxsfHVuZGVmaW5lZH0gc3R5bGUgTGF5ZXIgc3R5bGUuXG4gICogQGFwaVxuICAqL1xuICBWZWN0b3JMYXllci5wcm90b3R5cGUuc2V0U3R5bGUgPSBmdW5jdGlvbiBzZXRTdHlsZSAoc3R5bGUpIHtcbiAgICB0aGlzLnN0eWxlXyA9IHN0eWxlICE9PSB1bmRlZmluZWQgPyBzdHlsZSA6IGNyZWF0ZURlZmF1bHRTdHlsZTtcbiAgICB0aGlzLnN0eWxlRnVuY3Rpb25fID0gc3R5bGUgPT09IG51bGwgP1xuICAgICAgdW5kZWZpbmVkIDogdG9TdHlsZUZ1bmN0aW9uKHRoaXMuc3R5bGVfKTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICAvKipcbiAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1ZlY3RvclJlbmRlclR5cGUuanNcIikuZGVmYXVsdHxzdHJpbmd9IFRoZSByZW5kZXIgbW9kZS5cbiAgKi9cbiAgVmVjdG9yTGF5ZXIucHJvdG90eXBlLmdldFJlbmRlck1vZGUgPSBmdW5jdGlvbiBnZXRSZW5kZXJNb2RlICgpIHtcbiAgICByZXR1cm4gdGhpcy5yZW5kZXJNb2RlXztcbiAgfTtcblxuICByZXR1cm4gVmVjdG9yTGF5ZXI7XG59KExheWVyKSk7XG5cblxuLyoqXG4gKiBSZXR1cm4gdGhlIGFzc29jaWF0ZWQge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yIHZlY3RvcnNvdXJjZX0gb2YgdGhlIGxheWVyLlxuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zb3VyY2UvVmVjdG9yLmpzXCIpLmRlZmF1bHR9IFNvdXJjZS5cbiAqIEBhcGlcbiAqL1xuVmVjdG9yTGF5ZXIucHJvdG90eXBlLmdldFNvdXJjZTtcblxuXG5leHBvcnQgZGVmYXVsdCBWZWN0b3JMYXllcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VmVjdG9yLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zdHlsZS9JY29uSW1hZ2VcbiAqL1xuXG5pbXBvcnQge2NyZWF0ZUNhbnZhc0NvbnRleHQyRH0gZnJvbSAnLi4vZG9tLmpzJztcbmltcG9ydCB7bGlzdGVuT25jZSwgdW5saXN0ZW5CeUtleX0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbmltcG9ydCBFdmVudFRhcmdldCBmcm9tICcuLi9ldmVudHMvVGFyZ2V0LmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW1hZ2VTdGF0ZSBmcm9tICcuLi9JbWFnZVN0YXRlLmpzJztcbmltcG9ydCB7c2hhcmVkIGFzIGljb25JbWFnZUNhY2hlfSBmcm9tICcuL0ljb25JbWFnZUNhY2hlLmpzJztcblxudmFyIEljb25JbWFnZSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEV2ZW50VGFyZ2V0KSB7XG4gIGZ1bmN0aW9uIEljb25JbWFnZShpbWFnZSwgc3JjLCBzaXplLCBjcm9zc09yaWdpbiwgaW1hZ2VTdGF0ZSwgY29sb3IpIHtcblxuICAgIEV2ZW50VGFyZ2V0LmNhbGwodGhpcyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fVxuICAgICAqL1xuICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnR9XG4gICAgICovXG4gICAgdGhpcy5pbWFnZV8gPSAhaW1hZ2UgPyBuZXcgSW1hZ2UoKSA6IGltYWdlO1xuXG4gICAgaWYgKGNyb3NzT3JpZ2luICE9PSBudWxsKSB7XG4gICAgICAvKiogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnR9ICovICh0aGlzLmltYWdlXykuY3Jvc3NPcmlnaW4gPSBjcm9zc09yaWdpbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudH1cbiAgICAgKi9cbiAgICB0aGlzLmNhbnZhc18gPSBjb2xvciA/XG4gICAgICAvKiogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fSAqLyAoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJykpIDpcbiAgICAgIG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb2xvci5qc1wiKS5Db2xvcn1cbiAgICAgKi9cbiAgICB0aGlzLmNvbG9yXyA9IGNvbG9yO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICovXG4gICAgdGhpcy5pbWFnZUxpc3RlbmVyS2V5c18gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vSW1hZ2VTdGF0ZS5qc1wiKS5kZWZhdWx0fVxuICAgICAqL1xuICAgIHRoaXMuaW1hZ2VTdGF0ZV8gPSBpbWFnZVN0YXRlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAqL1xuICAgIHRoaXMuc2l6ZV8gPSBzaXplO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7c3RyaW5nfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLnNyY18gPSBzcmM7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLnRhaW50ZWRfO1xuXG4gIH1cblxuICBpZiAoIEV2ZW50VGFyZ2V0ICkgSWNvbkltYWdlLl9fcHJvdG9fXyA9IEV2ZW50VGFyZ2V0O1xuICBJY29uSW1hZ2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXZlbnRUYXJnZXQgJiYgRXZlbnRUYXJnZXQucHJvdG90eXBlICk7XG4gIEljb25JbWFnZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBJY29uSW1hZ2U7XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBpbWFnZSBjYW52YXMgaXMgdGFpbnRlZC5cbiAgICovXG4gIEljb25JbWFnZS5wcm90b3R5cGUuaXNUYWludGVkXyA9IGZ1bmN0aW9uIGlzVGFpbnRlZF8gKCkge1xuICAgIGlmICh0aGlzLnRhaW50ZWRfID09PSB1bmRlZmluZWQgJiYgdGhpcy5pbWFnZVN0YXRlXyA9PT0gSW1hZ2VTdGF0ZS5MT0FERUQpIHtcbiAgICAgIHRoaXMudGFpbnRlZF8gPSBmYWxzZTtcbiAgICAgIHZhciBjb250ZXh0ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKDEsIDEpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UodGhpcy5pbWFnZV8sIDAsIDApO1xuICAgICAgICBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCAxLCAxKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhpcy50YWludGVkXyA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnRhaW50ZWRfID09PSB0cnVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgSWNvbkltYWdlLnByb3RvdHlwZS5kaXNwYXRjaENoYW5nZUV2ZW50XyA9IGZ1bmN0aW9uIGRpc3BhdGNoQ2hhbmdlRXZlbnRfICgpIHtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoRXZlbnRUeXBlLkNIQU5HRSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBJY29uSW1hZ2UucHJvdG90eXBlLmhhbmRsZUltYWdlRXJyb3JfID0gZnVuY3Rpb24gaGFuZGxlSW1hZ2VFcnJvcl8gKCkge1xuICAgIHRoaXMuaW1hZ2VTdGF0ZV8gPSBJbWFnZVN0YXRlLkVSUk9SO1xuICAgIHRoaXMudW5saXN0ZW5JbWFnZV8oKTtcbiAgICB0aGlzLmRpc3BhdGNoQ2hhbmdlRXZlbnRfKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBJY29uSW1hZ2UucHJvdG90eXBlLmhhbmRsZUltYWdlTG9hZF8gPSBmdW5jdGlvbiBoYW5kbGVJbWFnZUxvYWRfICgpIHtcbiAgICB0aGlzLmltYWdlU3RhdGVfID0gSW1hZ2VTdGF0ZS5MT0FERUQ7XG4gICAgaWYgKHRoaXMuc2l6ZV8pIHtcbiAgICAgIHRoaXMuaW1hZ2VfLndpZHRoID0gdGhpcy5zaXplX1swXTtcbiAgICAgIHRoaXMuaW1hZ2VfLmhlaWdodCA9IHRoaXMuc2l6ZV9bMV07XG4gICAgfVxuICAgIHRoaXMuc2l6ZV8gPSBbdGhpcy5pbWFnZV8ud2lkdGgsIHRoaXMuaW1hZ2VfLmhlaWdodF07XG4gICAgdGhpcy51bmxpc3RlbkltYWdlXygpO1xuICAgIHRoaXMucmVwbGFjZUNvbG9yXygpO1xuICAgIHRoaXMuZGlzcGF0Y2hDaGFuZ2VFdmVudF8oKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAqIEByZXR1cm4ge0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnR9IEltYWdlIG9yIENhbnZhcyBlbGVtZW50LlxuICAgKi9cbiAgSWNvbkltYWdlLnByb3RvdHlwZS5nZXRJbWFnZSA9IGZ1bmN0aW9uIGdldEltYWdlIChwaXhlbFJhdGlvKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FudmFzXyA/IHRoaXMuY2FudmFzXyA6IHRoaXMuaW1hZ2VfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9JbWFnZVN0YXRlLmpzXCIpLmRlZmF1bHR9IEltYWdlIHN0YXRlLlxuICAgKi9cbiAgSWNvbkltYWdlLnByb3RvdHlwZS5nZXRJbWFnZVN0YXRlID0gZnVuY3Rpb24gZ2V0SW1hZ2VTdGF0ZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW1hZ2VTdGF0ZV87XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgKiBAcmV0dXJuIHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fSBJbWFnZSBlbGVtZW50LlxuICAgKi9cbiAgSWNvbkltYWdlLnByb3RvdHlwZS5nZXRIaXREZXRlY3Rpb25JbWFnZSA9IGZ1bmN0aW9uIGdldEhpdERldGVjdGlvbkltYWdlIChwaXhlbFJhdGlvKSB7XG4gICAgaWYgKCF0aGlzLmhpdERldGVjdGlvbkltYWdlXykge1xuICAgICAgaWYgKHRoaXMuaXNUYWludGVkXygpKSB7XG4gICAgICAgIHZhciB3aWR0aCA9IHRoaXMuc2l6ZV9bMF07XG4gICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLnNpemVfWzFdO1xuICAgICAgICB2YXIgY29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5oaXREZXRlY3Rpb25JbWFnZV8gPSBjb250ZXh0LmNhbnZhcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaGl0RGV0ZWN0aW9uSW1hZ2VfID0gdGhpcy5pbWFnZV87XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmhpdERldGVjdGlvbkltYWdlXztcbiAgfTtcblxuICAvKipcbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBJbWFnZSBzaXplLlxuICAgKi9cbiAgSWNvbkltYWdlLnByb3RvdHlwZS5nZXRTaXplID0gZnVuY3Rpb24gZ2V0U2l6ZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2l6ZV87XG4gIH07XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ3x1bmRlZmluZWR9IEltYWdlIHNyYy5cbiAgICovXG4gIEljb25JbWFnZS5wcm90b3R5cGUuZ2V0U3JjID0gZnVuY3Rpb24gZ2V0U3JjICgpIHtcbiAgICByZXR1cm4gdGhpcy5zcmNfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBMb2FkIG5vdCB5ZXQgbG9hZGVkIFVSSS5cbiAgICovXG4gIEljb25JbWFnZS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uIGxvYWQgKCkge1xuICAgIGlmICh0aGlzLmltYWdlU3RhdGVfID09IEltYWdlU3RhdGUuSURMRSkge1xuICAgICAgdGhpcy5pbWFnZVN0YXRlXyA9IEltYWdlU3RhdGUuTE9BRElORztcbiAgICAgIHRoaXMuaW1hZ2VMaXN0ZW5lcktleXNfID0gW1xuICAgICAgICBsaXN0ZW5PbmNlKHRoaXMuaW1hZ2VfLCBFdmVudFR5cGUuRVJST1IsXG4gICAgICAgICAgdGhpcy5oYW5kbGVJbWFnZUVycm9yXywgdGhpcyksXG4gICAgICAgIGxpc3Rlbk9uY2UodGhpcy5pbWFnZV8sIEV2ZW50VHlwZS5MT0FELFxuICAgICAgICAgIHRoaXMuaGFuZGxlSW1hZ2VMb2FkXywgdGhpcylcbiAgICAgIF07XG4gICAgICB0cnkge1xuICAgICAgICAvKiogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnR9ICovICh0aGlzLmltYWdlXykuc3JjID0gdGhpcy5zcmNfO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0aGlzLmhhbmRsZUltYWdlRXJyb3JfKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgSWNvbkltYWdlLnByb3RvdHlwZS5yZXBsYWNlQ29sb3JfID0gZnVuY3Rpb24gcmVwbGFjZUNvbG9yXyAoKSB7XG4gICAgaWYgKCF0aGlzLmNvbG9yXyB8fCB0aGlzLmlzVGFpbnRlZF8oKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuY2FudmFzXy53aWR0aCA9IHRoaXMuaW1hZ2VfLndpZHRoO1xuICAgIHRoaXMuY2FudmFzXy5oZWlnaHQgPSB0aGlzLmltYWdlXy5oZWlnaHQ7XG5cbiAgICB2YXIgY3R4ID0gdGhpcy5jYW52YXNfLmdldENvbnRleHQoJzJkJyk7XG4gICAgY3R4LmRyYXdJbWFnZSh0aGlzLmltYWdlXywgMCwgMCk7XG5cbiAgICB2YXIgaW1nRGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgdGhpcy5pbWFnZV8ud2lkdGgsIHRoaXMuaW1hZ2VfLmhlaWdodCk7XG4gICAgdmFyIGRhdGEgPSBpbWdEYXRhLmRhdGE7XG4gICAgdmFyIHIgPSB0aGlzLmNvbG9yX1swXSAvIDI1NS4wO1xuICAgIHZhciBnID0gdGhpcy5jb2xvcl9bMV0gLyAyNTUuMDtcbiAgICB2YXIgYiA9IHRoaXMuY29sb3JfWzJdIC8gMjU1LjA7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBkYXRhLmxlbmd0aDsgaSA8IGlpOyBpICs9IDQpIHtcbiAgICAgIGRhdGFbaV0gKj0gcjtcbiAgICAgIGRhdGFbaSArIDFdICo9IGc7XG4gICAgICBkYXRhW2kgKyAyXSAqPSBiO1xuICAgIH1cbiAgICBjdHgucHV0SW1hZ2VEYXRhKGltZ0RhdGEsIDAsIDApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBEaXNjYXJkcyBldmVudCBoYW5kbGVycyB3aGljaCBsaXN0ZW4gZm9yIGxvYWQgY29tcGxldGlvbiBvciBlcnJvcnMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBJY29uSW1hZ2UucHJvdG90eXBlLnVubGlzdGVuSW1hZ2VfID0gZnVuY3Rpb24gdW5saXN0ZW5JbWFnZV8gKCkge1xuICAgIHRoaXMuaW1hZ2VMaXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgdGhpcy5pbWFnZUxpc3RlbmVyS2V5c18gPSBudWxsO1xuICB9O1xuXG4gIHJldHVybiBJY29uSW1hZ2U7XG59KEV2ZW50VGFyZ2V0KSk7XG5cblxuLyoqXG4gKiBAcGFyYW0ge0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnR9IGltYWdlIEltYWdlLlxuICogQHBhcmFtIHtzdHJpbmd9IHNyYyBTcmMuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBTaXplLlxuICogQHBhcmFtIHs/c3RyaW5nfSBjcm9zc09yaWdpbiBDcm9zcyBvcmlnaW4uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ltYWdlU3RhdGUuanNcIikuZGVmYXVsdH0gaW1hZ2VTdGF0ZSBJbWFnZSBzdGF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J9IGNvbG9yIENvbG9yLlxuICogQHJldHVybiB7SWNvbkltYWdlfSBJY29uIGltYWdlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0KGltYWdlLCBzcmMsIHNpemUsIGNyb3NzT3JpZ2luLCBpbWFnZVN0YXRlLCBjb2xvcikge1xuICB2YXIgaWNvbkltYWdlID0gaWNvbkltYWdlQ2FjaGUuZ2V0KHNyYywgY3Jvc3NPcmlnaW4sIGNvbG9yKTtcbiAgaWYgKCFpY29uSW1hZ2UpIHtcbiAgICBpY29uSW1hZ2UgPSBuZXcgSWNvbkltYWdlKGltYWdlLCBzcmMsIHNpemUsIGNyb3NzT3JpZ2luLCBpbWFnZVN0YXRlLCBjb2xvcik7XG4gICAgaWNvbkltYWdlQ2FjaGUuc2V0KHNyYywgY3Jvc3NPcmlnaW4sIGNvbG9yLCBpY29uSW1hZ2UpO1xuICB9XG4gIHJldHVybiBpY29uSW1hZ2U7XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgSWNvbkltYWdlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JY29uSW1hZ2UuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL0dyb3VwXG4gKi9cbmltcG9ydCB7Z2V0VWlkfSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4uL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0IENvbGxlY3Rpb25FdmVudFR5cGUgZnJvbSAnLi4vQ29sbGVjdGlvbkV2ZW50VHlwZS5qcyc7XG5pbXBvcnQge2dldENoYW5nZUV2ZW50VHlwZX0gZnJvbSAnLi4vT2JqZWN0LmpzJztcbmltcG9ydCBPYmplY3RFdmVudFR5cGUgZnJvbSAnLi4vT2JqZWN0RXZlbnRUeXBlLmpzJztcbmltcG9ydCB7YXNzZXJ0fSBmcm9tICcuLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7bGlzdGVuLCB1bmxpc3RlbkJ5S2V5fSBmcm9tICcuLi9ldmVudHMuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7Z2V0SW50ZXJzZWN0aW9ufSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IEJhc2VMYXllciBmcm9tICcuL0Jhc2UuanMnO1xuaW1wb3J0IHthc3NpZ24sIGNsZWFyfSBmcm9tICcuLi9vYmouanMnO1xuaW1wb3J0IFNvdXJjZVN0YXRlIGZyb20gJy4uL3NvdXJjZS9TdGF0ZS5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSAoMCwgMSkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt2aXNpYmxlPXRydWVdIFZpc2liaWxpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBib3VuZGluZyBleHRlbnQgZm9yIGxheWVyIHJlbmRlcmluZy4gIFRoZSBsYXllciB3aWxsIG5vdCBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGlzIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4XSBUaGUgei1pbmRleCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgQXQgcmVuZGVyaW5nIHRpbWUsIHRoZSBsYXllcnNcbiAqIHdpbGwgYmUgb3JkZXJlZCwgZmlyc3QgYnkgWi1pbmRleCBhbmQgdGhlbiBieSBwb3NpdGlvbi4gV2hlbiBgdW5kZWZpbmVkYCwgYSBgekluZGV4YCBvZiAwIGlzIGFzc3VtZWRcbiAqIGZvciBsYXllcnMgdGhhdCBhcmUgYWRkZWQgdG8gdGhlIG1hcCdzIGBsYXllcnNgIGNvbGxlY3Rpb24sIG9yIGBJbmZpbml0eWAgd2hlbiB0aGUgbGF5ZXIncyBgc2V0TWFwKClgXG4gKiBtZXRob2Qgd2FzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIChleGNsdXNpdmUpIGJlbG93IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHQ+fGltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdD59IFtsYXllcnNdIENoaWxkIGxheWVycy5cbiAqL1xuXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBQcm9wZXJ0eSA9IHtcbiAgTEFZRVJTOiAnbGF5ZXJzJ1xufTtcblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufkNvbGxlY3Rpb259IG9mIGxheWVycyB0aGF0IGFyZSBoYW5kbGVkIHRvZ2V0aGVyLlxuICpcbiAqIEEgZ2VuZXJpYyBgY2hhbmdlYCBldmVudCBpcyB0cmlnZ2VyZWQgd2hlbiB0aGUgZ3JvdXAvQ29sbGVjdGlvbiBjaGFuZ2VzLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIExheWVyR3JvdXAgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChCYXNlTGF5ZXIpIHtcbiAgZnVuY3Rpb24gTGF5ZXJHcm91cChvcHRfb3B0aW9ucykge1xuXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgYmFzZU9wdGlvbnMgPSAvKiogQHR5cGUge09wdGlvbnN9ICovIChhc3NpZ24oe30sIG9wdGlvbnMpKTtcbiAgICBkZWxldGUgYmFzZU9wdGlvbnMubGF5ZXJzO1xuXG4gICAgdmFyIGxheWVycyA9IG9wdGlvbnMubGF5ZXJzO1xuXG4gICAgQmFzZUxheWVyLmNhbGwodGhpcywgYmFzZU9wdGlvbnMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICovXG4gICAgdGhpcy5sYXllcnNMaXN0ZW5lcktleXNfID0gW107XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pj59XG4gICAgICovXG4gICAgdGhpcy5saXN0ZW5lcktleXNfID0ge307XG5cbiAgICBsaXN0ZW4odGhpcyxcbiAgICAgIGdldENoYW5nZUV2ZW50VHlwZShQcm9wZXJ0eS5MQVlFUlMpLFxuICAgICAgdGhpcy5oYW5kbGVMYXllcnNDaGFuZ2VkXywgdGhpcyk7XG5cbiAgICBpZiAobGF5ZXJzKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShsYXllcnMpKSB7XG4gICAgICAgIGxheWVycyA9IG5ldyBDb2xsZWN0aW9uKGxheWVycy5zbGljZSgpLCB7dW5pcXVlOiB0cnVlfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhc3NlcnQodHlwZW9mIC8qKiBAdHlwZSB7P30gKi8gKGxheWVycykuZ2V0QXJyYXkgPT09ICdmdW5jdGlvbicsXG4gICAgICAgICAgNDMpOyAvLyBFeHBlY3RlZCBgbGF5ZXJzYCB0byBiZSBhbiBhcnJheSBvciBhIGBDb2xsZWN0aW9uYFxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsYXllcnMgPSBuZXcgQ29sbGVjdGlvbih1bmRlZmluZWQsIHt1bmlxdWU6IHRydWV9KTtcbiAgICB9XG5cbiAgICB0aGlzLnNldExheWVycyhsYXllcnMpO1xuXG4gIH1cblxuICBpZiAoIEJhc2VMYXllciApIExheWVyR3JvdXAuX19wcm90b19fID0gQmFzZUxheWVyO1xuICBMYXllckdyb3VwLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEJhc2VMYXllciAmJiBCYXNlTGF5ZXIucHJvdG90eXBlICk7XG4gIExheWVyR3JvdXAucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTGF5ZXJHcm91cDtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIExheWVyR3JvdXAucHJvdG90eXBlLmhhbmRsZUxheWVyQ2hhbmdlXyA9IGZ1bmN0aW9uIGhhbmRsZUxheWVyQ2hhbmdlXyAoKSB7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBMYXllckdyb3VwLnByb3RvdHlwZS5oYW5kbGVMYXllcnNDaGFuZ2VkXyA9IGZ1bmN0aW9uIGhhbmRsZUxheWVyc0NoYW5nZWRfICgpIHtcbiAgICB0aGlzLmxheWVyc0xpc3RlbmVyS2V5c18uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICB0aGlzLmxheWVyc0xpc3RlbmVyS2V5c18ubGVuZ3RoID0gMDtcblxuICAgIHZhciBsYXllcnMgPSB0aGlzLmdldExheWVycygpO1xuICAgIHRoaXMubGF5ZXJzTGlzdGVuZXJLZXlzXy5wdXNoKFxuICAgICAgbGlzdGVuKGxheWVycywgQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsIHRoaXMuaGFuZGxlTGF5ZXJzQWRkXywgdGhpcyksXG4gICAgICBsaXN0ZW4obGF5ZXJzLCBDb2xsZWN0aW9uRXZlbnRUeXBlLlJFTU9WRSwgdGhpcy5oYW5kbGVMYXllcnNSZW1vdmVfLCB0aGlzKVxuICAgICk7XG5cbiAgICBmb3IgKHZhciBpZCBpbiB0aGlzLmxpc3RlbmVyS2V5c18pIHtcbiAgICAgIHRoaXMubGlzdGVuZXJLZXlzX1tpZF0uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICB9XG4gICAgY2xlYXIodGhpcy5saXN0ZW5lcktleXNfKTtcblxuICAgIHZhciBsYXllcnNBcnJheSA9IGxheWVycy5nZXRBcnJheSgpO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxheWVyc0FycmF5Lmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgIHZhciBsYXllciA9IGxheWVyc0FycmF5W2ldO1xuICAgICAgdGhpcy5saXN0ZW5lcktleXNfW2dldFVpZChsYXllcildID0gW1xuICAgICAgICBsaXN0ZW4obGF5ZXIsIE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRSwgdGhpcy5oYW5kbGVMYXllckNoYW5nZV8sIHRoaXMpLFxuICAgICAgICBsaXN0ZW4obGF5ZXIsIEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuaGFuZGxlTGF5ZXJDaGFuZ2VfLCB0aGlzKVxuICAgICAgXTtcbiAgICB9XG5cbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gY29sbGVjdGlvbkV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIExheWVyR3JvdXAucHJvdG90eXBlLmhhbmRsZUxheWVyc0FkZF8gPSBmdW5jdGlvbiBoYW5kbGVMYXllcnNBZGRfIChjb2xsZWN0aW9uRXZlbnQpIHtcbiAgICB2YXIgbGF5ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0fSAqLyAoY29sbGVjdGlvbkV2ZW50LmVsZW1lbnQpO1xuICAgIHRoaXMubGlzdGVuZXJLZXlzX1tnZXRVaWQobGF5ZXIpXSA9IFtcbiAgICAgIGxpc3RlbihsYXllciwgT2JqZWN0RXZlbnRUeXBlLlBST1BFUlRZQ0hBTkdFLCB0aGlzLmhhbmRsZUxheWVyQ2hhbmdlXywgdGhpcyksXG4gICAgICBsaXN0ZW4obGF5ZXIsIEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuaGFuZGxlTGF5ZXJDaGFuZ2VfLCB0aGlzKVxuICAgIF07XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGNvbGxlY3Rpb25FdmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBMYXllckdyb3VwLnByb3RvdHlwZS5oYW5kbGVMYXllcnNSZW1vdmVfID0gZnVuY3Rpb24gaGFuZGxlTGF5ZXJzUmVtb3ZlXyAoY29sbGVjdGlvbkV2ZW50KSB7XG4gICAgdmFyIGxheWVyID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdH0gKi8gKGNvbGxlY3Rpb25FdmVudC5lbGVtZW50KTtcbiAgICB2YXIga2V5ID0gZ2V0VWlkKGxheWVyKTtcbiAgICB0aGlzLmxpc3RlbmVyS2V5c19ba2V5XS5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgIGRlbGV0ZSB0aGlzLmxpc3RlbmVyS2V5c19ba2V5XTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9uIGNvbGxlY3Rpb259IG9mIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXIgbGF5ZXJzfVxuICAgKiBpbiB0aGlzIGdyb3VwLlxuICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0PGltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0Pn0gQ29sbGVjdGlvbiBvZlxuICAgKiAgIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvQmFzZSBsYXllcnN9IHRoYXQgYXJlIHBhcnQgb2YgdGhpcyBncm91cC5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgTGF5ZXJHcm91cC5wcm90b3R5cGUuZ2V0TGF5ZXJzID0gZnVuY3Rpb24gZ2V0TGF5ZXJzICgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgLyoqIEB0eXBlIHshaW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0PGltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0Pn0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LkxBWUVSUykpXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb24gY29sbGVjdGlvbn0gb2Yge0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllcn5MYXllciBsYXllcnN9XG4gICAqIGluIHRoaXMgZ3JvdXAuXG4gICAqIEBwYXJhbSB7IWltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdD59IGxheWVycyBDb2xsZWN0aW9uIG9mXG4gICAqICAge0BsaW5rIG1vZHVsZTpvbC9sYXllci9CYXNlIGxheWVyc30gdGhhdCBhcmUgcGFydCBvZiB0aGlzIGdyb3VwLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBMYXllckdyb3VwLnByb3RvdHlwZS5zZXRMYXllcnMgPSBmdW5jdGlvbiBzZXRMYXllcnMgKGxheWVycykge1xuICAgIHRoaXMuc2V0KFByb3BlcnR5LkxBWUVSUywgbGF5ZXJzKTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIExheWVyR3JvdXAucHJvdG90eXBlLmdldExheWVyc0FycmF5ID0gZnVuY3Rpb24gZ2V0TGF5ZXJzQXJyYXkgKG9wdF9hcnJheSkge1xuICAgIHZhciBhcnJheSA9IG9wdF9hcnJheSAhPT0gdW5kZWZpbmVkID8gb3B0X2FycmF5IDogW107XG4gICAgdGhpcy5nZXRMYXllcnMoKS5mb3JFYWNoKGZ1bmN0aW9uKGxheWVyKSB7XG4gICAgICBsYXllci5nZXRMYXllcnNBcnJheShhcnJheSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGFycmF5O1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgTGF5ZXJHcm91cC5wcm90b3R5cGUuZ2V0TGF5ZXJTdGF0ZXNBcnJheSA9IGZ1bmN0aW9uIGdldExheWVyU3RhdGVzQXJyYXkgKG9wdF9zdGF0ZXMpIHtcbiAgICB2YXIgc3RhdGVzID0gb3B0X3N0YXRlcyAhPT0gdW5kZWZpbmVkID8gb3B0X3N0YXRlcyA6IFtdO1xuXG4gICAgdmFyIHBvcyA9IHN0YXRlcy5sZW5ndGg7XG5cbiAgICB0aGlzLmdldExheWVycygpLmZvckVhY2goZnVuY3Rpb24obGF5ZXIpIHtcbiAgICAgIGxheWVyLmdldExheWVyU3RhdGVzQXJyYXkoc3RhdGVzKTtcbiAgICB9KTtcblxuICAgIHZhciBvd25MYXllclN0YXRlID0gdGhpcy5nZXRMYXllclN0YXRlKCk7XG4gICAgZm9yICh2YXIgaSA9IHBvcywgaWkgPSBzdGF0ZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgdmFyIGxheWVyU3RhdGUgPSBzdGF0ZXNbaV07XG4gICAgICBsYXllclN0YXRlLm9wYWNpdHkgKj0gb3duTGF5ZXJTdGF0ZS5vcGFjaXR5O1xuICAgICAgbGF5ZXJTdGF0ZS52aXNpYmxlID0gbGF5ZXJTdGF0ZS52aXNpYmxlICYmIG93bkxheWVyU3RhdGUudmlzaWJsZTtcbiAgICAgIGxheWVyU3RhdGUubWF4UmVzb2x1dGlvbiA9IE1hdGgubWluKFxuICAgICAgICBsYXllclN0YXRlLm1heFJlc29sdXRpb24sIG93bkxheWVyU3RhdGUubWF4UmVzb2x1dGlvbik7XG4gICAgICBsYXllclN0YXRlLm1pblJlc29sdXRpb24gPSBNYXRoLm1heChcbiAgICAgICAgbGF5ZXJTdGF0ZS5taW5SZXNvbHV0aW9uLCBvd25MYXllclN0YXRlLm1pblJlc29sdXRpb24pO1xuICAgICAgaWYgKG93bkxheWVyU3RhdGUuZXh0ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGxheWVyU3RhdGUuZXh0ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBsYXllclN0YXRlLmV4dGVudCA9IGdldEludGVyc2VjdGlvbihsYXllclN0YXRlLmV4dGVudCwgb3duTGF5ZXJTdGF0ZS5leHRlbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxheWVyU3RhdGUuZXh0ZW50ID0gb3duTGF5ZXJTdGF0ZS5leHRlbnQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc3RhdGVzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgTGF5ZXJHcm91cC5wcm90b3R5cGUuZ2V0U291cmNlU3RhdGUgPSBmdW5jdGlvbiBnZXRTb3VyY2VTdGF0ZSAoKSB7XG4gICAgcmV0dXJuIFNvdXJjZVN0YXRlLlJFQURZO1xuICB9O1xuXG4gIHJldHVybiBMYXllckdyb3VwO1xufShCYXNlTGF5ZXIpKTtcblxuXG5leHBvcnQgZGVmYXVsdCBMYXllckdyb3VwO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Hcm91cC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc3R5bGUvSWNvbkFuY2hvclVuaXRzXG4gKi9cblxuLyoqXG4gKiBJY29uIGFuY2hvciB1bml0cy4gT25lIG9mICdmcmFjdGlvbicsICdwaXhlbHMnLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICBGUkFDVElPTjogJ2ZyYWN0aW9uJyxcbiAgUElYRUxTOiAncGl4ZWxzJ1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SWNvbkFuY2hvclVuaXRzLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zdHlsZS9JY29uT3JpZ2luXG4gKi9cblxuLyoqXG4gKiBJY29uIG9yaWdpbi4gT25lIG9mICdib3R0b20tbGVmdCcsICdib3R0b20tcmlnaHQnLCAndG9wLWxlZnQnLCAndG9wLXJpZ2h0Jy5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgQk9UVE9NX0xFRlQ6ICdib3R0b20tbGVmdCcsXG4gIEJPVFRPTV9SSUdIVDogJ2JvdHRvbS1yaWdodCcsXG4gIFRPUF9MRUZUOiAndG9wLWxlZnQnLFxuICBUT1BfUklHSFQ6ICd0b3AtcmlnaHQnXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JY29uT3JpZ2luLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zdHlsZS9JY29uXG4gKi9cbmltcG9ydCB7Z2V0VWlkfSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCBJbWFnZVN0YXRlIGZyb20gJy4uL0ltYWdlU3RhdGUuanMnO1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHthc0FycmF5fSBmcm9tICcuLi9jb2xvci5qcyc7XG5pbXBvcnQge2xpc3RlbiwgdW5saXN0ZW59IGZyb20gJy4uL2V2ZW50cy5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IEljb25BbmNob3JVbml0cyBmcm9tICcuL0ljb25BbmNob3JVbml0cy5qcyc7XG5pbXBvcnQge2dldCBhcyBnZXRJY29uSW1hZ2V9IGZyb20gJy4vSWNvbkltYWdlLmpzJztcbmltcG9ydCBJY29uT3JpZ2luIGZyb20gJy4vSWNvbk9yaWdpbi5qcyc7XG5pbXBvcnQgSW1hZ2VTdHlsZSBmcm9tICcuL0ltYWdlLmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gW2FuY2hvcj1bMC41LCAwLjVdXSBBbmNob3IuIERlZmF1bHQgdmFsdWUgaXMgdGhlIGljb24gY2VudGVyLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL0ljb25PcmlnaW4uanNcIikuZGVmYXVsdH0gW2FuY2hvck9yaWdpbl0gT3JpZ2luIG9mIHRoZSBhbmNob3I6IGBib3R0b20tbGVmdGAsIGBib3R0b20tcmlnaHRgLFxuICogYHRvcC1sZWZ0YCBvciBgdG9wLXJpZ2h0YC4gRGVmYXVsdCBpcyBgdG9wLWxlZnRgLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL0ljb25BbmNob3JVbml0cy5qc1wiKS5kZWZhdWx0fSBbYW5jaG9yWFVuaXRzXSBVbml0cyBpbiB3aGljaCB0aGUgYW5jaG9yIHggdmFsdWUgaXNcbiAqIHNwZWNpZmllZC4gQSB2YWx1ZSBvZiBgJ2ZyYWN0aW9uJ2AgaW5kaWNhdGVzIHRoZSB4IHZhbHVlIGlzIGEgZnJhY3Rpb24gb2YgdGhlIGljb24uIEEgdmFsdWUgb2YgYCdwaXhlbHMnYCBpbmRpY2F0ZXNcbiAqIHRoZSB4IHZhbHVlIGluIHBpeGVscy4gRGVmYXVsdCBpcyBgJ2ZyYWN0aW9uJ2AuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vSWNvbkFuY2hvclVuaXRzLmpzXCIpLmRlZmF1bHR9IFthbmNob3JZVW5pdHNdIFVuaXRzIGluIHdoaWNoIHRoZSBhbmNob3IgeSB2YWx1ZSBpc1xuICogc3BlY2lmaWVkLiBBIHZhbHVlIG9mIGAnZnJhY3Rpb24nYCBpbmRpY2F0ZXMgdGhlIHkgdmFsdWUgaXMgYSBmcmFjdGlvbiBvZiB0aGUgaWNvbi4gQSB2YWx1ZSBvZiBgJ3BpeGVscydgIGluZGljYXRlc1xuICogdGhlIHkgdmFsdWUgaW4gcGl4ZWxzLiBEZWZhdWx0IGlzIGAnZnJhY3Rpb24nYC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J8c3RyaW5nfSBbY29sb3JdIENvbG9yIHRvIHRpbnQgdGhlIGljb24uIElmIG5vdCBzcGVjaWZpZWQsXG4gKiB0aGUgaWNvbiB3aWxsIGJlIGxlZnQgYXMgaXMuXG4gKiBAcHJvcGVydHkge251bGx8c3RyaW5nfSBbY3Jvc3NPcmlnaW5dIFRoZSBgY3Jvc3NPcmlnaW5gIGF0dHJpYnV0ZSBmb3IgbG9hZGVkIGltYWdlcy4gTm90ZSB0aGF0IHlvdSBtdXN0IHByb3ZpZGUgYVxuICogYGNyb3NzT3JpZ2luYCB2YWx1ZSBpZiB5b3UgYXJlIHVzaW5nIHRoZSBXZWJHTCByZW5kZXJlciBvciBpZiB5b3Ugd2FudCB0byBhY2Nlc3MgcGl4ZWwgZGF0YSB3aXRoIHRoZSBDYW52YXMgcmVuZGVyZXIuXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9DT1JTX2VuYWJsZWRfaW1hZ2UgZm9yIG1vcmUgZGV0YWlsLlxuICogQHByb3BlcnR5IHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fSBbaW1nXSBJbWFnZSBvYmplY3QgZm9yIHRoZSBpY29uLiBJZiB0aGUgYHNyY2Agb3B0aW9uIGlzIG5vdCBwcm92aWRlZCB0aGVuIHRoZVxuICogcHJvdmlkZWQgaW1hZ2UgbXVzdCBhbHJlYWR5IGJlIGxvYWRlZC4gQW5kIGluIHRoYXQgY2FzZSwgaXQgaXMgcmVxdWlyZWRcbiAqIHRvIHByb3ZpZGUgdGhlIHNpemUgb2YgdGhlIGltYWdlLCB3aXRoIHRoZSBgaW1nU2l6ZWAgb3B0aW9uLlxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBbb2Zmc2V0PVswLCAwXV0gT2Zmc2V0LCB3aGljaCwgdG9nZXRoZXIgd2l0aCB0aGUgc2l6ZSBhbmQgdGhlIG9mZnNldCBvcmlnaW4sIGRlZmluZSB0aGVcbiAqIHN1Yi1yZWN0YW5nbGUgdG8gdXNlIGZyb20gdGhlIG9yaWdpbmFsIGljb24gaW1hZ2UuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vSWNvbk9yaWdpbi5qc1wiKS5kZWZhdWx0fSBbb2Zmc2V0T3JpZ2luXSBPcmlnaW4gb2YgdGhlIG9mZnNldDogYGJvdHRvbS1sZWZ0YCwgYGJvdHRvbS1yaWdodGAsXG4gKiBgdG9wLWxlZnRgIG9yIGB0b3AtcmlnaHRgLiBEZWZhdWx0IGlzIGB0b3AtbGVmdGAuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSBvZiB0aGUgaWNvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbc2NhbGU9MV0gU2NhbGUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtyb3RhdGVXaXRoVmlldz1mYWxzZV0gV2hldGhlciB0byByb3RhdGUgdGhlIGljb24gd2l0aCB0aGUgdmlldy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcm90YXRpb249MF0gUm90YXRpb24gaW4gcmFkaWFucyAocG9zaXRpdmUgcm90YXRpb24gY2xvY2t3aXNlKS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBbc2l6ZV0gSWNvbiBzaXplIGluIHBpeGVsLiBDYW4gYmUgdXNlZCB0b2dldGhlciB3aXRoIGBvZmZzZXRgIHRvIGRlZmluZSB0aGVcbiAqIHN1Yi1yZWN0YW5nbGUgdG8gdXNlIGZyb20gdGhlIG9yaWdpbiAoc3ByaXRlKSBpY29uIGltYWdlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFtpbWdTaXplXSBJbWFnZSBzaXplIGluIHBpeGVscy4gT25seSByZXF1aXJlZCBpZiBgaW1nYCBpcyBzZXQgYW5kIGBzcmNgIGlzIG5vdCwgYW5kXG4gKiBmb3IgU1ZHIGltYWdlcyBpbiBJbnRlcm5ldCBFeHBsb3JlciAxMS4gVGhlIHByb3ZpZGVkIGBpbWdTaXplYCBuZWVkcyB0byBtYXRjaCB0aGUgYWN0dWFsIHNpemUgb2YgdGhlIGltYWdlLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtzcmNdIEltYWdlIHNvdXJjZSBVUkkuXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFNldCBpY29uIHN0eWxlIGZvciB2ZWN0b3IgZmVhdHVyZXMuXG4gKiBAYXBpXG4gKi9cbnZhciBJY29uID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoSW1hZ2VTdHlsZSkge1xuICBmdW5jdGlvbiBJY29uKG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdmFyIG9wYWNpdHkgPSBvcHRpb25zLm9wYWNpdHkgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMub3BhY2l0eSA6IDE7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHZhciByb3RhdGlvbiA9IG9wdGlvbnMucm90YXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucm90YXRpb24gOiAwO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB2YXIgc2NhbGUgPSBvcHRpb25zLnNjYWxlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnNjYWxlIDogMTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHZhciByb3RhdGVXaXRoVmlldyA9IG9wdGlvbnMucm90YXRlV2l0aFZpZXcgIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRpb25zLnJvdGF0ZVdpdGhWaWV3IDogZmFsc2U7XG5cbiAgICBJbWFnZVN0eWxlLmNhbGwodGhpcywge1xuICAgICAgb3BhY2l0eTogb3BhY2l0eSxcbiAgICAgIHJvdGF0aW9uOiByb3RhdGlvbixcbiAgICAgIHNjYWxlOiBzY2FsZSxcbiAgICAgIHJvdGF0ZVdpdGhWaWV3OiByb3RhdGVXaXRoVmlld1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgKi9cbiAgICB0aGlzLmFuY2hvcl8gPSBvcHRpb25zLmFuY2hvciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5hbmNob3IgOiBbMC41LCAwLjVdO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgKi9cbiAgICB0aGlzLm5vcm1hbGl6ZWRBbmNob3JfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vSWNvbk9yaWdpbi5qc1wiKS5kZWZhdWx0fVxuICAgICAqL1xuICAgIHRoaXMuYW5jaG9yT3JpZ2luXyA9IG9wdGlvbnMuYW5jaG9yT3JpZ2luICE9PSB1bmRlZmluZWQgP1xuICAgICAgb3B0aW9ucy5hbmNob3JPcmlnaW4gOiBJY29uT3JpZ2luLlRPUF9MRUZUO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9JY29uQW5jaG9yVW5pdHMuanNcIikuZGVmYXVsdH1cbiAgICAgKi9cbiAgICB0aGlzLmFuY2hvclhVbml0c18gPSBvcHRpb25zLmFuY2hvclhVbml0cyAhPT0gdW5kZWZpbmVkID9cbiAgICAgIG9wdGlvbnMuYW5jaG9yWFVuaXRzIDogSWNvbkFuY2hvclVuaXRzLkZSQUNUSU9OO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9JY29uQW5jaG9yVW5pdHMuanNcIikuZGVmYXVsdH1cbiAgICAgKi9cbiAgICB0aGlzLmFuY2hvcllVbml0c18gPSBvcHRpb25zLmFuY2hvcllVbml0cyAhPT0gdW5kZWZpbmVkID9cbiAgICAgIG9wdGlvbnMuYW5jaG9yWVVuaXRzIDogSWNvbkFuY2hvclVuaXRzLkZSQUNUSU9OO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLmNyb3NzT3JpZ2luXyA9XG4gICAgICAgIG9wdGlvbnMuY3Jvc3NPcmlnaW4gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY3Jvc3NPcmlnaW4gOiBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnR9XG4gICAgICovXG4gICAgdmFyIGltYWdlID0gb3B0aW9ucy5pbWcgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuaW1nIDogbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9XG4gICAgICovXG4gICAgdmFyIGltZ1NpemUgPSBvcHRpb25zLmltZ1NpemUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuaW1nU2l6ZSA6IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7c3RyaW5nfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB2YXIgc3JjID0gb3B0aW9ucy5zcmM7XG5cbiAgICBhc3NlcnQoIShzcmMgIT09IHVuZGVmaW5lZCAmJiBpbWFnZSksXG4gICAgICA0KTsgLy8gYGltYWdlYCBhbmQgYHNyY2AgY2Fubm90IGJlIHByb3ZpZGVkIGF0IHRoZSBzYW1lIHRpbWVcbiAgICBhc3NlcnQoIWltYWdlIHx8IChpbWFnZSAmJiBpbWdTaXplKSxcbiAgICAgIDUpOyAvLyBgaW1nU2l6ZWAgbXVzdCBiZSBzZXQgd2hlbiBgaW1hZ2VgIGlzIHByb3ZpZGVkXG5cbiAgICBpZiAoKHNyYyA9PT0gdW5kZWZpbmVkIHx8IHNyYy5sZW5ndGggPT09IDApICYmIGltYWdlKSB7XG4gICAgICBzcmMgPSAvKiogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnR9ICovIChpbWFnZSkuc3JjIHx8IGdldFVpZChpbWFnZSk7XG4gICAgfVxuICAgIGFzc2VydChzcmMgIT09IHVuZGVmaW5lZCAmJiBzcmMubGVuZ3RoID4gMCxcbiAgICAgIDYpOyAvLyBBIGRlZmluZWQgYW5kIG5vbi1lbXB0eSBgc3JjYCBvciBgaW1hZ2VgIG11c3QgYmUgcHJvdmlkZWRcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9JbWFnZVN0YXRlLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdmFyIGltYWdlU3RhdGUgPSBvcHRpb25zLnNyYyAhPT0gdW5kZWZpbmVkID9cbiAgICAgIEltYWdlU3RhdGUuSURMRSA6IEltYWdlU3RhdGUuTE9BREVEO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J9XG4gICAgICovXG4gICAgdGhpcy5jb2xvcl8gPSBvcHRpb25zLmNvbG9yICE9PSB1bmRlZmluZWQgPyBhc0FycmF5KG9wdGlvbnMuY29sb3IpIDogbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vSWNvbkltYWdlLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy5pY29uSW1hZ2VfID0gZ2V0SWNvbkltYWdlKFxuICAgICAgaW1hZ2UsIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAoc3JjKSwgaW1nU2l6ZSwgdGhpcy5jcm9zc09yaWdpbl8sIGltYWdlU3RhdGUsIHRoaXMuY29sb3JfKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICovXG4gICAgdGhpcy5vZmZzZXRfID0gb3B0aW9ucy5vZmZzZXQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMub2Zmc2V0IDogWzAsIDBdO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9JY29uT3JpZ2luLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy5vZmZzZXRPcmlnaW5fID0gb3B0aW9ucy5vZmZzZXRPcmlnaW4gIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRpb25zLm9mZnNldE9yaWdpbiA6IEljb25PcmlnaW4uVE9QX0xFRlQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAqL1xuICAgIHRoaXMub3JpZ2luXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9XG4gICAgICovXG4gICAgdGhpcy5zaXplXyA9IG9wdGlvbnMuc2l6ZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zaXplIDogbnVsbDtcblxuICB9XG5cbiAgaWYgKCBJbWFnZVN0eWxlICkgSWNvbi5fX3Byb3RvX18gPSBJbWFnZVN0eWxlO1xuICBJY29uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEltYWdlU3R5bGUgJiYgSW1hZ2VTdHlsZS5wcm90b3R5cGUgKTtcbiAgSWNvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBJY29uO1xuXG4gIC8qKlxuICAgKiBDbG9uZXMgdGhlIHN0eWxlLiBUaGUgdW5kZXJseWluZyBJbWFnZS9IVE1MQ2FudmFzRWxlbWVudCBpcyBub3QgY2xvbmVkLlxuICAgKiBAcmV0dXJuIHtJY29ufSBUaGUgY2xvbmVkIHN0eWxlLlxuICAgKiBAYXBpXG4gICAqL1xuICBJY29uLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uIGNsb25lICgpIHtcbiAgICByZXR1cm4gbmV3IEljb24oe1xuICAgICAgYW5jaG9yOiB0aGlzLmFuY2hvcl8uc2xpY2UoKSxcbiAgICAgIGFuY2hvck9yaWdpbjogdGhpcy5hbmNob3JPcmlnaW5fLFxuICAgICAgYW5jaG9yWFVuaXRzOiB0aGlzLmFuY2hvclhVbml0c18sXG4gICAgICBhbmNob3JZVW5pdHM6IHRoaXMuYW5jaG9yWVVuaXRzXyxcbiAgICAgIGNyb3NzT3JpZ2luOiB0aGlzLmNyb3NzT3JpZ2luXyxcbiAgICAgIGNvbG9yOiAodGhpcy5jb2xvcl8gJiYgdGhpcy5jb2xvcl8uc2xpY2UpID8gdGhpcy5jb2xvcl8uc2xpY2UoKSA6IHRoaXMuY29sb3JfIHx8IHVuZGVmaW5lZCxcbiAgICAgIHNyYzogdGhpcy5nZXRTcmMoKSxcbiAgICAgIG9mZnNldDogdGhpcy5vZmZzZXRfLnNsaWNlKCksXG4gICAgICBvZmZzZXRPcmlnaW46IHRoaXMub2Zmc2V0T3JpZ2luXyxcbiAgICAgIHNpemU6IHRoaXMuc2l6ZV8gIT09IG51bGwgPyB0aGlzLnNpemVfLnNsaWNlKCkgOiB1bmRlZmluZWQsXG4gICAgICBvcGFjaXR5OiB0aGlzLmdldE9wYWNpdHkoKSxcbiAgICAgIHNjYWxlOiB0aGlzLmdldFNjYWxlKCksXG4gICAgICByb3RhdGlvbjogdGhpcy5nZXRSb3RhdGlvbigpLFxuICAgICAgcm90YXRlV2l0aFZpZXc6IHRoaXMuZ2V0Um90YXRlV2l0aFZpZXcoKVxuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKiBAYXBpXG4gICAqL1xuICBJY29uLnByb3RvdHlwZS5nZXRBbmNob3IgPSBmdW5jdGlvbiBnZXRBbmNob3IgKCkge1xuICAgIGlmICh0aGlzLm5vcm1hbGl6ZWRBbmNob3JfKSB7XG4gICAgICByZXR1cm4gdGhpcy5ub3JtYWxpemVkQW5jaG9yXztcbiAgICB9XG4gICAgdmFyIGFuY2hvciA9IHRoaXMuYW5jaG9yXztcbiAgICB2YXIgc2l6ZSA9IHRoaXMuZ2V0U2l6ZSgpO1xuICAgIGlmICh0aGlzLmFuY2hvclhVbml0c18gPT0gSWNvbkFuY2hvclVuaXRzLkZSQUNUSU9OIHx8XG4gICAgICAgIHRoaXMuYW5jaG9yWVVuaXRzXyA9PSBJY29uQW5jaG9yVW5pdHMuRlJBQ1RJT04pIHtcbiAgICAgIGlmICghc2l6ZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGFuY2hvciA9IHRoaXMuYW5jaG9yXy5zbGljZSgpO1xuICAgICAgaWYgKHRoaXMuYW5jaG9yWFVuaXRzXyA9PSBJY29uQW5jaG9yVW5pdHMuRlJBQ1RJT04pIHtcbiAgICAgICAgYW5jaG9yWzBdICo9IHNpemVbMF07XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hbmNob3JZVW5pdHNfID09IEljb25BbmNob3JVbml0cy5GUkFDVElPTikge1xuICAgICAgICBhbmNob3JbMV0gKj0gc2l6ZVsxXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5hbmNob3JPcmlnaW5fICE9IEljb25PcmlnaW4uVE9QX0xFRlQpIHtcbiAgICAgIGlmICghc2l6ZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmIChhbmNob3IgPT09IHRoaXMuYW5jaG9yXykge1xuICAgICAgICBhbmNob3IgPSB0aGlzLmFuY2hvcl8uc2xpY2UoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmFuY2hvck9yaWdpbl8gPT0gSWNvbk9yaWdpbi5UT1BfUklHSFQgfHxcbiAgICAgICAgICB0aGlzLmFuY2hvck9yaWdpbl8gPT0gSWNvbk9yaWdpbi5CT1RUT01fUklHSFQpIHtcbiAgICAgICAgYW5jaG9yWzBdID0gLWFuY2hvclswXSArIHNpemVbMF07XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hbmNob3JPcmlnaW5fID09IEljb25PcmlnaW4uQk9UVE9NX0xFRlQgfHxcbiAgICAgICAgICB0aGlzLmFuY2hvck9yaWdpbl8gPT0gSWNvbk9yaWdpbi5CT1RUT01fUklHSFQpIHtcbiAgICAgICAgYW5jaG9yWzFdID0gLWFuY2hvclsxXSArIHNpemVbMV07XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMubm9ybWFsaXplZEFuY2hvcl8gPSBhbmNob3I7XG4gICAgcmV0dXJuIHRoaXMubm9ybWFsaXplZEFuY2hvcl87XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgYW5jaG9yIHBvaW50LiBUaGUgYW5jaG9yIGRldGVybWluZXMgdGhlIGNlbnRlciBwb2ludCBmb3IgdGhlXG4gICAqIHN5bWJvbGl6ZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gYW5jaG9yIEFuY2hvci5cbiAgICogQGFwaVxuICAgKi9cbiAgSWNvbi5wcm90b3R5cGUuc2V0QW5jaG9yID0gZnVuY3Rpb24gc2V0QW5jaG9yIChhbmNob3IpIHtcbiAgICB0aGlzLmFuY2hvcl8gPSBhbmNob3I7XG4gICAgdGhpcy5ub3JtYWxpemVkQW5jaG9yXyA9IG51bGw7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgaWNvbiBjb2xvci5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J9IENvbG9yLlxuICAgKiBAYXBpXG4gICAqL1xuICBJY29uLnByb3RvdHlwZS5nZXRDb2xvciA9IGZ1bmN0aW9uIGdldENvbG9yICgpIHtcbiAgICByZXR1cm4gdGhpcy5jb2xvcl87XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgaW1hZ2UgaWNvbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAqIEByZXR1cm4ge0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnR9IEltYWdlIG9yIENhbnZhcyBlbGVtZW50LlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQGFwaVxuICAgKi9cbiAgSWNvbi5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiBnZXRJbWFnZSAocGl4ZWxSYXRpbykge1xuICAgIHJldHVybiB0aGlzLmljb25JbWFnZV8uZ2V0SW1hZ2UocGl4ZWxSYXRpbyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgSWNvbi5wcm90b3R5cGUuZ2V0SW1hZ2VTaXplID0gZnVuY3Rpb24gZ2V0SW1hZ2VTaXplICgpIHtcbiAgICByZXR1cm4gdGhpcy5pY29uSW1hZ2VfLmdldFNpemUoKTtcbiAgfTtcblxuICAvKipcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBJY29uLnByb3RvdHlwZS5nZXRIaXREZXRlY3Rpb25JbWFnZVNpemUgPSBmdW5jdGlvbiBnZXRIaXREZXRlY3Rpb25JbWFnZVNpemUgKCkge1xuICAgIHJldHVybiB0aGlzLmdldEltYWdlU2l6ZSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIEljb24ucHJvdG90eXBlLmdldEltYWdlU3RhdGUgPSBmdW5jdGlvbiBnZXRJbWFnZVN0YXRlICgpIHtcbiAgICByZXR1cm4gdGhpcy5pY29uSW1hZ2VfLmdldEltYWdlU3RhdGUoKTtcbiAgfTtcblxuICAvKipcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBJY29uLnByb3RvdHlwZS5nZXRIaXREZXRlY3Rpb25JbWFnZSA9IGZ1bmN0aW9uIGdldEhpdERldGVjdGlvbkltYWdlIChwaXhlbFJhdGlvKSB7XG4gICAgcmV0dXJuIHRoaXMuaWNvbkltYWdlXy5nZXRIaXREZXRlY3Rpb25JbWFnZShwaXhlbFJhdGlvKTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICogQGFwaVxuICAgKi9cbiAgSWNvbi5wcm90b3R5cGUuZ2V0T3JpZ2luID0gZnVuY3Rpb24gZ2V0T3JpZ2luICgpIHtcbiAgICBpZiAodGhpcy5vcmlnaW5fKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcmlnaW5fO1xuICAgIH1cbiAgICB2YXIgb2Zmc2V0ID0gdGhpcy5vZmZzZXRfO1xuXG4gICAgaWYgKHRoaXMub2Zmc2V0T3JpZ2luXyAhPSBJY29uT3JpZ2luLlRPUF9MRUZUKSB7XG4gICAgICB2YXIgc2l6ZSA9IHRoaXMuZ2V0U2l6ZSgpO1xuICAgICAgdmFyIGljb25JbWFnZVNpemUgPSB0aGlzLmljb25JbWFnZV8uZ2V0U2l6ZSgpO1xuICAgICAgaWYgKCFzaXplIHx8ICFpY29uSW1hZ2VTaXplKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgb2Zmc2V0ID0gb2Zmc2V0LnNsaWNlKCk7XG4gICAgICBpZiAodGhpcy5vZmZzZXRPcmlnaW5fID09IEljb25PcmlnaW4uVE9QX1JJR0hUIHx8XG4gICAgICAgICAgdGhpcy5vZmZzZXRPcmlnaW5fID09IEljb25PcmlnaW4uQk9UVE9NX1JJR0hUKSB7XG4gICAgICAgIG9mZnNldFswXSA9IGljb25JbWFnZVNpemVbMF0gLSBzaXplWzBdIC0gb2Zmc2V0WzBdO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMub2Zmc2V0T3JpZ2luXyA9PSBJY29uT3JpZ2luLkJPVFRPTV9MRUZUIHx8XG4gICAgICAgICAgdGhpcy5vZmZzZXRPcmlnaW5fID09IEljb25PcmlnaW4uQk9UVE9NX1JJR0hUKSB7XG4gICAgICAgIG9mZnNldFsxXSA9IGljb25JbWFnZVNpemVbMV0gLSBzaXplWzFdIC0gb2Zmc2V0WzFdO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLm9yaWdpbl8gPSBvZmZzZXQ7XG4gICAgcmV0dXJuIHRoaXMub3JpZ2luXztcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBpbWFnZSBVUkwuXG4gICAqIEByZXR1cm4ge3N0cmluZ3x1bmRlZmluZWR9IEltYWdlIHNyYy5cbiAgICogQGFwaVxuICAgKi9cbiAgSWNvbi5wcm90b3R5cGUuZ2V0U3JjID0gZnVuY3Rpb24gZ2V0U3JjICgpIHtcbiAgICByZXR1cm4gdGhpcy5pY29uSW1hZ2VfLmdldFNyYygpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKiBAYXBpXG4gICAqL1xuICBJY29uLnByb3RvdHlwZS5nZXRTaXplID0gZnVuY3Rpb24gZ2V0U2l6ZSAoKSB7XG4gICAgcmV0dXJuICF0aGlzLnNpemVfID8gdGhpcy5pY29uSW1hZ2VfLmdldFNpemUoKSA6IHRoaXMuc2l6ZV87XG4gIH07XG5cbiAgLyoqXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgSWNvbi5wcm90b3R5cGUubGlzdGVuSW1hZ2VDaGFuZ2UgPSBmdW5jdGlvbiBsaXN0ZW5JbWFnZUNoYW5nZSAobGlzdGVuZXIsIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gbGlzdGVuKHRoaXMuaWNvbkltYWdlXywgRXZlbnRUeXBlLkNIQU5HRSxcbiAgICAgIGxpc3RlbmVyLCB0aGlzQXJnKTtcbiAgfTtcblxuICAvKipcbiAgICogTG9hZCBub3QgeWV0IGxvYWRlZCBVUkkuXG4gICAqIFdoZW4gcmVuZGVyaW5nIGEgZmVhdHVyZSB3aXRoIGFuIGljb24gc3R5bGUsIHRoZSB2ZWN0b3IgcmVuZGVyZXIgd2lsbFxuICAgKiBhdXRvbWF0aWNhbGx5IGNhbGwgdGhpcyBtZXRob2QuIEhvd2V2ZXIsIHlvdSBtaWdodCB3YW50IHRvIGNhbGwgdGhpc1xuICAgKiBtZXRob2QgeW91cnNlbGYgZm9yIHByZWxvYWRpbmcgb3Igb3RoZXIgcHVycG9zZXMuXG4gICAqIEBvdmVycmlkZVxuICAgKiBAYXBpXG4gICAqL1xuICBJY29uLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gbG9hZCAoKSB7XG4gICAgdGhpcy5pY29uSW1hZ2VfLmxvYWQoKTtcbiAgfTtcblxuICAvKipcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBJY29uLnByb3RvdHlwZS51bmxpc3RlbkltYWdlQ2hhbmdlID0gZnVuY3Rpb24gdW5saXN0ZW5JbWFnZUNoYW5nZSAobGlzdGVuZXIsIHRoaXNBcmcpIHtcbiAgICB1bmxpc3Rlbih0aGlzLmljb25JbWFnZV8sIEV2ZW50VHlwZS5DSEFOR0UsXG4gICAgICBsaXN0ZW5lciwgdGhpc0FyZyk7XG4gIH07XG5cbiAgcmV0dXJuIEljb247XG59KEltYWdlU3R5bGUpKTtcblxuXG5leHBvcnQgZGVmYXVsdCBJY29uO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1JY29uLmpzLm1hcCJdLCJzb3VyY2VSb290IjoiIn0=