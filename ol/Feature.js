(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{11:function(t,e,n){"use strict";n.d(e,"b",function(){return o});var r=function(t){this.propagationStopped,this.type=t,this.target=null};function o(t){t.stopPropagation()}r.prototype.preventDefault=function(){this.propagationStopped=!0},r.prototype.stopPropagation=function(){this.propagationStopped=!0},e.a=r},12:function(t,e,n){"use strict";n.d(e,"b",function(){return h});var r=n(3),o=n(50),i=n(73),s=n(11),c=n(5),u=function(t){function e(e,n,r){t.call(this,e),this.key=n,this.oldValue=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(s.a),a=function(t){function e(e){t.call(this),Object(r.c)(this),this.values_={},void 0!==e&&this.setProperties(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return Object(c.a)({},this.values_)},e.prototype.notify=function(t,e){var n;n=h(t),this.dispatchEvent(new u(n,t,e)),n=o.a.PROPERTYCHANGE,this.dispatchEvent(new u(n,t,e))},e.prototype.set=function(t,e,n){if(n)this.values_[t]=e;else{var r=this.values_[t];this.values_[t]=e,r!==e&&this.notify(t,r)}},e.prototype.setProperties=function(t,e){for(var n in t)this.set(n,t[n],e)},e.prototype.unset=function(t,e){if(t in this.values_){var n=this.values_[t];delete this.values_[t],e||this.notify(t,n)}},e}(i.a),p={};function h(t){return p.hasOwnProperty(t)?p[t]:p[t]="change:"+t}e.a=a},2:function(t,e,n){"use strict";e.a={CHANGE:"change",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"}},3:function(t,e,n){"use strict";function r(){return function(){throw new Error("Unimplemented abstract method.")}()}n.d(e,"b",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"a",function(){return s});var o=0;function i(t){return t.ol_uid||(t.ol_uid=String(++o))}var s="5.3.1"},4:function(t,e,n){"use strict";n.d(e,"a",function(){return u}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return p}),n.d(e,"e",function(){return h}),n.d(e,"d",function(){return f});var r=n(5);function o(t,e,n,r){for(var o,i=0,s=t.length;i<s;++i)if((o=t[i]).listener===e&&o.bindTo===n)return r&&(o.deleteIndex=i),o}function i(t,e){var n=s(t);return n?n[e]:void 0}function s(t,e){var n=t.ol_lm;return!n&&e&&(n=t.ol_lm={}),n}function c(t,e){var n=i(t,e);if(n){for(var o=0,c=n.length;o<c;++o)t.removeEventListener(e,n[o].boundListener),Object(r.b)(n[o]);n.length=0;var u=s(t);u&&(delete u[e],0===Object.keys(u).length&&function(t){delete t.ol_lm}(t))}}function u(t,e,n,r,i){var c=s(t,!0),u=c[e];u||(u=c[e]=[]);var a=o(u,n,r,!1);return a?i||(a.callOnce=!1):(a={bindTo:r,callOnce:!!i,listener:n,target:t,type:e},t.addEventListener(e,function(t){var e=function(e){var n=t.listener,r=t.bindTo||t.target;return t.callOnce&&h(t),n.call(r,e)};return t.boundListener=e,e}(a)),u.push(a)),a}function a(t,e,n,r){return u(t,e,n,r,!0)}function p(t,e,n,r){var s=i(t,e);if(s){var c=o(s,n,r,!0);c&&h(c)}}function h(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var e=i(t.target,t.type);if(e){var n="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==n&&e.splice(n,1),0===e.length&&c(t.target,t.type)}Object(r.b)(t)}}function f(t){var e=s(t);if(e)for(var n in e)c(t,n)}},40:function(t,e,n){"use strict";var r=n(57),o=n(4),i=n(8),s=n(11),c=function(t){function e(){t.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addEventListener=function(t,e){var n=this.listeners_[t];n||(n=this.listeners_[t]=[]),-1===n.indexOf(e)&&n.push(e)},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new s.a(t):t,n=e.type;e.target=this;var r,o=this.listeners_[n];if(o){n in this.dispatching_||(this.dispatching_[n]=0,this.pendingRemovals_[n]=0),++this.dispatching_[n];for(var c=0,u=o.length;c<u;++c)if(!1===o[c].call(this,e)||e.propagationStopped){r=!1;break}if(--this.dispatching_[n],0===this.dispatching_[n]){var a=this.pendingRemovals_[n];for(delete this.pendingRemovals_[n];a--;)this.removeEventListener(n,i.c);delete this.dispatching_[n]}return r}},e.prototype.disposeInternal=function(){Object(o.d)(this)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var n=this.listeners_[t];if(n){var r=n.indexOf(e);t in this.pendingRemovals_?(n[r]=i.c,++this.pendingRemovals_[t]):(n.splice(r,1),0===n.length&&delete this.listeners_[t])}},e}(r.a);e.a=c},48:function(t,e,n){"use strict";n.r(e),n.d(e,"createStyleFunction",function(){return u});var r=n(9),o=n(4),i=n(2),s=n(12),c=function(t){function e(e){if(t.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,Object(o.a)(this,Object(s.b)(this.geometryName_),this.handleGeometryChanged_,this),e)if("function"==typeof e.getSimplifiedGeometry){var n=e;this.setGeometry(n)}else{var r=e;this.setProperties(r)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var n=this.getGeometry();n&&t.setGeometry(n.clone());var r=this.getStyle();return r&&t.setStyle(r),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Object(o.e)(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Object(o.a)(t,i.a.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?u(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){Object(o.c)(this,Object(s.b)(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,Object(o.a)(this,Object(s.b)(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},e}(s.a);function u(t){return"function"==typeof t?t:(Array.isArray(t)?e=t:(Object(r.a)("function"==typeof t.getZIndex,41),e=[t]),function(){return e});var e}e.default=c},5:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return i}),n.d(e,"d",function(){return s});var r="function"==typeof Object.assign?Object.assign:function(t,e){var n=arguments;if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),o=1,i=arguments.length;o<i;++o){var s=n[o];if(null!=s)for(var c in s)s.hasOwnProperty(c)&&(r[c]=s[c])}return r};function o(t){for(var e in t)delete t[e]}function i(t){var e=[];for(var n in t)e.push(t[n]);return e}function s(t){var e;for(e in t)return!1;return!e}},50:function(t,e,n){"use strict";e.a={PROPERTYCHANGE:"propertychange"}},57:function(t,e,n){"use strict";var r=function(){this.disposed_=!1};r.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},r.prototype.disposeInternal=function(){},e.a=r},67:function(t,e,n){"use strict";var r=n(3),o=function(t){function e(e){var n="Assertion failed. See https://openlayers.org/en/"+("latest"===r.a?r.a:"v"+r.a.split("-")[0])+"/doc/errors/#"+e+" for details.";t.call(this,n),this.code=e,this.name="AssertionError",this.message=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error);e.a=o},73:function(t,e,n){"use strict";var r=n(4),o=n(40),i=n(2),s=function(t){function e(){t.call(this),this.revision_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){++this.revision_,this.dispatchEvent(i.a.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var n=t.length,o=new Array(n),i=0;i<n;++i)o[i]=Object(r.a)(this,t[i],e);return o}return Object(r.a)(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var n=t.length,o=new Array(n),i=0;i<n;++i)o[i]=Object(r.b)(this,t[i],e);return o}return Object(r.b)(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var n=0,o=t.length;n<o;++n)Object(r.c)(this,t[n],e);else Object(r.c)(this,t,e)},e}(o.a);e.a=s},8:function(t,e,n){"use strict";function r(){return!0}function o(){return!1}function i(){}n.d(e,"b",function(){return r}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return i})},9:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(67);function o(t,e){if(!t)throw new r.a(e)}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL0V2ZW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9PYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2V2ZW50cy9FdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3V0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2V2ZW50cy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL1RhcmdldC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvRmVhdHVyZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvb2JqLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9PYmplY3RFdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL0Rpc3Bvc2FibGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL0Fzc2VydGlvbkVycm9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9PYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9mdW5jdGlvbnMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2Fzc2VydHMuanMiXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImQiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwic3RvcFByb3BhZ2F0aW9uIiwiRXZlbnQiLCJ0eXBlIiwidGhpcyIsInByb3BhZ2F0aW9uU3RvcHBlZCIsInRhcmdldCIsImV2dCIsInByb3RvdHlwZSIsInByZXZlbnREZWZhdWx0IiwiZ2V0Q2hhbmdlRXZlbnRUeXBlIiwiX3V0aWxfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyIsIl9PYmplY3RFdmVudFR5cGVfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyIsIl9PYnNlcnZhYmxlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18iLCJfZXZlbnRzX0V2ZW50X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18iLCJfb2JqX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18iLCJPYmplY3RFdmVudCIsImtleSIsIm9sZFZhbHVlIiwiY2FsbCIsIl9fcHJvdG9fXyIsIk9iamVjdCIsImNyZWF0ZSIsImNvbnN0cnVjdG9yIiwiQmFzZU9iamVjdCIsIk9ic2VydmFibGUiLCJvcHRfdmFsdWVzIiwidmFsdWVzXyIsInVuZGVmaW5lZCIsInNldFByb3BlcnRpZXMiLCJnZXQiLCJ2YWx1ZSIsImhhc093blByb3BlcnR5IiwiZ2V0S2V5cyIsImtleXMiLCJnZXRQcm9wZXJ0aWVzIiwibm90aWZ5IiwiZXZlbnRUeXBlIiwiZGlzcGF0Y2hFdmVudCIsIlBST1BFUlRZQ0hBTkdFIiwic2V0Iiwib3B0X3NpbGVudCIsInZhbHVlcyIsInVuc2V0IiwiY2hhbmdlRXZlbnRUeXBlQ2FjaGUiLCJDSEFOR0UiLCJDTEVBUiIsIkNPTlRFWFRNRU5VIiwiQ0xJQ0siLCJEQkxDTElDSyIsIkRSQUdFTlRFUiIsIkRSQUdPVkVSIiwiRFJPUCIsIkVSUk9SIiwiS0VZRE9XTiIsIktFWVBSRVNTIiwiTE9BRCIsIk1PVVNFRE9XTiIsIk1PVVNFTU9WRSIsIk1PVVNFT1VUIiwiTU9VU0VVUCIsIk1PVVNFV0hFRUwiLCJNU1BPSU5URVJET1dOIiwiUkVTSVpFIiwiVE9VQ0hTVEFSVCIsIlRPVUNITU9WRSIsIlRPVUNIRU5EIiwiV0hFRUwiLCJhYnN0cmFjdCIsIkVycm9yIiwiZ2V0VWlkIiwiVkVSU0lPTiIsInVpZENvdW50ZXJfIiwib2JqIiwib2xfdWlkIiwiU3RyaW5nIiwibGlzdGVuIiwibGlzdGVuT25jZSIsInVubGlzdGVuIiwidW5saXN0ZW5CeUtleSIsInVubGlzdGVuQWxsIiwiX29ial9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwiZmluZExpc3RlbmVyIiwibGlzdGVuZXJzIiwibGlzdGVuZXIiLCJvcHRfdGhpcyIsIm9wdF9zZXREZWxldGVJbmRleCIsImxpc3RlbmVyT2JqIiwiaSIsImlpIiwibGVuZ3RoIiwiYmluZFRvIiwiZGVsZXRlSW5kZXgiLCJnZXRMaXN0ZW5lcnMiLCJsaXN0ZW5lck1hcCIsImdldExpc3RlbmVyTWFwIiwib3B0X2NyZWF0ZSIsIm9sX2xtIiwicmVtb3ZlTGlzdGVuZXJzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImJvdW5kTGlzdGVuZXIiLCJyZW1vdmVMaXN0ZW5lck1hcCIsIm9wdF9vbmNlIiwiY2FsbE9uY2UiLCJhZGRFdmVudExpc3RlbmVyIiwiYmluZExpc3RlbmVyIiwicHVzaCIsImluZGV4T2YiLCJzcGxpY2UiLCJfRGlzcG9zYWJsZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwiX2V2ZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fIiwiX2Z1bmN0aW9uc19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fIiwiX0V2ZW50X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18iLCJUYXJnZXQiLCJEaXNwb3NhYmxlIiwicGVuZGluZ1JlbW92YWxzXyIsImRpc3BhdGNoaW5nXyIsImxpc3RlbmVyc18iLCJldmVudCIsInByb3BhZ2F0ZSIsInBlbmRpbmdSZW1vdmFscyIsImRpc3Bvc2VJbnRlcm5hbCIsImhhc0xpc3RlbmVyIiwib3B0X3R5cGUiLCJpbmRleCIsInIiLCJjcmVhdGVTdHlsZUZ1bmN0aW9uIiwiX2Fzc2VydHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyIsIl9ldmVudHNfRXZlbnRUeXBlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18iLCJfT2JqZWN0X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18iLCJGZWF0dXJlIiwib3B0X2dlb21ldHJ5T3JQcm9wZXJ0aWVzIiwiaWRfIiwiZ2VvbWV0cnlOYW1lXyIsInN0eWxlXyIsInN0eWxlRnVuY3Rpb25fIiwiZ2VvbWV0cnlDaGFuZ2VLZXlfIiwiaGFuZGxlR2VvbWV0cnlDaGFuZ2VkXyIsImdldFNpbXBsaWZpZWRHZW9tZXRyeSIsImdlb21ldHJ5Iiwic2V0R2VvbWV0cnkiLCJwcm9wZXJ0aWVzIiwiY2xvbmUiLCJzZXRHZW9tZXRyeU5hbWUiLCJnZXRHZW9tZXRyeU5hbWUiLCJnZXRHZW9tZXRyeSIsInN0eWxlIiwiZ2V0U3R5bGUiLCJzZXRTdHlsZSIsImdldElkIiwiZ2V0U3R5bGVGdW5jdGlvbiIsImhhbmRsZUdlb21ldHJ5Q2hhbmdlXyIsImNoYW5nZWQiLCJzZXRJZCIsImlkIiwibmFtZSIsIkFycmF5IiwiaXNBcnJheSIsInN0eWxlcyIsImdldFpJbmRleCIsImFzc2lnbiIsImNsZWFyIiwiZ2V0VmFsdWVzIiwiaXNFbXB0eSIsInZhcl9zb3VyY2VzIiwiYXJndW1lbnRzJDEiLCJhcmd1bWVudHMiLCJUeXBlRXJyb3IiLCJvdXRwdXQiLCJzb3VyY2UiLCJvYmplY3QiLCJwcm9wZXJ0eSIsImRpc3Bvc2VkXyIsImRpc3Bvc2UiLCJBc3NlcnRpb25FcnJvciIsImNvZGUiLCJtZXNzYWdlIiwic3BsaXQiLCJfZXZlbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18iLCJfZXZlbnRzX1RhcmdldF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fIiwiRXZlbnRUYXJnZXQiLCJyZXZpc2lvbl8iLCJnZXRSZXZpc2lvbiIsIm9uIiwibGVuIiwib25jZSIsInVuIiwiVFJVRSIsIkZBTFNFIiwiVk9JRCIsImFzc2VydCIsIl9Bc3NlcnRpb25FcnJvcl9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwiYXNzZXJ0aW9uIiwiZXJyb3JDb2RlIl0sIm1hcHBpbmdzIjoieUZBQUFBLEVBQUFDLEVBQUFDLEVBQUEsc0JBQUFDLElBY0EsSUFBQUMsRUFBQSxTQUFBQyxHQUtBQyxLQUFBQyxtQkFPQUQsS0FBQUQs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QUFqQixVQUFBa0wsR0FBQSxTQUFBdkwsRUFBQWlGLEdBQ0EsR0FBQXdFLE1BQUFDLFFBQUExSixHQUNBLFFBQUFxRixFQUFBLEVBQUFDLEVBQUF0RixFQUFBdUYsT0FBdUNGLEVBQUFDLElBQVFELEVBQ3ZDbkUsT0FBQTZKLEVBQUEsRUFBQTdKLENBQVFqQixLQUFBRCxFQUFBcUYsR0FBQUosUUFJVi9ELE9BQUE2SixFQUFBLEVBQUE3SixDQUFRakIsS0FBeUIsRUFBQWdGLElBSXZDM0QsRUFqR0EsQ0FrR0UwSixFQUFBLEdBb0JhbkwsRUFBQSxvQ0NoSVIsU0FBQTJMLElBQ1AsU0FPTyxTQUFBQyxJQUNQLFNBUU8sU0FBQUMsS0F6QlAvTCxFQUFBQyxFQUFBQyxFQUFBLHNCQUFBMkwsSUFBQTdMLEVBQUFDLEVBQUFDLEVBQUEsc0JBQUE0TCxJQUFBOUwsRUFBQUMsRUFBQUMsRUFBQSxzQkFBQTZMLG9DQ0FBL0wsRUFBQUMsRUFBQUMsRUFBQSxzQkFBQThMLElBQUEsSUFBQUMsRUFBQWpNLEVBQUEsSUFTTyxTQUFBZ00sRUFBQUUsRUFBQUMsR0FDUCxJQUFBRCxFQUNBLFVBQWNELEVBQUEsRUFBY0UiLCJmaWxlIjoib2wvRmVhdHVyZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQG1vZHVsZSBvbC9ldmVudHMvRXZlbnRcbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFN0cmlwcGVkIGRvd24gaW1wbGVtZW50YXRpb24gb2YgdGhlIFczQyBET00gTGV2ZWwgMiBFdmVudCBpbnRlcmZhY2UuXG4gKiBTZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0yLUV2ZW50cy9ldmVudHMuaHRtbCNFdmVudHMtaW50ZXJmYWNlLlxuICpcbiAqIFRoaXMgaW1wbGVtZW50YXRpb24gb25seSBwcm92aWRlcyBgdHlwZWAgYW5kIGB0YXJnZXRgIHByb3BlcnRpZXMsIGFuZFxuICogYHN0b3BQcm9wYWdhdGlvbmAgYW5kIGBwcmV2ZW50RGVmYXVsdGAgbWV0aG9kcy4gSXQgaXMgbWVhbnQgYXMgYmFzZSBjbGFzc1xuICogZm9yIGhpZ2hlciBsZXZlbCBldmVudHMgZGVmaW5lZCBpbiB0aGUgbGlicmFyeSwgYW5kIHdvcmtzIHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL1RhcmdldH5UYXJnZXR9LlxuICovXG52YXIgRXZlbnQgPSBmdW5jdGlvbiBFdmVudCh0eXBlKSB7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgdGhpcy5wcm9wYWdhdGlvblN0b3BwZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBldmVudCB0eXBlLlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKiBAYXBpXG4gICAqL1xuICB0aGlzLnR5cGUgPSB0eXBlO1xuXG4gIC8qKlxuICAgKiBUaGUgZXZlbnQgdGFyZ2V0LlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKiBAYXBpXG4gICAqL1xuICB0aGlzLnRhcmdldCA9IG51bGw7XG59O1xuXG4vKipcbiAqIFN0b3AgZXZlbnQgcHJvcGFnYXRpb24uXG4gKiBAYXBpXG4gKi9cbkV2ZW50LnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0ICgpIHtcbiAgdGhpcy5wcm9wYWdhdGlvblN0b3BwZWQgPSB0cnVlO1xufTtcblxuLyoqXG4gKiBTdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICogQGFwaVxuICovXG5FdmVudC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uID0gZnVuY3Rpb24gc3RvcFByb3BhZ2F0aW9uICgpIHtcbiAgdGhpcy5wcm9wYWdhdGlvblN0b3BwZWQgPSB0cnVlO1xufTtcblxuXG4vKipcbiAqIEBwYXJhbSB7RXZlbnR8aW1wb3J0KFwiLi9FdmVudC5qc1wiKS5kZWZhdWx0fSBldnQgRXZlbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0b3BQcm9wYWdhdGlvbihldnQpIHtcbiAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtFdmVudHxpbXBvcnQoXCIuL0V2ZW50LmpzXCIpLmRlZmF1bHR9IGV2dCBFdmVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJldmVudERlZmF1bHQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBFdmVudDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXZlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL09iamVjdFxuICovXG5pbXBvcnQge2dldFVpZH0gZnJvbSAnLi91dGlsLmpzJztcbmltcG9ydCBPYmplY3RFdmVudFR5cGUgZnJvbSAnLi9PYmplY3RFdmVudFR5cGUuanMnO1xuaW1wb3J0IE9ic2VydmFibGUgZnJvbSAnLi9PYnNlcnZhYmxlLmpzJztcbmltcG9ydCBFdmVudCBmcm9tICcuL2V2ZW50cy9FdmVudC5qcyc7XG5pbXBvcnQge2Fzc2lnbn0gZnJvbSAnLi9vYmouanMnO1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9PYmplY3R+QmFzZU9iamVjdH0gaW5zdGFuY2VzIGFyZSBpbnN0YW5jZXMgb2YgdGhpcyB0eXBlLlxuICovXG5leHBvcnQgdmFyIE9iamVjdEV2ZW50ID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoRXZlbnQpIHtcbiAgZnVuY3Rpb24gT2JqZWN0RXZlbnQodHlwZSwga2V5LCBvbGRWYWx1ZSkge1xuICAgIEV2ZW50LmNhbGwodGhpcywgdHlwZSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgd2hvc2UgdmFsdWUgaXMgY2hhbmdpbmcuXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5rZXkgPSBrZXk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgb2xkIHZhbHVlLiBUbyBnZXQgdGhlIG5ldyB2YWx1ZSB1c2UgYGUudGFyZ2V0LmdldChlLmtleSlgIHdoZXJlXG4gICAgICogYGVgIGlzIHRoZSBldmVudCBvYmplY3QuXG4gICAgICogQHR5cGUgeyp9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMub2xkVmFsdWUgPSBvbGRWYWx1ZTtcblxuICB9XG5cbiAgaWYgKCBFdmVudCApIE9iamVjdEV2ZW50Ll9fcHJvdG9fXyA9IEV2ZW50O1xuICBPYmplY3RFdmVudC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBFdmVudCAmJiBFdmVudC5wcm90b3R5cGUgKTtcbiAgT2JqZWN0RXZlbnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gT2JqZWN0RXZlbnQ7XG5cbiAgcmV0dXJuIE9iamVjdEV2ZW50O1xufShFdmVudCkpO1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogTW9zdCBub24tdHJpdmlhbCBjbGFzc2VzIGluaGVyaXQgZnJvbSB0aGlzLlxuICpcbiAqIFRoaXMgZXh0ZW5kcyB7QGxpbmsgbW9kdWxlOm9sL09ic2VydmFibGV9IHdpdGggb2JzZXJ2YWJsZVxuICogcHJvcGVydGllcywgd2hlcmUgZWFjaCBwcm9wZXJ0eSBpcyBvYnNlcnZhYmxlIGFzIHdlbGwgYXMgdGhlIG9iamVjdCBhcyBhXG4gKiB3aG9sZS5cbiAqXG4gKiBDbGFzc2VzIHRoYXQgaW5oZXJpdCBmcm9tIHRoaXMgaGF2ZSBwcmUtZGVmaW5lZCBwcm9wZXJ0aWVzLCB0byB3aGljaCB5b3UgY2FuXG4gKiBhZGQgeW91ciBvd25zLiBUaGUgcHJlLWRlZmluZWQgcHJvcGVydGllcyBhcmUgbGlzdGVkIGluIHRoaXMgZG9jdW1lbnRhdGlvbiBhc1xuICogJ09ic2VydmFibGUgUHJvcGVydGllcycsIGFuZCBoYXZlIHRoZWlyIG93biBhY2Nlc3NvcnM7IGZvciBleGFtcGxlLFxuICoge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwfSBoYXMgYSBgdGFyZ2V0YCBwcm9wZXJ0eSwgYWNjZXNzZWQgd2l0aFxuICogYGdldFRhcmdldCgpYCBhbmQgY2hhbmdlZCB3aXRoIGBzZXRUYXJnZXQoKWAuIE5vdCBhbGwgcHJvcGVydGllcyBhcmUgaG93ZXZlclxuICogc2V0dGFibGUuIFRoZXJlIGFyZSBhbHNvIGdlbmVyYWwtcHVycG9zZSBhY2Nlc3NvcnMgYGdldCgpYCBhbmQgYHNldCgpYC4gRm9yXG4gKiBleGFtcGxlLCBgZ2V0KCd0YXJnZXQnKWAgaXMgZXF1aXZhbGVudCB0byBgZ2V0VGFyZ2V0KClgLlxuICpcbiAqIFRoZSBgc2V0YCBhY2Nlc3NvcnMgdHJpZ2dlciBhIGNoYW5nZSBldmVudCwgYW5kIHlvdSBjYW4gbW9uaXRvciB0aGlzIGJ5XG4gKiByZWdpc3RlcmluZyBhIGxpc3RlbmVyLiBGb3IgZXhhbXBsZSwge0BsaW5rIG1vZHVsZTpvbC9WaWV3flZpZXd9IGhhcyBhXG4gKiBgY2VudGVyYCBwcm9wZXJ0eSwgc28gYHZpZXcub24oJ2NoYW5nZTpjZW50ZXInLCBmdW5jdGlvbihldnQpIHsuLi59KTtgIHdvdWxkXG4gKiBjYWxsIHRoZSBmdW5jdGlvbiB3aGVuZXZlciB0aGUgdmFsdWUgb2YgdGhlIGNlbnRlciBwcm9wZXJ0eSBjaGFuZ2VzLiBXaXRoaW5cbiAqIHRoZSBmdW5jdGlvbiwgYGV2dC50YXJnZXRgIHdvdWxkIGJlIHRoZSB2aWV3LCBzbyBgZXZ0LnRhcmdldC5nZXRDZW50ZXIoKWBcbiAqIHdvdWxkIHJldHVybiB0aGUgbmV3IGNlbnRlci5cbiAqXG4gKiBZb3UgY2FuIGFkZCB5b3VyIG93biBvYnNlcnZhYmxlIHByb3BlcnRpZXMgd2l0aFxuICogYG9iamVjdC5zZXQoJ3Byb3AnLCAndmFsdWUnKWAsIGFuZCByZXRyaWV2ZSB0aGF0IHdpdGggYG9iamVjdC5nZXQoJ3Byb3AnKWAuXG4gKiBZb3UgY2FuIGxpc3RlbiBmb3IgY2hhbmdlcyBvbiB0aGF0IHByb3BlcnR5IHZhbHVlIHdpdGhcbiAqIGBvYmplY3Qub24oJ2NoYW5nZTpwcm9wJywgbGlzdGVuZXIpYC4gWW91IGNhbiBnZXQgYSBsaXN0IG9mIGFsbFxuICogcHJvcGVydGllcyB3aXRoIHtAbGluayBtb2R1bGU6b2wvT2JqZWN0fkJhc2VPYmplY3QjZ2V0UHJvcGVydGllc30uXG4gKlxuICogTm90ZSB0aGF0IHRoZSBvYnNlcnZhYmxlIHByb3BlcnRpZXMgYXJlIHNlcGFyYXRlIGZyb20gc3RhbmRhcmQgSlMgcHJvcGVydGllcy5cbiAqIFlvdSBjYW4sIGZvciBleGFtcGxlLCBnaXZlIHlvdXIgbWFwIG9iamVjdCBhIHRpdGxlIHdpdGhcbiAqIGBtYXAudGl0bGU9J05ldyB0aXRsZSdgIGFuZCB3aXRoIGBtYXAuc2V0KCd0aXRsZScsICdBbm90aGVyIHRpdGxlJylgLiBUaGVcbiAqIGZpcnN0IHdpbGwgYmUgYSBgaGFzT3duUHJvcGVydHlgOyB0aGUgc2Vjb25kIHdpbGwgYXBwZWFyIGluXG4gKiBgZ2V0UHJvcGVydGllcygpYC4gT25seSB0aGUgc2Vjb25kIGlzIG9ic2VydmFibGUuXG4gKlxuICogUHJvcGVydGllcyBjYW4gYmUgZGVsZXRlZCBieSB1c2luZyB0aGUgdW5zZXQgbWV0aG9kLiBFLmcuXG4gKiBvYmplY3QudW5zZXQoJ2ZvbycpLlxuICpcbiAqIEBmaXJlcyBPYmplY3RFdmVudFxuICogQGFwaVxuICovXG52YXIgQmFzZU9iamVjdCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKE9ic2VydmFibGUpIHtcbiAgZnVuY3Rpb24gQmFzZU9iamVjdChvcHRfdmFsdWVzKSB7XG4gICAgT2JzZXJ2YWJsZS5jYWxsKHRoaXMpO1xuXG4gICAgLy8gQ2FsbCB7QGxpbmsgbW9kdWxlOm9sL3V0aWx+Z2V0VWlkfSB0byBlbnN1cmUgdGhhdCB0aGUgb3JkZXIgb2Ygb2JqZWN0cycgaWRzIGlzXG4gICAgLy8gdGhlIHNhbWUgYXMgdGhlIG9yZGVyIGluIHdoaWNoIHRoZXkgd2VyZSBjcmVhdGVkLiAgVGhpcyBhbHNvIGhlbHBzIHRvXG4gICAgLy8gZW5zdXJlIHRoYXQgb2JqZWN0IHByb3BlcnRpZXMgYXJlIGFsd2F5cyBhZGRlZCBpbiB0aGUgc2FtZSBvcmRlciwgd2hpY2hcbiAgICAvLyBoZWxwcyBtYW55IEphdmFTY3JpcHQgZW5naW5lcyBnZW5lcmF0ZSBmYXN0ZXIgY29kZS5cbiAgICBnZXRVaWQodGhpcyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgKj59XG4gICAgICovXG4gICAgdGhpcy52YWx1ZXNfID0ge307XG5cbiAgICBpZiAob3B0X3ZhbHVlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnNldFByb3BlcnRpZXMob3B0X3ZhbHVlcyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKCBPYnNlcnZhYmxlICkgQmFzZU9iamVjdC5fX3Byb3RvX18gPSBPYnNlcnZhYmxlO1xuICBCYXNlT2JqZWN0LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIE9ic2VydmFibGUgJiYgT2JzZXJ2YWJsZS5wcm90b3R5cGUgKTtcbiAgQmFzZU9iamVjdC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCYXNlT2JqZWN0O1xuXG4gIC8qKlxuICAgKiBHZXRzIGEgdmFsdWUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gICAqIEByZXR1cm4geyp9IFZhbHVlLlxuICAgKiBAYXBpXG4gICAqL1xuICBCYXNlT2JqZWN0LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiBnZXQgKGtleSkge1xuICAgIHZhciB2YWx1ZTtcbiAgICBpZiAodGhpcy52YWx1ZXNfLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIHZhbHVlID0gdGhpcy52YWx1ZXNfW2tleV07XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IGEgbGlzdCBvZiBvYmplY3QgcHJvcGVydHkgbmFtZXMuXG4gICAqIEByZXR1cm4ge0FycmF5PHN0cmluZz59IExpc3Qgb2YgcHJvcGVydHkgbmFtZXMuXG4gICAqIEBhcGlcbiAgICovXG4gIEJhc2VPYmplY3QucHJvdG90eXBlLmdldEtleXMgPSBmdW5jdGlvbiBnZXRLZXlzICgpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy52YWx1ZXNfKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IGFuIG9iamVjdCBvZiBhbGwgcHJvcGVydHkgbmFtZXMgYW5kIHZhbHVlcy5cbiAgICogQHJldHVybiB7T2JqZWN0PHN0cmluZywgKj59IE9iamVjdC5cbiAgICogQGFwaVxuICAgKi9cbiAgQmFzZU9iamVjdC5wcm90b3R5cGUuZ2V0UHJvcGVydGllcyA9IGZ1bmN0aW9uIGdldFByb3BlcnRpZXMgKCkge1xuICAgIHJldHVybiBhc3NpZ24oe30sIHRoaXMudmFsdWVzXyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gICAqIEBwYXJhbSB7Kn0gb2xkVmFsdWUgT2xkIHZhbHVlLlxuICAgKi9cbiAgQmFzZU9iamVjdC5wcm90b3R5cGUubm90aWZ5ID0gZnVuY3Rpb24gbm90aWZ5IChrZXksIG9sZFZhbHVlKSB7XG4gICAgdmFyIGV2ZW50VHlwZTtcbiAgICBldmVudFR5cGUgPSBnZXRDaGFuZ2VFdmVudFR5cGUoa2V5KTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9iamVjdEV2ZW50KGV2ZW50VHlwZSwga2V5LCBvbGRWYWx1ZSkpO1xuICAgIGV2ZW50VHlwZSA9IE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9iamVjdEV2ZW50KGV2ZW50VHlwZSwga2V5LCBvbGRWYWx1ZSkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIGEgdmFsdWUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9zaWxlbnQgVXBkYXRlIHdpdGhvdXQgdHJpZ2dlcmluZyBhbiBldmVudC5cbiAgICogQGFwaVxuICAgKi9cbiAgQmFzZU9iamVjdC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gc2V0IChrZXksIHZhbHVlLCBvcHRfc2lsZW50KSB7XG4gICAgaWYgKG9wdF9zaWxlbnQpIHtcbiAgICAgIHRoaXMudmFsdWVzX1trZXldID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWVzX1trZXldO1xuICAgICAgdGhpcy52YWx1ZXNfW2tleV0gPSB2YWx1ZTtcbiAgICAgIGlmIChvbGRWYWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgdGhpcy5ub3RpZnkoa2V5LCBvbGRWYWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIGEgY29sbGVjdGlvbiBvZiBrZXktdmFsdWUgcGFpcnMuICBOb3RlIHRoYXQgdGhpcyBjaGFuZ2VzIGFueSBleGlzdGluZ1xuICAgKiBwcm9wZXJ0aWVzIGFuZCBhZGRzIG5ldyBvbmVzIChpdCBkb2VzIG5vdCByZW1vdmUgYW55IGV4aXN0aW5nIHByb3BlcnRpZXMpLlxuICAgKiBAcGFyYW0ge09iamVjdDxzdHJpbmcsICo+fSB2YWx1ZXMgVmFsdWVzLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfc2lsZW50IFVwZGF0ZSB3aXRob3V0IHRyaWdnZXJpbmcgYW4gZXZlbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIEJhc2VPYmplY3QucHJvdG90eXBlLnNldFByb3BlcnRpZXMgPSBmdW5jdGlvbiBzZXRQcm9wZXJ0aWVzICh2YWx1ZXMsIG9wdF9zaWxlbnQpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWVzKSB7XG4gICAgICB0aGlzLnNldChrZXksIHZhbHVlc1trZXldLCBvcHRfc2lsZW50KTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFVuc2V0cyBhIHByb3BlcnR5LlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleSBuYW1lLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfc2lsZW50IFVuc2V0IHdpdGhvdXQgdHJpZ2dlcmluZyBhbiBldmVudC5cbiAgICogQGFwaVxuICAgKi9cbiAgQmFzZU9iamVjdC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiB1bnNldCAoa2V5LCBvcHRfc2lsZW50KSB7XG4gICAgaWYgKGtleSBpbiB0aGlzLnZhbHVlc18pIHtcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWVzX1trZXldO1xuICAgICAgZGVsZXRlIHRoaXMudmFsdWVzX1trZXldO1xuICAgICAgaWYgKCFvcHRfc2lsZW50KSB7XG4gICAgICAgIHRoaXMubm90aWZ5KGtleSwgb2xkVmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gQmFzZU9iamVjdDtcbn0oT2JzZXJ2YWJsZSkpO1xuXG5cbi8qKlxuICogQHR5cGUge09iamVjdDxzdHJpbmcsIHN0cmluZz59XG4gKi9cbnZhciBjaGFuZ2VFdmVudFR5cGVDYWNoZSA9IHt9O1xuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkgbmFtZS5cbiAqIEByZXR1cm4ge3N0cmluZ30gQ2hhbmdlIG5hbWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDaGFuZ2VFdmVudFR5cGUoa2V5KSB7XG4gIHJldHVybiBjaGFuZ2VFdmVudFR5cGVDYWNoZS5oYXNPd25Qcm9wZXJ0eShrZXkpID9cbiAgICBjaGFuZ2VFdmVudFR5cGVDYWNoZVtrZXldIDpcbiAgICAoY2hhbmdlRXZlbnRUeXBlQ2FjaGVba2V5XSA9ICdjaGFuZ2U6JyArIGtleSk7XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgQmFzZU9iamVjdDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T2JqZWN0LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9ldmVudHMvRXZlbnRUeXBlXG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICogQGNvbnN0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgLyoqXG4gICAqIEdlbmVyaWMgY2hhbmdlIGV2ZW50LiBUcmlnZ2VyZWQgd2hlbiB0aGUgcmV2aXNpb24gY291bnRlciBpcyBpbmNyZWFzZWQuXG4gICAqIEBldmVudCBtb2R1bGU6b2wvZXZlbnRzL0V2ZW50fkV2ZW50I2NoYW5nZVxuICAgKiBAYXBpXG4gICAqL1xuICBDSEFOR0U6ICdjaGFuZ2UnLFxuXG4gIENMRUFSOiAnY2xlYXInLFxuICBDT05URVhUTUVOVTogJ2NvbnRleHRtZW51JyxcbiAgQ0xJQ0s6ICdjbGljaycsXG4gIERCTENMSUNLOiAnZGJsY2xpY2snLFxuICBEUkFHRU5URVI6ICdkcmFnZW50ZXInLFxuICBEUkFHT1ZFUjogJ2RyYWdvdmVyJyxcbiAgRFJPUDogJ2Ryb3AnLFxuICBFUlJPUjogJ2Vycm9yJyxcbiAgS0VZRE9XTjogJ2tleWRvd24nLFxuICBLRVlQUkVTUzogJ2tleXByZXNzJyxcbiAgTE9BRDogJ2xvYWQnLFxuICBNT1VTRURPV046ICdtb3VzZWRvd24nLFxuICBNT1VTRU1PVkU6ICdtb3VzZW1vdmUnLFxuICBNT1VTRU9VVDogJ21vdXNlb3V0JyxcbiAgTU9VU0VVUDogJ21vdXNldXAnLFxuICBNT1VTRVdIRUVMOiAnbW91c2V3aGVlbCcsXG4gIE1TUE9JTlRFUkRPV046ICdNU1BvaW50ZXJEb3duJyxcbiAgUkVTSVpFOiAncmVzaXplJyxcbiAgVE9VQ0hTVEFSVDogJ3RvdWNoc3RhcnQnLFxuICBUT1VDSE1PVkU6ICd0b3VjaG1vdmUnLFxuICBUT1VDSEVORDogJ3RvdWNoZW5kJyxcbiAgV0hFRUw6ICd3aGVlbCdcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV2ZW50VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvdXRpbFxuICovXG5cbi8qKlxuICogQHJldHVybiB7P30gQW55IHJldHVybi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFic3RyYWN0KCkge1xuICByZXR1cm4gLyoqIEB0eXBlIHs/fSAqLyAoKGZ1bmN0aW9uKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignVW5pbXBsZW1lbnRlZCBhYnN0cmFjdCBtZXRob2QuJyk7XG4gIH0pKCkpO1xufVxuXG4vKipcbiAqIEluaGVyaXQgdGhlIHByb3RvdHlwZSBtZXRob2RzIGZyb20gb25lIGNvbnN0cnVjdG9yIGludG8gYW5vdGhlci5cbiAqXG4gKiBVc2FnZTpcbiAqXG4gKiAgICAgZnVuY3Rpb24gUGFyZW50Q2xhc3MoYSwgYikgeyB9XG4gKiAgICAgUGFyZW50Q2xhc3MucHJvdG90eXBlLmZvbyA9IGZ1bmN0aW9uKGEpIHsgfVxuICpcbiAqICAgICBmdW5jdGlvbiBDaGlsZENsYXNzKGEsIGIsIGMpIHtcbiAqICAgICAgIC8vIENhbGwgcGFyZW50IGNvbnN0cnVjdG9yXG4gKiAgICAgICBQYXJlbnRDbGFzcy5jYWxsKHRoaXMsIGEsIGIpO1xuICogICAgIH1cbiAqICAgICBpbmhlcml0cyhDaGlsZENsYXNzLCBQYXJlbnRDbGFzcyk7XG4gKlxuICogICAgIHZhciBjaGlsZCA9IG5ldyBDaGlsZENsYXNzKCdhJywgJ2InLCAnc2VlJyk7XG4gKiAgICAgY2hpbGQuZm9vKCk7IC8vIFRoaXMgd29ya3MuXG4gKlxuICogQHBhcmFtIHshRnVuY3Rpb259IGNoaWxkQ3RvciBDaGlsZCBjb25zdHJ1Y3Rvci5cbiAqIEBwYXJhbSB7IUZ1bmN0aW9ufSBwYXJlbnRDdG9yIFBhcmVudCBjb25zdHJ1Y3Rvci5cbiAqIEBmdW5jdGlvbiBtb2R1bGU6b2wuaW5oZXJpdHNcbiAqIEBkZXByZWNhdGVkXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmhlcml0cyhjaGlsZEN0b3IsIHBhcmVudEN0b3IpIHtcbiAgY2hpbGRDdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUocGFyZW50Q3Rvci5wcm90b3R5cGUpO1xuICBjaGlsZEN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY2hpbGRDdG9yO1xufVxuXG4vKipcbiAqIENvdW50ZXIgZm9yIGdldFVpZC5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgdWlkQ291bnRlcl8gPSAwO1xuXG4vKipcbiAqIEdldHMgYSB1bmlxdWUgSUQgZm9yIGFuIG9iamVjdC4gVGhpcyBtdXRhdGVzIHRoZSBvYmplY3Qgc28gdGhhdCBmdXJ0aGVyIGNhbGxzXG4gKiB3aXRoIHRoZSBzYW1lIG9iamVjdCBhcyBhIHBhcmFtZXRlciByZXR1cm5zIHRoZSBzYW1lIHZhbHVlLiBVbmlxdWUgSURzIGFyZSBnZW5lcmF0ZWRcbiAqIGFzIGEgc3RyaWN0bHkgaW5jcmVhc2luZyBzZXF1ZW5jZS4gQWRhcHRlZCBmcm9tIGdvb2cuZ2V0VWlkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBnZXQgdGhlIHVuaXF1ZSBJRCBmb3IuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB1bmlxdWUgSUQgZm9yIHRoZSBvYmplY3QuXG4gKiBAZnVuY3Rpb24gbW9kdWxlOm9sLmdldFVpZFxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VWlkKG9iaikge1xuICByZXR1cm4gb2JqLm9sX3VpZCB8fCAob2JqLm9sX3VpZCA9IFN0cmluZygrK3VpZENvdW50ZXJfKSk7XG59XG5cbi8qKlxuICogT3BlbkxheWVycyB2ZXJzaW9uLlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBWRVJTSU9OID0gJzUuMy4xJztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXZlbnRzXG4gKi9cbmltcG9ydCB7Y2xlYXJ9IGZyb20gJy4vb2JqLmpzJztcblxuXG4vKipcbiAqIEtleSB0byB1c2Ugd2l0aCB7QGxpbmsgbW9kdWxlOm9sL09ic2VydmFibGV+T2JzZXJ2YWJsZSN1bkJ5S2V5fS5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IEV2ZW50c0tleVxuICogQHByb3BlcnR5IHtPYmplY3R9IFtiaW5kVG9dXG4gKiBAcHJvcGVydHkge0xpc3RlbmVyRnVuY3Rpb259IFtib3VuZExpc3RlbmVyXVxuICogQHByb3BlcnR5IHtib29sZWFufSBjYWxsT25jZVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkZWxldGVJbmRleF1cbiAqIEBwcm9wZXJ0eSB7TGlzdGVuZXJGdW5jdGlvbn0gbGlzdGVuZXJcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9ldmVudHMvVGFyZ2V0LmpzXCIpLkV2ZW50VGFyZ2V0TGlrZX0gdGFyZ2V0XG4gKiBAcHJvcGVydHkge3N0cmluZ30gdHlwZVxuICogQGFwaVxuICovXG5cblxuLyoqXG4gKiBMaXN0ZW5lciBmdW5jdGlvbi4gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCBhbiBldmVudCBvYmplY3QgYXMgYXJndW1lbnQuXG4gKiBXaGVuIHRoZSBmdW5jdGlvbiByZXR1cm5zIGBmYWxzZWAsIGV2ZW50IHByb3BhZ2F0aW9uIHdpbGwgc3RvcC5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKEV2ZW50fGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQpKTogKHZvaWR8Ym9vbGVhbil9IExpc3RlbmVyRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xuXG5cbi8qKlxuICogQHBhcmFtIHtFdmVudHNLZXl9IGxpc3RlbmVyT2JqIExpc3RlbmVyIG9iamVjdC5cbiAqIEByZXR1cm4ge0xpc3RlbmVyRnVuY3Rpb259IEJvdW5kIGxpc3RlbmVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYmluZExpc3RlbmVyKGxpc3RlbmVyT2JqKSB7XG4gIHZhciBib3VuZExpc3RlbmVyID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgdmFyIGxpc3RlbmVyID0gbGlzdGVuZXJPYmoubGlzdGVuZXI7XG4gICAgdmFyIGJpbmRUbyA9IGxpc3RlbmVyT2JqLmJpbmRUbyB8fCBsaXN0ZW5lck9iai50YXJnZXQ7XG4gICAgaWYgKGxpc3RlbmVyT2JqLmNhbGxPbmNlKSB7XG4gICAgICB1bmxpc3RlbkJ5S2V5KGxpc3RlbmVyT2JqKTtcbiAgICB9XG4gICAgcmV0dXJuIGxpc3RlbmVyLmNhbGwoYmluZFRvLCBldnQpO1xuICB9O1xuICBsaXN0ZW5lck9iai5ib3VuZExpc3RlbmVyID0gYm91bmRMaXN0ZW5lcjtcbiAgcmV0dXJuIGJvdW5kTGlzdGVuZXI7XG59XG5cblxuLyoqXG4gKiBGaW5kcyB0aGUgbWF0Y2hpbmcge0BsaW5rIG1vZHVsZTpvbC9ldmVudHN+RXZlbnRzS2V5fSBpbiB0aGUgZ2l2ZW4gbGlzdGVuZXJcbiAqIGFycmF5LlxuICpcbiAqIEBwYXJhbSB7IUFycmF5PCFFdmVudHNLZXk+fSBsaXN0ZW5lcnMgQXJyYXkgb2YgbGlzdGVuZXJzLlxuICogQHBhcmFtIHshRnVuY3Rpb259IGxpc3RlbmVyIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0X3RoaXMgVGhlIGB0aGlzYCB2YWx1ZSBpbnNpZGUgdGhlIGxpc3RlbmVyLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3NldERlbGV0ZUluZGV4IFNldCB0aGUgZGVsZXRlSW5kZXggb24gdGhlIG1hdGNoaW5nXG4gKiAgICAgbGlzdGVuZXIsIGZvciB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50c351bmxpc3RlbkJ5S2V5fS5cbiAqIEByZXR1cm4ge0V2ZW50c0tleXx1bmRlZmluZWR9IFRoZSBtYXRjaGluZyBsaXN0ZW5lciBvYmplY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kTGlzdGVuZXIobGlzdGVuZXJzLCBsaXN0ZW5lciwgb3B0X3RoaXMsIG9wdF9zZXREZWxldGVJbmRleCkge1xuICB2YXIgbGlzdGVuZXJPYmo7XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgbGlzdGVuZXJPYmogPSBsaXN0ZW5lcnNbaV07XG4gICAgaWYgKGxpc3RlbmVyT2JqLmxpc3RlbmVyID09PSBsaXN0ZW5lciAmJlxuICAgICAgICBsaXN0ZW5lck9iai5iaW5kVG8gPT09IG9wdF90aGlzKSB7XG4gICAgICBpZiAob3B0X3NldERlbGV0ZUluZGV4KSB7XG4gICAgICAgIGxpc3RlbmVyT2JqLmRlbGV0ZUluZGV4ID0gaTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBsaXN0ZW5lck9iajtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMvVGFyZ2V0LmpzXCIpLkV2ZW50VGFyZ2V0TGlrZX0gdGFyZ2V0IFRhcmdldC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUuXG4gKiBAcmV0dXJuIHtBcnJheTxFdmVudHNLZXk+fHVuZGVmaW5lZH0gTGlzdGVuZXJzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGlzdGVuZXJzKHRhcmdldCwgdHlwZSkge1xuICB2YXIgbGlzdGVuZXJNYXAgPSBnZXRMaXN0ZW5lck1hcCh0YXJnZXQpO1xuICByZXR1cm4gbGlzdGVuZXJNYXAgPyBsaXN0ZW5lck1hcFt0eXBlXSA6IHVuZGVmaW5lZDtcbn1cblxuXG4vKipcbiAqIEdldCB0aGUgbG9va3VwIG9mIGxpc3RlbmVycy5cbiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQgVGFyZ2V0LlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2NyZWF0ZSBJZiBhIG1hcCBzaG91bGQgYmUgY3JlYXRlZCBpZiBpdCBkb2Vzbid0IGV4aXN0LlxuICogQHJldHVybiB7IU9iamVjdDxzdHJpbmcsIEFycmF5PEV2ZW50c0tleT4+fSBNYXAgb2ZcbiAqICAgICBsaXN0ZW5lcnMgYnkgZXZlbnQgdHlwZS5cbiAqL1xuZnVuY3Rpb24gZ2V0TGlzdGVuZXJNYXAodGFyZ2V0LCBvcHRfY3JlYXRlKSB7XG4gIHZhciBsaXN0ZW5lck1hcCA9IHRhcmdldC5vbF9sbTtcbiAgaWYgKCFsaXN0ZW5lck1hcCAmJiBvcHRfY3JlYXRlKSB7XG4gICAgbGlzdGVuZXJNYXAgPSB0YXJnZXQub2xfbG0gPSB7fTtcbiAgfVxuICByZXR1cm4gbGlzdGVuZXJNYXA7XG59XG5cblxuLyoqXG4gKiBSZW1vdmUgdGhlIGxpc3RlbmVyIG1hcCBmcm9tIGEgdGFyZ2V0LlxuICogQHBhcmFtIHtPYmplY3R9IHRhcmdldCBUYXJnZXQuXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyTWFwKHRhcmdldCkge1xuICBkZWxldGUgdGFyZ2V0Lm9sX2xtO1xufVxuXG5cbi8qKlxuICogQ2xlYW4gdXAgYWxsIGxpc3RlbmVyIG9iamVjdHMgb2YgdGhlIGdpdmVuIHR5cGUuICBBbGwgcHJvcGVydGllcyBvbiB0aGVcbiAqIGxpc3RlbmVyIG9iamVjdHMgd2lsbCBiZSByZW1vdmVkLCBhbmQgaWYgbm8gbGlzdGVuZXJzIHJlbWFpbiBpbiB0aGUgbGlzdGVuZXJcbiAqIG1hcCwgaXQgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIHRhcmdldC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMvVGFyZ2V0LmpzXCIpLkV2ZW50VGFyZ2V0TGlrZX0gdGFyZ2V0IFRhcmdldC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUuXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVycyh0YXJnZXQsIHR5cGUpIHtcbiAgdmFyIGxpc3RlbmVycyA9IGdldExpc3RlbmVycyh0YXJnZXQsIHR5cGUpO1xuICBpZiAobGlzdGVuZXJzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbGlzdGVuZXJzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9ldmVudHMvVGFyZ2V0LmpzXCIpLmRlZmF1bHR9ICovICh0YXJnZXQpLlxuICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyc1tpXS5ib3VuZExpc3RlbmVyKTtcbiAgICAgIGNsZWFyKGxpc3RlbmVyc1tpXSk7XG4gICAgfVxuICAgIGxpc3RlbmVycy5sZW5ndGggPSAwO1xuICAgIHZhciBsaXN0ZW5lck1hcCA9IGdldExpc3RlbmVyTWFwKHRhcmdldCk7XG4gICAgaWYgKGxpc3RlbmVyTWFwKSB7XG4gICAgICBkZWxldGUgbGlzdGVuZXJNYXBbdHlwZV07XG4gICAgICBpZiAoT2JqZWN0LmtleXMobGlzdGVuZXJNYXApLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZW1vdmVMaXN0ZW5lck1hcCh0YXJnZXQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5cbi8qKlxuICogUmVnaXN0ZXJzIGFuIGV2ZW50IGxpc3RlbmVyIG9uIGFuIGV2ZW50IHRhcmdldC4gSW5zcGlyZWQgYnlcbiAqIGh0dHBzOi8vZ29vZ2xlLmdpdGh1Yi5pby9jbG9zdXJlLWxpYnJhcnkvYXBpL3NvdXJjZS9jbG9zdXJlL2dvb2cvZXZlbnRzL2V2ZW50cy5qcy5zcmMuaHRtbFxuICpcbiAqIFRoaXMgZnVuY3Rpb24gZWZmaWNpZW50bHkgYmluZHMgYSBgbGlzdGVuZXJgIHRvIGEgYHRoaXNgIG9iamVjdCwgYW5kIHJldHVybnNcbiAqIGEga2V5IGZvciB1c2Ugd2l0aCB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50c351bmxpc3RlbkJ5S2V5fS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXZlbnRzL1RhcmdldC5qc1wiKS5FdmVudFRhcmdldExpa2V9IHRhcmdldCBFdmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBFdmVudCB0eXBlLlxuICogQHBhcmFtIHtMaXN0ZW5lckZ1bmN0aW9ufSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0X3RoaXMgT2JqZWN0IHJlZmVyZW5jZWQgYnkgdGhlIGB0aGlzYCBrZXl3b3JkIGluIHRoZVxuICogICAgIGxpc3RlbmVyLiBEZWZhdWx0IGlzIHRoZSBgdGFyZ2V0YC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9vbmNlIElmIHRydWUsIGFkZCB0aGUgbGlzdGVuZXIgYXMgb25lLW9mZiBsaXN0ZW5lci5cbiAqIEByZXR1cm4ge0V2ZW50c0tleX0gVW5pcXVlIGtleSBmb3IgdGhlIGxpc3RlbmVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIG9wdF90aGlzLCBvcHRfb25jZSkge1xuICB2YXIgbGlzdGVuZXJNYXAgPSBnZXRMaXN0ZW5lck1hcCh0YXJnZXQsIHRydWUpO1xuICB2YXIgbGlzdGVuZXJzID0gbGlzdGVuZXJNYXBbdHlwZV07XG4gIGlmICghbGlzdGVuZXJzKSB7XG4gICAgbGlzdGVuZXJzID0gbGlzdGVuZXJNYXBbdHlwZV0gPSBbXTtcbiAgfVxuICB2YXIgbGlzdGVuZXJPYmogPSBmaW5kTGlzdGVuZXIobGlzdGVuZXJzLCBsaXN0ZW5lciwgb3B0X3RoaXMsIGZhbHNlKTtcbiAgaWYgKGxpc3RlbmVyT2JqKSB7XG4gICAgaWYgKCFvcHRfb25jZSkge1xuICAgICAgLy8gVHVybiBvbmUtb2ZmIGxpc3RlbmVyIGludG8gYSBwZXJtYW5lbnQgb25lLlxuICAgICAgbGlzdGVuZXJPYmouY2FsbE9uY2UgPSBmYWxzZTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGlzdGVuZXJPYmogPSAvKiogQHR5cGUge0V2ZW50c0tleX0gKi8gKHtcbiAgICAgIGJpbmRUbzogb3B0X3RoaXMsXG4gICAgICBjYWxsT25jZTogISFvcHRfb25jZSxcbiAgICAgIGxpc3RlbmVyOiBsaXN0ZW5lcixcbiAgICAgIHRhcmdldDogdGFyZ2V0LFxuICAgICAgdHlwZTogdHlwZVxuICAgIH0pO1xuICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9ldmVudHMvVGFyZ2V0LmpzXCIpLmRlZmF1bHR9ICovICh0YXJnZXQpLlxuICAgICAgYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBiaW5kTGlzdGVuZXIobGlzdGVuZXJPYmopKTtcbiAgICBsaXN0ZW5lcnMucHVzaChsaXN0ZW5lck9iaik7XG4gIH1cblxuICByZXR1cm4gbGlzdGVuZXJPYmo7XG59XG5cblxuLyoqXG4gKiBSZWdpc3RlcnMgYSBvbmUtb2ZmIGV2ZW50IGxpc3RlbmVyIG9uIGFuIGV2ZW50IHRhcmdldC4gSW5zcGlyZWQgYnlcbiAqIGh0dHBzOi8vZ29vZ2xlLmdpdGh1Yi5pby9jbG9zdXJlLWxpYnJhcnkvYXBpL3NvdXJjZS9jbG9zdXJlL2dvb2cvZXZlbnRzL2V2ZW50cy5qcy5zcmMuaHRtbFxuICpcbiAqIFRoaXMgZnVuY3Rpb24gZWZmaWNpZW50bHkgYmluZHMgYSBgbGlzdGVuZXJgIGFzIHNlbGYtdW5yZWdpc3RlcmluZyBsaXN0ZW5lclxuICogdG8gYSBgdGhpc2Agb2JqZWN0LCBhbmQgcmV0dXJucyBhIGtleSBmb3IgdXNlIHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzfnVubGlzdGVuQnlLZXl9IGluIGNhc2UgdGhlIGxpc3RlbmVyIG5lZWRzIHRvIGJlXG4gKiB1bnJlZ2lzdGVyZWQgYmVmb3JlIGl0IGlzIGNhbGxlZC5cbiAqXG4gKiBXaGVuIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzfmxpc3Rlbn0gaXMgY2FsbGVkIHdpdGggdGhlIHNhbWUgYXJndW1lbnRzIGFmdGVyIHRoaXNcbiAqIGZ1bmN0aW9uLCB0aGUgc2VsZi11bnJlZ2lzdGVyaW5nIGxpc3RlbmVyIHdpbGwgYmUgdHVybmVkIGludG8gYSBwZXJtYW5lbnRcbiAqIGxpc3RlbmVyLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMvVGFyZ2V0LmpzXCIpLkV2ZW50VGFyZ2V0TGlrZX0gdGFyZ2V0IEV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIEV2ZW50IHR5cGUuXG4gKiBAcGFyYW0ge0xpc3RlbmVyRnVuY3Rpb259IGxpc3RlbmVyIExpc3RlbmVyLlxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRfdGhpcyBPYmplY3QgcmVmZXJlbmNlZCBieSB0aGUgYHRoaXNgIGtleXdvcmQgaW4gdGhlXG4gKiAgICAgbGlzdGVuZXIuIERlZmF1bHQgaXMgdGhlIGB0YXJnZXRgLlxuICogQHJldHVybiB7RXZlbnRzS2V5fSBLZXkgZm9yIHVubGlzdGVuQnlLZXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW5PbmNlKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIG9wdF90aGlzKSB7XG4gIHJldHVybiBsaXN0ZW4odGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgb3B0X3RoaXMsIHRydWUpO1xufVxuXG5cbi8qKlxuICogVW5yZWdpc3RlcnMgYW4gZXZlbnQgbGlzdGVuZXIgb24gYW4gZXZlbnQgdGFyZ2V0LiBJbnNwaXJlZCBieVxuICogaHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2Nsb3N1cmUtbGlicmFyeS9hcGkvc291cmNlL2Nsb3N1cmUvZ29vZy9ldmVudHMvZXZlbnRzLmpzLnNyYy5odG1sXG4gKlxuICogVG8gcmV0dXJuIGEgbGlzdGVuZXIsIHRoaXMgZnVuY3Rpb24gbmVlZHMgdG8gYmUgY2FsbGVkIHdpdGggdGhlIGV4YWN0IHNhbWVcbiAqIGFyZ3VtZW50cyB0aGF0IHdlcmUgdXNlZCBmb3IgYSBwcmV2aW91cyB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50c35saXN0ZW59IGNhbGwuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy9UYXJnZXQuanNcIikuRXZlbnRUYXJnZXRMaWtlfSB0YXJnZXQgRXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgRXZlbnQgdHlwZS5cbiAqIEBwYXJhbSB7TGlzdGVuZXJGdW5jdGlvbn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdF90aGlzIE9iamVjdCByZWZlcmVuY2VkIGJ5IHRoZSBgdGhpc2Aga2V5d29yZCBpbiB0aGVcbiAqICAgICBsaXN0ZW5lci4gRGVmYXVsdCBpcyB0aGUgYHRhcmdldGAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bmxpc3Rlbih0YXJnZXQsIHR5cGUsIGxpc3RlbmVyLCBvcHRfdGhpcykge1xuICB2YXIgbGlzdGVuZXJzID0gZ2V0TGlzdGVuZXJzKHRhcmdldCwgdHlwZSk7XG4gIGlmIChsaXN0ZW5lcnMpIHtcbiAgICB2YXIgbGlzdGVuZXJPYmogPSBmaW5kTGlzdGVuZXIobGlzdGVuZXJzLCBsaXN0ZW5lciwgb3B0X3RoaXMsIHRydWUpO1xuICAgIGlmIChsaXN0ZW5lck9iaikge1xuICAgICAgdW5saXN0ZW5CeUtleShsaXN0ZW5lck9iaik7XG4gICAgfVxuICB9XG59XG5cblxuLyoqXG4gKiBVbnJlZ2lzdGVycyBldmVudCBsaXN0ZW5lcnMgb24gYW4gZXZlbnQgdGFyZ2V0LiBJbnNwaXJlZCBieVxuICogaHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2Nsb3N1cmUtbGlicmFyeS9hcGkvc291cmNlL2Nsb3N1cmUvZ29vZy9ldmVudHMvZXZlbnRzLmpzLnNyYy5odG1sXG4gKlxuICogVGhlIGFyZ3VtZW50IHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIGlzIHRoZSBrZXkgcmV0dXJuZWQgZnJvbVxuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHN+bGlzdGVufSBvciB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50c35saXN0ZW5PbmNlfS5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50c0tleX0ga2V5IFRoZSBrZXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bmxpc3RlbkJ5S2V5KGtleSkge1xuICBpZiAoa2V5ICYmIGtleS50YXJnZXQpIHtcbiAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vZXZlbnRzL1RhcmdldC5qc1wiKS5kZWZhdWx0fSAqLyAoa2V5LnRhcmdldCkuXG4gICAgICByZW1vdmVFdmVudExpc3RlbmVyKGtleS50eXBlLCBrZXkuYm91bmRMaXN0ZW5lcik7XG4gICAgdmFyIGxpc3RlbmVycyA9IGdldExpc3RlbmVycyhrZXkudGFyZ2V0LCBrZXkudHlwZSk7XG4gICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgdmFyIGkgPSAnZGVsZXRlSW5kZXgnIGluIGtleSA/IGtleS5kZWxldGVJbmRleCA6IGxpc3RlbmVycy5pbmRleE9mKGtleSk7XG4gICAgICBpZiAoaSAhPT0gLTEpIHtcbiAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpLCAxKTtcbiAgICAgIH1cbiAgICAgIGlmIChsaXN0ZW5lcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJlbW92ZUxpc3RlbmVycyhrZXkudGFyZ2V0LCBrZXkudHlwZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGNsZWFyKGtleSk7XG4gIH1cbn1cblxuXG4vKipcbiAqIFVucmVnaXN0ZXJzIGFsbCBldmVudCBsaXN0ZW5lcnMgb24gYW4gZXZlbnQgdGFyZ2V0LiBJbnNwaXJlZCBieVxuICogaHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2Nsb3N1cmUtbGlicmFyeS9hcGkvc291cmNlL2Nsb3N1cmUvZ29vZy9ldmVudHMvZXZlbnRzLmpzLnNyYy5odG1sXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy9UYXJnZXQuanNcIikuRXZlbnRUYXJnZXRMaWtlfSB0YXJnZXQgVGFyZ2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gdW5saXN0ZW5BbGwodGFyZ2V0KSB7XG4gIHZhciBsaXN0ZW5lck1hcCA9IGdldExpc3RlbmVyTWFwKHRhcmdldCk7XG4gIGlmIChsaXN0ZW5lck1hcCkge1xuICAgIGZvciAodmFyIHR5cGUgaW4gbGlzdGVuZXJNYXApIHtcbiAgICAgIHJlbW92ZUxpc3RlbmVycyh0YXJnZXQsIHR5cGUpO1xuICAgIH1cbiAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1ldmVudHMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V2ZW50cy9UYXJnZXRcbiAqL1xuaW1wb3J0IERpc3Bvc2FibGUgZnJvbSAnLi4vRGlzcG9zYWJsZS5qcyc7XG5pbXBvcnQge3VubGlzdGVuQWxsfSBmcm9tICcuLi9ldmVudHMuanMnO1xuaW1wb3J0IHtWT0lEfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IEV2ZW50IGZyb20gJy4vRXZlbnQuanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge0V2ZW50VGFyZ2V0fFRhcmdldH0gRXZlbnRUYXJnZXRMaWtlXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEgc2ltcGxpZmllZCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgVzNDIERPTSBMZXZlbCAyIEV2ZW50VGFyZ2V0IGludGVyZmFjZS5cbiAqIFNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwMC9SRUMtRE9NLUxldmVsLTItRXZlbnRzLTIwMDAxMTEzL2V2ZW50cy5odG1sI0V2ZW50cy1FdmVudFRhcmdldC5cbiAqXG4gKiBUaGVyZSBhcmUgdHdvIGltcG9ydGFudCBzaW1wbGlmaWNhdGlvbnMgY29tcGFyZWQgdG8gdGhlIHNwZWNpZmljYXRpb246XG4gKlxuICogMS4gVGhlIGhhbmRsaW5nIG9mIGB1c2VDYXB0dXJlYCBpbiBgYWRkRXZlbnRMaXN0ZW5lcmAgYW5kXG4gKiAgICBgcmVtb3ZlRXZlbnRMaXN0ZW5lcmAuIFRoZXJlIGlzIG5vIHJlYWwgY2FwdHVyZSBtb2RlbC5cbiAqIDIuIFRoZSBoYW5kbGluZyBvZiBgc3RvcFByb3BhZ2F0aW9uYCBhbmQgYHByZXZlbnREZWZhdWx0YCBvbiBgZGlzcGF0Y2hFdmVudGAuXG4gKiAgICBUaGVyZSBpcyBubyBldmVudCB0YXJnZXQgaGllcmFyY2h5LiBXaGVuIGEgbGlzdGVuZXIgY2FsbHNcbiAqICAgIGBzdG9wUHJvcGFnYXRpb25gIG9yIGBwcmV2ZW50RGVmYXVsdGAgb24gYW4gZXZlbnQgb2JqZWN0LCBpdCBtZWFucyB0aGF0IG5vXG4gKiAgICBtb3JlIGxpc3RlbmVycyBhZnRlciB0aGlzIG9uZSB3aWxsIGJlIGNhbGxlZC4gU2FtZSBhcyB3aGVuIHRoZSBsaXN0ZW5lclxuICogICAgcmV0dXJucyBmYWxzZS5cbiAqL1xudmFyIFRhcmdldCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKERpc3Bvc2FibGUpIHtcbiAgZnVuY3Rpb24gVGFyZ2V0KCkge1xuXG4gICAgRGlzcG9zYWJsZS5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIG51bWJlcj59XG4gICAgICovXG4gICAgdGhpcy5wZW5kaW5nUmVtb3ZhbHNfID0ge307XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgbnVtYmVyPn1cbiAgICAgKi9cbiAgICB0aGlzLmRpc3BhdGNoaW5nXyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIEFycmF5PGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5MaXN0ZW5lckZ1bmN0aW9uPj59XG4gICAgICovXG4gICAgdGhpcy5saXN0ZW5lcnNfID0ge307XG5cbiAgfVxuXG4gIGlmICggRGlzcG9zYWJsZSApIFRhcmdldC5fX3Byb3RvX18gPSBEaXNwb3NhYmxlO1xuICBUYXJnZXQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRGlzcG9zYWJsZSAmJiBEaXNwb3NhYmxlLnByb3RvdHlwZSApO1xuICBUYXJnZXQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVGFyZ2V0O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5MaXN0ZW5lckZ1bmN0aW9ufSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAgICovXG4gIFRhcmdldC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIgKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgdmFyIGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzX1t0eXBlXTtcbiAgICBpZiAoIWxpc3RlbmVycykge1xuICAgICAgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNfW3R5cGVdID0gW107XG4gICAgfVxuICAgIGlmIChsaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcikgPT09IC0xKSB7XG4gICAgICBsaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBEaXNwYXRjaGVzIGFuIGV2ZW50IGFuZCBjYWxscyBhbGwgbGlzdGVuZXJzIGxpc3RlbmluZyBmb3IgZXZlbnRzXG4gICAqIG9mIHRoaXMgdHlwZS4gVGhlIGV2ZW50IHBhcmFtZXRlciBjYW4gZWl0aGVyIGJlIGEgc3RyaW5nIG9yIGFuXG4gICAqIE9iamVjdCB3aXRoIGEgYHR5cGVgIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge3t0eXBlOiBzdHJpbmcsXG4gICAqICAgICB0YXJnZXQ6IChFdmVudFRhcmdldExpa2V8dW5kZWZpbmVkKSxcbiAgICogICAgIHByb3BhZ2F0aW9uU3RvcHBlZDogKGJvb2xlYW58dW5kZWZpbmVkKX18XG4gICAqICAgICBpbXBvcnQoXCIuL0V2ZW50LmpzXCIpLmRlZmF1bHR8c3RyaW5nfSBldmVudCBFdmVudCBvYmplY3QuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW58dW5kZWZpbmVkfSBgZmFsc2VgIGlmIGFueW9uZSBjYWxsZWQgcHJldmVudERlZmF1bHQgb24gdGhlXG4gICAqICAgICBldmVudCBvYmplY3Qgb3IgaWYgYW55IG9mIHRoZSBsaXN0ZW5lcnMgcmV0dXJuZWQgZmFsc2UuXG4gICAqIEBhcGlcbiAgICovXG4gIFRhcmdldC5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudCA9IGZ1bmN0aW9uIGRpc3BhdGNoRXZlbnQgKGV2ZW50KSB7XG4gICAgdmFyIGV2dCA9IHR5cGVvZiBldmVudCA9PT0gJ3N0cmluZycgPyBuZXcgRXZlbnQoZXZlbnQpIDogZXZlbnQ7XG4gICAgdmFyIHR5cGUgPSBldnQudHlwZTtcbiAgICBldnQudGFyZ2V0ID0gdGhpcztcbiAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNfW3R5cGVdO1xuICAgIHZhciBwcm9wYWdhdGU7XG4gICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgaWYgKCEodHlwZSBpbiB0aGlzLmRpc3BhdGNoaW5nXykpIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaGluZ19bdHlwZV0gPSAwO1xuICAgICAgICB0aGlzLnBlbmRpbmdSZW1vdmFsc19bdHlwZV0gPSAwO1xuICAgICAgfVxuICAgICAgKyt0aGlzLmRpc3BhdGNoaW5nX1t0eXBlXTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGlmIChsaXN0ZW5lcnNbaV0uY2FsbCh0aGlzLCBldnQpID09PSBmYWxzZSB8fCBldnQucHJvcGFnYXRpb25TdG9wcGVkKSB7XG4gICAgICAgICAgcHJvcGFnYXRlID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC0tdGhpcy5kaXNwYXRjaGluZ19bdHlwZV07XG4gICAgICBpZiAodGhpcy5kaXNwYXRjaGluZ19bdHlwZV0gPT09IDApIHtcbiAgICAgICAgdmFyIHBlbmRpbmdSZW1vdmFscyA9IHRoaXMucGVuZGluZ1JlbW92YWxzX1t0eXBlXTtcbiAgICAgICAgZGVsZXRlIHRoaXMucGVuZGluZ1JlbW92YWxzX1t0eXBlXTtcbiAgICAgICAgd2hpbGUgKHBlbmRpbmdSZW1vdmFscy0tKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIFZPSUQpO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSB0aGlzLmRpc3BhdGNoaW5nX1t0eXBlXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwcm9wYWdhdGU7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgVGFyZ2V0LnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiBkaXNwb3NlSW50ZXJuYWwgKCkge1xuICAgIHVubGlzdGVuQWxsKHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGxpc3RlbmVycyBmb3IgYSBzcGVjaWZpZWQgZXZlbnQgdHlwZS4gTGlzdGVuZXJzIGFyZSByZXR1cm5lZCBpbiB0aGVcbiAgICogb3JkZXIgdGhhdCB0aGV5IHdpbGwgYmUgY2FsbGVkIGluLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlLlxuICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuTGlzdGVuZXJGdW5jdGlvbj59IExpc3RlbmVycy5cbiAgICovXG4gIFRhcmdldC5wcm90b3R5cGUuZ2V0TGlzdGVuZXJzID0gZnVuY3Rpb24gZ2V0TGlzdGVuZXJzICh0eXBlKSB7XG4gICAgcmV0dXJuIHRoaXMubGlzdGVuZXJzX1t0eXBlXTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfdHlwZSBUeXBlLiBJZiBub3QgcHJvdmlkZWQsXG4gICAqICAgICBgdHJ1ZWAgd2lsbCBiZSByZXR1cm5lZCBpZiB0aGlzIGV2ZW50IHRhcmdldCBoYXMgYW55IGxpc3RlbmVycy5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSGFzIGxpc3RlbmVycy5cbiAgICovXG4gIFRhcmdldC5wcm90b3R5cGUuaGFzTGlzdGVuZXIgPSBmdW5jdGlvbiBoYXNMaXN0ZW5lciAob3B0X3R5cGUpIHtcbiAgICByZXR1cm4gb3B0X3R5cGUgP1xuICAgICAgb3B0X3R5cGUgaW4gdGhpcy5saXN0ZW5lcnNfIDpcbiAgICAgIE9iamVjdC5rZXlzKHRoaXMubGlzdGVuZXJzXykubGVuZ3RoID4gMDtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuTGlzdGVuZXJGdW5jdGlvbn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gICAqL1xuICBUYXJnZXQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVyICh0eXBlLCBsaXN0ZW5lcikge1xuICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc19bdHlwZV07XG4gICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgdmFyIGluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICAgICAgaWYgKHR5cGUgaW4gdGhpcy5wZW5kaW5nUmVtb3ZhbHNfKSB7XG4gICAgICAgIC8vIG1ha2UgbGlzdGVuZXIgYSBuby1vcCwgYW5kIHJlbW92ZSBsYXRlciBpbiAjZGlzcGF0Y2hFdmVudCgpXG4gICAgICAgIGxpc3RlbmVyc1tpbmRleF0gPSBWT0lEO1xuICAgICAgICArK3RoaXMucGVuZGluZ1JlbW92YWxzX1t0eXBlXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICBpZiAobGlzdGVuZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLmxpc3RlbmVyc19bdHlwZV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFRhcmdldDtcbn0oRGlzcG9zYWJsZSkpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IFRhcmdldDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGFyZ2V0LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9GZWF0dXJlXG4gKi9cbmltcG9ydCB7YXNzZXJ0fSBmcm9tICcuL2Fzc2VydHMuanMnO1xuaW1wb3J0IHtsaXN0ZW4sIHVubGlzdGVuLCB1bmxpc3RlbkJ5S2V5fSBmcm9tICcuL2V2ZW50cy5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgQmFzZU9iamVjdCwge2dldENoYW5nZUV2ZW50VHlwZX0gZnJvbSAnLi9PYmplY3QuanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHt0eXBlb2YgRmVhdHVyZXx0eXBlb2YgaW1wb3J0KFwiLi9yZW5kZXIvRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBGZWF0dXJlQ2xhc3NcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtGZWF0dXJlfGltcG9ydChcIi4vcmVuZGVyL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gRmVhdHVyZUxpa2VcbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEgdmVjdG9yIG9iamVjdCBmb3IgZ2VvZ3JhcGhpYyBmZWF0dXJlcyB3aXRoIGEgZ2VvbWV0cnkgYW5kIG90aGVyXG4gKiBhdHRyaWJ1dGUgcHJvcGVydGllcywgc2ltaWxhciB0byB0aGUgZmVhdHVyZXMgaW4gdmVjdG9yIGZpbGUgZm9ybWF0cyBsaWtlXG4gKiBHZW9KU09OLlxuICpcbiAqIEZlYXR1cmVzIGNhbiBiZSBzdHlsZWQgaW5kaXZpZHVhbGx5IHdpdGggYHNldFN0eWxlYDsgb3RoZXJ3aXNlIHRoZXkgdXNlIHRoZVxuICogc3R5bGUgb2YgdGhlaXIgdmVjdG9yIGxheWVyLlxuICpcbiAqIE5vdGUgdGhhdCBhdHRyaWJ1dGUgcHJvcGVydGllcyBhcmUgc2V0IGFzIHtAbGluayBtb2R1bGU6b2wvT2JqZWN0fSBwcm9wZXJ0aWVzIG9uXG4gKiB0aGUgZmVhdHVyZSBvYmplY3QsIHNvIHRoZXkgYXJlIG9ic2VydmFibGUsIGFuZCBoYXZlIGdldC9zZXQgYWNjZXNzb3JzLlxuICpcbiAqIFR5cGljYWxseSwgYSBmZWF0dXJlIGhhcyBhIHNpbmdsZSBnZW9tZXRyeSBwcm9wZXJ0eS4gWW91IGNhbiBzZXQgdGhlXG4gKiBnZW9tZXRyeSB1c2luZyB0aGUgYHNldEdlb21ldHJ5YCBtZXRob2QgYW5kIGdldCBpdCB3aXRoIGBnZXRHZW9tZXRyeWAuXG4gKiBJdCBpcyBwb3NzaWJsZSB0byBzdG9yZSBtb3JlIHRoYW4gb25lIGdlb21ldHJ5IG9uIGEgZmVhdHVyZSB1c2luZyBhdHRyaWJ1dGVcbiAqIHByb3BlcnRpZXMuIEJ5IGRlZmF1bHQsIHRoZSBnZW9tZXRyeSB1c2VkIGZvciByZW5kZXJpbmcgaXMgaWRlbnRpZmllZCBieVxuICogdGhlIHByb3BlcnR5IG5hbWUgYGdlb21ldHJ5YC4gSWYgeW91IHdhbnQgdG8gdXNlIGFub3RoZXIgZ2VvbWV0cnkgcHJvcGVydHlcbiAqIGZvciByZW5kZXJpbmcsIHVzZSB0aGUgYHNldEdlb21ldHJ5TmFtZWAgbWV0aG9kIHRvIGNoYW5nZSB0aGUgYXR0cmlidXRlXG4gKiBwcm9wZXJ0eSBhc3NvY2lhdGVkIHdpdGggdGhlIGdlb21ldHJ5IGZvciB0aGUgZmVhdHVyZS4gIEZvciBleGFtcGxlOlxuICpcbiAqIGBgYGpzXG4gKlxuICogaW1wb3J0IEZlYXR1cmUgZnJvbSAnb2wvRmVhdHVyZSc7XG4gKiBpbXBvcnQgUG9seWdvbiBmcm9tICdvbC9nZW9tL1BvbHlnb24nO1xuICogaW1wb3J0IFBvaW50IGZyb20gJ29sL2dlb20vUG9pbnQnO1xuICpcbiAqIHZhciBmZWF0dXJlID0gbmV3IEZlYXR1cmUoe1xuICogICBnZW9tZXRyeTogbmV3IFBvbHlnb24ocG9seUNvb3JkcyksXG4gKiAgIGxhYmVsUG9pbnQ6IG5ldyBQb2ludChsYWJlbENvb3JkcyksXG4gKiAgIG5hbWU6ICdNeSBQb2x5Z29uJ1xuICogfSk7XG4gKlxuICogLy8gZ2V0IHRoZSBwb2x5Z29uIGdlb21ldHJ5XG4gKiB2YXIgcG9seSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcbiAqXG4gKiAvLyBSZW5kZXIgdGhlIGZlYXR1cmUgYXMgYSBwb2ludCB1c2luZyB0aGUgY29vcmRpbmF0ZXMgZnJvbSBsYWJlbFBvaW50XG4gKiBmZWF0dXJlLnNldEdlb21ldHJ5TmFtZSgnbGFiZWxQb2ludCcpO1xuICpcbiAqIC8vIGdldCB0aGUgcG9pbnQgZ2VvbWV0cnlcbiAqIHZhciBwb2ludCA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcbiAqIGBgYFxuICpcbiAqIEBhcGlcbiAqL1xudmFyIEZlYXR1cmUgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChCYXNlT2JqZWN0KSB7XG4gIGZ1bmN0aW9uIEZlYXR1cmUob3B0X2dlb21ldHJ5T3JQcm9wZXJ0aWVzKSB7XG5cbiAgICBCYXNlT2JqZWN0LmNhbGwodGhpcyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ8c3RyaW5nfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLmlkXyA9IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmdlb21ldHJ5TmFtZV8gPSAnZ2VvbWV0cnknO1xuXG4gICAgLyoqXG4gICAgICogVXNlciBwcm92aWRlZCBzdHlsZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3N0eWxlL1N0eWxlLmpzXCIpLlN0eWxlTGlrZX1cbiAgICAgKi9cbiAgICB0aGlzLnN0eWxlXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3N0eWxlL1N0eWxlLmpzXCIpLlN0eWxlRnVuY3Rpb258dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMuc3R5bGVGdW5jdGlvbl8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAqL1xuICAgIHRoaXMuZ2VvbWV0cnlDaGFuZ2VLZXlfID0gbnVsbDtcblxuICAgIGxpc3RlbihcbiAgICAgIHRoaXMsIGdldENoYW5nZUV2ZW50VHlwZSh0aGlzLmdlb21ldHJ5TmFtZV8pLFxuICAgICAgdGhpcy5oYW5kbGVHZW9tZXRyeUNoYW5nZWRfLCB0aGlzKTtcblxuICAgIGlmIChvcHRfZ2VvbWV0cnlPclByb3BlcnRpZXMpIHtcbiAgICAgIGlmICh0eXBlb2YgLyoqIEB0eXBlIHs/fSAqLyAob3B0X2dlb21ldHJ5T3JQcm9wZXJ0aWVzKS5nZXRTaW1wbGlmaWVkR2VvbWV0cnkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFyIGdlb21ldHJ5ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKG9wdF9nZW9tZXRyeU9yUHJvcGVydGllcyk7XG4gICAgICAgIHRoaXMuc2V0R2VvbWV0cnkoZ2VvbWV0cnkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLyoqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCAqPn0gKi9cbiAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBvcHRfZ2VvbWV0cnlPclByb3BlcnRpZXM7XG4gICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyhwcm9wZXJ0aWVzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoIEJhc2VPYmplY3QgKSBGZWF0dXJlLl9fcHJvdG9fXyA9IEJhc2VPYmplY3Q7XG4gIEZlYXR1cmUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggQmFzZU9iamVjdCAmJiBCYXNlT2JqZWN0LnByb3RvdHlwZSApO1xuICBGZWF0dXJlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEZlYXR1cmU7XG5cbiAgLyoqXG4gICAqIENsb25lIHRoaXMgZmVhdHVyZS4gSWYgdGhlIG9yaWdpbmFsIGZlYXR1cmUgaGFzIGEgZ2VvbWV0cnkgaXRcbiAgICogaXMgYWxzbyBjbG9uZWQuIFRoZSBmZWF0dXJlIGlkIGlzIG5vdCBzZXQgaW4gdGhlIGNsb25lLlxuICAgKiBAcmV0dXJuIHtGZWF0dXJlfSBUaGUgY2xvbmUuXG4gICAqIEBhcGlcbiAgICovXG4gIEZlYXR1cmUucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gY2xvbmUgKCkge1xuICAgIHZhciBjbG9uZSA9IG5ldyBGZWF0dXJlKHRoaXMuZ2V0UHJvcGVydGllcygpKTtcbiAgICBjbG9uZS5zZXRHZW9tZXRyeU5hbWUodGhpcy5nZXRHZW9tZXRyeU5hbWUoKSk7XG4gICAgdmFyIGdlb21ldHJ5ID0gdGhpcy5nZXRHZW9tZXRyeSgpO1xuICAgIGlmIChnZW9tZXRyeSkge1xuICAgICAgY2xvbmUuc2V0R2VvbWV0cnkoZ2VvbWV0cnkuY2xvbmUoKSk7XG4gICAgfVxuICAgIHZhciBzdHlsZSA9IHRoaXMuZ2V0U3R5bGUoKTtcbiAgICBpZiAoc3R5bGUpIHtcbiAgICAgIGNsb25lLnNldFN0eWxlKHN0eWxlKTtcbiAgICB9XG4gICAgcmV0dXJuIGNsb25lO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGZlYXR1cmUncyBkZWZhdWx0IGdlb21ldHJ5LiAgQSBmZWF0dXJlIG1heSBoYXZlIGFueSBudW1iZXIgb2YgbmFtZWRcbiAgICogZ2VvbWV0cmllcy4gIFRoZSBcImRlZmF1bHRcIiBnZW9tZXRyeSAodGhlIG9uZSB0aGF0IGlzIHJlbmRlcmVkIGJ5IGRlZmF1bHQpIGlzXG4gICAqIHNldCB3aGVuIGNhbGxpbmcge0BsaW5rIG1vZHVsZTpvbC9GZWF0dXJlfkZlYXR1cmUjc2V0R2VvbWV0cnl9LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IFRoZSBkZWZhdWx0IGdlb21ldHJ5IGZvciB0aGUgZmVhdHVyZS5cbiAgICogQGFwaVxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKi9cbiAgRmVhdHVyZS5wcm90b3R5cGUuZ2V0R2VvbWV0cnkgPSBmdW5jdGlvbiBnZXRHZW9tZXRyeSAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQodGhpcy5nZW9tZXRyeU5hbWVfKSlcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGZlYXR1cmUgaWRlbnRpZmllci4gIFRoaXMgaXMgYSBzdGFibGUgaWRlbnRpZmllciBmb3IgdGhlIGZlYXR1cmUgYW5kXG4gICAqIGlzIGVpdGhlciBzZXQgd2hlbiByZWFkaW5nIGRhdGEgZnJvbSBhIHJlbW90ZSBzb3VyY2Ugb3Igc2V0IGV4cGxpY2l0bHkgYnlcbiAgICogY2FsbGluZyB7QGxpbmsgbW9kdWxlOm9sL0ZlYXR1cmV+RmVhdHVyZSNzZXRJZH0uXG4gICAqIEByZXR1cm4ge251bWJlcnxzdHJpbmd8dW5kZWZpbmVkfSBJZC5cbiAgICogQGFwaVxuICAgKi9cbiAgRmVhdHVyZS5wcm90b3R5cGUuZ2V0SWQgPSBmdW5jdGlvbiBnZXRJZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaWRfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG5hbWUgb2YgdGhlIGZlYXR1cmUncyBkZWZhdWx0IGdlb21ldHJ5LiAgQnkgZGVmYXVsdCwgdGhlIGRlZmF1bHRcbiAgICogZ2VvbWV0cnkgaXMgbmFtZWQgYGdlb21ldHJ5YC5cbiAgICogQHJldHVybiB7c3RyaW5nfSBHZXQgdGhlIHByb3BlcnR5IG5hbWUgYXNzb2NpYXRlZCB3aXRoIHRoZSBkZWZhdWx0IGdlb21ldHJ5XG4gICAqICAgICBmb3IgdGhpcyBmZWF0dXJlLlxuICAgKiBAYXBpXG4gICAqL1xuICBGZWF0dXJlLnByb3RvdHlwZS5nZXRHZW9tZXRyeU5hbWUgPSBmdW5jdGlvbiBnZXRHZW9tZXRyeU5hbWUgKCkge1xuICAgIHJldHVybiB0aGlzLmdlb21ldHJ5TmFtZV87XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZmVhdHVyZSdzIHN0eWxlLiBXaWxsIHJldHVybiB3aGF0IHdhcyBwcm92aWRlZCB0byB0aGVcbiAgICoge0BsaW5rIG1vZHVsZTpvbC9GZWF0dXJlfkZlYXR1cmUjc2V0U3R5bGV9IG1ldGhvZC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZUxpa2V9IFRoZSBmZWF0dXJlIHN0eWxlLlxuICAgKiBAYXBpXG4gICAqL1xuICBGZWF0dXJlLnByb3RvdHlwZS5nZXRTdHlsZSA9IGZ1bmN0aW9uIGdldFN0eWxlICgpIHtcbiAgICByZXR1cm4gdGhpcy5zdHlsZV87XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZmVhdHVyZSdzIHN0eWxlIGZ1bmN0aW9uLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3N0eWxlL1N0eWxlLmpzXCIpLlN0eWxlRnVuY3Rpb258dW5kZWZpbmVkfSBSZXR1cm4gYSBmdW5jdGlvblxuICAgKiByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgc3R5bGUgb2YgdGhpcyBmZWF0dXJlLlxuICAgKiBAYXBpXG4gICAqL1xuICBGZWF0dXJlLnByb3RvdHlwZS5nZXRTdHlsZUZ1bmN0aW9uID0gZnVuY3Rpb24gZ2V0U3R5bGVGdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3R5bGVGdW5jdGlvbl87XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBGZWF0dXJlLnByb3RvdHlwZS5oYW5kbGVHZW9tZXRyeUNoYW5nZV8gPSBmdW5jdGlvbiBoYW5kbGVHZW9tZXRyeUNoYW5nZV8gKCkge1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgRmVhdHVyZS5wcm90b3R5cGUuaGFuZGxlR2VvbWV0cnlDaGFuZ2VkXyA9IGZ1bmN0aW9uIGhhbmRsZUdlb21ldHJ5Q2hhbmdlZF8gKCkge1xuICAgIGlmICh0aGlzLmdlb21ldHJ5Q2hhbmdlS2V5Xykge1xuICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLmdlb21ldHJ5Q2hhbmdlS2V5Xyk7XG4gICAgICB0aGlzLmdlb21ldHJ5Q2hhbmdlS2V5XyA9IG51bGw7XG4gICAgfVxuICAgIHZhciBnZW9tZXRyeSA9IHRoaXMuZ2V0R2VvbWV0cnkoKTtcbiAgICBpZiAoZ2VvbWV0cnkpIHtcbiAgICAgIHRoaXMuZ2VvbWV0cnlDaGFuZ2VLZXlfID0gbGlzdGVuKGdlb21ldHJ5LFxuICAgICAgICBFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmhhbmRsZUdlb21ldHJ5Q2hhbmdlXywgdGhpcyk7XG4gICAgfVxuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGRlZmF1bHQgZ2VvbWV0cnkgZm9yIHRoZSBmZWF0dXJlLiAgVGhpcyB3aWxsIHVwZGF0ZSB0aGUgcHJvcGVydHlcbiAgICogd2l0aCB0aGUgbmFtZSByZXR1cm5lZCBieSB7QGxpbmsgbW9kdWxlOm9sL0ZlYXR1cmV+RmVhdHVyZSNnZXRHZW9tZXRyeU5hbWV9LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gZ2VvbWV0cnkgVGhlIG5ldyBnZW9tZXRyeS5cbiAgICogQGFwaVxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKi9cbiAgRmVhdHVyZS5wcm90b3R5cGUuc2V0R2VvbWV0cnkgPSBmdW5jdGlvbiBzZXRHZW9tZXRyeSAoZ2VvbWV0cnkpIHtcbiAgICB0aGlzLnNldCh0aGlzLmdlb21ldHJ5TmFtZV8sIGdlb21ldHJ5KTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBzdHlsZSBmb3IgdGhlIGZlYXR1cmUuICBUaGlzIGNhbiBiZSBhIHNpbmdsZSBzdHlsZSBvYmplY3QsIGFuIGFycmF5XG4gICAqIG9mIHN0eWxlcywgb3IgYSBmdW5jdGlvbiB0aGF0IHRha2VzIGEgcmVzb2x1dGlvbiBhbmQgcmV0dXJucyBhbiBhcnJheSBvZlxuICAgKiBzdHlsZXMuIElmIGl0IGlzIGBudWxsYCB0aGUgZmVhdHVyZSBoYXMgbm8gc3R5bGUgKGEgYG51bGxgIHN0eWxlKS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3N0eWxlL1N0eWxlLmpzXCIpLlN0eWxlTGlrZX0gc3R5bGUgU3R5bGUgZm9yIHRoaXMgZmVhdHVyZS5cbiAgICogQGFwaVxuICAgKiBAZmlyZXMgbW9kdWxlOm9sL2V2ZW50cy9FdmVudH5FdmVudCNldmVudDpjaGFuZ2VcbiAgICovXG4gIEZlYXR1cmUucHJvdG90eXBlLnNldFN0eWxlID0gZnVuY3Rpb24gc2V0U3R5bGUgKHN0eWxlKSB7XG4gICAgdGhpcy5zdHlsZV8gPSBzdHlsZTtcbiAgICB0aGlzLnN0eWxlRnVuY3Rpb25fID0gIXN0eWxlID8gdW5kZWZpbmVkIDogY3JlYXRlU3R5bGVGdW5jdGlvbihzdHlsZSk7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgZmVhdHVyZSBpZC4gIFRoZSBmZWF0dXJlIGlkIGlzIGNvbnNpZGVyZWQgc3RhYmxlIGFuZCBtYXkgYmUgdXNlZCB3aGVuXG4gICAqIHJlcXVlc3RpbmcgZmVhdHVyZXMgb3IgY29tcGFyaW5nIGlkZW50aWZpZXJzIHJldHVybmVkIGZyb20gYSByZW1vdGUgc291cmNlLlxuICAgKiBUaGUgZmVhdHVyZSBpZCBjYW4gYmUgdXNlZCB3aXRoIHRoZVxuICAgKiB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3J+VmVjdG9yU291cmNlI2dldEZlYXR1cmVCeUlkfSBtZXRob2QuXG4gICAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ3x1bmRlZmluZWR9IGlkIFRoZSBmZWF0dXJlIGlkLlxuICAgKiBAYXBpXG4gICAqIEBmaXJlcyBtb2R1bGU6b2wvZXZlbnRzL0V2ZW50fkV2ZW50I2V2ZW50OmNoYW5nZVxuICAgKi9cbiAgRmVhdHVyZS5wcm90b3R5cGUuc2V0SWQgPSBmdW5jdGlvbiBzZXRJZCAoaWQpIHtcbiAgICB0aGlzLmlkXyA9IGlkO1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHByb3BlcnR5IG5hbWUgdG8gYmUgdXNlZCB3aGVuIGdldHRpbmcgdGhlIGZlYXR1cmUncyBkZWZhdWx0IGdlb21ldHJ5LlxuICAgKiBXaGVuIGNhbGxpbmcge0BsaW5rIG1vZHVsZTpvbC9GZWF0dXJlfkZlYXR1cmUjZ2V0R2VvbWV0cnl9LCB0aGUgdmFsdWUgb2YgdGhlIHByb3BlcnR5IHdpdGhcbiAgICogdGhpcyBuYW1lIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBwcm9wZXJ0eSBuYW1lIG9mIHRoZSBkZWZhdWx0IGdlb21ldHJ5LlxuICAgKiBAYXBpXG4gICAqL1xuICBGZWF0dXJlLnByb3RvdHlwZS5zZXRHZW9tZXRyeU5hbWUgPSBmdW5jdGlvbiBzZXRHZW9tZXRyeU5hbWUgKG5hbWUpIHtcbiAgICB1bmxpc3RlbihcbiAgICAgIHRoaXMsIGdldENoYW5nZUV2ZW50VHlwZSh0aGlzLmdlb21ldHJ5TmFtZV8pLFxuICAgICAgdGhpcy5oYW5kbGVHZW9tZXRyeUNoYW5nZWRfLCB0aGlzKTtcbiAgICB0aGlzLmdlb21ldHJ5TmFtZV8gPSBuYW1lO1xuICAgIGxpc3RlbihcbiAgICAgIHRoaXMsIGdldENoYW5nZUV2ZW50VHlwZSh0aGlzLmdlb21ldHJ5TmFtZV8pLFxuICAgICAgdGhpcy5oYW5kbGVHZW9tZXRyeUNoYW5nZWRfLCB0aGlzKTtcbiAgICB0aGlzLmhhbmRsZUdlb21ldHJ5Q2hhbmdlZF8oKTtcbiAgfTtcblxuICByZXR1cm4gRmVhdHVyZTtcbn0oQmFzZU9iamVjdCkpO1xuXG5cbi8qKlxuICogQ29udmVydCB0aGUgcHJvdmlkZWQgb2JqZWN0IGludG8gYSBmZWF0dXJlIHN0eWxlIGZ1bmN0aW9uLiAgRnVuY3Rpb25zIHBhc3NlZFxuICogdGhyb3VnaCB1bmNoYW5nZWQuICBBcnJheXMgb2YgU3R5bGUgb3Igc2luZ2xlIHN0eWxlIG9iamVjdHMgd3JhcHBlZFxuICogaW4gYSBuZXcgZmVhdHVyZSBzdHlsZSBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7IWltcG9ydChcIi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVGdW5jdGlvbnwhQXJyYXk8aW1wb3J0KFwiLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0PnwhaW1wb3J0KFwiLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0fSBvYmpcbiAqICAgICBBIGZlYXR1cmUgc3R5bGUgZnVuY3Rpb24sIGEgc2luZ2xlIHN0eWxlLCBvciBhbiBhcnJheSBvZiBzdHlsZXMuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3N0eWxlL1N0eWxlLmpzXCIpLlN0eWxlRnVuY3Rpb259IEEgc3R5bGUgZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdHlsZUZ1bmN0aW9uKG9iaikge1xuICBpZiAodHlwZW9mIG9iaiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBvYmo7XG4gIH0gZWxzZSB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge0FycmF5PGltcG9ydChcIi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdD59XG4gICAgICovXG4gICAgdmFyIHN0eWxlcztcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICBzdHlsZXMgPSBvYmo7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFzc2VydCh0eXBlb2YgLyoqIEB0eXBlIHs/fSAqLyAob2JqKS5nZXRaSW5kZXggPT09ICdmdW5jdGlvbicsXG4gICAgICAgIDQxKTsgLy8gRXhwZWN0ZWQgYW4gYGltcG9ydChcIi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVgIG9yIGFuIGFycmF5IG9mIGBpbXBvcnQoXCIuL3N0eWxlL1N0eWxlLmpzXCIpLlN0eWxlYFxuICAgICAgdmFyIHN0eWxlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9ICovIChvYmopO1xuICAgICAgc3R5bGVzID0gW3N0eWxlXTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHN0eWxlcztcbiAgICB9O1xuICB9XG59XG5leHBvcnQgZGVmYXVsdCBGZWF0dXJlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1GZWF0dXJlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9vYmpcbiAqL1xuXG5cbi8qKlxuICogUG9seWZpbGwgZm9yIE9iamVjdC5hc3NpZ24oKS4gIEFzc2lnbnMgZW51bWVyYWJsZSBhbmQgb3duIHByb3BlcnRpZXMgZnJvbVxuICogb25lIG9yIG1vcmUgc291cmNlIG9iamVjdHMgdG8gYSB0YXJnZXQgb2JqZWN0LlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9hc3NpZ24uXG4gKlxuICogQHBhcmFtIHshT2JqZWN0fSB0YXJnZXQgVGhlIHRhcmdldCBvYmplY3QuXG4gKiBAcGFyYW0gey4uLk9iamVjdH0gdmFyX3NvdXJjZXMgVGhlIHNvdXJjZSBvYmplY3QocykuXG4gKiBAcmV0dXJuIHshT2JqZWN0fSBUaGUgbW9kaWZpZWQgdGFyZ2V0IG9iamVjdC5cbiAqL1xuZXhwb3J0IHZhciBhc3NpZ24gPSAodHlwZW9mIE9iamVjdC5hc3NpZ24gPT09ICdmdW5jdGlvbicpID8gT2JqZWN0LmFzc2lnbiA6IGZ1bmN0aW9uKHRhcmdldCwgdmFyX3NvdXJjZXMpIHtcbiAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzO1xuXG4gIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCB8fCB0YXJnZXQgPT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QnKTtcbiAgfVxuXG4gIHZhciBvdXRwdXQgPSBPYmplY3QodGFyZ2V0KTtcbiAgZm9yICh2YXIgaSA9IDEsIGlpID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzJDFbaV07XG4gICAgaWYgKHNvdXJjZSAhPT0gdW5kZWZpbmVkICYmIHNvdXJjZSAhPT0gbnVsbCkge1xuICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICBvdXRwdXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBvdXRwdXQ7XG59O1xuXG5cbi8qKlxuICogUmVtb3ZlcyBhbGwgcHJvcGVydGllcyBmcm9tIGFuIG9iamVjdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjbGVhci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyKG9iamVjdCkge1xuICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBvYmplY3QpIHtcbiAgICBkZWxldGUgb2JqZWN0W3Byb3BlcnR5XTtcbiAgfVxufVxuXG5cbi8qKlxuICogR2V0IGFuIGFycmF5IG9mIHByb3BlcnR5IHZhbHVlcyBmcm9tIGFuIG9iamVjdC5cbiAqIEBwYXJhbSB7T2JqZWN0PEssVj59IG9iamVjdCBUaGUgb2JqZWN0IGZyb20gd2hpY2ggdG8gZ2V0IHRoZSB2YWx1ZXMuXG4gKiBAcmV0dXJuIHshQXJyYXk8Vj59IFRoZSBwcm9wZXJ0eSB2YWx1ZXMuXG4gKiBAdGVtcGxhdGUgSyxWXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRWYWx1ZXMob2JqZWN0KSB7XG4gIHZhciB2YWx1ZXMgPSBbXTtcbiAgZm9yICh2YXIgcHJvcGVydHkgaW4gb2JqZWN0KSB7XG4gICAgdmFsdWVzLnB1c2gob2JqZWN0W3Byb3BlcnR5XSk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlcztcbn1cblxuXG4vKipcbiAqIERldGVybWluZSBpZiBhbiBvYmplY3QgaGFzIGFueSBwcm9wZXJ0aWVzLlxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNoZWNrLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIG9iamVjdCBpcyBlbXB0eS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRW1wdHkob2JqZWN0KSB7XG4gIHZhciBwcm9wZXJ0eTtcbiAgZm9yIChwcm9wZXJ0eSBpbiBvYmplY3QpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuICFwcm9wZXJ0eTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2JqLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9PYmplY3RFdmVudFR5cGVcbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgLyoqXG4gICAqIFRyaWdnZXJlZCB3aGVuIGEgcHJvcGVydHkgaXMgY2hhbmdlZC5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9PYmplY3QuT2JqZWN0RXZlbnQjcHJvcGVydHljaGFuZ2VcbiAgICogQGFwaVxuICAgKi9cbiAgUFJPUEVSVFlDSEFOR0U6ICdwcm9wZXJ0eWNoYW5nZSdcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9iamVjdEV2ZW50VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvRGlzcG9zYWJsZVxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogT2JqZWN0cyB0aGF0IG5lZWQgdG8gY2xlYW4gdXAgYWZ0ZXIgdGhlbXNlbHZlcy5cbiAqL1xudmFyIERpc3Bvc2FibGUgPSBmdW5jdGlvbiBEaXNwb3NhYmxlKCkge1xuICAvKipcbiAgICogVGhlIG9iamVjdCBoYXMgYWxyZWFkeSBiZWVuIGRpc3Bvc2VkLlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuZGlzcG9zZWRfID0gZmFsc2U7XG59O1xuXG4vKipcbiAqIENsZWFuIHVwLlxuICovXG5EaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSAoKSB7XG4gIGlmICghdGhpcy5kaXNwb3NlZF8pIHtcbiAgICB0aGlzLmRpc3Bvc2VkXyA9IHRydWU7XG4gICAgdGhpcy5kaXNwb3NlSW50ZXJuYWwoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBFeHRlbnNpb24gcG9pbnQgZm9yIGRpc3Bvc2FibGUgb2JqZWN0cy5cbiAqIEBwcm90ZWN0ZWRcbiAqL1xuRGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gZGlzcG9zZUludGVybmFsICgpIHt9O1xuXG5leHBvcnQgZGVmYXVsdCBEaXNwb3NhYmxlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1EaXNwb3NhYmxlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9Bc3NlcnRpb25FcnJvclxuICovXG5pbXBvcnQge1ZFUlNJT059IGZyb20gJy4vdXRpbC5qcyc7XG5cbi8qKlxuICogRXJyb3Igb2JqZWN0IHRocm93biB3aGVuIGFuIGFzc2VydGlvbiBmYWlsZWQuIFRoaXMgaXMgYW4gRUNNQS0yNjIgRXJyb3IsXG4gKiBleHRlbmRlZCB3aXRoIGEgYGNvZGVgIHByb3BlcnR5LlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Vycm9yLlxuICovXG52YXIgQXNzZXJ0aW9uRXJyb3IgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChFcnJvcikge1xuICBmdW5jdGlvbiBBc3NlcnRpb25FcnJvcihjb2RlKSB7XG4gICAgdmFyIHBhdGggPSBWRVJTSU9OID09PSAnbGF0ZXN0JyA/IFZFUlNJT04gOiAndicgKyBWRVJTSU9OLnNwbGl0KCctJylbMF07XG4gICAgdmFyIG1lc3NhZ2UgPSAnQXNzZXJ0aW9uIGZhaWxlZC4gU2VlIGh0dHBzOi8vb3BlbmxheWVycy5vcmcvZW4vJyArIHBhdGggK1xuICAgICcvZG9jL2Vycm9ycy8jJyArIGNvZGUgKyAnIGZvciBkZXRhaWxzLic7XG5cbiAgICBFcnJvci5jYWxsKHRoaXMsIG1lc3NhZ2UpO1xuXG4gICAgLyoqXG4gICAgICogRXJyb3IgY29kZS4gVGhlIG1lYW5pbmcgb2YgdGhlIGNvZGUgY2FuIGJlIGZvdW5kIG9uXG4gICAgICogaHR0cHM6Ly9vcGVubGF5ZXJzLm9yZy9lbi9sYXRlc3QvZG9jL2Vycm9ycy8gKHJlcGxhY2UgYGxhdGVzdGAgd2l0aFxuICAgICAqIHRoZSB2ZXJzaW9uIGZvdW5kIGluIHRoZSBPcGVuTGF5ZXJzIHNjcmlwdCdzIGhlYWRlciBjb21tZW50IGlmIGEgdmVyc2lvblxuICAgICAqIG90aGVyIHRoYW4gdGhlIGxhdGVzdCBpcyB1c2VkKS5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICB0aGlzLmNvZGUgPSBjb2RlO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLm5hbWUgPSAnQXNzZXJ0aW9uRXJyb3InO1xuXG4gICAgLy8gUmUtYXNzaWduIG1lc3NhZ2UsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vUmljaC1IYXJyaXMvYnVibGUvaXNzdWVzLzQwXG4gICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgfVxuXG4gIGlmICggRXJyb3IgKSBBc3NlcnRpb25FcnJvci5fX3Byb3RvX18gPSBFcnJvcjtcbiAgQXNzZXJ0aW9uRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXJyb3IgJiYgRXJyb3IucHJvdG90eXBlICk7XG4gIEFzc2VydGlvbkVycm9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEFzc2VydGlvbkVycm9yO1xuXG4gIHJldHVybiBBc3NlcnRpb25FcnJvcjtcbn0oRXJyb3IpKTtcblxuZXhwb3J0IGRlZmF1bHQgQXNzZXJ0aW9uRXJyb3I7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFzc2VydGlvbkVycm9yLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9PYnNlcnZhYmxlXG4gKi9cbmltcG9ydCB7bGlzdGVuLCB1bmxpc3RlbkJ5S2V5LCB1bmxpc3RlbiwgbGlzdGVuT25jZX0gZnJvbSAnLi9ldmVudHMuanMnO1xuaW1wb3J0IEV2ZW50VGFyZ2V0IGZyb20gJy4vZXZlbnRzL1RhcmdldC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogQW4gZXZlbnQgdGFyZ2V0IHByb3ZpZGluZyBjb252ZW5pZW50IG1ldGhvZHMgZm9yIGxpc3RlbmVyIHJlZ2lzdHJhdGlvblxuICogYW5kIHVucmVnaXN0cmF0aW9uLiBBIGdlbmVyaWMgYGNoYW5nZWAgZXZlbnQgaXMgYWx3YXlzIGF2YWlsYWJsZSB0aHJvdWdoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL09ic2VydmFibGV+T2JzZXJ2YWJsZSNjaGFuZ2VkfS5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuRXZlbnRcbiAqIEBhcGlcbiAqL1xudmFyIE9ic2VydmFibGUgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChFdmVudFRhcmdldCkge1xuICBmdW5jdGlvbiBPYnNlcnZhYmxlKCkge1xuXG4gICAgRXZlbnRUYXJnZXQuY2FsbCh0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnJldmlzaW9uXyA9IDA7XG5cbiAgfVxuXG4gIGlmICggRXZlbnRUYXJnZXQgKSBPYnNlcnZhYmxlLl9fcHJvdG9fXyA9IEV2ZW50VGFyZ2V0O1xuICBPYnNlcnZhYmxlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEV2ZW50VGFyZ2V0ICYmIEV2ZW50VGFyZ2V0LnByb3RvdHlwZSApO1xuICBPYnNlcnZhYmxlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE9ic2VydmFibGU7XG5cbiAgLyoqXG4gICAqIEluY3JlYXNlcyB0aGUgcmV2aXNpb24gY291bnRlciBhbmQgZGlzcGF0Y2hlcyBhICdjaGFuZ2UnIGV2ZW50LlxuICAgKiBAYXBpXG4gICAqL1xuICBPYnNlcnZhYmxlLnByb3RvdHlwZS5jaGFuZ2VkID0gZnVuY3Rpb24gY2hhbmdlZCAoKSB7XG4gICAgKyt0aGlzLnJldmlzaW9uXztcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoRXZlbnRUeXBlLkNIQU5HRSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdmVyc2lvbiBudW1iZXIgZm9yIHRoaXMgb2JqZWN0LiAgRWFjaCB0aW1lIHRoZSBvYmplY3QgaXMgbW9kaWZpZWQsXG4gICAqIGl0cyB2ZXJzaW9uIG51bWJlciB3aWxsIGJlIGluY3JlbWVudGVkLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFJldmlzaW9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBPYnNlcnZhYmxlLnByb3RvdHlwZS5nZXRSZXZpc2lvbiA9IGZ1bmN0aW9uIGdldFJldmlzaW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5yZXZpc2lvbl87XG4gIH07XG5cbiAgLyoqXG4gICAqIExpc3RlbiBmb3IgYSBjZXJ0YWluIHR5cGUgb2YgZXZlbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfEFycmF5PHN0cmluZz59IHR5cGUgVGhlIGV2ZW50IHR5cGUgb3IgYXJyYXkgb2YgZXZlbnQgdHlwZXMuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oPyk6ID99IGxpc3RlbmVyIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fEFycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59IFVuaXF1ZSBrZXkgZm9yIHRoZSBsaXN0ZW5lci4gSWZcbiAgICogICAgIGNhbGxlZCB3aXRoIGFuIGFycmF5IG9mIGV2ZW50IHR5cGVzIGFzIHRoZSBmaXJzdCBhcmd1bWVudCwgdGhlIHJldHVyblxuICAgKiAgICAgd2lsbCBiZSBhbiBhcnJheSBvZiBrZXlzLlxuICAgKiBAYXBpXG4gICAqL1xuICBPYnNlcnZhYmxlLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIG9uICh0eXBlLCBsaXN0ZW5lcikge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHR5cGUpKSB7XG4gICAgICB2YXIgbGVuID0gdHlwZS5sZW5ndGg7XG4gICAgICB2YXIga2V5cyA9IG5ldyBBcnJheShsZW4pO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICBrZXlzW2ldID0gbGlzdGVuKHRoaXMsIHR5cGVbaV0sIGxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBrZXlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbGlzdGVuKHRoaXMsIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodHlwZSksIGxpc3RlbmVyKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIExpc3RlbiBvbmNlIGZvciBhIGNlcnRhaW4gdHlwZSBvZiBldmVudC5cbiAgICogQHBhcmFtIHtzdHJpbmd8QXJyYXk8c3RyaW5nPn0gdHlwZSBUaGUgZXZlbnQgdHlwZSBvciBhcnJheSBvZiBldmVudCB0eXBlcy5cbiAgICogQHBhcmFtIHtmdW5jdGlvbig/KTogP30gbGlzdGVuZXIgVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl8QXJyYXk8aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn0gVW5pcXVlIGtleSBmb3IgdGhlIGxpc3RlbmVyLiBJZlxuICAgKiAgICAgY2FsbGVkIHdpdGggYW4gYXJyYXkgb2YgZXZlbnQgdHlwZXMgYXMgdGhlIGZpcnN0IGFyZ3VtZW50LCB0aGUgcmV0dXJuXG4gICAqICAgICB3aWxsIGJlIGFuIGFycmF5IG9mIGtleXMuXG4gICAqIEBhcGlcbiAgICovXG4gIE9ic2VydmFibGUucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiBvbmNlICh0eXBlLCBsaXN0ZW5lcikge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHR5cGUpKSB7XG4gICAgICB2YXIgbGVuID0gdHlwZS5sZW5ndGg7XG4gICAgICB2YXIga2V5cyA9IG5ldyBBcnJheShsZW4pO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICBrZXlzW2ldID0gbGlzdGVuT25jZSh0aGlzLCB0eXBlW2ldLCBsaXN0ZW5lcik7XG4gICAgICB9XG4gICAgICByZXR1cm4ga2V5cztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGxpc3Rlbk9uY2UodGhpcywgLyoqIEB0eXBlIHtzdHJpbmd9ICovICh0eXBlKSwgbGlzdGVuZXIpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVW5saXN0ZW4gZm9yIGEgY2VydGFpbiB0eXBlIG9mIGV2ZW50LlxuICAgKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSB0eXBlIFRoZSBldmVudCB0eXBlIG9yIGFycmF5IG9mIGV2ZW50IHR5cGVzLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKD8pOiA/fSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIE9ic2VydmFibGUucHJvdG90eXBlLnVuID0gZnVuY3Rpb24gdW4gKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodHlwZSkpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHR5cGUubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB1bmxpc3Rlbih0aGlzLCB0eXBlW2ldLCBsaXN0ZW5lcik7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgIHVubGlzdGVuKHRoaXMsIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodHlwZSksIGxpc3RlbmVyKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIE9ic2VydmFibGU7XG59KEV2ZW50VGFyZ2V0KSk7XG5cblxuLyoqXG4gKiBSZW1vdmVzIGFuIGV2ZW50IGxpc3RlbmVyIHVzaW5nIHRoZSBrZXkgcmV0dXJuZWQgYnkgYG9uKClgIG9yIGBvbmNlKClgLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl8QXJyYXk8aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn0ga2V5IFRoZSBrZXkgcmV0dXJuZWQgYnkgYG9uKClgXG4gKiAgICAgb3IgYG9uY2UoKWAgKG9yIGFuIGFycmF5IG9mIGtleXMpLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gdW5CeUtleShrZXkpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoa2V5KSkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGtleS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICB1bmxpc3RlbkJ5S2V5KGtleVtpXSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHVubGlzdGVuQnlLZXkoLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9ICovIChrZXkpKTtcbiAgfVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IE9ic2VydmFibGU7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9ic2VydmFibGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2Z1bmN0aW9uc1xuICovXG5cbi8qKlxuICogQWx3YXlzIHJldHVybnMgdHJ1ZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gVFJVRSgpIHtcbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogQWx3YXlzIHJldHVybnMgZmFsc2UuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gZmFsc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBGQUxTRSgpIHtcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIEEgcmV1c2FibGUgZnVuY3Rpb24sIHVzZWQgZS5nLiBhcyBhIGRlZmF1bHQgZm9yIGNhbGxiYWNrcy5cbiAqXG4gKiBAcmV0dXJuIHt2b2lkfSBOb3RoaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gVk9JRCgpIHt9XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZ1bmN0aW9ucy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvYXNzZXJ0c1xuICovXG5pbXBvcnQgQXNzZXJ0aW9uRXJyb3IgZnJvbSAnLi9Bc3NlcnRpb25FcnJvci5qcyc7XG5cbi8qKlxuICogQHBhcmFtIHsqfSBhc3NlcnRpb24gQXNzZXJ0aW9uIHdlIGV4cGVjdGVkIHRvIGJlIHRydXRoeS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlcnJvckNvZGUgRXJyb3IgY29kZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydChhc3NlcnRpb24sIGVycm9yQ29kZSkge1xuICBpZiAoIWFzc2VydGlvbikge1xuICAgIHRocm93IG5ldyBBc3NlcnRpb25FcnJvcihlcnJvckNvZGUpO1xuICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFzc2VydHMuanMubWFwIl0sInNvdXJjZVJvb3QiOiIifQ==