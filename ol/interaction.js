(window.webpackJsonp=window.webpackJsonp||[]).push([[11,4],[,,,,,,,function(t,e,i){"use strict";function n(t,e,i){for(var n,o,s=i||r,a=0,h=t.length,u=!1;a<h;)(o=+s(t[n=a+(h-a>>1)],e))<0?a=n+1:(h=n,u=!o);return u?a:~a}function r(t,e){return t>e?1:t<e?-1:0}function o(t,e){return t.indexOf(e)>=0}function s(t,e,i){var n,r=t.length;if(t[0]<=e)return 0;if(e<=t[r-1])return r-1;if(i>0){for(n=1;n<r;++n)if(t[n]<e)return n-1}else if(i<0){for(n=1;n<r;++n)if(t[n]<=e)return n}else for(n=1;n<r;++n){if(t[n]==e)return n;if(t[n]<e)return t[n-1]-e<e-t[n]?n-1:n}return r-1}function a(t,e,i){for(;e<i;){var n=t[e];t[e]=t[i],t[i]=n,++e,--i}}function h(t,e){for(var i=Array.isArray(e)?e:[e],n=i.length,r=0;r<n;r++)t[t.length]=i[r]}function u(t,e){var i=t.indexOf(e),n=i>-1;return n&&t.splice(i,1),n}function c(t,e){for(var i,n=t.length>>>0,r=0;r<n;r++)if(e(i=t[r],r,t))return i;return null}function l(t,e){var i=t.length;if(i!==e.length)return!1;for(var n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function d(t,e){var i,n=t.length,r=Array(t.length);for(i=0;i<n;i++)r[i]={index:i,value:t[i]};for(r.sort(function(t,i){return e(t.value,i.value)||t.index-i.index}),i=0;i<t.length;i++)t[i]=r[i].value}function p(t,e){var i;return!t.every(function(n,r){return i=r,!e(n,r,t)})?i:-1}function f(t,e,i){var n=e||r;return t.every(function(e,r){if(0===r)return!0;var o=n(t[r-1],e);return!(o>0||i&&0===o)})}i.d(e,"a",function(){return n}),i.d(e,"i",function(){return r}),i.d(e,"f",function(){return o}),i.d(e,"h",function(){return s}),i.d(e,"k",function(){return a}),i.d(e,"c",function(){return h}),i.d(e,"j",function(){return u}),i.d(e,"d",function(){return c}),i.d(e,"b",function(){return l}),i.d(e,"l",function(){return d}),i.d(e,"e",function(){return p}),i.d(e,"g",function(){return f})},,,,,,,function(t,e,i){"use strict";e.a={ANIMATING:0,INTERACTING:1}},,function(t,e,i){"use strict";e.a={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"}},,function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r}),i.d(e,"c",function(){return o}),i.d(e,"e",function(){return s}),i.d(e,"f",function(){return a}),i.d(e,"g",function(){return h}),i.d(e,"h",function(){return u}),i.d(e,"d",function(){return c}),i.d(e,"i",function(){return l});i(6),i(51);function n(t,e){return t[0]+=e[0],t[1]+=e[1],t}function r(t,e){var i=e.getRadius(),n=e.getCenter(),r=n[0],o=n[1],s=t[0]-r,a=t[1]-o;0===s&&0===a&&(s=1);var h=Math.sqrt(s*s+a*a);return[r+i*s/h,o+i*a/h]}function o(t,e){var i,n,r=t[0],o=t[1],s=e[0],a=e[1],h=s[0],u=s[1],c=a[0],l=a[1],d=c-h,p=l-u,f=0===d&&0===p?0:(d*(r-h)+p*(o-u))/(d*d+p*p||0);return f<=0?(i=h,n=u):f>=1?(i=c,n=l):(i=h+f*d,n=u+f*p),[i,n]}function s(t,e){for(var i=!0,n=t.length-1;n>=0;--n)if(t[n]!=e[n]){i=!1;break}return i}function a(t,e){var i=Math.cos(e),n=Math.sin(e),r=t[0]*i-t[1]*n,o=t[1]*i+t[0]*n;return t[0]=r,t[1]=o,t}function h(t,e){return t[0]*=e,t[1]*=e,t}function u(t,e){var i=t[0]-e[0],n=t[1]-e[1];return i*i+n*n}function c(t,e){return Math.sqrt(u(t,e))}function l(t,e){return u(t,o(t,e))}},,,function(t,e,i){"use strict";e.a={ADD:"add",REMOVE:"remove"}},function(t,e,i){"use strict";function n(t,e,i,n,r){for(var o=void 0!==r?r:[],s=0,a=e;a<i;a+=n)o[s++]=t.slice(a,a+n);return o.length=s,o}function r(t,e,i,r,o){for(var s=void 0!==o?o:[],a=0,h=0,u=i.length;h<u;++h){var c=i[h];s[a++]=n(t,e,c,r,s[a]),e=c}return s.length=a,s}function o(t,e,i,n,o){for(var s=void 0!==o?o:[],a=0,h=0,u=i.length;h<u;++h){var c=i[h];s[a++]=r(t,e,c,n,s[a]),e=c[c.length-1]}return s.length=a,s}i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r}),i.d(e,"c",function(){return o})},,function(t,e,i){"use strict";function n(t){return Math.pow(t,3)}function r(t){return 1-n(1-t)}function o(t){return 3*t*t-2*t*t*t}function s(t){return t}i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r}),i.d(e,"c",function(){return o}),i.d(e,"d",function(){return s})},function(t,e,i){"use strict";var n=i(67),r=i(21),o=i(12),s=i(11),a="length",h=function(t){function e(e,i){t.call(this,e),this.element=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(s.a),u=function(t){function e(e,i){t.call(this);var n=i||{};if(this.unique_=!!n.unique,this.array_=e||[],this.unique_)for(var r=0,o=this.array_.length;r<o;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,i=t.length;e<i;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)t(e[i],i,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(a)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new h(r.a.ADD,e))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new h(r.a.REMOVE,e)),e},e.prototype.setAt=function(t,e){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new h(r.a.REMOVE,n)),this.dispatchEvent(new h(r.a.ADD,e))}else{for(var o=i;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(a,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===t&&i!==e)throw new n.a(58)},e}(o.a);e.a=u},function(t,e,i){"use strict";var n=i(2);e.a={SINGLECLICK:"singleclick",CLICK:n.a.CLICK,DBLCLICK:n.a.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},function(t,e,i){"use strict";i.d(e,"a",function(){return r}),i.d(e,"b",function(){return o}),i.d(e,"e",function(){return s}),i.d(e,"c",function(){return h}),i.d(e,"d",function(){return u});var n=i(6);function r(t,e,i,r,o,s,a){var h=(i-e)/r;if(h<3){for(;e<i;e+=r)s[a++]=t[e],s[a++]=t[e+1];return a}var u=new Array(h);u[0]=1,u[h-1]=1;for(var c=[e,i-r],l=0;c.length>0;){for(var d=c.pop(),p=c.pop(),f=0,_=t[p],g=t[p+1],v=t[d],y=t[d+1],m=p+r;m<d;m+=r){var C=t[m],E=t[m+1],O=Object(n.g)(C,E,_,g,v,y);O>f&&(l=m,f=O)}f>o&&(u[(l-e)/r]=1,p+r<l&&c.push(p,l),l+r<d&&c.push(l,d))}for(var b=0;b<h;++b)u[b]&&(s[a++]=t[e+b*r],s[a++]=t[e+b*r+1]);return a}function o(t,e,i,n,o,s,a,h){for(var u=0,c=i.length;u<c;++u){var l=i[u];a=r(t,e,l,n,o,s,a),h.push(a),e=l}return a}function s(t,e){return e*Math.round(t/e)}function a(t,e,i,n,r,o,a){if(e==i)return a;var h,u,c=s(t[e],r),l=s(t[e+1],r);e+=n,o[a++]=c,o[a++]=l;do{if(h=s(t[e],r),u=s(t[e+1],r),(e+=n)==i)return o[a++]=h,o[a++]=u,a}while(h==c&&u==l);for(;e<i;){var d=s(t[e],r),p=s(t[e+1],r);if(e+=n,d!=h||p!=u){var f=h-c,_=u-l,g=d-c,v=p-l;f*v==_*g&&(f<0&&g<f||f==g||f>0&&g>f)&&(_<0&&v<_||_==v||_>0&&v>_)?(h=d,u=p):(o[a++]=h,o[a++]=u,c=h,l=u,h=d,u=p)}}return o[a++]=h,o[a++]=u,a}function h(t,e,i,n,r,o,s,h){for(var u=0,c=i.length;u<c;++u){var l=i[u];s=a(t,e,l,n,r,o,s),h.push(s),e=l}return s}function u(t,e,i,n,r,o,s,a){for(var u=0,c=i.length;u<c;++u){var l=i[u],d=[];s=h(t,e,l,n,r,o,s,d),a.push(d),e=l[l.length-1]}return s}},,function(t,e,i){"use strict";e.a={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"}},,function(t,e,i){"use strict";var n=i(7),r=i(1),o=i(37),s=i(10),a=i(20),h=i(46),u=i(33),c=i(23),l=i(22),d=i(27),p=function(t){function e(e,i){t.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?this.setCoordinates(e,i):this.setFlatCoordinates(i,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){return n<Object(r.e)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(u.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(u.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.getArea=function(){return Object(h.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Object(l.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Object(d.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,o.a.XY)},e.prototype.getType=function(){return s.a.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(c.b)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(a.a),f=i(42),_=i(83),g=i(36),v=i(59),y=i(43),m=i(66),C=i(6);i.d(e,"a",function(){return O}),i.d(e,"d",function(){return b}),i.d(e,"c",function(){return x}),i.d(e,"e",function(){return R});var E=function(t){function e(e,i,n){t.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==i&&n?(this.setFlatCoordinates(i,e),this.ends_=n):this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendLinearRing=function(t){this.flatCoordinates?Object(n.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,n){return n<Object(r.e)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(u.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(u.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.containsXY=function(t,e){return Object(g.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return Object(h.b)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(m.c)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Object(l.b)(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Object(r.x)(this.getExtent());this.flatInteriorPoint_=Object(v.a)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new f.default(this.getFlatInteriorPoint(),o.a.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new p(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[],r=0,o=0,s=i.length;o<s;++o){var a=i[o],h=new p(e.slice(r,a),t);n.push(h),r=a}return n},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Object(m.a)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(m.c)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=Object(d.c)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,n),new e(i,o.a.XY,n)},e.prototype.getType=function(){return s.a.POLYGON},e.prototype.intersectsExtent=function(t){return Object(y.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=Object(c.c)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(a.a);e.b=E;function O(t,e,i,r){for(var s=i||32,a=[],h=0;h<s;++h)Object(n.c)(a,Object(_.b)(t,e,2*Math.PI*h/s,r));return a.push(a[0],a[1]),new E(a,o.a.XY,[a.length])}function b(t){var e=t[0],i=t[1],n=t[2],r=t[3],s=[e,i,e,r,n,r,n,i,e,i];return new E(s,o.a.XY,[s.length])}function x(t,e,i){for(var n=e||32,r=t.getStride(),o=t.getLayout(),s=t.getCenter(),a=r*(n+1),h=new Array(a),u=0;u<a;u+=r){h[u]=0,h[u+1]=0;for(var c=2;c<r;c++)h[u+c]=s[c]}var l=[h.length],d=new E(h,o,l);return R(d,s,t.getRadius(),i),d}function R(t,e,i,n){for(var r=t.getFlatCoordinates(),o=t.getStride(),s=r.length/o-1,a=n||0,h=0;h<=s;++h){var u=h*o,c=a+2*Object(C.d)(h,s)*Math.PI/s;r[u]=e[0]+i*Math.cos(c),r[u+1]=e[1]+i*Math.sin(c)}t.changed()}},function(t,e,i){"use strict";i.d(e,"b",function(){return p});var n=i(4),r=i(2),o=i(3),s=i(12),a=i(58),h=i(56),u=i(5),c=i(41),l=i(16),d=function(t){function e(e){var i=Object(u.a)({},e);delete i.source,t.call(this,i),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,e.map&&this.setMap(e.map),Object(n.a)(this,Object(s.b)(h.a.SOURCE),this.handleSourcePropertyChange_,this);var r=e.source?e.source:null;this.setSource(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(h.a.SOURCE)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():l.a.UNDEFINED},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Object(n.e)(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=Object(n.a)(t,r.a.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(Object(n.e)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Object(n.e)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Object(n.a)(t,c.a.PRECOMPOSE,function(t){var e=t,i=this.getLayerState();i.managed=!1,void 0===this.getZIndex()&&(i.zIndex=1/0),e.frameState.layerStatesArray.push(i),e.frameState.layerStates[Object(o.c)(this)]=i},this),this.mapRenderKey_=Object(n.a)(this,r.a.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(h.a.SOURCE,t)},e}(a.a);function p(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution}e.a=d},function(t,e,i){"use strict";i.d(e,"e",function(){return o}),i.d(e,"a",function(){return s}),i.d(e,"f",function(){return a}),i.d(e,"d",function(){return h}),i.d(e,"b",function(){return u}),i.d(e,"c",function(){return c});var n=i(6);function r(t,e,i,r,o,s,a){var h,u=t[e],c=t[e+1],l=t[i]-u,d=t[i+1]-c;if(0===l&&0===d)h=e;else{var p=((o-u)*l+(s-c)*d)/(l*l+d*d);if(p>1)h=i;else{if(p>0){for(var f=0;f<r;++f)a[f]=Object(n.c)(t[e+f],t[i+f],p);return void(a.length=r)}h=e}}for(var _=0;_<r;++_)a[_]=t[h+_];a.length=r}function o(t,e,i,r,o){var s=t[e],a=t[e+1];for(e+=r;e<i;e+=r){var h=t[e],u=t[e+1],c=Object(n.f)(s,a,h,u);c>o&&(o=c),s=h,a=u}return o}function s(t,e,i,n,r){for(var s=0,a=i.length;s<a;++s){var h=i[s];r=o(t,e,h,n,r),e=h}return r}function a(t,e,i,n,r){for(var o=0,a=i.length;o<a;++o){var h=i[o];r=s(t,e,h,n,r),e=h[h.length-1]}return r}function h(t,e,i,o,s,a,h,u,c,l,d){if(e==i)return l;var p,f;if(0===s){if((f=Object(n.f)(h,u,t[e],t[e+1]))<l){for(p=0;p<o;++p)c[p]=t[e+p];return c.length=o,f}return l}for(var _=d||[NaN,NaN],g=e+o;g<i;)if(r(t,g-o,g,o,h,u,_),(f=Object(n.f)(h,u,_[0],_[1]))<l){for(l=f,p=0;p<o;++p)c[p]=_[p];c.length=o,g+=o}else g+=o*Math.max((Math.sqrt(f)-Math.sqrt(l))/s|0,1);if(a&&(r(t,i-o,e,o,h,u,_),(f=Object(n.f)(h,u,_[0],_[1]))<l)){for(l=f,p=0;p<o;++p)c[p]=_[p];c.length=o}return l}function u(t,e,i,n,r,o,s,a,u,c,l){for(var d=l||[NaN,NaN],p=0,f=i.length;p<f;++p){var _=i[p];c=h(t,e,_,n,r,o,s,a,u,c,d),e=_}return c}function c(t,e,i,n,r,o,s,a,h,c,l){for(var d=l||[NaN,NaN],p=0,f=i.length;p<f;++p){var _=i[p];c=u(t,e,_,n,r,o,s,a,h,c,d),e=_[_.length-1]}return c}},function(t,e,i){"use strict";var n=i(29),r=i(32),o=i(61),s=i(5),a=i(35),h="renderOrder",u=function(t){function e(e){var i=e||{},r=Object(s.a)({},i);delete r.style,delete r.renderBuffer,delete r.updateWhileAnimating,delete r.updateWhileInteracting,t.call(this,r),this.declutter_=void 0!==i.declutter&&i.declutter,this.renderBuffer_=void 0!==i.renderBuffer?i.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(i.style),this.updateWhileAnimating_=void 0!==i.updateWhileAnimating&&i.updateWhileAnimating,this.updateWhileInteracting_=void 0!==i.updateWhileInteracting&&i.updateWhileInteracting,this.renderMode_=i.renderMode||o.a.VECTOR,this.type=n.a.VECTOR}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.setDeclutter=function(t){this.declutter_=t},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(h)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(h,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:a.a,this.styleFunction_=null===t?void 0:Object(a.d)(this.style_),this.changed()},e.prototype.getRenderMode=function(){return this.renderMode_},e}(r.a);u.prototype.getSource,e.a=u},,function(t,e,i){"use strict";i.d(e,"a",function(){return r}),i.d(e,"b",function(){return o}),i.d(e,"c",function(){return s}),i.d(e,"d",function(){return a});var n=i(1);function r(t,e,i,r,s){return!Object(n.t)(s,function(n){return!o(t,e,i,r,n[0],n[1])})}function o(t,e,i,n,r,o){for(var s=0,a=t[i-n],h=t[i-n+1];e<i;e+=n){var u=t[e],c=t[e+1];h<=o?c>o&&(u-a)*(o-h)-(r-a)*(c-h)>0&&s++:c<=o&&(u-a)*(o-h)-(r-a)*(c-h)<0&&s--,a=u,h=c}return 0!==s}function s(t,e,i,n,r,s){if(0===i.length)return!1;if(!o(t,e,i[0],n,r,s))return!1;for(var a=1,h=i.length;a<h;++a)if(o(t,i[a-1],i[a],n,r,s))return!1;return!0}function a(t,e,i,n,r,o){if(0===i.length)return!1;for(var a=0,h=i.length;a<h;++a){var u=i[a];if(s(t,e,u,n,r,o))return!0;e=u[u.length-1]}return!1}},,,function(t,e,i){"use strict";var n=i(3),r=i(25),o=i(21),s=i(50),a=i(7),h=i(9),u=i(4),c=i(11),l=i(2),d=i(1),p=i(72),f=i(8);function _(t,e){return[[-1/0,-1/0,1/0,1/0]]}var g=i(5),v=i(54),y=i(16),m=i(53),C=i(52),E=function(t){function e(e,i){t.call(this,e),this.feature=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(c.a),O=function(t){function e(e){var i=e||{};t.call(this,{attributions:i.attributions,projection:void 0,state:y.a.READY,wrapX:void 0===i.wrapX||i.wrapX}),this.loader_=f.c,this.format_=i.format,this.overlaps_=null==i.overlaps||i.overlaps,this.url_=i.url,void 0!==i.loader?this.loader_=i.loader:void 0!==this.url_&&(Object(h.a)(this.format_,7),this.loader_=Object(p.b)(this.url_,this.format_)),this.strategy_=void 0!==i.strategy?i.strategy:_;var n,o,s=void 0===i.useSpatialIndex||i.useSpatialIndex;this.featuresRtree_=s?new C.a:null,this.loadedExtentsRtree_=new C.a,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(i.features)?o=i.features:i.features&&(o=(n=i.features).getArray()),s||void 0!==n||(n=new r.a(o)),void 0!==o&&this.addFeaturesInternal(o),void 0!==n&&this.bindFeaturesCollection_(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=Object(n.c)(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var i=t.getGeometry();if(i){var r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new E(m.a.ADDFEATURE,t))}},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[Object(u.a)(e,l.a.CHANGE,this.handleFeatureChange_,this),Object(u.a)(e,s.a.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var i=!0,n=e.getId();return void 0!==n?n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=e:(Object(h.a)(!(t in this.undefIdIndex_),30),this.undefIdIndex_[t]=e),i},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],i=[],r=[],o=0,s=t.length;o<s;o++){var a=t[o],h=Object(n.c)(a);this.addToIndex_(h,a)&&i.push(a)}for(var u=0,c=i.length;u<c;u++){var l=i[u],d=Object(n.c)(l);this.setupChangeEvents_(d,l);var p=l.getGeometry();if(p){var f=p.getExtent();e.push(f),r.push(l)}else this.nullGeometryFeatures_[d]=l}this.featuresRtree_&&this.featuresRtree_.load(e,r);for(var _=0,g=i.length;_<g;_++)this.dispatchEvent(new E(m.a.ADDFEATURE,i[_]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;Object(u.a)(this,m.a.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),Object(u.a)(this,m.a.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),Object(u.a)(t,o.a.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)},this),Object(u.a)(t,o.a.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)},this),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(u.e)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_)for(var i in this.featuresRtree_.forEach(this.removeFeatureInternal,this),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};var n=new E(m.a.CLEAR);this.dispatchEvent(n),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(i){return i.getGeometry().intersectsCoordinate(t)?e(i):void 0})},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){var n=e(i);if(n)return n}})},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Object(g.d)(this.nullGeometryFeatures_)||Object(a.c)(t,Object(g.c)(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_.getInExtent(t)},e.prototype.getClosestFeatureToCoordinate=function(t,e){var i=t[0],n=t[1],r=null,o=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],h=e||f.b;return this.featuresRtree_.forEachInExtent(a,function(t){if(h(t)){var e=t.getGeometry(),u=s;if((s=e.closestPointXY(i,n,o,s))<u){r=t;var c=Math.sqrt(s);a[0]=i-c,a[1]=n-c,a[2]=i+c,a[3]=n+c}}}),r},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,i=Object(n.c)(e),r=e.getGeometry();if(r){var o=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);var s=e.getId();if(void 0!==s){var a=s.toString();i in this.undefIdIndex_?(delete this.undefIdIndex_[i],this.idIndex_[a]=e):this.idIndex_[a]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[a]=e)}else i in this.undefIdIndex_||(this.removeFromIdIndex_(e),this.undefIdIndex_[i]=e);this.changed(),this.dispatchEvent(new E(m.a.CHANGEFEATURE,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:Object(n.c)(t)in this.undefIdIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Object(g.d)(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,i){var n=this,r=this.loadedExtentsRtree_,o=this.strategy_(t,e);this.loading=!1;for(var s=function(t,s){var a=o[t];r.forEachInExtent(a,function(t){return Object(d.g)(t.extent,a)})||(n.loader_.call(n,a,e,i),r.insert(a,{extent:a.slice()}),n.loading=n.loader_!==f.c)},a=0,h=o.length;a<h;++a)s(a)},e.prototype.removeLoadedExtent=function(t){var e,i=this.loadedExtentsRtree_;i.forEachInExtent(t,function(i){if(Object(d.p)(i.extent,t))return e=i,!0}),e&&i.remove(e)},e.prototype.removeFeature=function(t){var e=Object(n.c)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=Object(n.c)(t);this.featureChangeKeys_[e].forEach(u.e),delete this.featureChangeKeys_[e];var i=t.getId();void 0!==i?delete this.idIndex_[i.toString()]:delete this.undefIdIndex_[e],this.dispatchEvent(new E(m.a.REMOVEFEATURE,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e}(v.a);e.a=O},,function(t,e,i){"use strict";e.a={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render",RENDERCOMPLETE:"rendercomplete"}},,function(t,e,i){"use strict";i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a}),i.d(e,"c",function(){return h}),i.d(e,"d",function(){return u});var n=i(1),r=i(36),o=i(60);function s(t,e,i,r,s){var a=Object(n.s)(Object(n.j)(),t,e,i,r);return!!Object(n.F)(s,a)&&(!!Object(n.g)(s,a)||(a[0]>=s[0]&&a[2]<=s[2]||(a[1]>=s[1]&&a[3]<=s[3]||Object(o.a)(t,e,i,r,function(t,e){return Object(n.G)(s,t,e)}))))}function a(t,e,i,n,r){for(var o=0,a=i.length;o<a;++o){if(s(t,e,i[o],n,r))return!0;e=i[o]}return!1}function h(t,e,i,n,o){if(!function(t,e,i,n,o){return!!(s(t,e,i,n,o)||Object(r.b)(t,e,i,n,o[0],o[1])||Object(r.b)(t,e,i,n,o[0],o[3])||Object(r.b)(t,e,i,n,o[2],o[1])||Object(r.b)(t,e,i,n,o[2],o[3]))}(t,e,i[0],n,o))return!1;if(1===i.length)return!0;for(var a=1,h=i.length;a<h;++a)if(Object(r.a)(t,i[a-1],i[a],n,o)&&!s(t,i[a-1],i[a],n,o))return!1;return!0}function u(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o];if(h(t,e,a,n,r))return!0;e=a[a.length-1]}return!1}},,,function(t,e,i){"use strict";function n(t,e,i,n){for(var r=0,o=t[i-n],s=t[i-n+1];e<i;e+=n){var a=t[e],h=t[e+1];r+=s*a-o*h,o=a,s=h}return r/2}function r(t,e,i,r){for(var o=0,s=0,a=i.length;s<a;++s){var h=i[s];o+=n(t,e,h,r),e=h}return o}function o(t,e,i,n){for(var o=0,s=0,a=i.length;s<a;++s){var h=i[s];o+=r(t,e,h,n),e=h[h.length-1]}return o}i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r}),i.d(e,"c",function(){return o})},function(t,e,i){"use strict";i.d(e,"c",function(){return r}),i.d(e,"d",function(){return o}),i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a});var n=i(6);function r(t,e){return void 0!==t?0:void 0}function o(t,e){return void 0!==t?t+e:void 0}function s(t){var e=2*Math.PI/t;return function(t,i){return void 0!==t?t=Math.floor((t+i)/e+.5)*e:void 0}}function a(t){var e=t||Object(n.i)(5);return function(t,i){return void 0!==t?Math.abs(t+i)<=e?0:t+i:void 0}}},function(t,e,i){"use strict";i.r(e),i.d(e,"createStyleFunction",function(){return h});var n=i(9),r=i(4),o=i(2),s=i(12),a=function(t){function e(e){if(t.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,Object(r.a)(this,Object(s.b)(this.geometryName_),this.handleGeometryChanged_,this),e)if("function"==typeof e.getSimplifiedGeometry){var i=e;this.setGeometry(i)}else{var n=e;this.setProperties(n)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var n=this.getStyle();return n&&t.setStyle(n),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Object(r.e)(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Object(r.a)(t,o.a.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?h(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){Object(r.c)(this,Object(s.b)(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,Object(r.a)(this,Object(s.b)(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},e}(s.a);function h(t){return"function"==typeof t?t:(Array.isArray(t)?e=t:(Object(n.a)("function"==typeof t.getZIndex,41),e=[t]),function(){return e});var e}e.default=a},,,function(t,e,i){"use strict";function n(t,e,i){var n=void 0!==i?t.toFixed(i):""+t,r=n.indexOf(".");return(r=-1===r?n.length:r)>e?n:new Array(1+e-r).join("0")+n}function r(t,e){for(var i=(""+t).split("."),n=(""+e).split("."),r=0;r<Math.max(i.length,n.length);r++){var o=parseInt(i[r]||"0",10),s=parseInt(n[r]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0}i.d(e,"b",function(){return n}),i.d(e,"a",function(){return r})},function(t,e,i){"use strict";var n=i(3),r=i(62),o=i.n(r),s=i(1),a=i(5),h=function(t){this.rbush_=o()(t,void 0),this.items_={}};h.prototype.insert=function(t,e){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[Object(n.c)(e)]=i},h.prototype.load=function(t,e){for(var i=new Array(e.length),r=0,o=e.length;r<o;r++){var s=t[r],a=e[r],h={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:a};i[r]=h,this.items_[Object(n.c)(a)]=h}this.rbush_.load(i)},h.prototype.remove=function(t){var e=Object(n.c)(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)},h.prototype.update=function(t,e){var i=this.items_[Object(n.c)(e)],r=[i.minX,i.minY,i.maxX,i.maxY];Object(s.p)(r,t)||(this.remove(e),this.insert(t,e))},h.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},h.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})},h.prototype.forEach=function(t,e){return this.forEach_(this.getAll(),t,e)},h.prototype.forEachInExtent=function(t,e,i){return this.forEach_(this.getInExtent(t),e,i)},h.prototype.forEach_=function(t,e,i){for(var n,r=0,o=t.length;r<o;r++)if(n=e.call(i,t[r]))return n;return n},h.prototype.isEmpty=function(){return Object(a.d)(this.items_)},h.prototype.clear=function(){this.rbush_.clear(),this.items_={}},h.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return Object(s.k)(e.minX,e.minY,e.maxX,e.maxY,t)},h.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},e.a=h},function(t,e,i){"use strict";e.a={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"}},function(t,e,i){"use strict";var n=i(3),r=i(12),o=i(15),s=i(16),a=function(t){function e(e){t.call(this),this.projection_=Object(o.d)(e.projection),this.attributions_=h(e.attributions),this.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,this.loading=!1,this.state_=void 0!==e.state?e.state:s.a.READY,this.wrapX_=void 0!==e.wrapX&&e.wrapX}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return Object(n.b)()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=h(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(r.a);function h(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}e.a=a},,function(t,e,i){"use strict";e.a={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"}},,function(t,e,i){"use strict";var n=i(3),r=i(12),o=i(56),s=i(6),a=i(5),h=function(t){function e(e){t.call(this);var i=Object(a.a)({},e);i[o.a.OPACITY]=void 0!==e.opacity?e.opacity:1,i[o.a.VISIBLE]=void 0===e.visible||e.visible,i[o.a.Z_INDEX]=e.zIndex,i[o.a.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,i[o.a.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,this.setProperties(i),this.state_=null,this.type}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return this.type},e.prototype.getLayerState=function(){var t=this.state_||{layer:this,managed:!0};return t.opacity=Object(s.a)(this.getOpacity(),0,1),t.sourceState=this.getSourceState(),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=this.getZIndex()||0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),this.state_=t,t},e.prototype.getLayersArray=function(t){return Object(n.b)()},e.prototype.getLayerStatesArray=function(t){return Object(n.b)()},e.prototype.getExtent=function(){return this.get(o.a.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(o.a.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(o.a.MIN_RESOLUTION)},e.prototype.getOpacity=function(){return this.get(o.a.OPACITY)},e.prototype.getSourceState=function(){return Object(n.b)()},e.prototype.getVisible=function(){return this.get(o.a.VISIBLE)},e.prototype.getZIndex=function(){return this.get(o.a.Z_INDEX)},e.prototype.setExtent=function(t){this.set(o.a.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(o.a.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(o.a.MIN_RESOLUTION,t)},e.prototype.setOpacity=function(t){this.set(o.a.OPACITY,t)},e.prototype.setVisible=function(t){this.set(o.a.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(o.a.Z_INDEX,t)},e}(r.a);e.a=h},function(t,e,i){"use strict";i.d(e,"a",function(){return o}),i.d(e,"b",function(){return s});var n=i(7),r=i(36);function o(t,e,i,o,s,a,h){for(var u,c,l,d,p,f,_,g=s[a+1],v=[],y=0,m=i.length;y<m;++y){var C=i[y];for(d=t[C-o],f=t[C-o+1],u=e;u<C;u+=o)p=t[u],_=t[u+1],(g<=f&&_<=g||f<=g&&g<=_)&&(l=(g-f)/(_-f)*(p-d)+d,v.push(l)),d=p,f=_}var E=NaN,O=-1/0;for(v.sort(n.i),d=v[0],u=1,c=v.length;u<c;++u){p=v[u];var b=Math.abs(p-d);b>O&&(l=(d+p)/2,Object(r.c)(t,e,i,o,l,g)&&(E=l,O=b)),d=p}return isNaN(E)&&(E=s[a]),h?(h.push(E,g,O),h):[E,g,O]}function s(t,e,i,n,r){for(var s=[],a=0,h=i.length;a<h;++a){var u=i[a];s=o(t,e,u,n,r,2*a,s),e=u[u.length-1]}return s}},function(t,e,i){"use strict";function n(t,e,i,n,r,o){for(var s,a=[t[e],t[e+1]],h=[];e+n<i;e+=n){if(h[0]=t[e+n],h[1]=t[e+n+1],s=r.call(o,a,h))return s;a[0]=h[0],a[1]=h[1]}return!1}i.d(e,"a",function(){return n})},function(t,e,i){"use strict";e.a={IMAGE:"image",VECTOR:"vector"}},function(t,e,i){"use strict";t.exports=r,t.exports.default=r;var n=i(75);function r(t,e){if(!(this instanceof r))return new r(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,i,n,r){r||(r=_(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,s=e;s<i;s++)o=t.children[s],h(r,t.leaf?n(o):o);return r}function h(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function l(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function _(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(t,e,i,r,o){for(var s,a=[e,i];a.length;)(i=a.pop())-(e=a.pop())<=r||(s=e+Math.ceil((i-e)/r/2)*r,n(t,s,e,i,o),a.push(e,s,s,i))}r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox;if(!f(t,e))return i;for(var r,o,s,a,h=[];e;){for(r=0,o=e.children.length;r<o;r++)s=e.children[r],f(t,a=e.leaf?n(s):s)&&(e.leaf?i.push(s):p(t,a)?this._all(s,i):h.push(s));e=h.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!f(t,e))return!1;for(var n,r,o,s,a=[];e;){for(n=0,r=e.children.length;n<r;n++)if(o=e.children[n],f(t,s=e.leaf?i(o):o)){if(e.leaf||p(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=_([]),this},remove:function(t,e){if(!t)return this;for(var i,n,r,s,a=this.data,h=this.toBBox(t),u=[],c=[];a||u.length;){if(a||(a=u.pop(),n=u[u.length-1],i=c.pop(),s=!0),a.leaf&&-1!==(r=o(t,a.children,e)))return a.children.splice(r,1),u.push(a),this._condense(u),this;s||a.leaf||!p(a,h)?n?(i++,a=n.children[i],s=!1):a=null:(u.push(a),c.push(i),i=0,n=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:u,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,n){var r,o=i-e+1,a=this._maxEntries;if(o<=a)return s(r=_(t.slice(e,i+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,n-1))),(r=_([])).leaf=!1,r.height=n;var h,u,c,l,d=Math.ceil(o/a),p=d*Math.ceil(Math.sqrt(a));for(g(t,e,i,p,this.compareMinX),h=e;h<=i;h+=p)for(g(t,h,c=Math.min(h+p-1,i),d,this.compareMinY),u=h;u<=c;u+=d)l=Math.min(u+d-1,c),r.children.push(this._build(t,u,l,n-1));return s(r,this.toBBox),r},_chooseSubtree:function(t,e,i,n){for(var r,o,s,a,h,u,c,d,p,f;n.push(e),!e.leaf&&n.length-1!==i;){for(c=d=1/0,r=0,o=e.children.length;r<o;r++)h=l(s=e.children[r]),p=t,f=s,(u=(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-h)<d?(d=u,c=h<c?h:c,a=s):u===d&&h<c&&(c=h,a=s);e=a||e.children[0]}return e},_insert:function(t,e,i){var n=this.toBBox,r=i?t:n(t),o=[],s=this._chooseSubtree(r,this.data,e,o);for(s.children.push(t),h(s,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var o=this._chooseSplitIndex(i,r,n),a=_(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,s(i,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},_splitRoot:function(t,e){this.data=_([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var n,r,o,s,h,u,c,d,p,f,_,g,v,y;for(u=c=1/0,n=e;n<=i-e;n++)r=a(t,0,n,this.toBBox),o=a(t,n,i,this.toBBox),p=r,f=o,_=void 0,g=void 0,v=void 0,y=void 0,_=Math.max(p.minX,f.minX),g=Math.max(p.minY,f.minY),v=Math.min(p.maxX,f.maxX),y=Math.min(p.maxY,f.maxY),s=Math.max(0,v-_)*Math.max(0,y-g),h=l(r)+l(o),s<u?(u=s,d=n,c=h<c?h:c):s===u&&h<c&&(c=h,d=n);return d},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:u,r=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},_allDistMargin:function(t,e,i,n){t.children.sort(n);var r,o,s=this.toBBox,u=a(t,0,e,s),c=a(t,i-e,i,s),l=d(u)+d(c);for(r=e;r<i-e;r++)o=t.children[r],h(u,t.leaf?s(o):o),l+=d(u);for(r=i-e-1;r>=e;r--)o=t.children[r],h(c,t.leaf?s(o):o),l+=d(c);return l},_adjustParentBBoxes:function(t,e,i){for(var n=i;n>=0;n--)h(e[n],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():s(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},,,,function(t,e,i){"use strict";function n(t,e,i,n){for(;e<i-n;){for(var r=0;r<n;++r){var o=t[e+r];t[e+r]=t[i-n+r],t[i-n+r]=o}e+=n,i-=n}}function r(t,e,i,n){for(var r=0,o=t[i-n],s=t[i-n+1];e<i;e+=n){var a=t[e],h=t[e+1];r+=(a-o)*(h+s),o=a,s=h}return r>0}function o(t,e,i,n,o){for(var s=void 0!==o&&o,a=0,h=i.length;a<h;++a){var u=i[a],c=r(t,e,u,n);if(0===a){if(s&&c||!s&&!c)return!1}else if(s&&!c||!s&&c)return!1;e=u}return!0}function s(t,e,i,n,r){for(var s=0,a=i.length;s<a;++s)if(!o(t,e,i[s],n,r))return!1;return!0}function a(t,e,i,o,s){for(var a=void 0!==s&&s,h=0,u=i.length;h<u;++h){var c=i[h],l=r(t,e,c,o);(0===h?a&&l||!a&&!l:a&&!l||!a&&l)&&n(t,e,c,o),e=c}return e}function h(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o)e=a(t,e,i[o],n,r);return e}i.d(e,"a",function(){return o}),i.d(e,"b",function(){return s}),i.d(e,"c",function(){return a}),i.d(e,"d",function(){return h})},,,,function(t,e,i){"use strict";var n=function(t,e){this.dispatcher=t,this.mapping_=e};n.prototype.getEvents=function(){return Object.keys(this.mapping_)},n.prototype.getHandlerForEvent=function(t){return this.mapping_[t]},e.a=n},,function(t,e,i){"use strict";var n=i(8),r={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"};function o(t,e,i,n){return function(o,s,a){var h=new XMLHttpRequest;h.open("GET","function"==typeof t?t(o,s,a):t,!0),e.getType()==r.ARRAY_BUFFER&&(h.responseType="arraybuffer"),h.onload=function(t){if(!h.status||h.status>=200&&h.status<300){var o,s=e.getType();s==r.JSON||s==r.TEXT?o=h.responseText:s==r.XML?(o=h.responseXML)||(o=(new DOMParser).parseFromString(h.responseText,"application/xml")):s==r.ARRAY_BUFFER&&(o=h.response),o?i.call(this,e.readFeatures(o,{featureProjection:a}),e.readProjection(o),e.getLastExtent()):n.call(this)}else n.call(this)}.bind(this),h.onerror=function(){n.call(this)}.bind(this),h.send()}}function s(t,e){return o(t,e,function(t,e){"function"==typeof this.addFeatures&&this.addFeatures(t)},n.c)}i.d(e,"a",function(){return o}),i.d(e,"b",function(){return s})},,,function(t,e,i){t.exports=function(){"use strict";function t(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function e(t,e){return t<e?-1:t>e?1:0}return function(i,n,r,o,s){!function e(i,n,r,o,s){for(;o>r;){if(o-r>600){var a=o-r+1,h=n-r+1,u=Math.log(a),c=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*c*(a-c)/a)*(h-a/2<0?-1:1),d=Math.max(r,Math.floor(n-h*c/a+l)),p=Math.min(o,Math.floor(n+(a-h)*c/a+l));e(i,n,d,p,s)}var f=i[n],_=r,g=o;for(t(i,r,n),s(i[o],f)>0&&t(i,r,o);_<g;){for(t(i,_,g),_++,g--;s(i[_],f)<0;)_++;for(;s(i[g],f)>0;)g--}0===s(i[r],f)?t(i,r,g):t(i,++g,o),g<=n&&(r=g+1),n<=g&&(o=g-1)}}(i,n,r||0,o||i.length-1,s||e)}}()},function(t,e,i){"use strict";i.d(e,"a",function(){return r}),i.d(e,"b",function(){return o}),i.d(e,"d",function(){return d});var n=i(70),r=1,o="mouse";function s(t){if(!this.isEventSimulatedFromTouch_(t)){r.toString()in this.pointerMap&&this.cancel(t);var e=d(t,this.dispatcher);this.pointerMap[r.toString()]=t,this.dispatcher.down(e,t)}}function a(t){if(!this.isEventSimulatedFromTouch_(t)){var e=d(t,this.dispatcher);this.dispatcher.move(e,t)}}function h(t){if(!this.isEventSimulatedFromTouch_(t)){var e=this.pointerMap[r.toString()];if(e&&e.button===t.button){var i=d(t,this.dispatcher);this.dispatcher.up(i,t),this.cleanupMouse()}}}function u(t){if(!this.isEventSimulatedFromTouch_(t)){var e=d(t,this.dispatcher);this.dispatcher.enterOver(e,t)}}function c(t){if(!this.isEventSimulatedFromTouch_(t)){var e=d(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}}var l=function(t){function e(e){var i={mousedown:s,mousemove:a,mouseup:h,mouseover:u,mouseout:c};t.call(this,e,i),this.pointerMap=e.pointerMap,this.lastTouches=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isEventSimulatedFromTouch_=function(t){for(var e=this.lastTouches,i=t.clientX,n=t.clientY,r=0,o=e.length,s=void 0;r<o&&(s=e[r]);r++){var a=Math.abs(i-s[0]),h=Math.abs(n-s[1]);if(a<=25&&h<=25)return!0}return!1},e.prototype.cancel=function(t){var e=d(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},e.prototype.cleanupMouse=function(){delete this.pointerMap[r.toString()]},e}(n.a);function d(t,e){var i=e.cloneEvent(t,t),n=i.preventDefault;return i.preventDefault=function(){t.preventDefault(),n()},i.pointerId=r,i.isPrimary=!0,i.pointerType=o,i}e.c=l},,,,,,,,function(t,e,i){"use strict";function n(t,e,i,n){for(var r=t[e],o=t[e+1],s=0,a=e+n;a<i;a+=n){var h=t[a],u=t[a+1];s+=Math.sqrt((h-r)*(h-r)+(u-o)*(u-o)),r=h,o=u}return s}i.d(e,"a",function(){return n})},,,function(t,e,i){"use strict";var n=function(t){function e(e,i,n,r,o){t.call(this,e,i,n.originalEvent,r,o),this.pointerEvent=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(88).a);e.a=n},function(t,e,i){"use strict";var n=function(t){function e(e,i,n,r,o){t.call(this,e,i,o),this.originalEvent=n,this.pixel=i.getEventPixel(n),this.coordinate=i.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(i(89).a);e.a=n},function(t,e,i){"use strict";var n=function(t){function e(e,i,n){t.call(this,e),this.map=i,this.frameState=void 0!==n?n:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(11).a);e.a=n},,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";i.r(e);var n=i(25),r=function(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0};r.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},r.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},r.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var i=e-3;i>0&&this.points_[i+2]>t;)i-=3;var n=this.points_[e+2]-this.points_[i+2];if(n<1e3/60)return!1;var r=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/n,this.initialVelocity_>this.minVelocity_},r.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},r.prototype.getAngle=function(){return this.angle_};var o=r,s=i(26),a=i(12),h=i(24),u={ACTIVE:"active"},c=i(6);function l(t,e,i,n){e=t.constrainRotation(e,0),d(t,e,i,n)}function d(t,e,i,n){if(void 0!==e){var r=t.getRotation(),o=t.getCenter();void 0!==r&&o&&n>0?t.animate({rotation:e,anchor:i,duration:n,easing:h.b}):t.rotate(e,i)}}function p(t,e,i,n,r){e=t.constrainResolution(e,0,r),_(t,e,i,n)}function f(t,e,i,n){var r=t.getResolution(),o=t.constrainResolution(r,e,0);if(void 0!==o){var s=t.getResolutions();o=Object(c.a)(o,t.getMinResolution()||s[s.length-1],t.getMaxResolution()||s[0])}if(i&&void 0!==o&&o!==r){var a=t.getCenter(),h=t.calculateCenterZoom(o,i);h=t.constrainCenter(h),i=[(o*a[0]-r*h[0])/(o-r),(o*a[1]-r*h[1])/(o-r)]}_(t,o,i,n)}function _(t,e,i,n){if(e){var r=t.getResolution(),o=t.getCenter();if(void 0!==r&&o&&e!==r&&n)t.animate({resolution:e,anchor:i,duration:n,easing:h.b});else{if(i){var s=t.calculateCenterZoom(e,i);t.setCenter(s)}t.setResolution(e)}}}var g=function(t){function e(e){t.call(this),e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getActive=function(){return this.get(u.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(u.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(a.a);function v(t){var e=!1;if(t.type==s.a.DBLCLICK){var i=t.originalEvent,n=t.map,r=t.coordinate,o=i.shiftKey?-this.delta_:this.delta_;f(n.getView(),o,r,this.duration_),t.preventDefault(),e=!0}return!e}var y=function(t){function e(e){t.call(this,{handleEvent:v});var i=e||{};this.delta_=i.delta?i.delta:1,this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(g),m=i(14),C=i(18),E=i(9),O=i(8),b=i(28),x=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},R=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},F=function(t){return t.target.getTargetElement()===document.activeElement},I=O.b,T=function(t){var e=t.originalEvent;return 0==e.button&&!(b.j&&b.e&&e.ctrlKey)},j=O.a,P=function(t){return"pointermove"==t.type},M=function(t){return t.type==s.a.SINGLECLICK},w=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},N=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},A=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},D=function(t){var e=t.pointerEvent;return Object(E.a)(void 0!==e,56),"mouse"==e.pointerType},S=function(t){var e=t.pointerEvent;return Object(E.a)(void 0!==e,56),e.isPrimary&&0===e.button},L=i(5);function G(t){for(var e=t.length,i=0,n=0,r=0;r<e;r++)i+=t[r].clientX,n+=t[r].clientY;return[i/e,n/e]}var k=function(t){function e(e){var i=e||{};t.call(this,i),i.handleDownEvent&&(this.handleDownEvent=i.handleDownEvent),i.handleDragEvent&&(this.handleDragEvent=i.handleDragEvent),i.handleMoveEvent&&(this.handleMoveEvent=i.handleMoveEvent),i.handleUpEvent&&(this.handleUpEvent=i.handleUpEvent),i.stopDown&&(this.stopDown=i.stopDown),this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==s.a.POINTERDRAG)this.handleDragEvent(t);else if(t.type==s.a.POINTERUP){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==s.a.POINTERDOWN){var n=this.handleDownEvent(t);n&&t.preventDefault(),this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==s.a.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===s.a.POINTERDOWN||e===s.a.POINTERDRAG||e===s.a.POINTERUP}(t)){var e=t.pointerEvent,i=e.pointerId.toString();t.type==s.a.POINTERUP?delete this.trackedPointers_[i]:t.type==s.a.POINTERDOWN?this.trackedPointers_[i]=e:i in this.trackedPointers_&&(this.trackedPointers_[i]=e),this.targetPointers=Object(L.c)(this.trackedPointers_)}},e}(g),Y=function(t){function e(e){t.call(this,{stopDown:O.a});var i=e||{};this.kinetic_=i.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1,this.condition_=i.condition?i.condition:w,this.noKinetic_=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().setHint(m.a.INTERACTING,1));var e=this.targetPointers,i=G(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var n=this.lastCentroid[0]-i[0],r=i[1]-this.lastCentroid[1],o=t.map.getView(),s=[n,r];Object(C.g)(s,o.getResolution()),Object(C.f)(s,o.getRotation()),Object(C.a)(s,o.getCenter()),s=o.constrainCenter(s),o.setCenter(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length},e.prototype.handleUpEvent=function(t){var e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var n=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=i.getCenter(),s=e.getPixelFromCoordinate(o),a=e.getCoordinateFromPixel([s[0]-n*Math.cos(r),s[1]-n*Math.sin(r)]);i.animate({center:i.constrainCenter(a),duration:500,easing:h.b})}return this.panning_&&(this.panning_=!1,i.setHint(m.a.INTERACTING,-1)),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.setCenter(t.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(k),X=i(47),V=function(t){function e(e){var i=e||{};t.call(this,{stopDown:O.a}),this.condition_=i.condition?i.condition:R,this.lastAngle_=void 0,this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){if(D(t)){var e=t.map,i=e.getView();if(i.getConstraints().rotation!==X.c){var n=e.getSize(),r=t.pixel,o=Math.atan2(n[1]/2-r[1],r[0]-n[0]/2);if(void 0!==this.lastAngle_){var s=o-this.lastAngle_,a=i.getRotation();d(i,a-s)}this.lastAngle_=o}}},e.prototype.handleUpEvent=function(t){if(!D(t))return!0;var e=t.map.getView();e.setHint(m.a.INTERACTING,-1);var i=e.getRotation();return l(e,i,void 0,this.duration_),!1},e.prototype.handleDownEvent=function(t){return!!D(t)&&(!(!T(t)||!this.condition_(t))&&(t.map.getView().setHint(m.a.INTERACTING,1),this.lastAngle_=void 0,!0))},e}(k),U=i(1),B=i(11),K=i(57),q=i(31),H=function(t){function e(e){t.call(this),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,i=this.element_.style;i.left=Math.min(t[0],e[0])+"px",i.top=Math.min(t[1],e[1])+"px",i.width=Math.abs(e[0]-t[0])+"px",i.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left=e.top=e.width=e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixel,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new q.b([i])},e.prototype.getGeometry=function(){return this.geometry_},e}(K.a),W="boxstart",Z="boxdrag",z="boxend",J=function(t){function e(e,i,n){t.call(this,e),this.coordinate=i,this.mapBrowserEvent=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(B.a),Q=function(t){function e(e){t.call(this);var i=e||{};this.box_=new H(i.className||"ol-dragbox"),this.minArea_=void 0!==i.minArea?i.minArea:64,this.onBoxEnd_=i.onBoxEnd?i.onBoxEnd:O.c,this.startPixel_=null,this.condition_=i.condition?i.condition:I,this.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:this.defaultBoxEndCondition}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.defaultBoxEndCondition=function(t,e,i){var n=i[0]-e[0],r=i[1]-e[1];return n*n+r*r>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){D(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new J(Z,t.coordinate,t)))},e.prototype.handleUpEvent=function(t){return!D(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new J(z,t.coordinate,t))),!1)},e.prototype.handleDownEvent=function(t){return!!D(t)&&(!(!T(t)||!this.condition_(t))&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new J(W,t.coordinate,t)),!0))},e}(k);function $(){var t=this.getMap(),e=t.getView(),i=t.getSize(),n=this.getGeometry().getExtent();if(this.out_){var r=e.calculateExtent(i),o=Object(U.n)([t.getPixelFromCoordinate(Object(U.v)(n)),t.getPixelFromCoordinate(Object(U.D)(n))]),s=e.getResolutionForExtent(o,i);Object(U.J)(r,1/s),n=r}var a=e.constrainResolution(e.getResolutionForExtent(n,i)),u=Object(U.x)(n);u=e.constrainCenter(u),e.animate({resolution:a,center:u,duration:this.duration_,easing:h.b})}var tt=function(t){function e(e){var i=e||{},n=i.condition?i.condition:N;t.call(this,{condition:n,className:i.className||"ol-dragzoom",onBoxEnd:$}),this.duration_=void 0!==i.duration?i.duration:200,this.out_=void 0!==i.out&&i.out}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Q),et=i(2),it={LEFT:37,UP:38,RIGHT:39,DOWN:40};function nt(t){var e=!1;if(t.type==et.a.KEYDOWN){var i=t.originalEvent.keyCode;if(this.condition_(t)&&(i==it.DOWN||i==it.LEFT||i==it.RIGHT||i==it.UP)){var n=t.map.getView(),r=n.getResolution()*this.pixelDelta_,o=0,s=0;i==it.DOWN?s=-r:i==it.LEFT?o=-r:i==it.RIGHT?o=r:s=r;var a=[o,s];Object(C.f)(a,n.getRotation()),function(t,e,i){var n=t.getCenter();if(n){var r=t.constrainCenter([n[0]+e[0],n[1]+e[1]]);i?t.animate({duration:i,easing:h.d,center:r}):t.setCenter(r)}}(n,a,this.duration_),t.preventDefault(),e=!0}}return!e}var rt=function(t){function e(e){t.call(this,{handleEvent:nt});var i=e||{};this.defaultCondition_=function(t){return w(t)&&A(t)},this.condition_=void 0!==i.condition?i.condition:this.defaultCondition_,this.duration_=void 0!==i.duration?i.duration:100,this.pixelDelta_=void 0!==i.pixelDelta?i.pixelDelta:128}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(g);function ot(t){var e=!1;if(t.type==et.a.KEYDOWN||t.type==et.a.KEYPRESS){var i=t.originalEvent.charCode;if(this.condition_(t)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){var n=t.map,r=i=="+".charCodeAt(0)?this.delta_:-this.delta_;f(n.getView(),r,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}var st=function(t){function e(e){t.call(this,{handleEvent:ot});var i=e||{};this.condition_=i.condition?i.condition:A,this.delta_=i.delta?i.delta:1,this.duration_=void 0!==i.duration?i.duration:100}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(g),at="trackpad",ht="wheel",ut=function(t){function e(e){var i=e||{};t.call(this,i),this.delta_=0,this.duration_=void 0!==i.duration?i.duration:250,this.timeout_=void 0!==i.timeout?i.timeout:80,this.useAnchor_=void 0===i.useAnchor||i.useAnchor,this.constrainResolution_=i.constrainResolution||!1,this.condition_=i.condition?i.condition:I,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().setHint(m.a.INTERACTING,-1)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var e=t.type;if(e!==et.a.WHEEL&&e!==et.a.MOUSEWHEEL)return!0;t.preventDefault();var i,n=t.map,r=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==et.a.WHEEL?(i=r.deltaY,b.c&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=b.b),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)):t.type==et.a.MOUSEWHEEL&&(i=-r.wheelDeltaY,b.h&&(i/=3)),0===i)return!1;var o=Date.now();if(void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?at:ht),this.mode_===at){var s=n.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):s.setHint(m.a.INTERACTING,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var a=s.getResolution()*Math.pow(2,i/this.trackpadDeltaPerZoom_),u=s.getMinResolution(),c=s.getMaxResolution(),l=0;if(a<u?(a=Math.max(a,u/this.trackpadZoomBuffer_),l=1):a>c&&(a=Math.min(a,c*this.trackpadZoomBuffer_),l=-1),this.lastAnchor_){var d=s.calculateCenterZoom(a,this.lastAnchor_);s.setCenter(s.constrainCenter(d))}return s.setResolution(a),0===l&&this.constrainResolution_&&s.animate({resolution:s.constrainResolution(a,i>0?-1:1),easing:h.b,anchor:this.lastAnchor_,duration:this.duration_}),l>0?s.animate({resolution:u,easing:h.b,anchor:this.lastAnchor_,duration:500}):l<0&&s.animate({resolution:c,easing:h.b,anchor:this.lastAnchor_,duration:500}),this.startTime_=o,!1}this.delta_+=i;var p=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),p),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();f(e,-Object(c.a)(this.delta_,-1,1),this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(g),ct=function(t){function e(e){var i=e||{},n=i;n.stopDown||(n.stopDown=O.a),t.call(this,n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==i.threshold?i.threshold:.3,this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){var e=0,i=this.targetPointers[0],n=this.targetPointers[1],r=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(void 0!==this.lastAngle_){var o=r-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=r;var s=t.map,a=s.getView();if(a.getConstraints().rotation!==X.c){var h=s.getViewport().getBoundingClientRect(),u=G(this.targetPointers);if(u[0]-=h.left,u[1]-=h.top,this.anchor_=s.getCoordinateFromPixel(u),this.rotating_){var c=a.getRotation();s.render(),d(a,c+e,this.anchor_)}}},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView();if(e.setHint(m.a.INTERACTING,-1),this.rotating_){var i=e.getRotation();l(e,i,this.anchor_,this.duration_)}return!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().setHint(m.a.INTERACTING,1),!0}return!1},e}(k),lt=function(t){function e(e){var i=e||{},n=i;n.stopDown||(n.stopDown=O.a),t.call(this,n),this.constrainResolution_=i.constrainResolution||!1,this.anchor_=null,this.duration_=void 0!==i.duration?i.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){var e=1,i=this.targetPointers[0],n=this.targetPointers[1],r=i.clientX-n.clientX,o=i.clientY-n.clientY,s=Math.sqrt(r*r+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;var a=t.map,h=a.getView(),u=h.getResolution(),c=h.getMaxResolution(),l=h.getMinResolution(),d=u*e;d>c?(e=c/u,d=c):d<l&&(e=l/u,d=l),1!=e&&(this.lastScaleDelta_=e);var p=a.getViewport().getBoundingClientRect(),f=G(this.targetPointers);f[0]-=p.left,f[1]-=p.top,this.anchor_=a.getCoordinateFromPixel(f),a.render(),_(h,d,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView();e.setHint(m.a.INTERACTING,-1);var i=e.getResolution();if(this.constrainResolution_||i<e.getMinResolution()||i>e.getMaxResolution()){var n=this.lastScaleDelta_-1;p(e,i,this.anchor_,this.duration_,n)}return!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().setHint(m.a.INTERACTING,1),!0}return!1},e}(k),dt=i(4),pt=i(15),ft="addfeatures",_t=function(t){function e(e,i,n,r){t.call(this,e),this.features=n,this.file=i,this.projection=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(B.a);function gt(t){for(var e=t.dataTransfer.files,i=0,n=e.length;i<n;++i){var r=e.item(i),o=new FileReader;o.addEventListener(et.a.LOAD,this.handleResult_.bind(this,r)),o.readAsText(r)}}function vt(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}var yt=function(t){function e(e){var i=e||{};t.call(this,{handleEvent:O.b}),this.formatConstructors_=i.formatConstructors?i.formatConstructors:[],this.projection_=i.projection?Object(pt.d)(i.projection):null,this.dropListenKeys_=null,this.source_=i.source||null,this.target=i.target?i.target:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleResult_=function(t,e){var i=e.target.result,n=this.getMap(),r=this.projection_;r||(r=n.getView().getProjection());for(var o=this.formatConstructors_,s=[],a=0,h=o.length;a<h;++a){var u=new o[a];if((s=this.tryReadFeatures_(u,i,{featureProjection:r}))&&s.length>0)break}this.source_&&(this.source_.clear(),this.source_.addFeatures(s)),this.dispatchEvent(new _t(ft,t,s,r))},e.prototype.registerListeners_=function(){var t=this.getMap();if(t){var e=this.target?this.target:t.getViewport();this.dropListenKeys_=[Object(dt.a)(e,et.a.DROP,gt,this),Object(dt.a)(e,et.a.DRAGENTER,vt,this),Object(dt.a)(e,et.a.DRAGOVER,vt,this),Object(dt.a)(e,et.a.DROP,vt,this)]}},e.prototype.setActive=function(e){t.prototype.setActive.call(this,e),e?this.registerListeners_():this.unregisterListeners_()},e.prototype.setMap=function(e){this.unregisterListeners_(),t.prototype.setMap.call(this,e),this.getActive()&&this.registerListeners_()},e.prototype.tryReadFeatures_=function(t,e,i){try{return t.readFeatures(e,i)}catch(t){return null}},e.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(dt.e),this.dropListenKeys_=null)},e}(g),mt=function(t){function e(e){var i=e||{};t.call(this,i),this.condition_=i.condition?i.condition:N,this.lastAngle_=void 0,this.lastMagnitude_=void 0,this.lastScaleDelta_=0,this.duration_=void 0!==i.duration?i.duration:400}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){if(D(t)){var e=t.map,i=e.getSize(),n=t.pixel,r=n[0]-i[0]/2,o=i[1]/2-n[1],s=Math.atan2(o,r),a=Math.sqrt(r*r+o*o),h=e.getView();if(h.getConstraints().rotation!==X.c&&void 0!==this.lastAngle_){var u=s-this.lastAngle_;d(h,h.getRotation()-u)}if(this.lastAngle_=s,void 0!==this.lastMagnitude_){var c=this.lastMagnitude_*(h.getResolution()/a);_(h,c)}void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/a),this.lastMagnitude_=a}},e.prototype.handleUpEvent=function(t){if(!D(t))return!0;var e=t.map.getView();e.setHint(m.a.INTERACTING,-1);var i=this.lastScaleDelta_-1;return l(e,e.getRotation()),p(e,e.getResolution(),void 0,this.duration_,i),this.lastScaleDelta_=0,!1},e.prototype.handleDownEvent=function(t){return!!D(t)&&(!!this.condition_(t)&&(t.map.getView().setHint(m.a.INTERACTING,1),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))},e}(k),Ct=i(48),Et=i(87),Ot=i(10),bt=i(20),xt=i(23),Rt=function(t){function e(e,i,n){if(t.call(this),void 0!==n&&void 0===i)this.setFlatCoordinates(n,e);else{var r=i||0;this.setCenterAndRadius(e,r,n)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,i,n){var r=this.flatCoordinates,o=t-r[0],s=e-r[1],a=o*o+s*s;if(a<n){if(0===a)for(var h=0;h<this.stride;++h)i[h]=r[h];else{var u=this.getRadius()/Math.sqrt(a);i[0]=r[0]+u*o,i[1]=r[1]+u*s;for(var c=2;c<this.stride;++c)i[c]=r[c]}return i.length=this.stride,a}return n},e.prototype.containsXY=function(t,e){var i=this.flatCoordinates,n=t-i[0],r=e-i[1];return n*n+r*r<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,i=e[this.stride]-e[0];return Object(U.k)(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return Ot.a.CIRCLE},e.prototype.intersectsExtent=function(t){var e=this.getExtent();if(Object(U.F)(t,e)){var i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||(t[1]<=i[1]&&t[3]>=i[1]||Object(U.t)(t,this.intersectsCoordinate,this))}return!1},e.prototype.setCenter=function(t){var e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+i;for(var r=1;r<e;++r)n[e+r]=t[r];this.setFlatCoordinates(this.layout,n),this.changed()},e.prototype.setCenterAndRadius=function(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var n=this.flatCoordinates,r=Object(xt.a)(n,0,t,this.stride);n[r++]=n[0]+e;for(var o=1,s=this.stride;o<s;++o)n[r++]=n[o];n.length=r,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e}(bt.a);Rt.prototype.transform;var Ft=Rt,It=i(7),Tt=i(37),jt=i(33),Pt=i(22);function Mt(t,e,i,n,r,o){var s=NaN,a=NaN,h=(i-e)/n;if(1===h)s=t[e],a=t[e+1];else if(2==h)s=(1-r)*t[e]+r*t[e+n],a=(1-r)*t[e+1]+r*t[e+n+1];else if(0!==h){for(var u=t[e],l=t[e+1],d=0,p=[0],f=e+n;f<i;f+=n){var _=t[f],g=t[f+1];d+=Math.sqrt((_-u)*(_-u)+(g-l)*(g-l)),p.push(d),u=_,l=g}var v=r*d,y=Object(It.a)(p,v);if(y<0){var m=(v-p[-y-2])/(p[-y-1]-p[-y-2]),C=e+(-y-2)*n;s=Object(c.c)(t[C],t[C+n],m),a=Object(c.c)(t[C+1],t[C+n+1],m)}else s=t[e+y*n],a=t[e+y*n+1]}return o?(o[0]=s,o[1]=a,o):[s,a]}function wt(t,e,i,n,r,o){if(i==e)return null;var s;if(r<t[e+n-1])return o?((s=t.slice(e,e+n))[n-1]=r,s):null;if(t[i-1]<r)return o?((s=t.slice(i-n,i))[n-1]=r,s):null;if(r==t[e+n-1])return t.slice(e,e+n);for(var a=e/n,h=i/n;a<h;){var u=a+h>>1;r<t[(u+1)*n-1]?h=u:a=u+1}var l=t[a*n-1];if(r==l)return t.slice((a-1)*n,(a-1)*n+n);var d=(r-l)/(t[(a+1)*n-1]-l);s=[];for(var p=0;p<n-1;++p)s.push(Object(c.c)(t[(a-1)*n+p],t[a*n+p],d));return s.push(r),s}var Nt=i(43),At=i(84),Dt=i(60),St=i(27),Lt=function(t){function e(e,i){t.call(this),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?this.setCoordinates(e,i):this.setFlatCoordinates(i,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendCoordinate=function(t){this.flatCoordinates?Object(It.c)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){return n<Object(U.e)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(jt.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(jt.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.forEachSegment=function(t){return Object(Dt.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=Tt.a.XYM&&this.layout!=Tt.a.XYZM)return null;var i=void 0!==e&&e;return wt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return Object(Pt.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return Mt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},e.prototype.getLength=function(){return Object(At.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Object(St.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,Tt.a.XY)},e.prototype.getType=function(){return Ot.a.LINE_STRING},e.prototype.intersectsExtent=function(t){return Object(Nt.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(xt.b)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(bt.a),Gt=function(t){function e(e,i,n){if(t.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,i);else if(void 0!==i&&n)this.setFlatCoordinates(i,e),this.ends_=n;else{for(var r=this.getLayout(),o=e,s=[],a=[],h=0,u=o.length;h<u;++h){var c=o[h];0===h&&(r=c.getLayout()),Object(It.c)(s,c.getFlatCoordinates()),a.push(s.length)}this.setFlatCoordinates(r,s),this.ends_=a}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendLineString=function(t){this.flatCoordinates?Object(It.c)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,n){return n<Object(U.e)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(jt.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(jt.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=Tt.a.XYM&&this.layout!=Tt.a.XYZM||0===this.flatCoordinates.length)return null;var n=void 0!==e&&e,r=void 0!==i&&i;return function(t,e,i,n,r,o,s){if(s)return wt(t,e,i[i.length-1],n,r,o);var a;if(r<t[n-1])return o?((a=t.slice(0,n))[n-1]=r,a):null;if(t[t.length-1]<r)return o?((a=t.slice(t.length-n))[n-1]=r,a):null;for(var h=0,u=i.length;h<u;++h){var c=i[h];if(e!=c){if(r<t[e+n-1])return null;if(r<=t[c-1])return wt(t,e,c,n,r,!1);e=c}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,n,r)},e.prototype.getCoordinates=function(){return Object(Pt.b)(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new Lt(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,i=this.layout,n=[],r=0,o=0,s=e.length;o<s;++o){var a=e[o],h=new Lt(t.slice(r,a),i);n.push(h),r=a}return n},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,i=0,n=this.ends_,r=this.stride,o=0,s=n.length;o<s;++o){var a=n[o],h=Mt(e,i,a,r,.5);Object(It.c)(t,h),i=a}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=Object(St.b)(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,n),new e(i,Tt.a.XY,n)},e.prototype.getType=function(){return Ot.a.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return Object(Nt.b)(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=Object(xt.c)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(bt.a),kt=i(42),Yt=function(t){function e(e,i){t.call(this),i&&!Array.isArray(e[0])?this.setFlatCoordinates(i,e):this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendPoint=function(t){this.flatCoordinates?Object(It.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){if(n<Object(U.e)(this.getExtent(),t,e))return n;for(var r=this.flatCoordinates,o=this.stride,s=0,a=r.length;s<a;s+=o){var h=Object(c.f)(t,e,r[s],r[s+1]);if(h<n){n=h;for(var u=0;u<o;++u)i[u]=r[s+u];i.length=o}}return n},e.prototype.getCoordinates=function(){return Object(Pt.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new kt.default(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,i=this.stride,n=[],r=0,o=t.length;r<o;r+=i){var s=new kt.default(t.slice(r,r+i),e);n.push(s)}return n},e.prototype.getType=function(){return Ot.a.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,i=this.stride,n=0,r=e.length;n<r;n+=i){var o=e[n],s=e[n+1];if(Object(U.h)(t,o,s))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(xt.b)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(bt.a),Xt=i(46);var Vt=i(36),Ut=i(59),Bt=i(66),Kt=function(t){function e(e,i,n){if(t.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){for(var r=this.getLayout(),o=e,s=[],a=[],h=0,u=o.length;h<u;++h){var c=o[h];0===h&&(r=c.getLayout());for(var l=s.length,d=c.getEnds(),p=0,f=d.length;p<f;++p)d[p]+=l;Object(It.c)(s,c.getFlatCoordinates()),a.push(d)}i=r,e=s,n=a}void 0!==i&&n?(this.setFlatCoordinates(i,e),this.endss_=n):this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;Object(It.c)(this.flatCoordinates,t.getFlatCoordinates());for(var n=0,r=(e=t.getEnds().slice()).length;n<r;++n)e[n]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,i=new Array(t),n=0;n<t;++n)i[n]=this.endss_[n].slice();return new e(this.flatCoordinates.slice(),this.layout,i)},e.prototype.closestPointXY=function(t,e,i,n){return n<Object(U.e)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(jt.f)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(jt.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.containsXY=function(t,e){return Object(Vt.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return Object(Xt.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(Bt.d)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Object(Pt.c)(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=function(t,e,i,n){for(var r=[],o=Object(U.j)(),s=0,a=i.length;s<a;++s){var h=i[s];o=Object(U.o)(t,e,h[0],n),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=h[h.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Object(Ut.b)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new Yt(this.getFlatInteriorPoints().slice(),Tt.a.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Object(Bt.b)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(Bt.d)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=Object(St.d)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,n),new e(i,Tt.a.XY,n)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var n=this.endss_[t].slice(),r=n[n.length-1];if(0!==e)for(var o=0,s=n.length;o<s;++o)n[o]-=e;return new q.b(this.flatCoordinates.slice(e,r),this.layout,n)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,n=[],r=0,o=0,s=i.length;o<s;++o){var a=i[o].slice(),h=a[a.length-1];if(0!==r)for(var u=0,c=a.length;u<c;++u)a[u]-=r;var l=new q.b(e.slice(r,h),t,a);n.push(l),r=h}return n},e.prototype.getType=function(){return Ot.a.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return Object(Nt.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=Object(xt.d)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var n=i[i.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()},e}(bt.a),qt=i(76),Ht=i(34),Wt=i(39),Zt=i(35),zt={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},Jt="drawstart",Qt="drawend",$t=function(t){function e(e,i){t.call(this,e),this.feature=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(B.a);var te=function(t){function e(e){var i=e;i.stopDown||(i.stopDown=O.a),t.call(this,i),this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=function(t){var e;t===Ot.a.POINT||t===Ot.a.MULTI_POINT?e=zt.POINT:t===Ot.a.LINE_STRING||t===Ot.a.MULTI_LINE_STRING?e=zt.LINE_STRING:t===Ot.a.POLYGON||t===Ot.a.MULTI_POLYGON?e=zt.POLYGON:t===Ot.a.CIRCLE&&(e=zt.CIRCLE);return e}(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_===zt.POLYGON?3:2,this.maxPoints_=e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:O.b;var n,r=e.geometryFunction;if(!r)if(this.type_===Ot.a.CIRCLE)r=function(t,e){var i=e||new Ft([NaN,NaN]),n=Object(C.h)(t[0],t[1]);return i.setCenterAndRadius(t[0],Math.sqrt(n)),i};else{var o,s=this.mode_;s===zt.POINT?o=kt.default:s===zt.LINE_STRING?o=Lt:s===zt.POLYGON&&(o=q.b),r=function(t,e){var i=e;return i?s===zt.POLYGON?t[0].length?i.setCoordinates([t[0].concat([t[0][0]])]):i.setCoordinates([]):i.setCoordinates(t):i=new o(t),i}}this.geometryFunction_=r,this.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new Ht.a({source:new Wt.a({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(n=Object(Zt.b)(),function(t,e){return n[t.getGeometry().getType()]}),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:w,this.freehandCondition_,e.freehand?this.freehandCondition_=I:this.freehandCondition_=e.freehandCondition?e.freehandCondition:N,Object(dt.a)(this,Object(a.b)(u.ACTIVE),this.updateState_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===et.a.CONTEXTMENU&&e.preventDefault(),this.freehand_=this.mode_!==zt.POINT&&this.freehandCondition_(e);var i=e.type===s.a.POINTERMOVE,n=!0;!this.freehand_&&this.lastDragTime_&&e.type===s.a.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,i=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&e.type===s.a.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e),n=!1):this.freehand_&&e.type===s.a.POINTERDOWN?n=!1:i?(n=e.type===s.a.POINTERMOVE)&&this.freehand_?n=this.handlePointerMove_(e):(e.pointerEvent.pointerType==qt.b||e.type===s.a.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===s.a.DBLCLICK&&(n=!1),t.prototype.handleEvent.call(this,e)&&n},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new Et.a(s.a.POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0)},e.prototype.handleUpEvent=function(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var i=this.mode_===zt.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===zt.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,n=e[0]-i[0],r=e[1]-i[1],o=n*n+r*r;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,n=[this.finishCoordinate_];if(this.mode_===zt.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===zt.POLYGON){var r=this.sketchCoords_;i=r[0].length>this.minPoints_,n=[r[0][0],r[0][r[0].length-2]]}if(i)for(var o=t.map,s=0,a=n.length;s<a;s++){var h=n[s],u=o.getPixelFromCoordinate(h),c=t.pixel,l=c[0]-u[0],d=c[1]-u[1],p=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(l*l+d*d)<=p){this.finishCoordinate_=h;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Ct.default(new kt.default(e)),this.updateSketchFeatures_())},e.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e,this.mode_===zt.POINT?this.sketchCoords_=e.slice():this.mode_===zt.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Ct.default(new Lt(this.sketchLineCoords_)));var i=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new Ct.default,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new $t(Jt,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,i,n,r=t.coordinate,o=this.sketchFeature_.getGeometry();(this.mode_===zt.POINT?i=this.sketchCoords_:this.mode_===zt.POLYGON?(i=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(r=this.finishCoordinate_.slice())):i=(e=this.sketchCoords_)[e.length-1],i[0]=r[0],i[1]=r[1],this.geometryFunction_(this.sketchCoords_,o),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(r);if(o.getType()==Ot.a.POLYGON&&this.mode_!==zt.POLYGON){this.sketchLine_||(this.sketchLine_=new Ct.default);var s=o.getLinearRing(0);(n=this.sketchLine_.getGeometry())?(n.setFlatCoordinates(s.getLayout(),s.getFlatCoordinates()),n.changed()):(n=new Lt(s.getFlatCoordinates(),s.getLayout()),this.sketchLine_.setGeometry(n))}else this.sketchLineCoords_&&(n=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,i,n=t.coordinate,r=this.sketchFeature_.getGeometry();this.mode_===zt.LINE_STRING?(this.finishCoordinate_=n.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(n.slice()),this.geometryFunction_(i,r)):this.mode_===zt.POLYGON&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(n.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,r)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry();this.mode_===zt.LINE_STRING?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===zt.POLYGON&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,i=t.getGeometry();this.mode_===zt.LINE_STRING?(e.pop(),this.geometryFunction_(e,i)):this.mode_===zt.POLYGON&&(e[0].pop(),this.geometryFunction_(e,i),e=i.getCoordinates()),this.type_===Ot.a.MULTI_POINT?t.setGeometry(new Yt([e])):this.type_===Ot.a.MULTI_LINE_STRING?t.setGeometry(new Gt([e])):this.type_===Ot.a.MULTI_POLYGON&&t.setGeometry(new Kt([e])),this.dispatchEvent(new $t(Qt,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new $t(Jt,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},e}(k),ee={EXTENTCHANGED:"extentchanged"},ie=function(t){function e(e){t.call(this,ee.EXTENTCHANGED),this.extent=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(B.a);function ne(){var t=Object(Zt.b)();return function(e,i){return t[Ot.a.POINT]}}function re(t){return function(e){return Object(U.b)([t,e])}}function oe(t,e){return t[0]==e[0]?function(i){return Object(U.b)([t,[i[0],e[1]]])}:t[1]==e[1]?function(i){return Object(U.b)([t,[e[0],i[1]]])}:null}var se=function(t){function e(e){var i,n=e||{};t.call(this,n),this.extent_=null,this.pointerHandler_=null,this.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,this.snappedToVertex_=!1,this.extentFeature_=null,this.vertexFeature_=null,e||(e={}),this.extentOverlay_=new Ht.a({source:new Wt.a({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:(i=Object(Zt.b)(),function(t,e){return i[Ot.a.POLYGON]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.vertexOverlay_=new Ht.a({source:new Wt.a({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:ne(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&this.setExtent(e.extent)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapToVertex_=function(t,e){var i=e.getCoordinateFromPixel(t),n=this.getExtent();if(n){var r=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(n);r.sort(function(t,e){return Object(C.i)(i,t)-Object(C.i)(i,e)});var o=r[0],s=Object(C.c)(i,o),a=e.getPixelFromCoordinate(s);if(Object(C.d)(t,a)<=this.pixelTolerance_){var h=e.getPixelFromCoordinate(o[0]),u=e.getPixelFromCoordinate(o[1]),c=Object(C.h)(a,h),l=Object(C.h)(a,u),d=Math.sqrt(Math.min(c,l));return this.snappedToVertex_=d<=this.pixelTolerance_,this.snappedToVertex_&&(s=c>l?o[1]:o[0]),s}}return null},e.prototype.handlePointerMove_=function(t){var e=t.pixel,i=t.map,n=this.snapToVertex_(e,i);n||(n=i.getCoordinateFromPixel(e)),this.createOrUpdatePointerFeature_(n)},e.prototype.createOrUpdateExtentFeature_=function(t){var e=this.extentFeature_;return e?t?e.setGeometry(Object(q.d)(t)):e.setGeometry(void 0):(e=t?new Ct.default(Object(q.d)(t)):new Ct.default({}),this.extentFeature_=e,this.extentOverlay_.getSource().addFeature(e)),e},e.prototype.createOrUpdatePointerFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new Ct.default(new kt.default(t)),this.vertexFeature_=e,this.vertexOverlay_.getSource().addFeature(e));return e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(e.type!=s.a.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),t.prototype.handleEvent.call(this,e),!1)},e.prototype.handleDownEvent=function(t){var e=t.pixel,i=t.map,n=this.getExtent(),r=this.snapToVertex_(e,i),o=function(t){var e=null,i=null;return t[0]==n[0]?e=n[2]:t[0]==n[2]&&(e=n[0]),t[1]==n[1]?i=n[3]:t[1]==n[3]&&(i=n[1]),null!==e&&null!==i?[e,i]:null};if(r&&n){var s=r[0]==n[0]||r[0]==n[2]?r[0]:null,a=r[1]==n[1]||r[1]==n[3]?r[1]:null;null!==s&&null!==a?this.pointerHandler_=re(o(r)):null!==s?this.pointerHandler_=oe(o([s,n[1]]),o([s,n[3]])):null!==a&&(this.pointerHandler_=oe(o([n[0],a]),o([n[2],a])))}else r=i.getCoordinateFromPixel(e),this.setExtent([r[0],r[1],r[0],r[1]]),this.pointerHandler_=re(r);return!0},e.prototype.handleDragEvent=function(t){if(this.pointerHandler_){var e=t.coordinate;this.setExtent(this.pointerHandler_(e)),this.createOrUpdatePointerFeature_(e)}return!0},e.prototype.handleUpEvent=function(t){this.pointerHandler_=null;var e=this.getExtent();return e&&0!==Object(U.u)(e)||this.setExtent(null),!1},e.prototype.setMap=function(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getExtent=function(){return this.extent_},e.prototype.setExtent=function(t){this.extent_=t||null,this.createOrUpdateExtentFeature_(t),this.dispatchEvent(new ie(this.extent_))},e}(k),ae=i(3),he=i(21),ue=i(53),ce=i(52),le=1,de="modifystart",pe="modifyend",fe=function(t){function e(e,i,n){t.call(this,e),this.features=i,this.mapBrowserEvent=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(B.a);function _e(t,e){return t.index-e.index}function ge(t,e){var i=e.geometry;if(i.getType()===Ot.a.CIRCLE){var n=i;if(e.index===le){var r=Object(C.h)(n.getCenter(),t),o=Math.sqrt(r)-n.getRadius();return o*o}}return Object(C.i)(t,e.segment)}function ve(t,e){var i=e.geometry;return i.getType()===Ot.a.CIRCLE&&e.index===le?i.getClosestPoint(t):Object(C.c)(t,e.segment)}var ye=function(t){function e(e){var i,r;if(t.call(this,e),this.condition_=e.condition?e.condition:S,this.defaultDeleteCondition_=function(t){return x(t)&&M(t)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:I,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new ce.a,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new Ht.a({source:new Wt.a({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:(i=Object(Zt.b)(),function(t,e){return i[Ot.a.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_},this.source_=null,e.source?(this.source_=e.source,r=new n.a(this.source_.getFeatures()),Object(dt.a)(this.source_,ue.a.ADDFEATURE,this.handleSourceAdd_,this),Object(dt.a)(this.source_,ue.a.REMOVEFEATURE,this.handleSourceRemove_,this)):r=e.features,!r)throw new Error("The modify interaction requires features or a source");this.features_=r,this.features_.forEach(this.addFeature_.bind(this)),Object(dt.a)(this.features_,he.a.ADD,this.handleFeatureAdd_,this),Object(dt.a)(this.features_,he.a.REMOVE,this.handleFeatureRemove_,this),this.lastPointerEvent_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature_=function(t){var e=t.getGeometry();e&&e.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[e.getType()].call(this,t,e);var i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),Object(dt.a)(t,et.a.CHANGE,this.handleFeatureChange_,this)},e.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new fe(de,this.features_,t)))},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),Object(dt.c)(t,et.a.CHANGE,this.handleFeatureChange_,this)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,i=[];e.forEach(function(e){t===e.feature&&i.push(e)});for(var n=i.length-1;n>=0;--n)e.remove(i[n])},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},e.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),n={feature:t,geometry:e,segment:[i,i]};this.rBush_.insert(e.getExtent(),n)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n){var o=i[n],s={feature:t,geometry:e,depth:[n],index:n,segment:[o,o]};this.rBush_.insert(e.getExtent(),s)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length-1;n<r;++n){var o=i.slice(n,n+2),s={feature:t,geometry:e,index:n,segment:o};this.rBush_.insert(Object(U.b)(o),s)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),u={feature:t,geometry:e,depth:[n],index:s,segment:h};this.rBush_.insert(Object(U.b)(h),u)}},e.prototype.writePolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),u={feature:t,geometry:e,depth:[n],index:s,segment:h};this.rBush_.insert(Object(U.b)(h),u)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],s=0,a=o.length;s<a;++s)for(var h=o[s],u=0,c=h.length-1;u<c;++u){var l=h.slice(u,u+2),d={feature:t,geometry:e,depth:[s,n],index:u,segment:l};this.rBush_.insert(Object(U.b)(l),d)}},e.prototype.writeCircleGeometry_=function(t,e){var i=e.getCenter(),n={feature:t,geometry:e,index:0,segment:[i,i]},r={feature:t,geometry:e,index:le,segment:[i,i]},o=[n,r];n.featureSegments=r.featureSegments=o,this.rBush_.insert(Object(U.m)(i),n),this.rBush_.insert(e.getExtent(),r)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var i=e.getGeometriesArray(),n=0;n<i.length;++n)this.SEGMENT_WRITERS_[i[n].getType()].call(this,t,i[n])},e.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new Ct.default(new kt.default(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e));return e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=s.a.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(i=!(e.type!=s.a.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==s.a.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,e)&&!i);var i},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);for(var e=t.coordinate,i=0,n=this.dragSegments_.length;i<n;++i){for(var r=this.dragSegments_[i],o=r[0],s=o.depth,a=o.geometry,h=void 0,u=o.segment,c=r[1];e.length<a.getStride();)e.push(u[c][e.length]);switch(a.getType()){case Ot.a.POINT:h=e,u[0]=u[1]=e;break;case Ot.a.MULTI_POINT:(h=a.getCoordinates())[o.index]=e,u[0]=u[1]=e;break;case Ot.a.LINE_STRING:(h=a.getCoordinates())[o.index+c]=e,u[c]=e;break;case Ot.a.MULTI_LINE_STRING:case Ot.a.POLYGON:(h=a.getCoordinates())[s[0]][o.index+c]=e,u[c]=e;break;case Ot.a.MULTI_POLYGON:(h=a.getCoordinates())[s[1]][s[0]][o.index+c]=e,u[c]=e;break;case Ot.a.CIRCLE:u[0]=u[1]=e,0===o.index?(this.changingFeature_=!0,a.setCenter(e),this.changingFeature_=!1):(this.changingFeature_=!0,a.setRadius(Object(C.d)(a.getCenter(),e)),this.changingFeature_=!1)}h&&this.setGeometryCoordinates_(a,h)}this.createOrUpdateVertexFeature_(e)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;this.handlePointerAtPixel_(t.pixel,t.map);var e=t.map.getCoordinateFromPixel(t.pixel);this.dragSegments_.length=0,this.modified_=!1;var i=this.vertexFeature_;if(i){var n=[],r=i.getGeometry().getCoordinates(),o=Object(U.b)([r]),s=this.rBush_.getInExtent(o),a={};s.sort(_e);for(var h=0,u=s.length;h<u;++h){var c=s[h],l=c.segment,d=Object(ae.c)(c.feature),p=c.depth;if(p&&(d+="-"+p.join("-")),a[d]||(a[d]=new Array(2)),c.geometry.getType()===Ot.a.CIRCLE&&c.index===le){var f=ve(e,c);Object(C.e)(f,r)&&!a[d][0]&&(this.dragSegments_.push([c,0]),a[d][0]=c)}else if(Object(C.e)(l[0],r)&&!a[d][0])this.dragSegments_.push([c,0]),a[d][0]=c;else if(Object(C.e)(l[1],r)&&!a[d][1]){if((c.geometry.getType()===Ot.a.LINE_STRING||c.geometry.getType()===Ot.a.MULTI_LINE_STRING)&&a[d][0]&&0===a[d][0].index)continue;this.dragSegments_.push([c,1]),a[d][1]=c}else this.insertVertexCondition_(t)&&Object(ae.c)(l)in this.vertexSegments_&&!a[d][0]&&!a[d][1]&&n.push([c,r])}n.length&&this.willModifyFeatures_(t);for(var _=n.length-1;_>=0;--_)this.insertVertex_.apply(this,n[_])}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var i=this.dragSegments_[e][0],n=i.geometry;if(n.getType()===Ot.a.CIRCLE){var r=n.getCenter(),o=i.featureSegments[0],s=i.featureSegments[1];o.segment[0]=o.segment[1]=r,s.segment[0]=s.segment[1]=r,this.rBush_.update(Object(U.m)(r),o),this.rBush_.update(n.getExtent(),s)}else this.rBush_.update(Object(U.b)(i.segment),i)}return this.modified_&&(this.dispatchEvent(new fe(pe,this.features_,t)),this.modified_=!1),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map)},e.prototype.handlePointerAtPixel_=function(t,e){var i=e.getCoordinateFromPixel(t),n=Object(U.c)(Object(U.m)(i),e.getView().getResolution()*this.pixelTolerance_),r=this.rBush_.getInExtent(n);if(r.length>0){r.sort(function(t,e){return ge(i,t)-ge(i,e)});var o=r[0],s=o.segment,a=ve(i,o),h=e.getPixelFromCoordinate(a),u=Object(C.d)(t,h);if(u<=this.pixelTolerance_){var c={};if(o.geometry.getType()===Ot.a.CIRCLE&&o.index===le)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(a);else{var l=e.getPixelFromCoordinate(s[0]),d=e.getPixelFromCoordinate(s[1]),p=Object(C.h)(h,l),f=Object(C.h)(h,d);u=Math.sqrt(Math.min(p,f)),this.snappedToVertex_=u<=this.pixelTolerance_,this.snappedToVertex_&&(a=p>f?s[1]:s[0]),this.createOrUpdateVertexFeature_(a);for(var _=1,g=r.length;_<g;++_){var v=r[_].segment;if(!(Object(C.e)(s[0],v[0])&&Object(C.e)(s[1],v[1])||Object(C.e)(s[0],v[1])&&Object(C.e)(s[1],v[0])))break;c[Object(ae.c)(v)]=!0}}return c[Object(ae.c)(s)]=!0,void(this.vertexSegments_=c)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){for(var i,n=t.segment,r=t.feature,o=t.geometry,s=t.depth,a=t.index;e.length<o.getStride();)e.push(0);switch(o.getType()){case Ot.a.MULTI_LINE_STRING:case Ot.a.POLYGON:(i=o.getCoordinates())[s[0]].splice(a+1,0,e);break;case Ot.a.MULTI_POLYGON:(i=o.getCoordinates())[s[1]][s[0]].splice(a+1,0,e);break;case Ot.a.LINE_STRING:(i=o.getCoordinates()).splice(a+1,0,e);break;default:return}this.setGeometryCoordinates_(o,i);var h=this.rBush_;h.remove(t),this.updateSegmentIndices_(o,a,s,1);var u={segment:[n[0],e],feature:r,geometry:o,depth:s,index:a};h.insert(Object(U.b)(u.segment),u),this.dragSegments_.push([u,1]);var c={segment:[e,n[1]],feature:r,geometry:o,depth:s,index:a+1};h.insert(Object(U.b)(c.segment),c),this.dragSegments_.push([c,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=s.a.POINTERDRAG){var t=this.lastPointerEvent_;return this.willModifyFeatures_(t),this.removeVertex_(),this.dispatchEvent(new fe(pe,this.features_,t)),this.modified_=!1,!0}return!1},e.prototype.removeVertex_=function(){var t,e,i,n,r,o,s,a,h,u,c,l=this.dragSegments_,d={},p=!1;for(r=l.length-1;r>=0;--r)u=(i=l[r])[0],c=Object(ae.c)(u.feature),u.depth&&(c+="-"+u.depth.join("-")),c in d||(d[c]={}),0===i[1]?(d[c].right=u,d[c].index=u.index):1==i[1]&&(d[c].left=u,d[c].index=u.index+1);for(c in d){switch(h=d[c].right,s=d[c].left,(a=(o=d[c].index)-1)<0&&(a=0),t=e=(n=(u=void 0!==s?s:h).geometry).getCoordinates(),p=!1,n.getType()){case Ot.a.MULTI_LINE_STRING:e[u.depth[0]].length>2&&(e[u.depth[0]].splice(o,1),p=!0);break;case Ot.a.LINE_STRING:e.length>2&&(e.splice(o,1),p=!0);break;case Ot.a.MULTI_POLYGON:t=t[u.depth[1]];case Ot.a.POLYGON:(t=t[u.depth[0]]).length>4&&(o==t.length-1&&(o=0),t.splice(o,1),p=!0,0===o&&(t.pop(),t.push(t[0]),a=t.length-1))}if(p){this.setGeometryCoordinates_(n,e);var f=[];if(void 0!==s&&(this.rBush_.remove(s),f.push(s.segment[0])),void 0!==h&&(this.rBush_.remove(h),f.push(h.segment[1])),void 0!==s&&void 0!==h){var _={depth:u.depth,feature:u.feature,geometry:u.geometry,index:a,segment:f};this.rBush_.insert(Object(U.b)(_.segment),_)}this.updateSegmentIndices_(n,o,u.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),l.length=0}}return p},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,i,n){this.rBush_.forEachInExtent(t.getExtent(),function(r){r.geometry===t&&(void 0===i||void 0===r.depth||Object(It.b)(r.depth,i))&&r.index>e&&(r.index+=n)})},e}(k),me={SELECT:"select"},Ce=function(t){function e(e,i,n,r){t.call(this,e),this.selected=i,this.deselected=n,this.mapBrowserEvent=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(B.a);function Ee(t){if(!this.condition_(t))return!0;var e=this.addCondition_(t),i=this.removeCondition_(t),n=this.toggleCondition_(t),r=!e&&!i&&!n,o=t.map,s=this.getFeatures(),a=[],h=[];if(r){Object(L.b)(this.featureLayerAssociation_),o.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return h.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var u=s.getLength()-1;u>=0;--u){var c=s.item(u),l=h.indexOf(c);l>-1?h.splice(l,1):(s.remove(c),a.push(c))}0!==h.length&&s.extend(h)}else{o.forEachFeatureAtPixel(t.pixel,function(t,r){if(this.filter_(t,r))return!e&&!n||Object(It.f)(s.getArray(),t)?(i||n)&&Object(It.f)(s.getArray(),t)&&(a.push(t),this.removeFeatureLayerAssociation_(t)):(h.push(t),this.addFeatureLayerAssociation_(t,r)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var d=a.length-1;d>=0;--d)s.remove(a[d]);s.extend(h)}return(h.length>0||a.length>0)&&this.dispatchEvent(new Ce(me.SELECT,h,a,t)),P(t)}function Oe(){var t=Object(Zt.b)();return Object(It.c)(t[Ot.a.POLYGON],t[Ot.a.LINE_STRING]),Object(It.c)(t[Ot.a.GEOMETRY_COLLECTION],t[Ot.a.LINE_STRING]),function(e,i){return e.getGeometry()?t[e.getGeometry().getType()]:null}}var be=function(t){function e(e){t.call(this,{handleEvent:Ee});var i=e||{};this.condition_=i.condition?i.condition:M,this.addCondition_=i.addCondition?i.addCondition:j,this.removeCondition_=i.removeCondition?i.removeCondition:j,this.toggleCondition_=i.toggleCondition?i.toggleCondition:N,this.multi_=!!i.multi&&i.multi,this.filter_=i.filter?i.filter:O.b,this.hitTolerance_=i.hitTolerance?i.hitTolerance:0;var n,r=new Ht.a({source:new Wt.a({useSpatialIndex:!1,features:i.features,wrapX:i.wrapX}),style:i.style?i.style:Oe(),updateWhileAnimating:!0,updateWhileInteracting:!0});if(this.featureOverlay_=r,i.layers)if("function"==typeof i.layers)n=i.layers;else{var o=i.layers;n=function(t){return Object(It.f)(o,t)}}else n=O.b;this.layerFilter_=n,this.featureLayerAssociation_={};var s=this.getFeatures();Object(dt.a)(s,he.a.ADD,this.addFeature_,this),Object(dt.a)(s,he.a.REMOVE,this.removeFeature_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeatureLayerAssociation_=function(t,e){this.featureLayerAssociation_[Object(ae.c)(t)]=e},e.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[Object(ae.c)(t)]},e.prototype.getOverlay=function(){return this.featureOverlay_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var i=this.getMap(),n=this.getFeatures();i&&n.forEach(i.unskipFeature.bind(i)),t.prototype.setMap.call(this,e),this.featureOverlay_.setMap(e),e&&n.forEach(e.skipFeature.bind(e))},e.prototype.addFeature_=function(t){var e=this.getMap();e&&e.skipFeature(t.element)},e.prototype.removeFeature_=function(t){var e=this.getMap();e&&e.unskipFeature(t.element)},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[Object(ae.c)(t)]},e}(g);function xe(t){return t.feature?t.feature:t.element?t.element:void 0}var Re=function(t){function e(e){var i=e||{},n=i;n.handleDownEvent||(n.handleDownEvent=O.b),n.stopDown||(n.stopDown=O.a),t.call(this,n),this.source_=i.source?i.source:null,this.vertex_=void 0===i.vertex||i.vertex,this.edge_=void 0===i.edge||i.edge,this.features_=i.features?i.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelCoordinate_=null,this.pixelTolerance_=void 0!==i.pixelTolerance?i.pixelTolerance:10,this.sortByDistance_=function(t,e){var i=Object(C.i)(this.pixelCoordinate_,t.segment),n=Object(C.i)(this.pixelCoordinate_,e.segment);return i-n}.bind(this),this.rBush_=new ce.a,this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_,Circle:this.writeCircleGeometry_}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t,e){var i=void 0===e||e,n=Object(ae.c)(t),r=t.getGeometry();if(r){var o=this.SEGMENT_WRITERS_[r.getType()];o&&(this.indexedFeaturesExtents_[n]=r.getExtent(Object(U.j)()),o.call(this,t,r))}i&&(this.featureChangeListenerKeys_[n]=Object(dt.a)(t,et.a.CHANGE,this.handleFeatureChange_,this))},e.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},e.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},e.prototype.getFeatures_=function(){var t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},e.prototype.handleEvent=function(e){var i=this.snapTo(e.pixel,e.coordinate,e.map);return i.snapped&&(e.coordinate=i.vertex.slice(0,2),e.pixel=i.vertexPixel),t.prototype.handleEvent.call(this,e)},e.prototype.handleFeatureAdd_=function(t){var e=xe(t);this.addFeature(e)},e.prototype.handleFeatureRemove_=function(t){var e=xe(t);this.removeFeature(e)},e.prototype.handleFeatureChange_=function(t){var e=t.target;if(this.handlingDownUpSequence){var i=Object(ae.c)(e);i in this.pendingFeatures_||(this.pendingFeatures_[i]=e)}else this.updateFeature_(e)},e.prototype.handleUpEvent=function(t){var e=Object(L.c)(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},e.prototype.removeFeature=function(t,e){var i=void 0===e||e,n=Object(ae.c)(t),r=this.indexedFeaturesExtents_[n];if(r){var o=this.rBush_,s=[];o.forEachInExtent(r,function(e){t===e.feature&&s.push(e)});for(var a=s.length-1;a>=0;--a)o.remove(s[a])}i&&(Object(dt.e)(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])},e.prototype.setMap=function(e){var i=this.getMap(),n=this.featuresListenerKeys_,r=this.getFeatures_();i&&(n.forEach(dt.e),n.length=0,r.forEach(this.forEachFeatureRemove_.bind(this))),t.prototype.setMap.call(this,e),e&&(this.features_?n.push(Object(dt.a)(this.features_,he.a.ADD,this.handleFeatureAdd_,this),Object(dt.a)(this.features_,he.a.REMOVE,this.handleFeatureRemove_,this)):this.source_&&n.push(Object(dt.a)(this.source_,ue.a.ADDFEATURE,this.handleFeatureAdd_,this),Object(dt.a)(this.source_,ue.a.REMOVEFEATURE,this.handleFeatureRemove_,this)),r.forEach(this.forEachFeatureAdd_.bind(this)))},e.prototype.snapTo=function(t,e,i){var n=i.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),r=i.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_]),o=Object(U.b)([n,r]),s=this.rBush_.getInExtent(o);this.vertex_&&!this.edge_&&(s=s.filter(function(t){return t.feature.getGeometry().getType()!==Ot.a.CIRCLE}));var a,h,u,c,l=!1,d=null,p=null;if(s.length>0){this.pixelCoordinate_=e,s.sort(this.sortByDistance_);var f=s[0].segment,_=s[0].feature.getGeometry().getType()===Ot.a.CIRCLE;this.vertex_&&!this.edge_?(a=i.getPixelFromCoordinate(f[0]),h=i.getPixelFromCoordinate(f[1]),u=Object(C.h)(t,a),c=Object(C.h)(t,h),Math.sqrt(Math.min(u,c))<=this.pixelTolerance_&&(l=!0,d=u>c?f[1]:f[0],p=i.getPixelFromCoordinate(d))):this.edge_&&(d=_?Object(C.b)(e,s[0].feature.getGeometry()):Object(C.c)(e,f),p=i.getPixelFromCoordinate(d),Object(C.d)(t,p)<=this.pixelTolerance_&&(l=!0,this.vertex_&&!_&&(a=i.getPixelFromCoordinate(f[0]),h=i.getPixelFromCoordinate(f[1]),u=Object(C.h)(p,a),c=Object(C.h)(p,h),Math.sqrt(Math.min(u,c))<=this.pixelTolerance_&&(d=u>c?f[1]:f[0],p=i.getPixelFromCoordinate(d))))),l&&(p=[Math.round(p[0]),Math.round(p[1])])}return{snapped:l,vertex:d,vertexPixel:p}},e.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},e.prototype.writeCircleGeometry_=function(t,e){for(var i=Object(q.c)(e).getCoordinates()[0],n=0,r=i.length-1;n<r;++n){var o=i.slice(n,n+2),s={feature:t,segment:o};this.rBush_.insert(Object(U.b)(o),s)}},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var i=e.getGeometriesArray(),n=0;n<i.length;++n){var r=this.SEGMENT_WRITERS_[i[n].getType()];r&&r.call(this,t,i[n])}},e.prototype.writeLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length-1;n<r;++n){var o=i.slice(n,n+2),s={feature:t,segment:o};this.rBush_.insert(Object(U.b)(o),s)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),u={feature:t,segment:h};this.rBush_.insert(Object(U.b)(h),u)}},e.prototype.writeMultiPointGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n){var o=i[n],s={feature:t,segment:[o,o]};this.rBush_.insert(e.getExtent(),s)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],s=0,a=o.length;s<a;++s)for(var h=o[s],u=0,c=h.length-1;u<c;++u){var l=h.slice(u,u+2),d={feature:t,segment:l};this.rBush_.insert(Object(U.b)(l),d)}},e.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),n={feature:t,segment:[i,i]};this.rBush_.insert(e.getExtent(),n)},e.prototype.writePolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),u={feature:t,segment:h};this.rBush_.insert(Object(U.b)(h),u)}},e}(k),Fe="translatestart",Ie="translating",Te="translateend",je=function(t){function e(e,i,n){t.call(this,e),this.features=i,this.coordinate=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(B.a),Pe=function(t){function e(e){var i,n=e||{};if(t.call(this,n),this.lastCoordinate_=null,this.features_=void 0!==n.features?n.features:null,n.layers)if("function"==typeof n.layers)i=n.layers;else{var r=n.layers;i=function(t){return Object(It.f)(r,t)}}else i=O.b;this.layerFilter_=i,this.hitTolerance_=n.hitTolerance?n.hitTolerance:0,this.lastFeature_=null,Object(dt.a)(this,Object(a.b)(u.ACTIVE),this.handleActiveChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDownEvent=function(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);var e=this.features_||new n.a([this.lastFeature_]);return this.dispatchEvent(new je(Fe,e,t.coordinate)),!0}return!1},e.prototype.handleUpEvent=function(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);var e=this.features_||new n.a([this.lastFeature_]);return this.dispatchEvent(new je(Te,e,t.coordinate)),!0}return!1},e.prototype.handleDragEvent=function(t){if(this.lastCoordinate_){var e=t.coordinate,i=e[0]-this.lastCoordinate_[0],r=e[1]-this.lastCoordinate_[1],o=this.features_||new n.a([this.lastFeature_]);o.forEach(function(t){var e=t.getGeometry();e.translate(i,r),t.setGeometry(e)}),this.lastCoordinate_=e,this.dispatchEvent(new je(Ie,o,e))}},e.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},e.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t){if(!this.features_||Object(It.f)(this.features_.getArray(),t))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var i=this.getMap();t.prototype.setMap.call(this,e),this.updateState_(i)},e.prototype.handleActiveChanged_=function(){this.updateState_(null)},e.prototype.updateState_=function(t){var e=this.getMap(),i=this.getActive();e&&i||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},e}(k);function Me(t){var e=t||{},i=new n.a,r=new o(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&i.push(new V),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&i.push(new y({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&i.push(new Y({condition:e.onFocusOnly?F:void 0,kinetic:r})),(void 0===e.pinchRotate||e.pinchRotate)&&i.push(new ct),(void 0===e.pinchZoom||e.pinchZoom)&&i.push(new lt({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(i.push(new rt),i.push(new st({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&i.push(new ut({condition:e.onFocusOnly?F:void 0,constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&i.push(new tt({duration:e.zoomDuration})),i}i.d(e,"defaults",function(){return Me}),i.d(e,"DoubleClickZoom",function(){return y}),i.d(e,"DragAndDrop",function(){return yt}),i.d(e,"DragBox",function(){return Q}),i.d(e,"DragPan",function(){return Y}),i.d(e,"DragRotate",function(){return V}),i.d(e,"DragRotateAndZoom",function(){return mt}),i.d(e,"DragZoom",function(){return tt}),i.d(e,"Draw",function(){return te}),i.d(e,"Extent",function(){return se}),i.d(e,"Interaction",function(){return g}),i.d(e,"KeyboardPan",function(){return rt}),i.d(e,"KeyboardZoom",function(){return st}),i.d(e,"Modify",function(){return ye}),i.d(e,"MouseWheelZoom",function(){return ut}),i.d(e,"PinchRotate",function(){return ct}),i.d(e,"PinchZoom",function(){return lt}),i.d(e,"Pointer",function(){return k}),i.d(e,"Select",function(){return be}),i.d(e,"Snap",function(){return Re}),i.d(e,"Translate",function(){return Pe})}]]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvYXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL1ZpZXdIaW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvU3RhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2Nvb3JkaW5hdGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL0NvbGxlY3Rpb25FdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9pbmZsYXRlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9lYXNpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL0NvbGxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL01hcEJyb3dzZXJFdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9zaW1wbGlmeS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvTGF5ZXJUeXBlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL0xpbmVhclJpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vUG9seWdvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvTGF5ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9jbG9zZXN0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9WZWN0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9jb250YWlucy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvbG9hZGluZ3N0cmF0ZWd5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvVmVjdG9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXIvRXZlbnRUeXBlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvaW50ZXJzZWN0c2V4dGVudC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L2FyZWEuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3JvdGF0aW9uY29uc3RyYWludC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvRmVhdHVyZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvc3RyaW5nLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9zdHJ1Y3RzL1JCdXNoLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvVmVjdG9yRXZlbnRUeXBlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvU291cmNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9Qcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvQmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L2ludGVyaW9ycG9pbnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9zZWdtZW50cy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvVmVjdG9yUmVuZGVyVHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmJ1c2gvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9yZXZlcnNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvb3JpZW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9wb2ludGVyL0V2ZW50U291cmNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9mb3JtYXQvRm9ybWF0VHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZmVhdHVyZWxvYWRlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcXVpY2tzZWxlY3QvcXVpY2tzZWxlY3QuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL3BvaW50ZXIvTW91c2VTb3VyY2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9sZW5ndGguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL01hcEJyb3dzZXJQb2ludGVyRXZlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL01hcEJyb3dzZXJFdmVudC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvTWFwRXZlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL0tpbmV0aWMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL1Byb3BlcnR5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vRG91YmxlQ2xpY2tab29tLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9ldmVudHMvY29uZGl0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9Qb2ludGVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9EcmFnUGFuLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9EcmFnUm90YXRlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXIvQm94LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9EcmFnQm94LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9EcmFnWm9vbS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL0tleUNvZGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0tleWJvYXJkUGFuLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb20uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL01vdXNlV2hlZWxab29tLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9QaW5jaFJvdGF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vUGluY2hab29tLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9EcmFnQW5kRHJvcC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZUFuZFpvb20uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vQ2lyY2xlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvaW50ZXJwb2xhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vTGluZVN0cmluZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9NdWx0aUxpbmVTdHJpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vTXVsdGlQb2ludC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9NdWx0aVBvbHlnb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9jZW50ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RyYXcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0V4dGVudC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vTW9kaWZ5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9TZWxlY3QuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL1NuYXAuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL1RyYW5zbGF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24uanMiXSwibmFtZXMiOlsiYmluYXJ5U2VhcmNoIiwiaGF5c3RhY2siLCJuZWVkbGUiLCJvcHRfY29tcGFyYXRvciIsIm1pZCIsImNtcCIsImNvbXBhcmF0b3IiLCJudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uIiwibG93IiwiaGlnaCIsImxlbmd0aCIsImZvdW5kIiwiYSIsImIiLCJpbmNsdWRlcyIsImFyciIsIm9iaiIsImluZGV4T2YiLCJsaW5lYXJGaW5kTmVhcmVzdCIsInRhcmdldCIsImRpcmVjdGlvbiIsImkiLCJuIiwicmV2ZXJzZVN1YkFycmF5IiwiYmVnaW4iLCJlbmQiLCJ0bXAiLCJleHRlbmQiLCJkYXRhIiwiZXh0ZW5zaW9uIiwiQXJyYXkiLCJpc0FycmF5IiwicmVtb3ZlIiwic3BsaWNlIiwiZmluZCIsImZ1bmMiLCJ2YWx1ZSIsImVxdWFscyIsImFycjEiLCJhcnIyIiwibGVuMSIsInN0YWJsZVNvcnQiLCJjb21wYXJlRm5jIiwiaW5kZXgiLCJzb3J0IiwiZmluZEluZGV4IiwiZXZlcnkiLCJlbCIsImlkeCIsImlzU29ydGVkIiwib3B0X2Z1bmMiLCJvcHRfc3RyaWN0IiwiY29tcGFyZSIsImN1cnJlbnRWYWwiLCJyZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZCIsIl9fd2VicGFja19leHBvcnRzX18iLCJBTklNQVRJTkciLCJJTlRFUkFDVElORyIsIlVOREVGSU5FRCIsIkxPQURJTkciLCJSRUFEWSIsIkVSUk9SIiwiYWRkIiwiY2xvc2VzdE9uQ2lyY2xlIiwiY2xvc2VzdE9uU2VnbWVudCIsInJvdGF0ZSIsInNjYWxlIiwic3F1YXJlZERpc3RhbmNlIiwiZGlzdGFuY2UiLCJzcXVhcmVkRGlzdGFuY2VUb1NlZ21lbnQiLCJjb29yZGluYXRlIiwiZGVsdGEiLCJjaXJjbGUiLCJyIiwiZ2V0UmFkaXVzIiwiY2VudGVyIiwiZ2V0Q2VudGVyIiwieDAiLCJ5MCIsImR4IiwiZHkiLCJNYXRoIiwic3FydCIsInNlZ21lbnQiLCJ4IiwieSIsInN0YXJ0IiwieDEiLCJ5MSIsIngyIiwieTIiLCJhbG9uZyIsImNvb3JkaW5hdGUxIiwiY29vcmRpbmF0ZTIiLCJhbmdsZSIsImNvc0FuZ2xlIiwiY29zIiwic2luQW5nbGUiLCJzaW4iLCJjb29yZDEiLCJjb29yZDIiLCJBREQiLCJSRU1PVkUiLCJpbmZsYXRlQ29vcmRpbmF0ZXMiLCJmbGF0Q29vcmRpbmF0ZXMiLCJvZmZzZXQiLCJzdHJpZGUiLCJvcHRfY29vcmRpbmF0ZXMiLCJjb29yZGluYXRlcyIsInVuZGVmaW5lZCIsImoiLCJzbGljZSIsImluZmxhdGVDb29yZGluYXRlc0FycmF5IiwiZW5kcyIsIm9wdF9jb29yZGluYXRlc3MiLCJjb29yZGluYXRlc3MiLCJqaiIsImluZmxhdGVNdWx0aUNvb3JkaW5hdGVzQXJyYXkiLCJlbmRzcyIsIm9wdF9jb29yZGluYXRlc3NzIiwiY29vcmRpbmF0ZXNzcyIsImVhc2VJbiIsInQiLCJwb3ciLCJlYXNlT3V0IiwiaW5BbmRPdXQiLCJsaW5lYXIiLCJfQXNzZXJ0aW9uRXJyb3JfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyIsIl9Db2xsZWN0aW9uRXZlbnRUeXBlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18iLCJfT2JqZWN0X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18iLCJfZXZlbnRzX0V2ZW50X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18iLCJQcm9wZXJ0eSIsIkNvbGxlY3Rpb25FdmVudCIsIkV2ZW50IiwidHlwZSIsIm9wdF9lbGVtZW50IiwiY2FsbCIsInRoaXMiLCJlbGVtZW50IiwiX19wcm90b19fIiwicHJvdG90eXBlIiwiT2JqZWN0IiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJDb2xsZWN0aW9uIiwiQmFzZU9iamVjdCIsIm9wdF9hcnJheSIsIm9wdF9vcHRpb25zIiwib3B0aW9ucyIsInVuaXF1ZV8iLCJ1bmlxdWUiLCJhcnJheV8iLCJpaSIsImFzc2VydFVuaXF1ZV8iLCJ1cGRhdGVMZW5ndGhfIiwiY2xlYXIiLCJnZXRMZW5ndGgiLCJwb3AiLCJwdXNoIiwiZm9yRWFjaCIsImYiLCJhcnJheSIsImdldEFycmF5IiwiaXRlbSIsImdldCIsImluc2VydEF0IiwiZWxlbSIsImRpc3BhdGNoRXZlbnQiLCJyZW1vdmVBdCIsInByZXYiLCJzZXRBdCIsInNldCIsIm9wdF9leGNlcHQiLCJfZXZlbnRzX0V2ZW50VHlwZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwiU0lOR0xFQ0xJQ0siLCJDTElDSyIsIkRCTENMSUNLIiwiUE9JTlRFUkRSQUciLCJQT0lOVEVSTU9WRSIsIlBPSU5URVJET1dOIiwiUE9JTlRFUlVQIiwiUE9JTlRFUk9WRVIiLCJQT0lOVEVST1VUIiwiUE9JTlRFUkVOVEVSIiwiUE9JTlRFUkxFQVZFIiwiUE9JTlRFUkNBTkNFTCIsImRvdWdsYXNQZXVja2VyIiwiZG91Z2xhc1BldWNrZXJBcnJheSIsInNuYXAiLCJxdWFudGl6ZUFycmF5IiwicXVhbnRpemVNdWx0aUFycmF5IiwiX21hdGhfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyIsInNxdWFyZWRUb2xlcmFuY2UiLCJzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIiwic2ltcGxpZmllZE9mZnNldCIsIm1hcmtlcnMiLCJzdGFjayIsImxhc3QiLCJmaXJzdCIsIm1heFNxdWFyZWREaXN0YW5jZSIsImkkMSIsInNpbXBsaWZpZWRFbmRzIiwidG9sZXJhbmNlIiwicm91bmQiLCJxdWFudGl6ZSIsIngzIiwieTMiLCJkeDEiLCJkeTEiLCJkeDIiLCJkeTIiLCJzaW1wbGlmaWVkRW5kc3MiLCJJTUFHRSIsIlRJTEUiLCJWRUNUT1JfVElMRSIsIlZFQ1RPUiIsImdlb21fTGluZWFyUmluZyIsIlNpbXBsZUdlb21ldHJ5IiwiTGluZWFyUmluZyIsIm9wdF9sYXlvdXQiLCJtYXhEZWx0YV8iLCJtYXhEZWx0YVJldmlzaW9uXyIsInNldENvb3JkaW5hdGVzIiwic2V0RmxhdENvb3JkaW5hdGVzIiwiY2xvbmUiLCJsYXlvdXQiLCJjbG9zZXN0UG9pbnRYWSIsImNsb3Nlc3RQb2ludCIsIm1pblNxdWFyZWREaXN0YW5jZSIsIm9sX2V4dGVudCIsImdldEV4dGVudCIsImdldFJldmlzaW9uIiwiY2xvc2VzdCIsImdldEFyZWEiLCJmbGF0X2FyZWEiLCJnZXRDb29yZGluYXRlcyIsImluZmxhdGUiLCJnZXRTaW1wbGlmaWVkR2VvbWV0cnlJbnRlcm5hbCIsInNpbXBsaWZ5IiwiR2VvbWV0cnlMYXlvdXQiLCJYWSIsImdldFR5cGUiLCJHZW9tZXRyeVR5cGUiLCJMSU5FQVJfUklORyIsImludGVyc2VjdHNFeHRlbnQiLCJleHRlbnQiLCJzZXRMYXlvdXQiLCJkZWZsYXRlIiwiY2hhbmdlZCIsImdlb21fU2ltcGxlR2VvbWV0cnkiLCJjaXJjdWxhciIsImZyb21FeHRlbnQiLCJmcm9tQ2lyY2xlIiwibWFrZVJlZ3VsYXIiLCJQb2x5Z29uX1BvbHlnb24iLCJQb2x5Z29uIiwib3B0X2VuZHMiLCJlbmRzXyIsImZsYXRJbnRlcmlvclBvaW50UmV2aXNpb25fIiwiZmxhdEludGVyaW9yUG9pbnRfIiwib3JpZW50ZWRSZXZpc2lvbl8iLCJvcmllbnRlZEZsYXRDb29yZGluYXRlc18iLCJhcHBlbmRMaW5lYXJSaW5nIiwibGluZWFyUmluZyIsImdldEZsYXRDb29yZGluYXRlcyIsImNvbnRhaW5zWFkiLCJjb250YWlucyIsImdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzIiwib3B0X3JpZ2h0Iiwib3JpZW50IiwiZ2V0RW5kcyIsImdldEZsYXRJbnRlcmlvclBvaW50IiwiZmxhdENlbnRlciIsImludGVyaW9ycG9pbnQiLCJnZXRJbnRlcmlvclBvaW50IiwiUG9pbnQiLCJYWU0iLCJnZXRMaW5lYXJSaW5nQ291bnQiLCJnZXRMaW5lYXJSaW5nIiwiZ2V0TGluZWFyUmluZ3MiLCJsaW5lYXJSaW5ncyIsIlBPTFlHT04iLCJpbnRlcnNlY3RzZXh0ZW50IiwicmFkaXVzIiwib3B0X24iLCJvcHRfc3BoZXJlUmFkaXVzIiwic3BoZXJlIiwiUEkiLCJtaW5YIiwibWluWSIsIm1heFgiLCJtYXhZIiwib3B0X3NpZGVzIiwib3B0X2FuZ2xlIiwic2lkZXMiLCJnZXRTdHJpZGUiLCJnZXRMYXlvdXQiLCJhcnJheUxlbmd0aCIsInBvbHlnb24iLCJzdGFydEFuZ2xlIiwibWF0aCIsInZpc2libGVBdFJlc29sdXRpb24iLCJfZXZlbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18iLCJfZXZlbnRzX0V2ZW50VHlwZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fIiwiX3V0aWxfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyIsIl9PYmplY3RfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyIsIl9CYXNlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18iLCJfUHJvcGVydHlfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfXyIsIl9vYmpfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfXyIsIl9yZW5kZXJfRXZlbnRUeXBlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83X18iLCJfc291cmNlX1N0YXRlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84X18iLCJMYXllciIsIkJhc2VMYXllciIsImJhc2VPcHRpb25zIiwic291cmNlIiwibWFwUHJlY29tcG9zZUtleV8iLCJtYXBSZW5kZXJLZXlfIiwic291cmNlQ2hhbmdlS2V5XyIsIm1hcCIsInNldE1hcCIsIlNPVVJDRSIsImhhbmRsZVNvdXJjZVByb3BlcnR5Q2hhbmdlXyIsInNldFNvdXJjZSIsImdldExheWVyc0FycmF5IiwiZ2V0TGF5ZXJTdGF0ZXNBcnJheSIsIm9wdF9zdGF0ZXMiLCJzdGF0ZXMiLCJnZXRMYXllclN0YXRlIiwiZ2V0U291cmNlIiwiZ2V0U291cmNlU3RhdGUiLCJnZXRTdGF0ZSIsImhhbmRsZVNvdXJjZUNoYW5nZV8iLCJDSEFOR0UiLCJQUkVDT01QT1NFIiwiZXZ0IiwicmVuZGVyRXZlbnQiLCJsYXllclN0YXRlIiwibWFuYWdlZCIsImdldFpJbmRleCIsInpJbmRleCIsIkluZmluaXR5IiwiZnJhbWVTdGF0ZSIsImxheWVyU3RhdGVzQXJyYXkiLCJsYXllclN0YXRlcyIsInJlbmRlciIsInJlc29sdXRpb24iLCJ2aXNpYmxlIiwibWluUmVzb2x1dGlvbiIsIm1heFJlc29sdXRpb24iLCJtYXhTcXVhcmVkRGVsdGEiLCJhcnJheU1heFNxdWFyZWREZWx0YSIsIm11bHRpQXJyYXlNYXhTcXVhcmVkRGVsdGEiLCJhc3NpZ25DbG9zZXN0UG9pbnQiLCJhc3NpZ25DbG9zZXN0QXJyYXlQb2ludCIsImFzc2lnbkNsb3Nlc3RNdWx0aUFycmF5UG9pbnQiLCJhc3NpZ25DbG9zZXN0Iiwib2Zmc2V0MSIsIm9mZnNldDIiLCJtYXgiLCJzcXVhcmVkRGVsdGEiLCJtYXhEZWx0YSIsImlzUmluZyIsIm9wdF90bXBQb2ludCIsInRtcFBvaW50IiwiTmFOIiwiX0xheWVyVHlwZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwiX0xheWVyX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18iLCJfVmVjdG9yUmVuZGVyVHlwZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fIiwiX29ial9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fIiwiX3N0eWxlX1N0eWxlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18iLCJWZWN0b3JMYXllciIsInN0eWxlIiwicmVuZGVyQnVmZmVyIiwidXBkYXRlV2hpbGVBbmltYXRpbmciLCJ1cGRhdGVXaGlsZUludGVyYWN0aW5nIiwiZGVjbHV0dGVyXyIsImRlY2x1dHRlciIsInJlbmRlckJ1ZmZlcl8iLCJzdHlsZV8iLCJzdHlsZUZ1bmN0aW9uXyIsInNldFN0eWxlIiwidXBkYXRlV2hpbGVBbmltYXRpbmdfIiwidXBkYXRlV2hpbGVJbnRlcmFjdGluZ18iLCJyZW5kZXJNb2RlXyIsInJlbmRlck1vZGUiLCJnZXREZWNsdXR0ZXIiLCJzZXREZWNsdXR0ZXIiLCJnZXRSZW5kZXJCdWZmZXIiLCJnZXRSZW5kZXJPcmRlciIsImdldFN0eWxlIiwiZ2V0U3R5bGVGdW5jdGlvbiIsImdldFVwZGF0ZVdoaWxlQW5pbWF0aW5nIiwiZ2V0VXBkYXRlV2hpbGVJbnRlcmFjdGluZyIsInNldFJlbmRlck9yZGVyIiwicmVuZGVyT3JkZXIiLCJnZXRSZW5kZXJNb2RlIiwibGluZWFyUmluZ0NvbnRhaW5zRXh0ZW50IiwibGluZWFyUmluZ0NvbnRhaW5zWFkiLCJsaW5lYXJSaW5nc0NvbnRhaW5zWFkiLCJsaW5lYXJSaW5nc3NDb250YWluc1hZIiwiX2V4dGVudF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwid24iLCJsb2FkaW5nc3RyYXRlZ3lfYWxsIiwiVmVjdG9yU291cmNlRXZlbnQiLCJvcHRfZmVhdHVyZSIsImZlYXR1cmUiLCJWZWN0b3JfVmVjdG9yU291cmNlIiwiU291cmNlIiwiVmVjdG9yU291cmNlIiwiYXR0cmlidXRpb25zIiwicHJvamVjdGlvbiIsInN0YXRlIiwiU3RhdGUiLCJ3cmFwWCIsImxvYWRlcl8iLCJmdW5jdGlvbnMiLCJmb3JtYXRfIiwiZm9ybWF0Iiwib3ZlcmxhcHNfIiwib3ZlcmxhcHMiLCJ1cmxfIiwidXJsIiwibG9hZGVyIiwiYXNzZXJ0cyIsImZlYXR1cmVsb2FkZXIiLCJzdHJhdGVneV8iLCJzdHJhdGVneSIsImNvbGxlY3Rpb24iLCJmZWF0dXJlcyIsInVzZVNwYXRpYWxJbmRleCIsImZlYXR1cmVzUnRyZWVfIiwiUkJ1c2giLCJsb2FkZWRFeHRlbnRzUnRyZWVfIiwibnVsbEdlb21ldHJ5RmVhdHVyZXNfIiwiaWRJbmRleF8iLCJ1bmRlZklkSW5kZXhfIiwiZmVhdHVyZUNoYW5nZUtleXNfIiwiZmVhdHVyZXNDb2xsZWN0aW9uXyIsImFkZEZlYXR1cmVzSW50ZXJuYWwiLCJiaW5kRmVhdHVyZXNDb2xsZWN0aW9uXyIsImFkZEZlYXR1cmUiLCJhZGRGZWF0dXJlSW50ZXJuYWwiLCJmZWF0dXJlS2V5IiwidXRpbCIsImFkZFRvSW5kZXhfIiwic2V0dXBDaGFuZ2VFdmVudHNfIiwiZ2VvbWV0cnkiLCJnZXRHZW9tZXRyeSIsImluc2VydCIsIlZlY3RvckV2ZW50VHlwZSIsIkFEREZFQVRVUkUiLCJldmVudHMiLCJFdmVudFR5cGUiLCJoYW5kbGVGZWF0dXJlQ2hhbmdlXyIsIk9iamVjdEV2ZW50VHlwZSIsIlBST1BFUlRZQ0hBTkdFIiwidmFsaWQiLCJpZCIsImdldElkIiwidG9TdHJpbmciLCJhZGRGZWF0dXJlcyIsImV4dGVudHMiLCJuZXdGZWF0dXJlcyIsImdlb21ldHJ5RmVhdHVyZXMiLCJsZW5ndGgkMSIsImZlYXR1cmUkMSIsImZlYXR1cmVLZXkkMSIsImxvYWQiLCJpJDIiLCJsZW5ndGgkMiIsIm1vZGlmeWluZ0NvbGxlY3Rpb24iLCJSRU1PVkVGRUFUVVJFIiwiQ29sbGVjdGlvbkV2ZW50VHlwZSIsInJlbW92ZUZlYXR1cmUiLCJvcHRfZmFzdCIsImZlYXR1cmVJZCIsInJlbW92ZUZlYXR1cmVJbnRlcm5hbCIsImNsZWFyRXZlbnQiLCJDTEVBUiIsImZvckVhY2hGZWF0dXJlIiwiY2FsbGJhY2siLCJmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZURpcmVjdCIsImZvckVhY2hGZWF0dXJlSW5FeHRlbnQiLCJpbnRlcnNlY3RzQ29vcmRpbmF0ZSIsImZvckVhY2hJbkV4dGVudCIsImZvckVhY2hGZWF0dXJlSW50ZXJzZWN0aW5nRXh0ZW50IiwicmVzdWx0IiwiZ2V0RmVhdHVyZXNDb2xsZWN0aW9uIiwiZ2V0RmVhdHVyZXMiLCJnZXRBbGwiLCJvbF9vYmoiLCJnZXRGZWF0dXJlc0F0Q29vcmRpbmF0ZSIsImdldEZlYXR1cmVzSW5FeHRlbnQiLCJnZXRJbkV4dGVudCIsImdldENsb3Nlc3RGZWF0dXJlVG9Db29yZGluYXRlIiwib3B0X2ZpbHRlciIsImNsb3Nlc3RGZWF0dXJlIiwiZmlsdGVyIiwicHJldmlvdXNNaW5TcXVhcmVkRGlzdGFuY2UiLCJtaW5EaXN0YW5jZSIsIm9wdF9leHRlbnQiLCJnZXRGZWF0dXJlQnlJZCIsImdldEZvcm1hdCIsImdldE92ZXJsYXBzIiwiZ2V0VXJsIiwiZXZlbnQiLCJ1cGRhdGUiLCJzaWQiLCJyZW1vdmVGcm9tSWRJbmRleF8iLCJDSEFOR0VGRUFUVVJFIiwiaGFzRmVhdHVyZSIsImlzRW1wdHkiLCJsb2FkRmVhdHVyZXMiLCJ0aGlzJDEiLCJsb2FkZWRFeHRlbnRzUnRyZWUiLCJleHRlbnRzVG9Mb2FkIiwibG9hZGluZyIsImxvb3AiLCJleHRlbnRUb0xvYWQiLCJvYmplY3QiLCJyZW1vdmVMb2FkZWRFeHRlbnQiLCJyZW1vdmVkIiwic2V0TG9hZGVyIiwic291cmNlX1NvdXJjZSIsIlBPU1RDT01QT1NFIiwiUkVOREVSIiwiUkVOREVSQ09NUExFVEUiLCJpbnRlcnNlY3RzTGluZVN0cmluZyIsImludGVyc2VjdHNMaW5lU3RyaW5nQXJyYXkiLCJpbnRlcnNlY3RzTGluZWFyUmluZ0FycmF5IiwiaW50ZXJzZWN0c0xpbmVhclJpbmdNdWx0aUFycmF5IiwiX2NvbnRhaW5zX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18iLCJfc2VnbWVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyIsImNvb3JkaW5hdGVzRXh0ZW50IiwicG9pbnQxIiwicG9pbnQyIiwiaW50ZXJzZWN0c0xpbmVhclJpbmciLCJ0d2ljZUFyZWEiLCJhcmVhIiwibGluZWFyUmluZ3NzIiwiZGlzYWJsZSIsIm5vbmUiLCJjcmVhdGVTbmFwVG9OIiwiY3JlYXRlU25hcFRvWmVybyIsInJvdGF0aW9uIiwidGhldGEiLCJmbG9vciIsIm9wdF90b2xlcmFuY2UiLCJhYnMiLCJjcmVhdGVTdHlsZUZ1bmN0aW9uIiwiX2Fzc2VydHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyIsIl9ldmVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyIsIl9ldmVudHNfRXZlbnRUeXBlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18iLCJGZWF0dXJlIiwib3B0X2dlb21ldHJ5T3JQcm9wZXJ0aWVzIiwiaWRfIiwiZ2VvbWV0cnlOYW1lXyIsImdlb21ldHJ5Q2hhbmdlS2V5XyIsImhhbmRsZUdlb21ldHJ5Q2hhbmdlZF8iLCJnZXRTaW1wbGlmaWVkR2VvbWV0cnkiLCJzZXRHZW9tZXRyeSIsInByb3BlcnRpZXMiLCJzZXRQcm9wZXJ0aWVzIiwiZ2V0UHJvcGVydGllcyIsInNldEdlb21ldHJ5TmFtZSIsImdldEdlb21ldHJ5TmFtZSIsImhhbmRsZUdlb21ldHJ5Q2hhbmdlXyIsInNldElkIiwibmFtZSIsInN0eWxlcyIsInBhZE51bWJlciIsIm51bWJlciIsIndpZHRoIiwib3B0X3ByZWNpc2lvbiIsIm51bWJlclN0cmluZyIsInRvRml4ZWQiLCJkZWNpbWFsIiwiam9pbiIsImNvbXBhcmVWZXJzaW9ucyIsInYxIiwidjIiLCJzMSIsInNwbGl0IiwiczIiLCJuMSIsInBhcnNlSW50IiwibjIiLCJfdXRpbF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwicmJ1c2hfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyIsInJidXNoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdCIsIl9leHRlbnRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyIsIm9wdF9tYXhFbnRyaWVzIiwicmJ1c2hfIiwiaXRlbXNfIiwidmFsdWVzIiwiaXRlbXMiLCJsIiwidWlkIiwiYmJveCIsImFsbCIsInNlYXJjaCIsIm9wdF90aGlzIiwiZm9yRWFjaF8iLCJ0b0pTT04iLCJjb25jYXQiLCJyYnVzaCIsIl9PYmplY3RfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyIsIl9wcm9qX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18iLCJfU3RhdGVfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyIsInByb2plY3Rpb25fIiwiYXR0cmlidXRpb25zXyIsImFkYXB0QXR0cmlidXRpb25zIiwiYXR0cmlidXRpb25zQ29sbGFwc2libGVfIiwiYXR0cmlidXRpb25zQ29sbGFwc2libGUiLCJzdGF0ZV8iLCJ3cmFwWF8iLCJnZXRBdHRyaWJ1dGlvbnMiLCJnZXRBdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSIsImdldFByb2plY3Rpb24iLCJnZXRSZXNvbHV0aW9ucyIsImdldFdyYXBYIiwicmVmcmVzaCIsInNldEF0dHJpYnV0aW9ucyIsInNldFN0YXRlIiwiYXR0cmlidXRpb25MaWtlIiwiT1BBQ0lUWSIsIlZJU0lCTEUiLCJFWFRFTlQiLCJaX0lOREVYIiwiTUFYX1JFU09MVVRJT04iLCJNSU5fUkVTT0xVVElPTiIsIl9Qcm9wZXJ0eV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fIiwiX21hdGhfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyIsIl9vYmpfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyIsIm9wYWNpdHkiLCJsYXllciIsImdldE9wYWNpdHkiLCJzb3VyY2VTdGF0ZSIsImdldFZpc2libGUiLCJnZXRNYXhSZXNvbHV0aW9uIiwiZ2V0TWluUmVzb2x1dGlvbiIsInNldEV4dGVudCIsInNldE1heFJlc29sdXRpb24iLCJzZXRNaW5SZXNvbHV0aW9uIiwic2V0T3BhY2l0eSIsInNldFZpc2libGUiLCJzZXRaSW5kZXgiLCJ6aW5kZXgiLCJnZXRJbnRlcmlvclBvaW50T2ZBcnJheSIsImdldEludGVyaW9yUG9pbnRzT2ZNdWx0aUFycmF5IiwiX2FycmF5X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18iLCJmbGF0Q2VudGVycyIsImZsYXRDZW50ZXJzT2Zmc2V0Iiwib3B0X2Rlc3QiLCJpbnRlcnNlY3Rpb25zIiwicnIiLCJwb2ludFgiLCJtYXhTZWdtZW50TGVuZ3RoIiwic2VnbWVudExlbmd0aCIsImlzTmFOIiwiaW50ZXJpb3JQb2ludHMiLCJyZXQiLCJtb2R1bGUiLCJleHBvcnRzIiwiZGVmYXVsdCIsInF1aWNrc2VsZWN0IiwibWF4RW50cmllcyIsIl9tYXhFbnRyaWVzIiwiX21pbkVudHJpZXMiLCJjZWlsIiwiX2luaXRGb3JtYXQiLCJmaW5kSXRlbSIsImVxdWFsc0ZuIiwiY2FsY0JCb3giLCJub2RlIiwidG9CQm94IiwiZGlzdEJCb3giLCJjaGlsZHJlbiIsImsiLCJwIiwiZGVzdE5vZGUiLCJjcmVhdGVOb2RlIiwiY2hpbGQiLCJsZWFmIiwibWluIiwiY29tcGFyZU5vZGVNaW5YIiwiY29tcGFyZU5vZGVNaW5ZIiwiYmJveEFyZWEiLCJiYm94TWFyZ2luIiwiaW50ZXJzZWN0cyIsImhlaWdodCIsIm11bHRpU2VsZWN0IiwibGVmdCIsInJpZ2h0IiwiX2FsbCIsImxlbiIsImNoaWxkQkJveCIsIm5vZGVzVG9TZWFyY2giLCJjb2xsaWRlcyIsIl9idWlsZCIsIl9zcGxpdFJvb3QiLCJ0bXBOb2RlIiwiX2luc2VydCIsInBhcmVudCIsImdvaW5nVXAiLCJwYXRoIiwiaW5kZXhlcyIsIl9jb25kZW5zZSIsImNvbXBhcmVNaW5YIiwiY29tcGFyZU1pblkiLCJmcm9tSlNPTiIsImFwcGx5IiwiTiIsIk0iLCJsb2ciLCJyaWdodDIiLCJyaWdodDMiLCJOMiIsIk4xIiwiX2Nob29zZVN1YnRyZWUiLCJsZXZlbCIsInRhcmdldE5vZGUiLCJlbmxhcmdlbWVudCIsIm1pbkFyZWEiLCJtaW5FbmxhcmdlbWVudCIsImlzTm9kZSIsImluc2VydFBhdGgiLCJfc3BsaXQiLCJfYWRqdXN0UGFyZW50QkJveGVzIiwibSIsIl9jaG9vc2VTcGxpdEF4aXMiLCJzcGxpdEluZGV4IiwiX2Nob29zZVNwbGl0SW5kZXgiLCJuZXdOb2RlIiwiYmJveDEiLCJiYm94MiIsIm92ZXJsYXAiLCJtaW5PdmVybGFwIiwiX2FsbERpc3RNYXJnaW4iLCJsZWZ0QkJveCIsInJpZ2h0QkJveCIsIm1hcmdpbiIsInNpYmxpbmdzIiwiY29tcGFyZUFyciIsIkZ1bmN0aW9uIiwibGluZWFyUmluZ0lzQ2xvY2t3aXNlIiwiZWRnZSIsImxpbmVhclJpbmdJc09yaWVudGVkIiwiaXNDbG9ja3dpc2UiLCJsaW5lYXJSaW5nc0FyZU9yaWVudGVkIiwib3JpZW50TGluZWFyUmluZ3MiLCJvcmllbnRMaW5lYXJSaW5nc0FycmF5IiwiRXZlbnRTb3VyY2UiLCJkaXNwYXRjaGVyIiwibWFwcGluZyIsIm1hcHBpbmdfIiwiZ2V0RXZlbnRzIiwia2V5cyIsImdldEhhbmRsZXJGb3JFdmVudCIsImV2ZW50VHlwZSIsIkZvcm1hdFR5cGUiLCJBUlJBWV9CVUZGRVIiLCJKU09OIiwiVEVYVCIsIlhNTCIsImxvYWRGZWF0dXJlc1hociIsInN1Y2Nlc3MiLCJmYWlsdXJlIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwicmVzcG9uc2VUeXBlIiwib25sb2FkIiwic3RhdHVzIiwicmVzcG9uc2VUZXh0IiwicmVzcG9uc2VYTUwiLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJyZWFkRmVhdHVyZXMiLCJmZWF0dXJlUHJvamVjdGlvbiIsInJlYWRQcm9qZWN0aW9uIiwiZ2V0TGFzdEV4dGVudCIsImJpbmQiLCJvbmVycm9yIiwic2VuZCIsImZlYXR1cmVsb2FkZXJfeGhyIiwiZGF0YVByb2plY3Rpb24iLCJzd2FwIiwiZGVmYXVsdENvbXBhcmUiLCJxdWlja3NlbGVjdFN0ZXAiLCJ6IiwicyIsImV4cCIsInNkIiwibmV3TGVmdCIsIm5ld1JpZ2h0IiwiZmFjdG9yeSIsIlBPSU5URVJfSUQiLCJQT0lOVEVSX1RZUEUiLCJwcmVwYXJlRXZlbnQiLCJfRXZlbnRTb3VyY2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyIsIm1vdXNlZG93biIsImluRXZlbnQiLCJpc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoXyIsInBvaW50ZXJNYXAiLCJjYW5jZWwiLCJlIiwiZG93biIsIm1vdXNlbW92ZSIsIm1vdmUiLCJtb3VzZXVwIiwiYnV0dG9uIiwidXAiLCJjbGVhbnVwTW91c2UiLCJtb3VzZW92ZXIiLCJlbnRlck92ZXIiLCJtb3VzZW91dCIsImxlYXZlT3V0IiwiTW91c2VTb3VyY2UiLCJsYXN0VG91Y2hlcyIsImx0cyIsImNsaWVudFgiLCJjbGllbnRZIiwiY2xvbmVFdmVudCIsInBkIiwicHJldmVudERlZmF1bHQiLCJwb2ludGVySWQiLCJpc1ByaW1hcnkiLCJwb2ludGVyVHlwZSIsImxpbmVTdHJpbmdMZW5ndGgiLCJNYXBCcm93c2VyUG9pbnRlckV2ZW50IiwiTWFwQnJvd3NlckV2ZW50IiwicG9pbnRlckV2ZW50Iiwib3B0X2RyYWdnaW5nIiwib3B0X2ZyYW1lU3RhdGUiLCJvcmlnaW5hbEV2ZW50IiwiTWFwRXZlbnQiLCJicm93c2VyRXZlbnQiLCJwaXhlbCIsImdldEV2ZW50UGl4ZWwiLCJnZXRDb29yZGluYXRlRnJvbVBpeGVsIiwiZHJhZ2dpbmciLCJzdG9wUHJvcGFnYXRpb24iLCJLaW5ldGljIiwiZGVjYXkiLCJtaW5WZWxvY2l0eSIsImRlbGF5IiwiZGVjYXlfIiwibWluVmVsb2NpdHlfIiwiZGVsYXlfIiwicG9pbnRzXyIsImFuZ2xlXyIsImluaXRpYWxWZWxvY2l0eV8iLCJEYXRlIiwibm93IiwibGFzdEluZGV4IiwiZmlyc3RJbmRleCIsImR1cmF0aW9uIiwiYXRhbjIiLCJnZXREaXN0YW5jZSIsImdldEFuZ2xlIiwib2xfS2luZXRpYyIsIkFDVElWRSIsInZpZXciLCJvcHRfYW5jaG9yIiwib3B0X2R1cmF0aW9uIiwiY29uc3RyYWluUm90YXRpb24iLCJyb3RhdGVXaXRob3V0Q29uc3RyYWludHMiLCJjdXJyZW50Um90YXRpb24iLCJnZXRSb3RhdGlvbiIsImN1cnJlbnRDZW50ZXIiLCJhbmltYXRlIiwiYW5jaG9yIiwiZWFzaW5nIiwiem9vbSIsIm9wdF9kaXJlY3Rpb24iLCJjb25zdHJhaW5SZXNvbHV0aW9uIiwiem9vbVdpdGhvdXRDb25zdHJhaW50cyIsInpvb21CeURlbHRhIiwiY3VycmVudFJlc29sdXRpb24iLCJnZXRSZXNvbHV0aW9uIiwicmVzb2x1dGlvbnMiLCJjYWxjdWxhdGVDZW50ZXJab29tIiwiY29uc3RyYWluQ2VudGVyIiwic2V0Q2VudGVyIiwic2V0UmVzb2x1dGlvbiIsImludGVyYWN0aW9uX0ludGVyYWN0aW9uIiwiSW50ZXJhY3Rpb24iLCJoYW5kbGVFdmVudCIsIm1hcF8iLCJzZXRBY3RpdmUiLCJnZXRBY3RpdmUiLCJnZXRNYXAiLCJtYXBCcm93c2VyRXZlbnQiLCJhY3RpdmUiLCJvbF9PYmplY3QiLCJEb3VibGVDbGlja1pvb21faGFuZGxlRXZlbnQiLCJzdG9wRXZlbnQiLCJNYXBCcm93c2VyRXZlbnRUeXBlIiwic2hpZnRLZXkiLCJkZWx0YV8iLCJnZXRWaWV3IiwiZHVyYXRpb25fIiwiaW50ZXJhY3Rpb25fRG91YmxlQ2xpY2tab29tIiwiRG91YmxlQ2xpY2tab29tIiwiYWx0S2V5T25seSIsImFsdEtleSIsIm1ldGFLZXkiLCJjdHJsS2V5IiwiYWx0U2hpZnRLZXlzT25seSIsImNvbmRpdGlvbl9mb2N1cyIsImdldFRhcmdldEVsZW1lbnQiLCJkb2N1bWVudCIsImFjdGl2ZUVsZW1lbnQiLCJhbHdheXMiLCJtb3VzZUFjdGlvbkJ1dHRvbiIsImhhcyIsIm5ldmVyIiwicG9pbnRlck1vdmUiLCJzaW5nbGVDbGljayIsIm5vTW9kaWZpZXJLZXlzIiwic2hpZnRLZXlPbmx5IiwidGFyZ2V0Tm90RWRpdGFibGUiLCJ0YWdOYW1lIiwibW91c2VPbmx5IiwicHJpbWFyeUFjdGlvbiIsIlBvaW50ZXJfY2VudHJvaWQiLCJwb2ludGVyRXZlbnRzIiwiUG9pbnRlciIsIlBvaW50ZXJJbnRlcmFjdGlvbiIsImhhbmRsZURvd25FdmVudCIsImhhbmRsZURyYWdFdmVudCIsImhhbmRsZU1vdmVFdmVudCIsImhhbmRsZVVwRXZlbnQiLCJzdG9wRG93biIsImhhbmRsaW5nRG93blVwU2VxdWVuY2UiLCJ0cmFja2VkUG9pbnRlcnNfIiwidGFyZ2V0UG9pbnRlcnMiLCJ1cGRhdGVUcmFja2VkUG9pbnRlcnNfIiwiaGFuZGxlZFVwIiwiaGFuZGxlZCIsImlzUG9pbnRlckRyYWdnaW5nRXZlbnQiLCJpbnRlcmFjdGlvbl9EcmFnUGFuIiwiRHJhZ1BhbiIsImtpbmV0aWNfIiwia2luZXRpYyIsImxhc3RDZW50cm9pZCIsImxhc3RQb2ludGVyc0NvdW50XyIsInBhbm5pbmdfIiwiY29uZGl0aW9uXyIsImNvbmRpdGlvbiIsIm5vS2luZXRpY18iLCJzZXRIaW50IiwiVmlld0hpbnQiLCJjZW50cm9pZCIsImRlbHRhWCIsImRlbHRhWSIsIm9sX2Nvb3JkaW5hdGUiLCJjZW50ZXJweCIsImdldFBpeGVsRnJvbUNvb3JkaW5hdGUiLCJkZXN0IiwiZ2V0QW5pbWF0aW5nIiwidmlld1N0YXRlIiwiaW50ZXJhY3Rpb25fRHJhZ1JvdGF0ZSIsIkRyYWdSb3RhdGUiLCJsYXN0QW5nbGVfIiwiZ2V0Q29uc3RyYWludHMiLCJyb3RhdGlvbmNvbnN0cmFpbnQiLCJzaXplIiwiZ2V0U2l6ZSIsIkJveCIsIkRpc3Bvc2FibGUiLCJSZW5kZXJCb3giLCJjbGFzc05hbWUiLCJnZW9tZXRyeV8iLCJlbGVtZW50XyIsImNyZWF0ZUVsZW1lbnQiLCJwb3NpdGlvbiIsInN0YXJ0UGl4ZWxfIiwiZW5kUGl4ZWxfIiwiZGlzcG9zZUludGVybmFsIiwicmVuZGVyXyIsInN0YXJ0UGl4ZWwiLCJlbmRQaXhlbCIsInRvcCIsImdldE92ZXJsYXlDb250YWluZXIiLCJyZW1vdmVDaGlsZCIsImFwcGVuZENoaWxkIiwic2V0UGl4ZWxzIiwiY3JlYXRlT3JVcGRhdGVHZW9tZXRyeSIsIm9sX0Rpc3Bvc2FibGUiLCJEcmFnQm94RXZlbnRUeXBlIiwiRHJhZ0JveEV2ZW50IiwiaW50ZXJhY3Rpb25fRHJhZ0JveCIsIkRyYWdCb3giLCJib3hfIiwibWluQXJlYV8iLCJvbkJveEVuZF8iLCJvbkJveEVuZCIsImJveEVuZENvbmRpdGlvbl8iLCJib3hFbmRDb25kaXRpb24iLCJkZWZhdWx0Qm94RW5kQ29uZGl0aW9uIiwib3V0XyIsIm1hcEV4dGVudCIsImNhbGN1bGF0ZUV4dGVudCIsImJveFBpeGVsRXh0ZW50IiwiZmFjdG9yIiwiZ2V0UmVzb2x1dGlvbkZvckV4dGVudCIsImludGVyYWN0aW9uX0RyYWdab29tIiwiRHJhZ1pvb20iLCJvdXQiLCJLZXlDb2RlIiwiTEVGVCIsIlVQIiwiUklHSFQiLCJET1dOIiwiS2V5Ym9hcmRQYW5faGFuZGxlRXZlbnQiLCJLRVlET1dOIiwia2V5Q29kZSIsIm1hcFVuaXRzRGVsdGEiLCJwaXhlbERlbHRhXyIsInBhbiIsImludGVyYWN0aW9uX0tleWJvYXJkUGFuIiwiS2V5Ym9hcmRQYW4iLCJkZWZhdWx0Q29uZGl0aW9uXyIsInBpeGVsRGVsdGEiLCJLZXlib2FyZFpvb21faGFuZGxlRXZlbnQiLCJLRVlQUkVTUyIsImNoYXJDb2RlIiwiY2hhckNvZGVBdCIsImludGVyYWN0aW9uX0tleWJvYXJkWm9vbSIsIktleWJvYXJkWm9vbSIsIk1vZGUiLCJpbnRlcmFjdGlvbl9Nb3VzZVdoZWVsWm9vbSIsIk1vdXNlV2hlZWxab29tIiwidGltZW91dF8iLCJ0aW1lb3V0IiwidXNlQW5jaG9yXyIsInVzZUFuY2hvciIsImNvbnN0cmFpblJlc29sdXRpb25fIiwibGFzdEFuY2hvcl8iLCJzdGFydFRpbWVfIiwidGltZW91dElkXyIsIm1vZGVfIiwidHJhY2twYWRFdmVudEdhcF8iLCJ0cmFja3BhZFRpbWVvdXRJZF8iLCJ0cmFja3BhZERlbHRhUGVyWm9vbV8iLCJ0cmFja3BhZFpvb21CdWZmZXJfIiwiZGVjcmVtZW50SW50ZXJhY3RpbmdIaW50XyIsIldIRUVMIiwiTU9VU0VXSEVFTCIsIndoZWVsRXZlbnQiLCJkZWx0YU1vZGUiLCJXaGVlbEV2ZW50IiwiRE9NX0RFTFRBX1BJWEVMIiwiRE9NX0RFTFRBX0xJTkUiLCJ3aGVlbERlbHRhWSIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJyZWJvdW5kIiwidGltZUxlZnQiLCJoYW5kbGVXaGVlbFpvb21fIiwiY2FuY2VsQW5pbWF0aW9ucyIsInNldE1vdXNlQW5jaG9yIiwiaW50ZXJhY3Rpb25fUGluY2hSb3RhdGUiLCJQaW5jaFJvdGF0ZSIsInBvaW50ZXJPcHRpb25zIiwiYW5jaG9yXyIsInJvdGF0aW5nXyIsInJvdGF0aW9uRGVsdGFfIiwidGhyZXNob2xkXyIsInRocmVzaG9sZCIsInJvdGF0aW9uRGVsdGEiLCJ0b3VjaDAiLCJ0b3VjaDEiLCJ2aWV3cG9ydFBvc2l0aW9uIiwiZ2V0Vmlld3BvcnQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJpbnRlcmFjdGlvbl9QaW5jaFpvb20iLCJQaW5jaFpvb20iLCJsYXN0RGlzdGFuY2VfIiwibGFzdFNjYWxlRGVsdGFfIiwic2NhbGVEZWx0YSIsIm5ld1Jlc29sdXRpb24iLCJEcmFnQW5kRHJvcEV2ZW50VHlwZSIsIkRyYWdBbmREcm9wRXZlbnQiLCJmaWxlIiwib3B0X2ZlYXR1cmVzIiwib3B0X3Byb2plY3Rpb24iLCJoYW5kbGVEcm9wIiwiZmlsZXMiLCJkYXRhVHJhbnNmZXIiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsIkxPQUQiLCJoYW5kbGVSZXN1bHRfIiwicmVhZEFzVGV4dCIsImhhbmRsZVN0b3AiLCJkcm9wRWZmZWN0IiwiaW50ZXJhY3Rpb25fRHJhZ0FuZERyb3AiLCJEcmFnQW5kRHJvcCIsImZvcm1hdENvbnN0cnVjdG9yc18iLCJmb3JtYXRDb25zdHJ1Y3RvcnMiLCJwcm9qIiwiZHJvcExpc3RlbktleXNfIiwic291cmNlXyIsInRyeVJlYWRGZWF0dXJlc18iLCJyZWdpc3Rlckxpc3RlbmVyc18iLCJkcm9wQXJlYSIsIkRST1AiLCJEUkFHRU5URVIiLCJEUkFHT1ZFUiIsInVucmVnaXN0ZXJMaXN0ZW5lcnNfIiwidGV4dCIsImludGVyYWN0aW9uX0RyYWdSb3RhdGVBbmRab29tIiwiRHJhZ1JvdGF0ZUFuZFpvb20iLCJsYXN0TWFnbml0dWRlXyIsIm1hZ25pdHVkZSIsImFuZ2xlRGVsdGEiLCJDaXJjbGVfQ2lyY2xlIiwiQ2lyY2xlIiwib3B0X3JhZGl1cyIsInNldENlbnRlckFuZFJhZGl1cyIsImdldFJhZGl1c1NxdWFyZWRfIiwiY29tcHV0ZUV4dGVudCIsIkNJUkNMRSIsImNpcmNsZUV4dGVudCIsInNldFJhZGl1cyIsInRyYW5zZm9ybSIsImdlb21fQ2lyY2xlIiwiaW50ZXJwb2xhdGVQb2ludCIsImZyYWN0aW9uIiwicG9pbnRZIiwiY3VtdWxhdGl2ZUxlbmd0aHMiLCJvIiwibGluZVN0cmluZ0Nvb3JkaW5hdGVBdE0iLCJleHRyYXBvbGF0ZSIsImxvIiwiaGkiLCJtMCIsImdlb21fTGluZVN0cmluZyIsIkxpbmVTdHJpbmciLCJmbGF0TWlkcG9pbnRfIiwiZmxhdE1pZHBvaW50UmV2aXNpb25fIiwiYXBwZW5kQ29vcmRpbmF0ZSIsImZvckVhY2hTZWdtZW50IiwiZmxhdF9zZWdtZW50cyIsImdldENvb3JkaW5hdGVBdE0iLCJvcHRfZXh0cmFwb2xhdGUiLCJYWVpNIiwiZ2V0Q29vcmRpbmF0ZUF0IiwiZmxhdF9sZW5ndGgiLCJnZXRGbGF0TWlkcG9pbnQiLCJMSU5FX1NUUklORyIsImdlb21fTXVsdGlMaW5lU3RyaW5nIiwiTXVsdGlMaW5lU3RyaW5nIiwibGluZVN0cmluZ3MiLCJsaW5lU3RyaW5nIiwiYXBwZW5kTGluZVN0cmluZyIsIm9wdF9pbnRlcnBvbGF0ZSIsImludGVycG9sYXRlIiwibGluZVN0cmluZ3NDb29yZGluYXRlQXRNIiwiZ2V0TGluZVN0cmluZyIsImdldExpbmVTdHJpbmdzIiwiZ2V0RmxhdE1pZHBvaW50cyIsIm1pZHBvaW50cyIsIm1pZHBvaW50IiwiTVVMVElfTElORV9TVFJJTkciLCJnZW9tX011bHRpUG9pbnQiLCJNdWx0aVBvaW50IiwiYXBwZW5kUG9pbnQiLCJwb2ludCIsImdldFBvaW50IiwiZ2V0UG9pbnRzIiwicG9pbnRzIiwiTVVMVElfUE9JTlQiLCJnZW9tX011bHRpUG9seWdvbiIsIk11bHRpUG9seWdvbiIsIm9wdF9lbmRzcyIsImVuZHNzXyIsImZsYXRJbnRlcmlvclBvaW50c1JldmlzaW9uXyIsImZsYXRJbnRlcmlvclBvaW50c18iLCJwb2x5Z29ucyIsImFwcGVuZFBvbHlnb24iLCJuZXdFbmRzcyIsImdldEVuZHNzIiwiZ2V0RmxhdEludGVyaW9yUG9pbnRzIiwiZ2V0SW50ZXJpb3JQb2ludHMiLCJnZXRQb2x5Z29uIiwicHJldkVuZHMiLCJnZXRQb2x5Z29ucyIsIk1VTFRJX1BPTFlHT04iLCJsYXN0RW5kcyIsIkRyYXdfTW9kZSIsIlBPSU5UIiwiRHJhd0V2ZW50VHlwZSIsIkRyYXdFdmVudCIsImludGVyYWN0aW9uX0RyYXciLCJEcmF3Iiwic2hvdWxkSGFuZGxlXyIsImRvd25QeF8iLCJkb3duVGltZW91dF8iLCJsYXN0RHJhZ1RpbWVfIiwiZnJlZWhhbmRfIiwiZmVhdHVyZXNfIiwic25hcFRvbGVyYW5jZV8iLCJzbmFwVG9sZXJhbmNlIiwidHlwZV8iLCJtb2RlIiwiZ2V0TW9kZSIsInN0b3BDbGlja18iLCJzdG9wQ2xpY2siLCJtaW5Qb2ludHNfIiwibWluUG9pbnRzIiwibWF4UG9pbnRzXyIsIm1heFBvaW50cyIsImZpbmlzaENvbmRpdGlvbl8iLCJmaW5pc2hDb25kaXRpb24iLCJnZW9tZXRyeUZ1bmN0aW9uIiwib3B0X2dlb21ldHJ5Iiwic3F1YXJlZExlbmd0aCIsIkNvbnN0cnVjdG9yIiwiZ2VvbWV0cnlGdW5jdGlvbl8iLCJkcmFnVmVydGV4RGVsYXlfIiwiZHJhZ1ZlcnRleERlbGF5IiwiZmluaXNoQ29vcmRpbmF0ZV8iLCJza2V0Y2hGZWF0dXJlXyIsInNrZXRjaFBvaW50XyIsInNrZXRjaENvb3Jkc18iLCJza2V0Y2hMaW5lXyIsInNrZXRjaExpbmVDb29yZHNfIiwic3F1YXJlZENsaWNrVG9sZXJhbmNlXyIsImNsaWNrVG9sZXJhbmNlIiwib3ZlcmxheV8iLCJWZWN0b3IiLCJzb3VyY2VfVmVjdG9yIiwiU3R5bGUiLCJnZW9tZXRyeU5hbWUiLCJmcmVlaGFuZENvbmRpdGlvbl8iLCJmcmVlaGFuZCIsImZyZWVoYW5kQ29uZGl0aW9uIiwidXBkYXRlU3RhdGVfIiwiZ2V0T3ZlcmxheSIsIkNPTlRFWFRNRU5VIiwicGFzcyIsImFkZFRvRHJhd2luZ18iLCJoYW5kbGVQb2ludGVyTW92ZV8iLCJzdGFydERyYXdpbmdfIiwiY2lyY2xlTW9kZSIsImZpbmlzaERyYXdpbmciLCJhdEZpbmlzaF8iLCJhYm9ydERyYXdpbmdfIiwiZG93blB4IiwiY2xpY2tQeCIsIm1vZGlmeURyYXdpbmdfIiwiY3JlYXRlT3JVcGRhdGVTa2V0Y2hQb2ludF8iLCJhdCIsInBvdGVudGlhbGx5RG9uZSIsInBvdGVudGlhbGx5RmluaXNoQ29vcmRpbmF0ZXMiLCJza2V0Y2hDb29yZHMiLCJmaW5pc2hDb29yZGluYXRlIiwiZmluaXNoUGl4ZWwiLCJ1cGRhdGVTa2V0Y2hGZWF0dXJlc18iLCJza2V0Y2hMaW5lR2VvbSIsInJpbmciLCJkb25lIiwicmVtb3ZlTGFzdFBvaW50Iiwic2tldGNoRmVhdHVyZSIsInNrZXRjaEZlYXR1cmVzIiwib3ZlcmxheVNvdXJjZSIsIkV4dGVudEV2ZW50VHlwZSIsIkVYVEVOVENIQU5HRUQiLCJFeHRlbnRJbnRlcmFjdGlvbkV2ZW50IiwiZ2V0RGVmYXVsdFBvaW50ZXJTdHlsZUZ1bmN0aW9uIiwiZ2V0UG9pbnRIYW5kbGVyIiwiZml4ZWRQb2ludCIsImdldEVkZ2VIYW5kbGVyIiwiZml4ZWRQMSIsImZpeGVkUDIiLCJFeHRlbnQiLCJFeHRlbnRJbnRlcmFjdGlvbiIsImV4dGVudF8iLCJwb2ludGVySGFuZGxlcl8iLCJwaXhlbFRvbGVyYW5jZV8iLCJwaXhlbFRvbGVyYW5jZSIsInNuYXBwZWRUb1ZlcnRleF8iLCJleHRlbnRGZWF0dXJlXyIsInZlcnRleEZlYXR1cmVfIiwiZXh0ZW50T3ZlcmxheV8iLCJib3hTdHlsZSIsInZlcnRleE92ZXJsYXlfIiwicG9pbnRlclN0eWxlIiwic25hcFRvVmVydGV4XyIsInBpeGVsQ29vcmRpbmF0ZSIsInNlZ21lbnRzIiwiZ2V0U2VnbWVudHMiLCJjbG9zZXN0U2VnbWVudCIsInZlcnRleCIsInZlcnRleFBpeGVsIiwicGl4ZWwxIiwicGl4ZWwyIiwic3F1YXJlZERpc3QxIiwic3F1YXJlZERpc3QyIiwiZGlzdCIsImNyZWF0ZU9yVXBkYXRlUG9pbnRlckZlYXR1cmVfIiwiY3JlYXRlT3JVcGRhdGVFeHRlbnRGZWF0dXJlXyIsImV4dGVudEZlYXR1cmUiLCJ2ZXJ0ZXhGZWF0dXJlIiwiZ2V0T3Bwb3NpbmdQb2ludCIsInhfIiwieV8iLCJDSVJDTEVfQ0lSQ1VNRkVSRU5DRV9JTkRFWCIsIk1vZGlmeUV2ZW50VHlwZSIsIk1vZGlmeUV2ZW50IiwibWFwQnJvd3NlclBvaW50ZXJFdmVudCIsImNvbXBhcmVJbmRleGVzIiwicG9pbnREaXN0YW5jZVRvU2VnbWVudERhdGFTcXVhcmVkIiwicG9pbnRDb29yZGluYXRlcyIsInNlZ21lbnREYXRhIiwiY2lyY2xlR2VvbWV0cnkiLCJkaXN0YW5jZVRvQ2VudGVyU3F1YXJlZCIsImRpc3RhbmNlVG9DaXJjdW1mZXJlbmNlIiwiY2xvc2VzdE9uU2VnbWVudERhdGEiLCJnZXRDbG9zZXN0UG9pbnQiLCJpbnRlcmFjdGlvbl9Nb2RpZnkiLCJNb2RpZnkiLCJkZWZhdWx0RGVsZXRlQ29uZGl0aW9uXyIsImRlbGV0ZUNvbmRpdGlvbl8iLCJkZWxldGVDb25kaXRpb24iLCJpbnNlcnRWZXJ0ZXhDb25kaXRpb25fIiwiaW5zZXJ0VmVydGV4Q29uZGl0aW9uIiwidmVydGV4U2VnbWVudHNfIiwibGFzdFBpeGVsXyIsImlnbm9yZU5leHRTaW5nbGVDbGlja18iLCJtb2RpZmllZF8iLCJyQnVzaF8iLCJjaGFuZ2luZ0ZlYXR1cmVfIiwiZHJhZ1NlZ21lbnRzXyIsIlNFR01FTlRfV1JJVEVSU18iLCJ3cml0ZVBvaW50R2VvbWV0cnlfIiwid3JpdGVMaW5lU3RyaW5nR2VvbWV0cnlfIiwid3JpdGVQb2x5Z29uR2VvbWV0cnlfIiwid3JpdGVNdWx0aVBvaW50R2VvbWV0cnlfIiwid3JpdGVNdWx0aUxpbmVTdHJpbmdHZW9tZXRyeV8iLCJ3cml0ZU11bHRpUG9seWdvbkdlb21ldHJ5XyIsIndyaXRlQ2lyY2xlR2VvbWV0cnlfIiwiR2VvbWV0cnlDb2xsZWN0aW9uIiwid3JpdGVHZW9tZXRyeUNvbGxlY3Rpb25HZW9tZXRyeV8iLCJoYW5kbGVTb3VyY2VBZGRfIiwiaGFuZGxlU291cmNlUmVtb3ZlXyIsIkVycm9yIiwiYWRkRmVhdHVyZV8iLCJoYW5kbGVGZWF0dXJlQWRkXyIsImhhbmRsZUZlYXR1cmVSZW1vdmVfIiwibGFzdFBvaW50ZXJFdmVudF8iLCJpc1JlbmRlcmVkIiwiaGFuZGxlUG9pbnRlckF0UGl4ZWxfIiwid2lsbE1vZGlmeUZlYXR1cmVzXyIsInJlbW92ZUZlYXR1cmVfIiwicmVtb3ZlRmVhdHVyZVNlZ21lbnREYXRhXyIsInJCdXNoIiwibm9kZXNUb1JlbW92ZSIsImRlcHRoIiwibGluZXMiLCJyaW5ncyIsImtrIiwiY2VudGVyU2VnbWVudERhdGEiLCJjaXJjdW1mZXJlbmNlU2VnbWVudERhdGEiLCJmZWF0dXJlU2VnbWVudHMiLCJnZW9tZXRyaWVzIiwiZ2V0R2VvbWV0cmllc0FycmF5IiwiY3JlYXRlT3JVcGRhdGVWZXJ0ZXhGZWF0dXJlXyIsImdldEludGVyYWN0aW5nIiwicmVtb3ZlUG9pbnQiLCJkcmFnU2VnbWVudCIsInNldEdlb21ldHJ5Q29vcmRpbmF0ZXNfIiwiaW5zZXJ0VmVydGljZXMiLCJ2ZXJ0ZXhFeHRlbnQiLCJzZWdtZW50RGF0YU1hdGNoZXMiLCJjb21wb25lbnRTZWdtZW50cyIsInNlZ21lbnREYXRhTWF0Y2giLCJjbG9zZXN0VmVydGV4IiwiaW5zZXJ0VmVydGV4XyIsImJveCIsIm5vZGVzIiwidmVydGV4U2VnbWVudHMiLCJyVHJlZSIsInVwZGF0ZVNlZ21lbnRJbmRpY2VzXyIsIm5ld1NlZ21lbnREYXRhIiwibmV3U2VnbWVudERhdGEyIiwicmVtb3ZlVmVydGV4XyIsImNvbXBvbmVudCIsIm5ld0luZGV4IiwiZHJhZ1NlZ21lbnRzIiwic2VnbWVudHNCeUZlYXR1cmUiLCJkZWxldGVkIiwiU2VsZWN0RXZlbnRUeXBlIiwiU0VMRUNUIiwiU2VsZWN0RXZlbnQiLCJzZWxlY3RlZCIsImRlc2VsZWN0ZWQiLCJTZWxlY3RfaGFuZGxlRXZlbnQiLCJhZGRDb25kaXRpb25fIiwicmVtb3ZlQ29uZGl0aW9uXyIsInRvZ2dsZSIsInRvZ2dsZUNvbmRpdGlvbl8iLCJmZWF0dXJlTGF5ZXJBc3NvY2lhdGlvbl8iLCJmb3JFYWNoRmVhdHVyZUF0UGl4ZWwiLCJmaWx0ZXJfIiwiYWRkRmVhdHVyZUxheWVyQXNzb2NpYXRpb25fIiwibXVsdGlfIiwibGF5ZXJGaWx0ZXIiLCJsYXllckZpbHRlcl8iLCJoaXRUb2xlcmFuY2UiLCJoaXRUb2xlcmFuY2VfIiwicmVtb3ZlRmVhdHVyZUxheWVyQXNzb2NpYXRpb25fIiwiU2VsZWN0X2dldERlZmF1bHRTdHlsZUZ1bmN0aW9uIiwiR0VPTUVUUllfQ09MTEVDVElPTiIsImludGVyYWN0aW9uX1NlbGVjdCIsIlNlbGVjdCIsImFkZENvbmRpdGlvbiIsInJlbW92ZUNvbmRpdGlvbiIsInRvZ2dsZUNvbmRpdGlvbiIsIm11bHRpIiwiZmVhdHVyZU92ZXJsYXkiLCJmZWF0dXJlT3ZlcmxheV8iLCJsYXllcnMiLCJnZXRIaXRUb2xlcmFuY2UiLCJnZXRMYXllciIsInNldEhpdFRvbGVyYW5jZSIsImN1cnJlbnRNYXAiLCJzZWxlY3RlZEZlYXR1cmVzIiwidW5za2lwRmVhdHVyZSIsInNraXBGZWF0dXJlIiwiZ2V0RmVhdHVyZUZyb21FdmVudCIsImludGVyYWN0aW9uX1NuYXAiLCJTbmFwIiwidmVydGV4XyIsImVkZ2VfIiwiZmVhdHVyZXNMaXN0ZW5lcktleXNfIiwiZmVhdHVyZUNoYW5nZUxpc3RlbmVyS2V5c18iLCJpbmRleGVkRmVhdHVyZXNFeHRlbnRzXyIsInBlbmRpbmdGZWF0dXJlc18iLCJwaXhlbENvb3JkaW5hdGVfIiwic29ydEJ5RGlzdGFuY2VfIiwiZGVsdGFBIiwiZGVsdGFCIiwib3B0X2xpc3RlbiIsInJlZ2lzdGVyIiwiZmVhdHVyZV91aWQiLCJzZWdtZW50V3JpdGVyIiwiZm9yRWFjaEZlYXR1cmVBZGRfIiwiZm9yRWFjaEZlYXR1cmVSZW1vdmVfIiwiZ2V0RmVhdHVyZXNfIiwic25hcFRvIiwic25hcHBlZCIsInVwZGF0ZUZlYXR1cmVfIiwiZmVhdHVyZXNUb1VwZGF0ZSIsIm9wdF91bmxpc3RlbiIsInVucmVnaXN0ZXIiLCJsb3dlckxlZnQiLCJ1cHBlclJpZ2h0IiwiaXNDaXJjbGUiLCJUcmFuc2xhdGVFdmVudFR5cGUiLCJUcmFuc2xhdGVFdmVudCIsImludGVyYWN0aW9uX1RyYW5zbGF0ZSIsIlRyYW5zbGF0ZSIsImxhc3RDb29yZGluYXRlXyIsImxhc3RGZWF0dXJlXyIsImhhbmRsZUFjdGl2ZUNoYW5nZWRfIiwiZmVhdHVyZXNBdFBpeGVsXyIsIm5ld0Nvb3JkaW5hdGUiLCJnZW9tIiwidHJhbnNsYXRlIiwiY2xhc3NMaXN0Iiwib2xkTWFwIiwiZGVmYXVsdHMiLCJpbnRlcmFjdGlvbnMiLCJhbHRTaGlmdERyYWdSb3RhdGUiLCJkb3VibGVDbGlja1pvb20iLCJ6b29tRGVsdGEiLCJ6b29tRHVyYXRpb24iLCJkcmFnUGFuIiwib25Gb2N1c09ubHkiLCJwaW5jaFJvdGF0ZSIsInBpbmNoWm9vbSIsImtleWJvYXJkIiwibW91c2VXaGVlbFpvb20iLCJzaGlmdERyYWdab29tIl0sIm1hcHBpbmdzIjoiZ0dBY08sU0FBQUEsRUFBQUMsRUFBQUMsRUFBQUMsR0FPUCxJQU5BLElBQUFD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QkFBQXEyQyxLQUFBdjJDLEVBQUFDLEVBQUFDLEVBQUEsOEJBQUFtNEMiLCJmaWxlIjoib2wvaW50ZXJhY3Rpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBtb2R1bGUgb2wvYXJyYXlcbiAqL1xuXG5cbi8qKlxuICogUGVyZm9ybXMgYSBiaW5hcnkgc2VhcmNoIG9uIHRoZSBwcm92aWRlZCBzb3J0ZWQgbGlzdCBhbmQgcmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGl0ZW0gaWYgZm91bmQuIElmIGl0IGNhbid0IGJlIGZvdW5kIGl0J2xsIHJldHVybiAtMS5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9kYXJrc2t5YXBwL2JpbmFyeS1zZWFyY2hcbiAqXG4gKiBAcGFyYW0ge0FycmF5PCo+fSBoYXlzdGFjayBJdGVtcyB0byBzZWFyY2ggdGhyb3VnaC5cbiAqIEBwYXJhbSB7Kn0gbmVlZGxlIFRoZSBpdGVtIHRvIGxvb2sgZm9yLlxuICogQHBhcmFtIHtGdW5jdGlvbj19IG9wdF9jb21wYXJhdG9yIENvbXBhcmF0b3IgZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBpbmRleCBvZiB0aGUgaXRlbSBpZiBmb3VuZCwgLTEgaWYgbm90LlxuICovXG5leHBvcnQgZnVuY3Rpb24gYmluYXJ5U2VhcmNoKGhheXN0YWNrLCBuZWVkbGUsIG9wdF9jb21wYXJhdG9yKSB7XG4gIHZhciBtaWQsIGNtcDtcbiAgdmFyIGNvbXBhcmF0b3IgPSBvcHRfY29tcGFyYXRvciB8fCBudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uO1xuICB2YXIgbG93ID0gMDtcbiAgdmFyIGhpZ2ggPSBoYXlzdGFjay5sZW5ndGg7XG4gIHZhciBmb3VuZCA9IGZhbHNlO1xuXG4gIHdoaWxlIChsb3cgPCBoaWdoKSB7XG4gICAgLyogTm90ZSB0aGF0IFwiKGxvdyArIGhpZ2gpID4+PiAxXCIgbWF5IG92ZXJmbG93LCBhbmQgcmVzdWx0cyBpbiBhIHR5cGVjYXN0XG4gICAgICogdG8gZG91YmxlICh3aGljaCBnaXZlcyB0aGUgd3JvbmcgcmVzdWx0cykuICovXG4gICAgbWlkID0gbG93ICsgKGhpZ2ggLSBsb3cgPj4gMSk7XG4gICAgY21wID0gK2NvbXBhcmF0b3IoaGF5c3RhY2tbbWlkXSwgbmVlZGxlKTtcblxuICAgIGlmIChjbXAgPCAwLjApIHsgLyogVG9vIGxvdy4gKi9cbiAgICAgIGxvdyA9IG1pZCArIDE7XG5cbiAgICB9IGVsc2UgeyAvKiBLZXkgZm91bmQgb3IgdG9vIGhpZ2ggKi9cbiAgICAgIGhpZ2ggPSBtaWQ7XG4gICAgICBmb3VuZCA9ICFjbXA7XG4gICAgfVxuICB9XG5cbiAgLyogS2V5IG5vdCBmb3VuZC4gKi9cbiAgcmV0dXJuIGZvdW5kID8gbG93IDogfmxvdztcbn1cblxuXG4vKipcbiAqIENvbXBhcmUgZnVuY3Rpb24gZm9yIGFycmF5IHNvcnQgdGhhdCBpcyBzYWZlIGZvciBudW1iZXJzLlxuICogQHBhcmFtIHsqfSBhIFRoZSBmaXJzdCBvYmplY3QgdG8gYmUgY29tcGFyZWQuXG4gKiBAcGFyYW0geyp9IGIgVGhlIHNlY29uZCBvYmplY3QgdG8gYmUgY29tcGFyZWQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEEgbmVnYXRpdmUgbnVtYmVyLCB6ZXJvLCBvciBhIHBvc2l0aXZlIG51bWJlciBhcyB0aGUgZmlyc3RcbiAqICAgICBhcmd1bWVudCBpcyBsZXNzIHRoYW4sIGVxdWFsIHRvLCBvciBncmVhdGVyIHRoYW4gdGhlIHNlY29uZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb24oYSwgYikge1xuICByZXR1cm4gYSA+IGIgPyAxIDogYSA8IGIgPyAtMSA6IDA7XG59XG5cblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBhcnJheSBjb250YWlucyB0aGUgZ2l2ZW4gb2JqZWN0LlxuICogQHBhcmFtIHtBcnJheTwqPn0gYXJyIFRoZSBhcnJheSB0byB0ZXN0IGZvciB0aGUgcHJlc2VuY2Ugb2YgdGhlIGVsZW1lbnQuXG4gKiBAcGFyYW0geyp9IG9iaiBUaGUgb2JqZWN0IGZvciB3aGljaCB0byB0ZXN0LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIG9iamVjdCBpcyBpbiB0aGUgYXJyYXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmNsdWRlcyhhcnIsIG9iaikge1xuICByZXR1cm4gYXJyLmluZGV4T2Yob2JqKSA+PSAwO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBhcnIgQXJyYXkuXG4gKiBAcGFyYW0ge251bWJlcn0gdGFyZ2V0IFRhcmdldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkaXJlY3Rpb24gMCBtZWFucyByZXR1cm4gdGhlIG5lYXJlc3QsID4gMFxuICogICAgbWVhbnMgcmV0dXJuIHRoZSBsYXJnZXN0IG5lYXJlc3QsIDwgMCBtZWFucyByZXR1cm4gdGhlXG4gKiAgICBzbWFsbGVzdCBuZWFyZXN0LlxuICogQHJldHVybiB7bnVtYmVyfSBJbmRleC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhckZpbmROZWFyZXN0KGFyciwgdGFyZ2V0LCBkaXJlY3Rpb24pIHtcbiAgdmFyIG4gPSBhcnIubGVuZ3RoO1xuICBpZiAoYXJyWzBdIDw9IHRhcmdldCkge1xuICAgIHJldHVybiAwO1xuICB9IGVsc2UgaWYgKHRhcmdldCA8PSBhcnJbbiAtIDFdKSB7XG4gICAgcmV0dXJuIG4gLSAxO1xuICB9IGVsc2Uge1xuICAgIHZhciBpO1xuICAgIGlmIChkaXJlY3Rpb24gPiAwKSB7XG4gICAgICBmb3IgKGkgPSAxOyBpIDwgbjsgKytpKSB7XG4gICAgICAgIGlmIChhcnJbaV0gPCB0YXJnZXQpIHtcbiAgICAgICAgICByZXR1cm4gaSAtIDE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA8IDApIHtcbiAgICAgIGZvciAoaSA9IDE7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgaWYgKGFycltpXSA8PSB0YXJnZXQpIHtcbiAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGkgPSAxOyBpIDwgbjsgKytpKSB7XG4gICAgICAgIGlmIChhcnJbaV0gPT0gdGFyZ2V0KSB7XG4gICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH0gZWxzZSBpZiAoYXJyW2ldIDwgdGFyZ2V0KSB7XG4gICAgICAgICAgaWYgKGFycltpIC0gMV0gLSB0YXJnZXQgPCB0YXJnZXQgLSBhcnJbaV0pIHtcbiAgICAgICAgICAgIHJldHVybiBpIC0gMTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuIC0gMTtcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTwqPn0gYXJyIEFycmF5LlxuICogQHBhcmFtIHtudW1iZXJ9IGJlZ2luIEJlZ2luIGluZGV4LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQgaW5kZXguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXZlcnNlU3ViQXJyYXkoYXJyLCBiZWdpbiwgZW5kKSB7XG4gIHdoaWxlIChiZWdpbiA8IGVuZCkge1xuICAgIHZhciB0bXAgPSBhcnJbYmVnaW5dO1xuICAgIGFycltiZWdpbl0gPSBhcnJbZW5kXTtcbiAgICBhcnJbZW5kXSA9IHRtcDtcbiAgICArK2JlZ2luO1xuICAgIC0tZW5kO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PFZBTFVFPn0gYXJyIFRoZSBhcnJheSB0byBtb2RpZnkuXG4gKiBAcGFyYW0geyFBcnJheTxWQUxVRT58VkFMVUV9IGRhdGEgVGhlIGVsZW1lbnRzIG9yIGFycmF5cyBvZiBlbGVtZW50cyB0byBhZGQgdG8gYXJyLlxuICogQHRlbXBsYXRlIFZBTFVFXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmQoYXJyLCBkYXRhKSB7XG4gIHZhciBleHRlbnNpb24gPSBBcnJheS5pc0FycmF5KGRhdGEpID8gZGF0YSA6IFtkYXRhXTtcbiAgdmFyIGxlbmd0aCA9IGV4dGVuc2lvbi5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBhcnJbYXJyLmxlbmd0aF0gPSBleHRlbnNpb25baV07XG4gIH1cbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8VkFMVUU+fSBhcnIgVGhlIGFycmF5IHRvIG1vZGlmeS5cbiAqIEBwYXJhbSB7VkFMVUV9IG9iaiBUaGUgZWxlbWVudCB0byByZW1vdmUuXG4gKiBAdGVtcGxhdGUgVkFMVUVcbiAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBlbGVtZW50IHdhcyByZW1vdmVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlKGFyciwgb2JqKSB7XG4gIHZhciBpID0gYXJyLmluZGV4T2Yob2JqKTtcbiAgdmFyIGZvdW5kID0gaSA+IC0xO1xuICBpZiAoZm91bmQpIHtcbiAgICBhcnIuc3BsaWNlKGksIDEpO1xuICB9XG4gIHJldHVybiBmb3VuZDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8VkFMVUU+fSBhcnIgVGhlIGFycmF5IHRvIHNlYXJjaCBpbi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oVkFMVUUsIG51bWJlciwgPykgOiBib29sZWFufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBjb21wYXJlLlxuICogQHRlbXBsYXRlIFZBTFVFXG4gKiBAcmV0dXJuIHtWQUxVRXxudWxsfSBUaGUgZWxlbWVudCBmb3VuZCBvciBudWxsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZChhcnIsIGZ1bmMpIHtcbiAgdmFyIGxlbmd0aCA9IGFyci5sZW5ndGggPj4+IDA7XG4gIHZhciB2YWx1ZTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgdmFsdWUgPSBhcnJbaV07XG4gICAgaWYgKGZ1bmModmFsdWUsIGksIGFycikpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5fFVpbnQ4Q2xhbXBlZEFycmF5fSBhcnIxIFRoZSBmaXJzdCBhcnJheSB0byBjb21wYXJlLlxuICogQHBhcmFtIHtBcnJheXxVaW50OENsYW1wZWRBcnJheX0gYXJyMiBUaGUgc2Vjb25kIGFycmF5IHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSB0d28gYXJyYXlzIGFyZSBlcXVhbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhhcnIxLCBhcnIyKSB7XG4gIHZhciBsZW4xID0gYXJyMS5sZW5ndGg7XG4gIGlmIChsZW4xICE9PSBhcnIyLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjE7IGkrKykge1xuICAgIGlmIChhcnIxW2ldICE9PSBhcnIyW2ldKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5cbi8qKlxuICogU29ydCB0aGUgcGFzc2VkIGFycmF5IHN1Y2ggdGhhdCB0aGUgcmVsYXRpdmUgb3JkZXIgb2YgZXF1YWwgZWxlbWVudHMgaXMgcHJldmVydmVkLlxuICogU2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1NvcnRpbmdfYWxnb3JpdGhtI1N0YWJpbGl0eSBmb3IgZGV0YWlscy5cbiAqIEBwYXJhbSB7QXJyYXk8Kj59IGFyciBUaGUgYXJyYXkgdG8gc29ydCAobW9kaWZpZXMgb3JpZ2luYWwpLlxuICogQHBhcmFtIHshZnVuY3Rpb24oKiwgKik6IG51bWJlcn0gY29tcGFyZUZuYyBDb21wYXJpc29uIGZ1bmN0aW9uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhYmxlU29ydChhcnIsIGNvbXBhcmVGbmMpIHtcbiAgdmFyIGxlbmd0aCA9IGFyci5sZW5ndGg7XG4gIHZhciB0bXAgPSBBcnJheShhcnIubGVuZ3RoKTtcbiAgdmFyIGk7XG4gIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHRtcFtpXSA9IHtpbmRleDogaSwgdmFsdWU6IGFycltpXX07XG4gIH1cbiAgdG1wLnNvcnQoZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBjb21wYXJlRm5jKGEudmFsdWUsIGIudmFsdWUpIHx8IGEuaW5kZXggLSBiLmluZGV4O1xuICB9KTtcbiAgZm9yIChpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgIGFycltpXSA9IHRtcFtpXS52YWx1ZTtcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTwqPn0gYXJyIFRoZSBhcnJheSB0byBzZWFyY2ggaW4uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIENvbXBhcmlzb24gZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFJldHVybiBpbmRleC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRJbmRleChhcnIsIGZ1bmMpIHtcbiAgdmFyIGluZGV4O1xuICB2YXIgZm91bmQgPSAhYXJyLmV2ZXJ5KGZ1bmN0aW9uKGVsLCBpZHgpIHtcbiAgICBpbmRleCA9IGlkeDtcbiAgICByZXR1cm4gIWZ1bmMoZWwsIGlkeCwgYXJyKTtcbiAgfSk7XG4gIHJldHVybiBmb3VuZCA/IGluZGV4IDogLTE7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PCo+fSBhcnIgVGhlIGFycmF5IHRvIHRlc3QuXG4gKiBAcGFyYW0ge0Z1bmN0aW9uPX0gb3B0X2Z1bmMgQ29tcGFyaXNvbiBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9zdHJpY3QgU3RyaWN0bHkgc29ydGVkIChkZWZhdWx0IGZhbHNlKS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFJldHVybiBpbmRleC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU29ydGVkKGFyciwgb3B0X2Z1bmMsIG9wdF9zdHJpY3QpIHtcbiAgdmFyIGNvbXBhcmUgPSBvcHRfZnVuYyB8fCBudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uO1xuICByZXR1cm4gYXJyLmV2ZXJ5KGZ1bmN0aW9uKGN1cnJlbnRWYWwsIGluZGV4KSB7XG4gICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdmFyIHJlcyA9IGNvbXBhcmUoYXJyW2luZGV4IC0gMV0sIGN1cnJlbnRWYWwpO1xuICAgIHJldHVybiAhKHJlcyA+IDAgfHwgb3B0X3N0cmljdCAmJiByZXMgPT09IDApO1xuICB9KTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJyYXkuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL1ZpZXdIaW50XG4gKi9cblxuLyoqXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIEFOSU1BVElORzogMCxcbiAgSU5URVJBQ1RJTkc6IDFcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZpZXdIaW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvU3RhdGVcbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKiBTdGF0ZSBvZiB0aGUgc291cmNlLCBvbmUgb2YgJ3VuZGVmaW5lZCcsICdsb2FkaW5nJywgJ3JlYWR5JyBvciAnZXJyb3InLlxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIFVOREVGSU5FRDogJ3VuZGVmaW5lZCcsXG4gIExPQURJTkc6ICdsb2FkaW5nJyxcbiAgUkVBRFk6ICdyZWFkeScsXG4gIEVSUk9SOiAnZXJyb3InXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdGF0ZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvY29vcmRpbmF0ZVxuICovXG5pbXBvcnQge21vZHVsb30gZnJvbSAnLi9tYXRoLmpzJztcbmltcG9ydCB7cGFkTnVtYmVyfSBmcm9tICcuL3N0cmluZy5qcyc7XG5cblxuLyoqXG4gKiBBbiBhcnJheSBvZiBudW1iZXJzIHJlcHJlc2VudGluZyBhbiB4eSBjb29yZGluYXRlLiBFeGFtcGxlOiBgWzE2LCA0OF1gLlxuICogQHR5cGVkZWYge0FycmF5PG51bWJlcj59IENvb3JkaW5hdGVcbiAqIEBhcGlcbiAqL1xuXG5cbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IHRha2VzIGEge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGV9IGFuZFxuICogdHJhbnNmb3JtcyBpdCBpbnRvIGEgYHtzdHJpbmd9YC5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKENvb3JkaW5hdGV8dW5kZWZpbmVkKSk6IHN0cmluZ30gQ29vcmRpbmF0ZUZvcm1hdFxuICogQGFwaVxuICovXG5cblxuLyoqXG4gKiBBZGQgYGRlbHRhYCB0byBgY29vcmRpbmF0ZWAuIGBjb29yZGluYXRlYCBpcyBtb2RpZmllZCBpbiBwbGFjZSBhbmQgcmV0dXJuZWRcbiAqIGJ5IHRoZSBmdW5jdGlvbi5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgICBpbXBvcnQge2FkZH0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIGFkZChjb29yZCwgWy0yLCA0XSk7XG4gKiAgICAgLy8gY29vcmQgaXMgbm93IFs1Ljg1LCA1MS45ODMzMzNdXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGRlbHRhIERlbHRhLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gVGhlIGlucHV0IGNvb3JkaW5hdGUgYWRqdXN0ZWQgYnlcbiAqIHRoZSBnaXZlbiBkZWx0YS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZChjb29yZGluYXRlLCBkZWx0YSkge1xuICBjb29yZGluYXRlWzBdICs9IGRlbHRhWzBdO1xuICBjb29yZGluYXRlWzFdICs9IGRlbHRhWzFdO1xuICByZXR1cm4gY29vcmRpbmF0ZTtcbn1cblxuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHBvaW50IGNsb3Nlc3QgdG8gdGhlIHBhc3NlZCBjb29yZGluYXRlIG9uIHRoZSBwYXNzZWQgY2lyY2xlLlxuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBUaGUgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9nZW9tL0NpcmNsZS5qc1wiKS5kZWZhdWx0fSBjaXJjbGUgVGhlIGNpcmNsZS5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGV9IENsb3Nlc3QgcG9pbnQgb24gdGhlIGNpcmN1bWZlcmVuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9zZXN0T25DaXJjbGUoY29vcmRpbmF0ZSwgY2lyY2xlKSB7XG4gIHZhciByID0gY2lyY2xlLmdldFJhZGl1cygpO1xuICB2YXIgY2VudGVyID0gY2lyY2xlLmdldENlbnRlcigpO1xuICB2YXIgeDAgPSBjZW50ZXJbMF07XG4gIHZhciB5MCA9IGNlbnRlclsxXTtcbiAgdmFyIHgxID0gY29vcmRpbmF0ZVswXTtcbiAgdmFyIHkxID0gY29vcmRpbmF0ZVsxXTtcblxuICB2YXIgZHggPSB4MSAtIHgwO1xuICB2YXIgZHkgPSB5MSAtIHkwO1xuICBpZiAoZHggPT09IDAgJiYgZHkgPT09IDApIHtcbiAgICBkeCA9IDE7XG4gIH1cbiAgdmFyIGQgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuXG4gIHZhciB4ID0geDAgKyByICogZHggLyBkO1xuICB2YXIgeSA9IHkwICsgciAqIGR5IC8gZDtcblxuICByZXR1cm4gW3gsIHldO1xufVxuXG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgcG9pbnQgY2xvc2VzdCB0byB0aGUgcGFzc2VkIGNvb3JkaW5hdGUgb24gdGhlIHBhc3NlZCBzZWdtZW50LlxuICogVGhpcyBpcyB0aGUgZm9vdCBvZiB0aGUgcGVycGVuZGljdWxhciBvZiB0aGUgY29vcmRpbmF0ZSB0byB0aGUgc2VnbWVudCB3aGVuXG4gKiB0aGUgZm9vdCBpcyBvbiB0aGUgc2VnbWVudCwgb3IgdGhlIGNsb3Nlc3Qgc2VnbWVudCBjb29yZGluYXRlIHdoZW4gdGhlIGZvb3RcbiAqIGlzIG91dHNpZGUgdGhlIHNlZ21lbnQuXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIFRoZSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtBcnJheTxDb29yZGluYXRlPn0gc2VnbWVudCBUaGUgdHdvIGNvb3JkaW5hdGVzXG4gKiBvZiB0aGUgc2VnbWVudC5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGV9IFRoZSBmb290IG9mIHRoZSBwZXJwZW5kaWN1bGFyIG9mXG4gKiB0aGUgY29vcmRpbmF0ZSB0byB0aGUgc2VnbWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3RPblNlZ21lbnQoY29vcmRpbmF0ZSwgc2VnbWVudCkge1xuICB2YXIgeDAgPSBjb29yZGluYXRlWzBdO1xuICB2YXIgeTAgPSBjb29yZGluYXRlWzFdO1xuICB2YXIgc3RhcnQgPSBzZWdtZW50WzBdO1xuICB2YXIgZW5kID0gc2VnbWVudFsxXTtcbiAgdmFyIHgxID0gc3RhcnRbMF07XG4gIHZhciB5MSA9IHN0YXJ0WzFdO1xuICB2YXIgeDIgPSBlbmRbMF07XG4gIHZhciB5MiA9IGVuZFsxXTtcbiAgdmFyIGR4ID0geDIgLSB4MTtcbiAgdmFyIGR5ID0geTIgLSB5MTtcbiAgdmFyIGFsb25nID0gKGR4ID09PSAwICYmIGR5ID09PSAwKSA/IDAgOlxuICAgICgoZHggKiAoeDAgLSB4MSkpICsgKGR5ICogKHkwIC0geTEpKSkgLyAoKGR4ICogZHggKyBkeSAqIGR5KSB8fCAwKTtcbiAgdmFyIHgsIHk7XG4gIGlmIChhbG9uZyA8PSAwKSB7XG4gICAgeCA9IHgxO1xuICAgIHkgPSB5MTtcbiAgfSBlbHNlIGlmIChhbG9uZyA+PSAxKSB7XG4gICAgeCA9IHgyO1xuICAgIHkgPSB5MjtcbiAgfSBlbHNlIHtcbiAgICB4ID0geDEgKyBhbG9uZyAqIGR4O1xuICAgIHkgPSB5MSArIGFsb25nICogZHk7XG4gIH1cbiAgcmV0dXJuIFt4LCB5XTtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZUZvcm1hdH0gZnVuY3Rpb24gdGhhdCBjYW4gYmVcbiAqIHVzZWQgdG8gZm9ybWF0XG4gKiBhIHtDb29yZGluYXRlfSB0byBhIHN0cmluZy5cbiAqXG4gKiBFeGFtcGxlIHdpdGhvdXQgc3BlY2lmeWluZyB0aGUgZnJhY3Rpb25hbCBkaWdpdHM6XG4gKlxuICogICAgIGltcG9ydCB7Y3JlYXRlU3RyaW5nWFl9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgc3RyaW5naWZ5RnVuYyA9IGNyZWF0ZVN0cmluZ1hZKCk7XG4gKiAgICAgdmFyIG91dCA9IHN0cmluZ2lmeUZ1bmMoY29vcmQpO1xuICogICAgIC8vIG91dCBpcyBub3cgJzgsIDQ4J1xuICpcbiAqIEV4YW1wbGUgd2l0aCBleHBsaWNpdGx5IHNwZWNpZnlpbmcgMiBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHtjcmVhdGVTdHJpbmdYWX0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciBzdHJpbmdpZnlGdW5jID0gY3JlYXRlU3RyaW5nWFkoMik7XG4gKiAgICAgdmFyIG91dCA9IHN0cmluZ2lmeUZ1bmMoY29vcmQpO1xuICogICAgIC8vIG91dCBpcyBub3cgJzcuODUsIDQ3Ljk4J1xuICpcbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2ZyYWN0aW9uRGlnaXRzIFRoZSBudW1iZXIgb2YgZGlnaXRzIHRvIGluY2x1ZGVcbiAqICAgIGFmdGVyIHRoZSBkZWNpbWFsIHBvaW50LiBEZWZhdWx0IGlzIGAwYC5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGVGb3JtYXR9IENvb3JkaW5hdGUgZm9ybWF0LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3RyaW5nWFkob3B0X2ZyYWN0aW9uRGlnaXRzKSB7XG4gIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBTdHJpbmcgWFkuXG4gICAgICovXG4gICAgZnVuY3Rpb24oY29vcmRpbmF0ZSkge1xuICAgICAgcmV0dXJuIHRvU3RyaW5nWFkoY29vcmRpbmF0ZSwgb3B0X2ZyYWN0aW9uRGlnaXRzKTtcbiAgICB9XG4gICk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gaGVtaXNwaGVyZXMgSGVtaXNwaGVyZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gZGVncmVlcyBEZWdyZWVzLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZnJhY3Rpb25EaWdpdHMgVGhlIG51bWJlciBvZiBkaWdpdHMgdG8gaW5jbHVkZVxuICogICAgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuIERlZmF1bHQgaXMgYDBgLlxuICogQHJldHVybiB7c3RyaW5nfSBTdHJpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWdyZWVzVG9TdHJpbmdIRE1TKGhlbWlzcGhlcmVzLCBkZWdyZWVzLCBvcHRfZnJhY3Rpb25EaWdpdHMpIHtcbiAgdmFyIG5vcm1hbGl6ZWREZWdyZWVzID0gbW9kdWxvKGRlZ3JlZXMgKyAxODAsIDM2MCkgLSAxODA7XG4gIHZhciB4ID0gTWF0aC5hYnMoMzYwMCAqIG5vcm1hbGl6ZWREZWdyZWVzKTtcbiAgdmFyIGRmbFByZWNpc2lvbiA9IG9wdF9mcmFjdGlvbkRpZ2l0cyB8fCAwO1xuICB2YXIgcHJlY2lzaW9uID0gTWF0aC5wb3coMTAsIGRmbFByZWNpc2lvbik7XG5cbiAgdmFyIGRlZyA9IE1hdGguZmxvb3IoeCAvIDM2MDApO1xuICB2YXIgbWluID0gTWF0aC5mbG9vcigoeCAtIGRlZyAqIDM2MDApIC8gNjApO1xuICB2YXIgc2VjID0geCAtIChkZWcgKiAzNjAwKSAtIChtaW4gKiA2MCk7XG4gIHNlYyA9IE1hdGguY2VpbChzZWMgKiBwcmVjaXNpb24pIC8gcHJlY2lzaW9uO1xuXG4gIGlmIChzZWMgPj0gNjApIHtcbiAgICBzZWMgPSAwO1xuICAgIG1pbiArPSAxO1xuICB9XG5cbiAgaWYgKG1pbiA+PSA2MCkge1xuICAgIG1pbiA9IDA7XG4gICAgZGVnICs9IDE7XG4gIH1cblxuICByZXR1cm4gZGVnICsgJ1xcdTAwYjAgJyArIHBhZE51bWJlcihtaW4sIDIpICsgJ1xcdTIwMzIgJyArXG4gICAgcGFkTnVtYmVyKHNlYywgMiwgZGZsUHJlY2lzaW9uKSArICdcXHUyMDMzJyArXG4gICAgKG5vcm1hbGl6ZWREZWdyZWVzID09IDAgPyAnJyA6ICcgJyArIGhlbWlzcGhlcmVzLmNoYXJBdChub3JtYWxpemVkRGVncmVlcyA8IDAgPyAxIDogMCkpO1xufVxuXG5cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgZ2l2ZW4ge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGV9IHRvIGEgc3RyaW5nXG4gKiB1c2luZyB0aGUgZ2l2ZW4gc3RyaW5nIHRlbXBsYXRlLiBUaGUgc3RyaW5ncyBge3h9YCBhbmQgYHt5fWAgaW4gdGhlIHRlbXBsYXRlXG4gKiB3aWxsIGJlIHJlcGxhY2VkIHdpdGggdGhlIGZpcnN0IGFuZCBzZWNvbmQgY29vcmRpbmF0ZSB2YWx1ZXMgcmVzcGVjdGl2ZWx5LlxuICpcbiAqIEV4YW1wbGUgd2l0aG91dCBzcGVjaWZ5aW5nIHRoZSBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHtmb3JtYXR9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgdGVtcGxhdGUgPSAnQ29vcmRpbmF0ZSBpcyAoe3h9fHt5fSkuJztcbiAqICAgICB2YXIgb3V0ID0gZm9ybWF0KGNvb3JkLCB0ZW1wbGF0ZSk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnQ29vcmRpbmF0ZSBpcyAoOHw0OCkuJ1xuICpcbiAqIEV4YW1wbGUgZXhwbGljaXRseSBzcGVjaWZ5aW5nIHRoZSBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHtmb3JtYXR9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgdGVtcGxhdGUgPSAnQ29vcmRpbmF0ZSBpcyAoe3h9fHt5fSkuJztcbiAqICAgICB2YXIgb3V0ID0gZm9ybWF0KGNvb3JkLCB0ZW1wbGF0ZSwgMik7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnQ29vcmRpbmF0ZSBpcyAoNy44NXw0Ny45OCkuJ1xuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtzdHJpbmd9IHRlbXBsYXRlIEEgdGVtcGxhdGUgc3RyaW5nIHdpdGggYHt4fWAgYW5kIGB7eX1gIHBsYWNlaG9sZGVyc1xuICogICAgIHRoYXQgd2lsbCBiZSByZXBsYWNlZCBieSBmaXJzdCBhbmQgc2Vjb25kIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZnJhY3Rpb25EaWdpdHMgVGhlIG51bWJlciBvZiBkaWdpdHMgdG8gaW5jbHVkZVxuICogICAgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuIERlZmF1bHQgaXMgYDBgLlxuICogQHJldHVybiB7c3RyaW5nfSBGb3JtYXR0ZWQgY29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdChjb29yZGluYXRlLCB0ZW1wbGF0ZSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSB7XG4gIGlmIChjb29yZGluYXRlKSB7XG4gICAgcmV0dXJuIHRlbXBsYXRlXG4gICAgICAucmVwbGFjZSgne3h9JywgY29vcmRpbmF0ZVswXS50b0ZpeGVkKG9wdF9mcmFjdGlvbkRpZ2l0cykpXG4gICAgICAucmVwbGFjZSgne3l9JywgY29vcmRpbmF0ZVsxXS50b0ZpeGVkKG9wdF9mcmFjdGlvbkRpZ2l0cykpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAnJztcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlMSBGaXJzdCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlMiBTZWNvbmQgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0d28gY29vcmRpbmF0ZXMgYXJlIGVxdWFsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGNvb3JkaW5hdGUxLCBjb29yZGluYXRlMikge1xuICB2YXIgZXF1YWxzID0gdHJ1ZTtcbiAgZm9yICh2YXIgaSA9IGNvb3JkaW5hdGUxLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgaWYgKGNvb3JkaW5hdGUxW2ldICE9IGNvb3JkaW5hdGUyW2ldKSB7XG4gICAgICBlcXVhbHMgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZXF1YWxzO1xufVxuXG5cbi8qKlxuICogUm90YXRlIGBjb29yZGluYXRlYCBieSBgYW5nbGVgLiBgY29vcmRpbmF0ZWAgaXMgbW9kaWZpZWQgaW4gcGxhY2UgYW5kXG4gKiByZXR1cm5lZCBieSB0aGUgZnVuY3Rpb24uXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgaW1wb3J0IHtyb3RhdGV9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgcm90YXRlUmFkaWFucyA9IE1hdGguUEkgLyAyOyAvLyA5MCBkZWdyZWVzXG4gKiAgICAgcm90YXRlKGNvb3JkLCByb3RhdGVSYWRpYW5zKTtcbiAqICAgICAvLyBjb29yZCBpcyBub3cgWy00Ny45ODMzMzMsIDcuODVdXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgQW5nbGUgaW4gcmFkaWFuLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZShjb29yZGluYXRlLCBhbmdsZSkge1xuICB2YXIgY29zQW5nbGUgPSBNYXRoLmNvcyhhbmdsZSk7XG4gIHZhciBzaW5BbmdsZSA9IE1hdGguc2luKGFuZ2xlKTtcbiAgdmFyIHggPSBjb29yZGluYXRlWzBdICogY29zQW5nbGUgLSBjb29yZGluYXRlWzFdICogc2luQW5nbGU7XG4gIHZhciB5ID0gY29vcmRpbmF0ZVsxXSAqIGNvc0FuZ2xlICsgY29vcmRpbmF0ZVswXSAqIHNpbkFuZ2xlO1xuICBjb29yZGluYXRlWzBdID0geDtcbiAgY29vcmRpbmF0ZVsxXSA9IHk7XG4gIHJldHVybiBjb29yZGluYXRlO1xufVxuXG5cbi8qKlxuICogU2NhbGUgYGNvb3JkaW5hdGVgIGJ5IGBzY2FsZWAuIGBjb29yZGluYXRlYCBpcyBtb2RpZmllZCBpbiBwbGFjZSBhbmQgcmV0dXJuZWRcbiAqIGJ5IHRoZSBmdW5jdGlvbi5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgICBpbXBvcnQge3NjYWxlIGFzIHNjYWxlQ29vcmRpbmF0ZX0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciBzY2FsZSA9IDEuMjtcbiAqICAgICBzY2FsZUNvb3JkaW5hdGUoY29vcmQsIHNjYWxlKTtcbiAqICAgICAvLyBjb29yZCBpcyBub3cgWzkuNDIsIDU3LjU3OTk5OTZdXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc2NhbGUgU2NhbGUgZmFjdG9yLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKGNvb3JkaW5hdGUsIHNjYWxlKSB7XG4gIGNvb3JkaW5hdGVbMF0gKj0gc2NhbGU7XG4gIGNvb3JkaW5hdGVbMV0gKj0gc2NhbGU7XG4gIHJldHVybiBjb29yZGluYXRlO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZDEgRmlyc3QgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmQyIFNlY29uZCBjb29yZGluYXRlLlxuICogQHJldHVybiB7bnVtYmVyfSBTcXVhcmVkIGRpc3RhbmNlIGJldHdlZW4gY29vcmQxIGFuZCBjb29yZDIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzcXVhcmVkRGlzdGFuY2UoY29vcmQxLCBjb29yZDIpIHtcbiAgdmFyIGR4ID0gY29vcmQxWzBdIC0gY29vcmQyWzBdO1xuICB2YXIgZHkgPSBjb29yZDFbMV0gLSBjb29yZDJbMV07XG4gIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmQxIEZpcnN0IGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkMiBTZWNvbmQgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge251bWJlcn0gRGlzdGFuY2UgYmV0d2VlbiBjb29yZDEgYW5kIGNvb3JkMi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc3RhbmNlKGNvb3JkMSwgY29vcmQyKSB7XG4gIHJldHVybiBNYXRoLnNxcnQoc3F1YXJlZERpc3RhbmNlKGNvb3JkMSwgY29vcmQyKSk7XG59XG5cblxuLyoqXG4gKiBDYWxjdWxhdGUgdGhlIHNxdWFyZWQgZGlzdGFuY2UgZnJvbSBhIGNvb3JkaW5hdGUgdG8gYSBsaW5lIHNlZ21lbnQuXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUgb2YgdGhlIHBvaW50LlxuICogQHBhcmFtIHtBcnJheTxDb29yZGluYXRlPn0gc2VnbWVudCBMaW5lIHNlZ21lbnQgKDJcbiAqIGNvb3JkaW5hdGVzKS5cbiAqIEByZXR1cm4ge251bWJlcn0gU3F1YXJlZCBkaXN0YW5jZSBmcm9tIHRoZSBwb2ludCB0byB0aGUgbGluZSBzZWdtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZERpc3RhbmNlVG9TZWdtZW50KGNvb3JkaW5hdGUsIHNlZ21lbnQpIHtcbiAgcmV0dXJuIHNxdWFyZWREaXN0YW5jZShjb29yZGluYXRlLFxuICAgIGNsb3Nlc3RPblNlZ21lbnQoY29vcmRpbmF0ZSwgc2VnbWVudCkpO1xufVxuXG5cbi8qKlxuICogRm9ybWF0IGEgZ2VvZ3JhcGhpYyBjb29yZGluYXRlIHdpdGggdGhlIGhlbWlzcGhlcmUsIGRlZ3JlZXMsIG1pbnV0ZXMsIGFuZFxuICogc2Vjb25kcy5cbiAqXG4gKiBFeGFtcGxlIHdpdGhvdXQgc3BlY2lmeWluZyBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHt0b1N0cmluZ0hETVN9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgb3V0ID0gdG9TdHJpbmdIRE1TKGNvb3JkKTtcbiAqICAgICAvLyBvdXQgaXMgbm93ICc0N8KwIDU44oCyIDYw4oCzIE4gN8KwIDUw4oCyIDYw4oCzIEUnXG4gKlxuICogRXhhbXBsZSBleHBsaWNpdGx5IHNwZWNpZnlpbmcgMSBmcmFjdGlvbmFsIGRpZ2l0OlxuICpcbiAqICAgICBpbXBvcnQge3RvU3RyaW5nSERNU30gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciBvdXQgPSB0b1N0cmluZ0hETVMoY29vcmQsIDEpO1xuICogICAgIC8vIG91dCBpcyBub3cgJzQ3wrAgNTjigLIgNjAuMOKAsyBOIDfCsCA1MOKAsiA2MC4w4oCzIEUnXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9mcmFjdGlvbkRpZ2l0cyBUaGUgbnVtYmVyIG9mIGRpZ2l0cyB0byBpbmNsdWRlXG4gKiAgICBhZnRlciB0aGUgZGVjaW1hbCBwb2ludC4gRGVmYXVsdCBpcyBgMGAuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEhlbWlzcGhlcmUsIGRlZ3JlZXMsIG1pbnV0ZXMgYW5kIHNlY29uZHMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1N0cmluZ0hETVMoY29vcmRpbmF0ZSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSB7XG4gIGlmIChjb29yZGluYXRlKSB7XG4gICAgcmV0dXJuIGRlZ3JlZXNUb1N0cmluZ0hETVMoJ05TJywgY29vcmRpbmF0ZVsxXSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSArICcgJyArXG4gICAgICAgIGRlZ3JlZXNUb1N0cmluZ0hETVMoJ0VXJywgY29vcmRpbmF0ZVswXSwgb3B0X2ZyYWN0aW9uRGlnaXRzKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbn1cblxuXG4vKipcbiAqIEZvcm1hdCBhIGNvb3JkaW5hdGUgYXMgYSBjb21tYSBkZWxpbWl0ZWQgc3RyaW5nLlxuICpcbiAqIEV4YW1wbGUgd2l0aG91dCBzcGVjaWZ5aW5nIGZyYWN0aW9uYWwgZGlnaXRzOlxuICpcbiAqICAgICBpbXBvcnQge3RvU3RyaW5nWFl9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgb3V0ID0gdG9TdHJpbmdYWShjb29yZCk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnOCwgNDgnXG4gKlxuICogRXhhbXBsZSBleHBsaWNpdGx5IHNwZWNpZnlpbmcgMSBmcmFjdGlvbmFsIGRpZ2l0OlxuICpcbiAqICAgICBpbXBvcnQge3RvU3RyaW5nWFl9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgb3V0ID0gdG9TdHJpbmdYWShjb29yZCwgMSk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnNy44LCA0OC4wJ1xuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZnJhY3Rpb25EaWdpdHMgVGhlIG51bWJlciBvZiBkaWdpdHMgdG8gaW5jbHVkZVxuICogICAgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuIERlZmF1bHQgaXMgYDBgLlxuICogQHJldHVybiB7c3RyaW5nfSBYWS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3RyaW5nWFkoY29vcmRpbmF0ZSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSB7XG4gIHJldHVybiBmb3JtYXQoY29vcmRpbmF0ZSwgJ3t4fSwge3l9Jywgb3B0X2ZyYWN0aW9uRGlnaXRzKTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29vcmRpbmF0ZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvQ29sbGVjdGlvbkV2ZW50VHlwZVxuICovXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAvKipcbiAgICogVHJpZ2dlcmVkIHdoZW4gYW4gaXRlbSBpcyBhZGRlZCB0byB0aGUgY29sbGVjdGlvbi5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9Db2xsZWN0aW9uLkNvbGxlY3Rpb25FdmVudCNhZGRcbiAgICogQGFwaVxuICAgKi9cbiAgQUREOiAnYWRkJyxcbiAgLyoqXG4gICAqIFRyaWdnZXJlZCB3aGVuIGFuIGl0ZW0gaXMgcmVtb3ZlZCBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL0NvbGxlY3Rpb24uQ29sbGVjdGlvbkV2ZW50I3JlbW92ZVxuICAgKiBAYXBpXG4gICAqL1xuICBSRU1PVkU6ICdyZW1vdmUnXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db2xsZWN0aW9uRXZlbnRUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvaW5mbGF0ZVxuICovXG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+PX0gb3B0X2Nvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gQ29vcmRpbmF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmZsYXRlQ29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBvcHRfY29vcmRpbmF0ZXMpIHtcbiAgdmFyIGNvb3JkaW5hdGVzID0gb3B0X2Nvb3JkaW5hdGVzICE9PSB1bmRlZmluZWQgPyBvcHRfY29vcmRpbmF0ZXMgOiBbXTtcbiAgdmFyIGkgPSAwO1xuICBmb3IgKHZhciBqID0gb2Zmc2V0OyBqIDwgZW5kOyBqICs9IHN0cmlkZSkge1xuICAgIGNvb3JkaW5hdGVzW2krK10gPSBmbGF0Q29vcmRpbmF0ZXMuc2xpY2UoaiwgaiArIHN0cmlkZSk7XG4gIH1cbiAgY29vcmRpbmF0ZXMubGVuZ3RoID0gaTtcbiAgcmV0dXJuIGNvb3JkaW5hdGVzO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj49fSBvcHRfY29vcmRpbmF0ZXNzIENvb3JkaW5hdGVzcy5cbiAqIEByZXR1cm4ge0FycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSBDb29yZGluYXRlc3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBvcHRfY29vcmRpbmF0ZXNzKSB7XG4gIHZhciBjb29yZGluYXRlc3MgPSBvcHRfY29vcmRpbmF0ZXNzICE9PSB1bmRlZmluZWQgPyBvcHRfY29vcmRpbmF0ZXNzIDogW107XG4gIHZhciBpID0gMDtcbiAgZm9yICh2YXIgaiA9IDAsIGpqID0gZW5kcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgdmFyIGVuZCA9IGVuZHNbal07XG4gICAgY29vcmRpbmF0ZXNzW2krK10gPSBpbmZsYXRlQ29vcmRpbmF0ZXMoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGNvb3JkaW5hdGVzc1tpXSk7XG4gICAgb2Zmc2V0ID0gZW5kO1xuICB9XG4gIGNvb3JkaW5hdGVzcy5sZW5ndGggPSBpO1xuICByZXR1cm4gY29vcmRpbmF0ZXNzO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj4+PX0gb3B0X2Nvb3JkaW5hdGVzc3NcbiAqICAgICBDb29yZGluYXRlc3NzLlxuICogQHJldHVybiB7QXJyYXk8QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj4+fSBDb29yZGluYXRlc3NzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5mbGF0ZU11bHRpQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgb3B0X2Nvb3JkaW5hdGVzc3MpIHtcbiAgdmFyIGNvb3JkaW5hdGVzc3MgPSBvcHRfY29vcmRpbmF0ZXNzcyAhPT0gdW5kZWZpbmVkID8gb3B0X2Nvb3JkaW5hdGVzc3MgOiBbXTtcbiAgdmFyIGkgPSAwO1xuICBmb3IgKHZhciBqID0gMCwgamogPSBlbmRzcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgdmFyIGVuZHMgPSBlbmRzc1tqXTtcbiAgICBjb29yZGluYXRlc3NzW2krK10gPSBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheShcbiAgICAgIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIGNvb3JkaW5hdGVzc3NbaV0pO1xuICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgfVxuICBjb29yZGluYXRlc3NzLmxlbmd0aCA9IGk7XG4gIHJldHVybiBjb29yZGluYXRlc3NzO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmZsYXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9lYXNpbmdcbiAqL1xuXG5cbi8qKlxuICogU3RhcnQgc2xvdyBhbmQgc3BlZWQgdXAuXG4gKiBAcGFyYW0ge251bWJlcn0gdCBJbnB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE91dHB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlYXNlSW4odCkge1xuICByZXR1cm4gTWF0aC5wb3codCwgMyk7XG59XG5cblxuLyoqXG4gKiBTdGFydCBmYXN0IGFuZCBzbG93IGRvd24uXG4gKiBAcGFyYW0ge251bWJlcn0gdCBJbnB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE91dHB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlYXNlT3V0KHQpIHtcbiAgcmV0dXJuIDEgLSBlYXNlSW4oMSAtIHQpO1xufVxuXG5cbi8qKlxuICogU3RhcnQgc2xvdywgc3BlZWQgdXAsIGFuZCB0aGVuIHNsb3cgZG93biBhZ2Fpbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0IElucHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEByZXR1cm4ge251bWJlcn0gT3V0cHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluQW5kT3V0KHQpIHtcbiAgcmV0dXJuIDMgKiB0ICogdCAtIDIgKiB0ICogdCAqIHQ7XG59XG5cblxuLyoqXG4gKiBNYWludGFpbiBhIGNvbnN0YW50IHNwZWVkIG92ZXIgdGltZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0IElucHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEByZXR1cm4ge251bWJlcn0gT3V0cHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhcih0KSB7XG4gIHJldHVybiB0O1xufVxuXG5cbi8qKlxuICogU3RhcnQgc2xvdywgc3BlZWQgdXAsIGFuZCBhdCB0aGUgdmVyeSBlbmQgc2xvdyBkb3duIGFnYWluLiAgVGhpcyBoYXMgdGhlXG4gKiBzYW1lIGdlbmVyYWwgYmVoYXZpb3IgYXMge0BsaW5rIG1vZHVsZTpvbC9lYXNpbmd+aW5BbmRPdXR9LCBidXQgdGhlIGZpbmFsXG4gKiBzbG93ZG93biBpcyBkZWxheWVkLlxuICogQHBhcmFtIHtudW1iZXJ9IHQgSW5wdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQHJldHVybiB7bnVtYmVyfSBPdXRwdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gdXBBbmREb3duKHQpIHtcbiAgaWYgKHQgPCAwLjUpIHtcbiAgICByZXR1cm4gaW5BbmRPdXQoMiAqIHQpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAxIC0gaW5BbmRPdXQoMiAqICh0IC0gMC41KSk7XG4gIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZWFzaW5nLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9Db2xsZWN0aW9uXG4gKi9cbmltcG9ydCBBc3NlcnRpb25FcnJvciBmcm9tICcuL0Fzc2VydGlvbkVycm9yLmpzJztcbmltcG9ydCBDb2xsZWN0aW9uRXZlbnRUeXBlIGZyb20gJy4vQ29sbGVjdGlvbkV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuL09iamVjdC5qcyc7XG5pbXBvcnQgRXZlbnQgZnJvbSAnLi9ldmVudHMvRXZlbnQuanMnO1xuXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBQcm9wZXJ0eSA9IHtcbiAgTEVOR1RIOiAnbGVuZ3RoJ1xufTtcblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGJ5IHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9ufSBpbnN0YW5jZXMgYXJlIGluc3RhbmNlcyBvZiB0aGlzXG4gKiB0eXBlLlxuICovXG5leHBvcnQgdmFyIENvbGxlY3Rpb25FdmVudCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEV2ZW50KSB7XG4gIGZ1bmN0aW9uIENvbGxlY3Rpb25FdmVudCh0eXBlLCBvcHRfZWxlbWVudCkge1xuICAgIEV2ZW50LmNhbGwodGhpcywgdHlwZSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZWxlbWVudCB0aGF0IGlzIGFkZGVkIHRvIG9yIHJlbW92ZWQgZnJvbSB0aGUgY29sbGVjdGlvbi5cbiAgICAgKiBAdHlwZSB7Kn1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5lbGVtZW50ID0gb3B0X2VsZW1lbnQ7XG5cbiAgfVxuXG4gIGlmICggRXZlbnQgKSBDb2xsZWN0aW9uRXZlbnQuX19wcm90b19fID0gRXZlbnQ7XG4gIENvbGxlY3Rpb25FdmVudC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBFdmVudCAmJiBFdmVudC5wcm90b3R5cGUgKTtcbiAgQ29sbGVjdGlvbkV2ZW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENvbGxlY3Rpb25FdmVudDtcblxuICByZXR1cm4gQ29sbGVjdGlvbkV2ZW50O1xufShFdmVudCkpO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtib29sZWFufSBbdW5pcXVlPWZhbHNlXSBEaXNhbGxvdyB0aGUgc2FtZSBpdGVtIGZyb20gYmVpbmcgYWRkZWQgdG9cbiAqIHRoZSBjb2xsZWN0aW9uIHR3aWNlLlxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQW4gZXhwYW5kZWQgdmVyc2lvbiBvZiBzdGFuZGFyZCBKUyBBcnJheSwgYWRkaW5nIGNvbnZlbmllbmNlIG1ldGhvZHMgZm9yXG4gKiBtYW5pcHVsYXRpb24uIEFkZCBhbmQgcmVtb3ZlIGNoYW5nZXMgdG8gdGhlIENvbGxlY3Rpb24gdHJpZ2dlciBhIENvbGxlY3Rpb25cbiAqIGV2ZW50LiBOb3RlIHRoYXQgdGhpcyBkb2VzIG5vdCBjb3ZlciBjaGFuZ2VzIHRvIHRoZSBvYmplY3RzIF93aXRoaW5fIHRoZVxuICogQ29sbGVjdGlvbjsgdGhleSB0cmlnZ2VyIGV2ZW50cyBvbiB0aGUgYXBwcm9wcmlhdGUgb2JqZWN0LCBub3Qgb24gdGhlXG4gKiBDb2xsZWN0aW9uIGFzIGEgd2hvbGUuXG4gKlxuICogQGZpcmVzIENvbGxlY3Rpb25FdmVudFxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAYXBpXG4gKi9cbnZhciBDb2xsZWN0aW9uID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoQmFzZU9iamVjdCkge1xuICBmdW5jdGlvbiBDb2xsZWN0aW9uKG9wdF9hcnJheSwgb3B0X29wdGlvbnMpIHtcblxuICAgIEJhc2VPYmplY3QuY2FsbCh0aGlzKTtcblxuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMudW5pcXVlXyA9ICEhb3B0aW9ucy51bmlxdWU7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshQXJyYXk8VD59XG4gICAgICovXG4gICAgdGhpcy5hcnJheV8gPSBvcHRfYXJyYXkgPyBvcHRfYXJyYXkgOiBbXTtcblxuICAgIGlmICh0aGlzLnVuaXF1ZV8pIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMuYXJyYXlfLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdGhpcy5hc3NlcnRVbmlxdWVfKHRoaXMuYXJyYXlfW2ldLCBpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZUxlbmd0aF8oKTtcblxuICB9XG5cbiAgaWYgKCBCYXNlT2JqZWN0ICkgQ29sbGVjdGlvbi5fX3Byb3RvX18gPSBCYXNlT2JqZWN0O1xuICBDb2xsZWN0aW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEJhc2VPYmplY3QgJiYgQmFzZU9iamVjdC5wcm90b3R5cGUgKTtcbiAgQ29sbGVjdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDb2xsZWN0aW9uO1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgYWxsIGVsZW1lbnRzIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIENvbGxlY3Rpb24ucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gY2xlYXIgKCkge1xuICAgIHdoaWxlICh0aGlzLmdldExlbmd0aCgpID4gMCkge1xuICAgICAgdGhpcy5wb3AoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZCBlbGVtZW50cyB0byB0aGUgY29sbGVjdGlvbi4gIFRoaXMgcHVzaGVzIGVhY2ggaXRlbSBpbiB0aGUgcHJvdmlkZWQgYXJyYXlcbiAgICogdG8gdGhlIGVuZCBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICogQHBhcmFtIHshQXJyYXk8VD59IGFyciBBcnJheS5cbiAgICogQHJldHVybiB7Q29sbGVjdGlvbjxUPn0gVGhpcyBjb2xsZWN0aW9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBDb2xsZWN0aW9uLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbiBleHRlbmQgKGFycikge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGFyci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICB0aGlzLnB1c2goYXJyW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEl0ZXJhdGUgb3ZlciBlYWNoIGVsZW1lbnQsIGNhbGxpbmcgdGhlIHByb3ZpZGVkIGNhbGxiYWNrLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFQsIG51bWJlciwgQXJyYXk8VD4pOiAqfSBmIFRoZSBmdW5jdGlvbiB0byBjYWxsXG4gICAqICAgICBmb3IgZXZlcnkgZWxlbWVudC4gVGhpcyBmdW5jdGlvbiB0YWtlcyAzIGFyZ3VtZW50cyAodGhlIGVsZW1lbnQsIHRoZVxuICAgKiAgICAgaW5kZXggYW5kIHRoZSBhcnJheSkuIFRoZSByZXR1cm4gdmFsdWUgaXMgaWdub3JlZC5cbiAgICogQGFwaVxuICAgKi9cbiAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIGZvckVhY2ggKGYpIHtcbiAgICB2YXIgYXJyYXkgPSB0aGlzLmFycmF5XztcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBhcnJheS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICBmKGFycmF5W2ldLCBpLCBhcnJheSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgYSByZWZlcmVuY2UgdG8gdGhlIHVuZGVybHlpbmcgQXJyYXkgb2JqZWN0LiBXYXJuaW5nOiBpZiB0aGUgYXJyYXlcbiAgICogaXMgbXV0YXRlZCwgbm8gZXZlbnRzIHdpbGwgYmUgZGlzcGF0Y2hlZCBieSB0aGUgY29sbGVjdGlvbiwgYW5kIHRoZVxuICAgKiBjb2xsZWN0aW9uJ3MgXCJsZW5ndGhcIiBwcm9wZXJ0eSB3b24ndCBiZSBpbiBzeW5jIHdpdGggdGhlIGFjdHVhbCBsZW5ndGhcbiAgICogb2YgdGhlIGFycmF5LlxuICAgKiBAcmV0dXJuIHshQXJyYXk8VD59IEFycmF5LlxuICAgKiBAYXBpXG4gICAqL1xuICBDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXRBcnJheSA9IGZ1bmN0aW9uIGdldEFycmF5ICgpIHtcbiAgICByZXR1cm4gdGhpcy5hcnJheV87XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZWxlbWVudCBhdCB0aGUgcHJvdmlkZWQgaW5kZXguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleC5cbiAgICogQHJldHVybiB7VH0gRWxlbWVudC5cbiAgICogQGFwaVxuICAgKi9cbiAgQ29sbGVjdGlvbi5wcm90b3R5cGUuaXRlbSA9IGZ1bmN0aW9uIGl0ZW0gKGluZGV4KSB7XG4gICAgcmV0dXJuIHRoaXMuYXJyYXlfW2luZGV4XTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBsZW5ndGggb2YgdGhpcyBjb2xsZWN0aW9uLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBsZW5ndGggb2YgdGhlIGFycmF5LlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXRMZW5ndGggPSBmdW5jdGlvbiBnZXRMZW5ndGggKCkge1xuICAgIHJldHVybiB0aGlzLmdldChQcm9wZXJ0eS5MRU5HVEgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbnNlcnQgYW4gZWxlbWVudCBhdCB0aGUgcHJvdmlkZWQgaW5kZXguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleC5cbiAgICogQHBhcmFtIHtUfSBlbGVtIEVsZW1lbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIENvbGxlY3Rpb24ucHJvdG90eXBlLmluc2VydEF0ID0gZnVuY3Rpb24gaW5zZXJ0QXQgKGluZGV4LCBlbGVtKSB7XG4gICAgaWYgKHRoaXMudW5pcXVlXykge1xuICAgICAgdGhpcy5hc3NlcnRVbmlxdWVfKGVsZW0pO1xuICAgIH1cbiAgICB0aGlzLmFycmF5Xy5zcGxpY2UoaW5kZXgsIDAsIGVsZW0pO1xuICAgIHRoaXMudXBkYXRlTGVuZ3RoXygpO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcbiAgICAgIG5ldyBDb2xsZWN0aW9uRXZlbnQoQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsIGVsZW0pKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBsYXN0IGVsZW1lbnQgb2YgdGhlIGNvbGxlY3Rpb24gYW5kIHJldHVybiBpdC5cbiAgICogUmV0dXJuIGB1bmRlZmluZWRgIGlmIHRoZSBjb2xsZWN0aW9uIGlzIGVtcHR5LlxuICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gRWxlbWVudC5cbiAgICogQGFwaVxuICAgKi9cbiAgQ29sbGVjdGlvbi5wcm90b3R5cGUucG9wID0gZnVuY3Rpb24gcG9wICgpIHtcbiAgICByZXR1cm4gdGhpcy5yZW1vdmVBdCh0aGlzLmdldExlbmd0aCgpIC0gMSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluc2VydCB0aGUgcHJvdmlkZWQgZWxlbWVudCBhdCB0aGUgZW5kIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgKiBAcGFyYW0ge1R9IGVsZW0gRWxlbWVudC5cbiAgICogQHJldHVybiB7bnVtYmVyfSBOZXcgbGVuZ3RoIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBDb2xsZWN0aW9uLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gcHVzaCAoZWxlbSkge1xuICAgIGlmICh0aGlzLnVuaXF1ZV8pIHtcbiAgICAgIHRoaXMuYXNzZXJ0VW5pcXVlXyhlbGVtKTtcbiAgICB9XG4gICAgdmFyIG4gPSB0aGlzLmdldExlbmd0aCgpO1xuICAgIHRoaXMuaW5zZXJ0QXQobiwgZWxlbSk7XG4gICAgcmV0dXJuIHRoaXMuZ2V0TGVuZ3RoKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhbiBlbGVtZW50IGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAqIEBwYXJhbSB7VH0gZWxlbSBFbGVtZW50LlxuICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gVGhlIHJlbW92ZWQgZWxlbWVudCBvciB1bmRlZmluZWQgaWYgbm9uZSBmb3VuZC5cbiAgICogQGFwaVxuICAgKi9cbiAgQ29sbGVjdGlvbi5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlIChlbGVtKSB7XG4gICAgdmFyIGFyciA9IHRoaXMuYXJyYXlfO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGFyci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICBpZiAoYXJyW2ldID09PSBlbGVtKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW92ZUF0KGkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGVsZW1lbnQgYXQgdGhlIHByb3ZpZGVkIGluZGV4IGFuZCByZXR1cm4gaXQuXG4gICAqIFJldHVybiBgdW5kZWZpbmVkYCBpZiB0aGUgY29sbGVjdGlvbiBkb2VzIG5vdCBjb250YWluIHRoaXMgaW5kZXguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleC5cbiAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IFZhbHVlLlxuICAgKiBAYXBpXG4gICAqL1xuICBDb2xsZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVBdCA9IGZ1bmN0aW9uIHJlbW92ZUF0IChpbmRleCkge1xuICAgIHZhciBwcmV2ID0gdGhpcy5hcnJheV9baW5kZXhdO1xuICAgIHRoaXMuYXJyYXlfLnNwbGljZShpbmRleCwgMSk7XG4gICAgdGhpcy51cGRhdGVMZW5ndGhfKCk7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDb2xsZWN0aW9uRXZlbnQoQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsIHByZXYpKTtcbiAgICByZXR1cm4gcHJldjtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBlbGVtZW50IGF0IHRoZSBwcm92aWRlZCBpbmRleC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4LlxuICAgKiBAcGFyYW0ge1R9IGVsZW0gRWxlbWVudC5cbiAgICogQGFwaVxuICAgKi9cbiAgQ29sbGVjdGlvbi5wcm90b3R5cGUuc2V0QXQgPSBmdW5jdGlvbiBzZXRBdCAoaW5kZXgsIGVsZW0pIHtcbiAgICB2YXIgbiA9IHRoaXMuZ2V0TGVuZ3RoKCk7XG4gICAgaWYgKGluZGV4IDwgbikge1xuICAgICAgaWYgKHRoaXMudW5pcXVlXykge1xuICAgICAgICB0aGlzLmFzc2VydFVuaXF1ZV8oZWxlbSwgaW5kZXgpO1xuICAgICAgfVxuICAgICAgdmFyIHByZXYgPSB0aGlzLmFycmF5X1tpbmRleF07XG4gICAgICB0aGlzLmFycmF5X1tpbmRleF0gPSBlbGVtO1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KFxuICAgICAgICBuZXcgQ29sbGVjdGlvbkV2ZW50KENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLCBwcmV2KSk7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXG4gICAgICAgIG5ldyBDb2xsZWN0aW9uRXZlbnQoQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsIGVsZW0pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yICh2YXIgaiA9IG47IGogPCBpbmRleDsgKytqKSB7XG4gICAgICAgIHRoaXMuaW5zZXJ0QXQoaiwgdW5kZWZpbmVkKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuaW5zZXJ0QXQoaW5kZXgsIGVsZW0pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIENvbGxlY3Rpb24ucHJvdG90eXBlLnVwZGF0ZUxlbmd0aF8gPSBmdW5jdGlvbiB1cGRhdGVMZW5ndGhfICgpIHtcbiAgICB0aGlzLnNldChQcm9wZXJ0eS5MRU5HVEgsIHRoaXMuYXJyYXlfLmxlbmd0aCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7VH0gZWxlbSBFbGVtZW50LlxuICAgKiBAcGFyYW0ge251bWJlcj19IG9wdF9leGNlcHQgT3B0aW9uYWwgaW5kZXggdG8gaWdub3JlLlxuICAgKi9cbiAgQ29sbGVjdGlvbi5wcm90b3R5cGUuYXNzZXJ0VW5pcXVlXyA9IGZ1bmN0aW9uIGFzc2VydFVuaXF1ZV8gKGVsZW0sIG9wdF9leGNlcHQpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLmFycmF5Xy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICBpZiAodGhpcy5hcnJheV9baV0gPT09IGVsZW0gJiYgaSAhPT0gb3B0X2V4Y2VwdCkge1xuICAgICAgICB0aHJvdyBuZXcgQXNzZXJ0aW9uRXJyb3IoNTgpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gQ29sbGVjdGlvbjtcbn0oQmFzZU9iamVjdCkpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IENvbGxlY3Rpb247XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbGxlY3Rpb24uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL01hcEJyb3dzZXJFdmVudFR5cGVcbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuXG4vKipcbiAqIENvbnN0YW50cyBmb3IgZXZlbnQgbmFtZXMuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG5cbiAgLyoqXG4gICAqIEEgdHJ1ZSBzaW5nbGUgY2xpY2sgd2l0aCBubyBkcmFnZ2luZyBhbmQgbm8gZG91YmxlIGNsaWNrLiBOb3RlIHRoYXQgdGhpc1xuICAgKiBldmVudCBpcyBkZWxheWVkIGJ5IDI1MCBtcyB0byBlbnN1cmUgdGhhdCBpdCBpcyBub3QgYSBkb3VibGUgY2xpY2suXG4gICAqIEBldmVudCBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudCNzaW5nbGVjbGlja1xuICAgKiBAYXBpXG4gICAqL1xuICBTSU5HTEVDTElDSzogJ3NpbmdsZWNsaWNrJyxcblxuICAvKipcbiAgICogQSBjbGljayB3aXRoIG5vIGRyYWdnaW5nLiBBIGRvdWJsZSBjbGljayB3aWxsIGZpcmUgdHdvIG9mIHRoaXMuXG4gICAqIEBldmVudCBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudCNjbGlja1xuICAgKiBAYXBpXG4gICAqL1xuICBDTElDSzogRXZlbnRUeXBlLkNMSUNLLFxuXG4gIC8qKlxuICAgKiBBIHRydWUgZG91YmxlIGNsaWNrLCB3aXRoIG5vIGRyYWdnaW5nLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQjZGJsY2xpY2tcbiAgICogQGFwaVxuICAgKi9cbiAgREJMQ0xJQ0s6IEV2ZW50VHlwZS5EQkxDTElDSyxcblxuICAvKipcbiAgICogVHJpZ2dlcmVkIHdoZW4gYSBwb2ludGVyIGlzIGRyYWdnZWQuXG4gICAqIEBldmVudCBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudCNwb2ludGVyZHJhZ1xuICAgKiBAYXBpXG4gICAqL1xuICBQT0lOVEVSRFJBRzogJ3BvaW50ZXJkcmFnJyxcblxuICAvKipcbiAgICogVHJpZ2dlcmVkIHdoZW4gYSBwb2ludGVyIGlzIG1vdmVkLiBOb3RlIHRoYXQgb24gdG91Y2ggZGV2aWNlcyB0aGlzIGlzXG4gICAqIHRyaWdnZXJlZCB3aGVuIHRoZSBtYXAgaXMgcGFubmVkLCBzbyBpcyBub3QgdGhlIHNhbWUgYXMgbW91c2Vtb3ZlLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQjcG9pbnRlcm1vdmVcbiAgICogQGFwaVxuICAgKi9cbiAgUE9JTlRFUk1PVkU6ICdwb2ludGVybW92ZScsXG5cbiAgUE9JTlRFUkRPV046ICdwb2ludGVyZG93bicsXG4gIFBPSU5URVJVUDogJ3BvaW50ZXJ1cCcsXG4gIFBPSU5URVJPVkVSOiAncG9pbnRlcm92ZXInLFxuICBQT0lOVEVST1VUOiAncG9pbnRlcm91dCcsXG4gIFBPSU5URVJFTlRFUjogJ3BvaW50ZXJlbnRlcicsXG4gIFBPSU5URVJMRUFWRTogJ3BvaW50ZXJsZWF2ZScsXG4gIFBPSU5URVJDQU5DRUw6ICdwb2ludGVyY2FuY2VsJ1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwQnJvd3NlckV2ZW50VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L3NpbXBsaWZ5XG4gKi9cbi8vIEJhc2VkIG9uIHNpbXBsaWZ5LWpzIGh0dHBzOi8vZ2l0aHViLmNvbS9tb3VybmVyL3NpbXBsaWZ5LWpzXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTIsIFZsYWRpbWlyIEFnYWZvbmtpblxuLy8gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vXG4vLyBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbi8vIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuLy9cbi8vICAgIDEuIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbi8vICAgICAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4vL1xuLy8gICAgMi4gUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHRcbi8vICAgICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGVcbi8vICAgICAgIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXG4vL1xuLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCJcbi8vIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEVcbi8vIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFXG4vLyBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFXG4vLyBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SXG4vLyBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRlxuLy8gU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTXG4vLyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTlxuLy8gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlQgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSlcbi8vIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFXG4vLyBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cblxuaW1wb3J0IHtzcXVhcmVkU2VnbWVudERpc3RhbmNlLCBzcXVhcmVkRGlzdGFuY2V9IGZyb20gJy4uLy4uL21hdGguanMnO1xuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICogQHBhcmFtIHtib29sZWFufSBoaWdoUXVhbGl0eSBIaWdoZXN0IHF1YWxpdHkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFNpbXBsaWZpZWQgbGluZSBzdHJpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaW1wbGlmeUxpbmVTdHJpbmcoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCxcbiAgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLCBoaWdoUXVhbGl0eSwgb3B0X3NpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMpIHtcbiAgdmFyIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgPSBvcHRfc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyAhPT0gdW5kZWZpbmVkID9cbiAgICBvcHRfc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyA6IFtdO1xuICBpZiAoIWhpZ2hRdWFsaXR5KSB7XG4gICAgZW5kID0gcmFkaWFsRGlzdGFuY2UoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCxcbiAgICAgIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSxcbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIDApO1xuICAgIGZsYXRDb29yZGluYXRlcyA9IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXM7XG4gICAgb2Zmc2V0ID0gMDtcbiAgICBzdHJpZGUgPSAyO1xuICB9XG4gIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gZG91Z2xhc1BldWNrZXIoXG4gICAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLFxuICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIDApO1xuICByZXR1cm4gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcztcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRvdWdsYXNQZXVja2VyKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsXG4gIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCkge1xuICB2YXIgbiA9IChlbmQgLSBvZmZzZXQpIC8gc3RyaWRlO1xuICBpZiAobiA8IDMpIHtcbiAgICBmb3IgKDsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPVxuICAgICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID1cbiAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgfVxuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xuICB9XG4gIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi9cbiAgdmFyIG1hcmtlcnMgPSBuZXcgQXJyYXkobik7XG4gIG1hcmtlcnNbMF0gPSAxO1xuICBtYXJrZXJzW24gLSAxXSA9IDE7XG4gIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi9cbiAgdmFyIHN0YWNrID0gW29mZnNldCwgZW5kIC0gc3RyaWRlXTtcbiAgdmFyIGluZGV4ID0gMDtcbiAgd2hpbGUgKHN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICB2YXIgbGFzdCA9IHN0YWNrLnBvcCgpO1xuICAgIHZhciBmaXJzdCA9IHN0YWNrLnBvcCgpO1xuICAgIHZhciBtYXhTcXVhcmVkRGlzdGFuY2UgPSAwO1xuICAgIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tmaXJzdF07XG4gICAgdmFyIHkxID0gZmxhdENvb3JkaW5hdGVzW2ZpcnN0ICsgMV07XG4gICAgdmFyIHgyID0gZmxhdENvb3JkaW5hdGVzW2xhc3RdO1xuICAgIHZhciB5MiA9IGZsYXRDb29yZGluYXRlc1tsYXN0ICsgMV07XG4gICAgZm9yICh2YXIgaSA9IGZpcnN0ICsgc3RyaWRlOyBpIDwgbGFzdDsgaSArPSBzdHJpZGUpIHtcbiAgICAgIHZhciB4ID0gZmxhdENvb3JkaW5hdGVzW2ldO1xuICAgICAgdmFyIHkgPSBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdO1xuICAgICAgdmFyIHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWRTZWdtZW50RGlzdGFuY2UoXG4gICAgICAgIHgsIHksIHgxLCB5MSwgeDIsIHkyKTtcbiAgICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPiBtYXhTcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICBtYXhTcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRGlzdGFuY2U7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChtYXhTcXVhcmVkRGlzdGFuY2UgPiBzcXVhcmVkVG9sZXJhbmNlKSB7XG4gICAgICBtYXJrZXJzWyhpbmRleCAtIG9mZnNldCkgLyBzdHJpZGVdID0gMTtcbiAgICAgIGlmIChmaXJzdCArIHN0cmlkZSA8IGluZGV4KSB7XG4gICAgICAgIHN0YWNrLnB1c2goZmlyc3QsIGluZGV4KTtcbiAgICAgIH1cbiAgICAgIGlmIChpbmRleCArIHN0cmlkZSA8IGxhc3QpIHtcbiAgICAgICAgc3RhY2sucHVzaChpbmRleCwgbGFzdCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IG47ICsraSQxKSB7XG4gICAgaWYgKG1hcmtlcnNbaSQxXSkge1xuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID1cbiAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgaSQxICogc3RyaWRlXTtcbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9XG4gICAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGkkMSAqIHN0cmlkZSArIDFdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRW5kcyBTaW1wbGlmaWVkIGVuZHMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZG91Z2xhc1BldWNrZXJBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCxcbiAgZW5kcywgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLFxuICBzaW1wbGlmaWVkT2Zmc2V0LCBzaW1wbGlmaWVkRW5kcykge1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICBzaW1wbGlmaWVkT2Zmc2V0ID0gZG91Z2xhc1BldWNrZXIoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsXG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0KTtcbiAgICBzaW1wbGlmaWVkRW5kcy5wdXNoKHNpbXBsaWZpZWRPZmZzZXQpO1xuICAgIG9mZnNldCA9IGVuZDtcbiAgfVxuICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gc2ltcGxpZmllZEVuZHNzIFNpbXBsaWZpZWQgZW5kc3MuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZG91Z2xhc1BldWNrZXJNdWx0aUFycmF5KFxuICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSxcbiAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCwgc2ltcGxpZmllZEVuZHNzKSB7XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgIHZhciBzaW1wbGlmaWVkRW5kcyA9IFtdO1xuICAgIHNpbXBsaWZpZWRPZmZzZXQgPSBkb3VnbGFzUGV1Y2tlckFycmF5KFxuICAgICAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSxcbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQsIHNpbXBsaWZpZWRFbmRzKTtcbiAgICBzaW1wbGlmaWVkRW5kc3MucHVzaChzaW1wbGlmaWVkRW5kcyk7XG4gICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICB9XG4gIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmFkaWFsRGlzdGFuY2UoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCxcbiAgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0KSB7XG4gIGlmIChlbmQgPD0gb2Zmc2V0ICsgc3RyaWRlKSB7XG4gICAgLy8gemVybyBvciBvbmUgcG9pbnQsIG5vIHNpbXBsaWZpY2F0aW9uIHBvc3NpYmxlLCBzbyBjb3B5IGFuZCByZXR1cm5cbiAgICBmb3IgKDsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9XG4gICAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgIH1cbiAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbiAgfVxuICB2YXIgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgdmFyIHkxID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAvLyBjb3B5IGZpcnN0IHBvaW50XG4gIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgxO1xuICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MTtcbiAgdmFyIHgyID0geDE7XG4gIHZhciB5MiA9IHkxO1xuICBmb3IgKG9mZnNldCArPSBzdHJpZGU7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgaWYgKHNxdWFyZWREaXN0YW5jZSh4MSwgeTEsIHgyLCB5MikgPiBzcXVhcmVkVG9sZXJhbmNlKSB7XG4gICAgICAvLyBjb3B5IHBvaW50IGF0IG9mZnNldFxuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDI7XG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MjtcbiAgICAgIHgxID0geDI7XG4gICAgICB5MSA9IHkyO1xuICAgIH1cbiAgfVxuICBpZiAoeDIgIT0geDEgfHwgeTIgIT0geTEpIHtcbiAgICAvLyBjb3B5IGxhc3QgcG9pbnRcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MjtcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MjtcbiAgfVxuICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBWYWx1ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVG9sZXJhbmNlLlxuICogQHJldHVybiB7bnVtYmVyfSBSb3VuZGVkIHZhbHVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc25hcCh2YWx1ZSwgdG9sZXJhbmNlKSB7XG4gIHJldHVybiB0b2xlcmFuY2UgKiBNYXRoLnJvdW5kKHZhbHVlIC8gdG9sZXJhbmNlKTtcbn1cblxuXG4vKipcbiAqIFNpbXBsaWZpZXMgYSBsaW5lIHN0cmluZyB1c2luZyBhbiBhbGdvcml0aG0gZGVzaWduZWQgYnkgVGltIFNjaGF1Yi5cbiAqIENvb3JkaW5hdGVzIGFyZSBzbmFwcGVkIHRvIHRoZSBuZWFyZXN0IHZhbHVlIGluIGEgdmlydHVhbCBncmlkIGFuZFxuICogY29uc2VjdXRpdmUgZHVwbGljYXRlIGNvb3JkaW5hdGVzIGFyZSBkaXNjYXJkZWQuICBUaGlzIGVmZmVjdGl2ZWx5IHByZXNlcnZlc1xuICogdG9wb2xvZ3kgYXMgdGhlIHNpbXBsaWZpY2F0aW9uIG9mIGFueSBzdWJzZWN0aW9uIG9mIGEgbGluZSBzdHJpbmcgaXNcbiAqIGluZGVwZW5kZW50IG9mIHRoZSByZXN0IG9mIHRoZSBsaW5lIHN0cmluZy4gIFRoaXMgbWVhbnMgdGhhdCwgZm9yIGV4YW1wbGVzLFxuICogdGhlIGNvbW1vbiBlZGdlIGJldHdlZW4gdHdvIHBvbHlnb25zIHdpbGwgYmUgc2ltcGxpZmllZCB0byB0aGUgc2FtZSBsaW5lXG4gKiBzdHJpbmcgaW5kZXBlbmRlbnRseSBpbiBib3RoIHBvbHlnb25zLiAgVGhpcyBpbXBsZW1lbnRhdGlvbiB1c2VzIGEgc2luZ2xlXG4gKiBwYXNzIG92ZXIgdGhlIGNvb3JkaW5hdGVzIGFuZCBlbGltaW5hdGVzIGludGVybWVkaWF0ZSBjb2xsaW5lYXIgcG9pbnRzLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcXVhbnRpemUoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLFxuICB0b2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQpIHtcbiAgLy8gZG8gbm90aGluZyBpZiB0aGUgbGluZSBpcyBlbXB0eVxuICBpZiAob2Zmc2V0ID09IGVuZCkge1xuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xuICB9XG4gIC8vIHNuYXAgdGhlIGZpcnN0IGNvb3JkaW5hdGUgKFAxKVxuICB2YXIgeDEgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXRdLCB0b2xlcmFuY2UpO1xuICB2YXIgeTEgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXSwgdG9sZXJhbmNlKTtcbiAgb2Zmc2V0ICs9IHN0cmlkZTtcbiAgLy8gYWRkIHRoZSBmaXJzdCBjb29yZGluYXRlIHRvIHRoZSBvdXRwdXRcbiAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDE7XG4gIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHkxO1xuICAvLyBmaW5kIHRoZSBuZXh0IGNvb3JkaW5hdGUgdGhhdCBkb2VzIG5vdCBzbmFwIHRvIHRoZSBzYW1lIHZhbHVlIGFzIHRoZSBmaXJzdFxuICAvLyBjb29yZGluYXRlIChQMilcbiAgdmFyIHgyLCB5MjtcbiAgZG8ge1xuICAgIHgyID0gc25hcChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgdG9sZXJhbmNlKTtcbiAgICB5MiA9IHNuYXAoZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdLCB0b2xlcmFuY2UpO1xuICAgIG9mZnNldCArPSBzdHJpZGU7XG4gICAgaWYgKG9mZnNldCA9PSBlbmQpIHtcbiAgICAgIC8vIGFsbCBjb29yZGluYXRlcyBzbmFwIHRvIHRoZSBzYW1lIHZhbHVlLCB0aGUgbGluZSBjb2xsYXBzZXMgdG8gYSBwb2ludFxuICAgICAgLy8gcHVzaCB0aGUgbGFzdCBzbmFwcGVkIHZhbHVlIGFueXdheSB0byBlbnN1cmUgdGhhdCB0aGUgb3V0cHV0IGNvbnRhaW5zXG4gICAgICAvLyBhdCBsZWFzdCB0d28gcG9pbnRzXG4gICAgICAvLyBGSVhNRSBzaG91bGQgd2UgcmVhbGx5IHJldHVybiBhdCBsZWFzdCB0d28gcG9pbnRzIGFueXdheT9cbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgyO1xuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTI7XG4gICAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbiAgICB9XG4gIH0gd2hpbGUgKHgyID09IHgxICYmIHkyID09IHkxKTtcbiAgd2hpbGUgKG9mZnNldCA8IGVuZCkge1xuICAgIC8vIHNuYXAgdGhlIG5leHQgY29vcmRpbmF0ZSAoUDMpXG4gICAgdmFyIHgzID0gc25hcChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgdG9sZXJhbmNlKTtcbiAgICB2YXIgeTMgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXSwgdG9sZXJhbmNlKTtcbiAgICBvZmZzZXQgKz0gc3RyaWRlO1xuICAgIC8vIHNraXAgUDMgaWYgaXQgaXMgZXF1YWwgdG8gUDJcbiAgICBpZiAoeDMgPT0geDIgJiYgeTMgPT0geTIpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICAvLyBjYWxjdWxhdGUgdGhlIGRlbHRhIGJldHdlZW4gUDEgYW5kIFAyXG4gICAgdmFyIGR4MSA9IHgyIC0geDE7XG4gICAgdmFyIGR5MSA9IHkyIC0geTE7XG4gICAgLy8gY2FsY3VsYXRlIHRoZSBkZWx0YSBiZXR3ZWVuIFAzIGFuZCBQMVxuICAgIHZhciBkeDIgPSB4MyAtIHgxO1xuICAgIHZhciBkeTIgPSB5MyAtIHkxO1xuICAgIC8vIGlmIFAxLCBQMiwgYW5kIFAzIGFyZSBjb2xpbmVhciBhbmQgUDMgaXMgZnVydGhlciBmcm9tIFAxIHRoYW4gUDIgaXMgZnJvbVxuICAgIC8vIFAxIGluIHRoZSBzYW1lIGRpcmVjdGlvbiB0aGVuIFAyIGlzIG9uIHRoZSBzdHJhaWdodCBsaW5lIGJldHdlZW4gUDEgYW5kXG4gICAgLy8gUDNcbiAgICBpZiAoKGR4MSAqIGR5MiA9PSBkeTEgKiBkeDIpICYmXG4gICAgICAgICgoZHgxIDwgMCAmJiBkeDIgPCBkeDEpIHx8IGR4MSA9PSBkeDIgfHwgKGR4MSA+IDAgJiYgZHgyID4gZHgxKSkgJiZcbiAgICAgICAgKChkeTEgPCAwICYmIGR5MiA8IGR5MSkgfHwgZHkxID09IGR5MiB8fCAoZHkxID4gMCAmJiBkeTIgPiBkeTEpKSkge1xuICAgICAgLy8gZGlzY2FyZCBQMiBhbmQgc2V0IFAyID0gUDNcbiAgICAgIHgyID0geDM7XG4gICAgICB5MiA9IHkzO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIC8vIGVpdGhlciBQMSwgUDIsIGFuZCBQMyBhcmUgbm90IGNvbGluZWFyLCBvciB0aGV5IGFyZSBjb2xpbmVhciBidXQgUDMgaXNcbiAgICAvLyBiZXR3ZWVuIFAzIGFuZCBQMSBvciBvbiB0aGUgb3Bwb3NpdGUgaGFsZiBvZiB0aGUgbGluZSB0byBQMi4gIGFkZCBQMixcbiAgICAvLyBhbmQgY29udGludWUgd2l0aCBQMSA9IFAyIGFuZCBQMiA9IFAzXG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDI7XG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTI7XG4gICAgeDEgPSB4MjtcbiAgICB5MSA9IHkyO1xuICAgIHgyID0geDM7XG4gICAgeTIgPSB5MztcbiAgfVxuICAvLyBhZGQgdGhlIGxhc3QgcG9pbnQgKFAyKVxuICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MjtcbiAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTI7XG4gIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRFbmRzIFNpbXBsaWZpZWQgZW5kcy5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWFudGl6ZUFycmF5KFxuICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLFxuICB0b2xlcmFuY2UsXG4gIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQsIHNpbXBsaWZpZWRFbmRzKSB7XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgIHNpbXBsaWZpZWRPZmZzZXQgPSBxdWFudGl6ZShcbiAgICAgIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSxcbiAgICAgIHRvbGVyYW5jZSxcbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQpO1xuICAgIHNpbXBsaWZpZWRFbmRzLnB1c2goc2ltcGxpZmllZE9mZnNldCk7XG4gICAgb2Zmc2V0ID0gZW5kO1xuICB9XG4gIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBzaW1wbGlmaWVkRW5kc3MgU2ltcGxpZmllZCBlbmRzcy5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWFudGl6ZU11bHRpQXJyYXkoXG4gIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLFxuICB0b2xlcmFuY2UsXG4gIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQsIHNpbXBsaWZpZWRFbmRzcykge1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICB2YXIgc2ltcGxpZmllZEVuZHMgPSBbXTtcbiAgICBzaW1wbGlmaWVkT2Zmc2V0ID0gcXVhbnRpemVBcnJheShcbiAgICAgIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsXG4gICAgICB0b2xlcmFuY2UsXG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0LCBzaW1wbGlmaWVkRW5kcyk7XG4gICAgc2ltcGxpZmllZEVuZHNzLnB1c2goc2ltcGxpZmllZEVuZHMpO1xuICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgfVxuICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2ltcGxpZnkuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL0xheWVyVHlwZVxuICovXG5cbi8qKlxuICogQSBsYXllciB0eXBlIHVzZWQgd2hlbiBjcmVhdGluZyBsYXllciByZW5kZXJlcnMuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIElNQUdFOiAnSU1BR0UnLFxuICBUSUxFOiAnVElMRScsXG4gIFZFQ1RPUl9USUxFOiAnVkVDVE9SX1RJTEUnLFxuICBWRUNUT1I6ICdWRUNUT1InXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1MYXllclR5cGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vTGluZWFyUmluZ1xuICovXG5pbXBvcnQge2Nsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWX0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCBHZW9tZXRyeUxheW91dCBmcm9tICcuL0dlb21ldHJ5TGF5b3V0LmpzJztcbmltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSAnLi9HZW9tZXRyeVR5cGUuanMnO1xuaW1wb3J0IFNpbXBsZUdlb21ldHJ5IGZyb20gJy4vU2ltcGxlR2VvbWV0cnkuanMnO1xuaW1wb3J0IHtsaW5lYXJSaW5nIGFzIGxpbmVhclJpbmdBcmVhfSBmcm9tICcuL2ZsYXQvYXJlYS5qcyc7XG5pbXBvcnQge2Fzc2lnbkNsb3Nlc3RQb2ludCwgbWF4U3F1YXJlZERlbHRhfSBmcm9tICcuL2ZsYXQvY2xvc2VzdC5qcyc7XG5pbXBvcnQge2RlZmxhdGVDb29yZGluYXRlc30gZnJvbSAnLi9mbGF0L2RlZmxhdGUuanMnO1xuaW1wb3J0IHtpbmZsYXRlQ29vcmRpbmF0ZXN9IGZyb20gJy4vZmxhdC9pbmZsYXRlLmpzJztcbmltcG9ydCB7ZG91Z2xhc1BldWNrZXJ9IGZyb20gJy4vZmxhdC9zaW1wbGlmeS5qcyc7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogTGluZWFyIHJpbmcgZ2VvbWV0cnkuIE9ubHkgdXNlZCBhcyBwYXJ0IG9mIHBvbHlnb247IGNhbm5vdCBiZSByZW5kZXJlZFxuICogb24gaXRzIG93bi5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBMaW5lYXJSaW5nID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoU2ltcGxlR2VvbWV0cnkpIHtcbiAgZnVuY3Rpb24gTGluZWFyUmluZyhjb29yZGluYXRlcywgb3B0X2xheW91dCkge1xuXG4gICAgU2ltcGxlR2VvbWV0cnkuY2FsbCh0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1heERlbHRhXyA9IC0xO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubWF4RGVsdGFSZXZpc2lvbl8gPSAtMTtcblxuICAgIGlmIChvcHRfbGF5b3V0ICE9PSB1bmRlZmluZWQgJiYgIUFycmF5LmlzQXJyYXkoY29vcmRpbmF0ZXNbMF0pKSB7XG4gICAgICB0aGlzLnNldEZsYXRDb29yZGluYXRlcyhvcHRfbGF5b3V0LCAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovIChjb29yZGluYXRlcykpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldENvb3JkaW5hdGVzKC8qKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gKi8gKGNvb3JkaW5hdGVzKSwgb3B0X2xheW91dCk7XG4gICAgfVxuXG4gIH1cblxuICBpZiAoIFNpbXBsZUdlb21ldHJ5ICkgTGluZWFyUmluZy5fX3Byb3RvX18gPSBTaW1wbGVHZW9tZXRyeTtcbiAgTGluZWFyUmluZy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBTaW1wbGVHZW9tZXRyeSAmJiBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUgKTtcbiAgTGluZWFyUmluZy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBMaW5lYXJSaW5nO1xuXG4gIC8qKlxuICAgKiBNYWtlIGEgY29tcGxldGUgY29weSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAqIEByZXR1cm4geyFMaW5lYXJSaW5nfSBDbG9uZS5cbiAgICogQG92ZXJyaWRlXG4gICAqIEBhcGlcbiAgICovXG4gIExpbmVhclJpbmcucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gY2xvbmUgKCkge1xuICAgIHJldHVybiBuZXcgTGluZWFyUmluZyh0aGlzLmZsYXRDb29yZGluYXRlcy5zbGljZSgpLCB0aGlzLmxheW91dCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBMaW5lYXJSaW5nLnByb3RvdHlwZS5jbG9zZXN0UG9pbnRYWSA9IGZ1bmN0aW9uIGNsb3Nlc3RQb2ludFhZICh4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSkge1xuICAgIGlmIChtaW5TcXVhcmVkRGlzdGFuY2UgPCBjbG9zZXN0U3F1YXJlZERpc3RhbmNlWFkodGhpcy5nZXRFeHRlbnQoKSwgeCwgeSkpIHtcbiAgICAgIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG4gICAgfVxuICAgIGlmICh0aGlzLm1heERlbHRhUmV2aXNpb25fICE9IHRoaXMuZ2V0UmV2aXNpb24oKSkge1xuICAgICAgdGhpcy5tYXhEZWx0YV8gPSBNYXRoLnNxcnQobWF4U3F1YXJlZERlbHRhKFxuICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCB0aGlzLnN0cmlkZSwgMCkpO1xuICAgICAgdGhpcy5tYXhEZWx0YVJldmlzaW9uXyA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIGFzc2lnbkNsb3Nlc3RQb2ludChcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHRoaXMuc3RyaWRlLFxuICAgICAgdGhpcy5tYXhEZWx0YV8sIHRydWUsIHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBhcmVhIG9mIHRoZSBsaW5lYXIgcmluZyBvbiBwcm9qZWN0ZWQgcGxhbmUuXG4gICAqIEByZXR1cm4ge251bWJlcn0gQXJlYSAob24gcHJvamVjdGVkIHBsYW5lKS5cbiAgICogQGFwaVxuICAgKi9cbiAgTGluZWFyUmluZy5wcm90b3R5cGUuZ2V0QXJlYSA9IGZ1bmN0aW9uIGdldEFyZWEgKCkge1xuICAgIHJldHVybiBsaW5lYXJSaW5nQXJlYSh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCB0aGlzLnN0cmlkZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIGxpbmVhciByaW5nLlxuICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBDb29yZGluYXRlcy5cbiAgICogQG92ZXJyaWRlXG4gICAqIEBhcGlcbiAgICovXG4gIExpbmVhclJpbmcucHJvdG90eXBlLmdldENvb3JkaW5hdGVzID0gZnVuY3Rpb24gZ2V0Q29vcmRpbmF0ZXMgKCkge1xuICAgIHJldHVybiBpbmZsYXRlQ29vcmRpbmF0ZXMoXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCB0aGlzLnN0cmlkZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBMaW5lYXJSaW5nLnByb3RvdHlwZS5nZXRTaW1wbGlmaWVkR2VvbWV0cnlJbnRlcm5hbCA9IGZ1bmN0aW9uIGdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsIChzcXVhcmVkVG9sZXJhbmNlKSB7XG4gICAgdmFyIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IGRvdWdsYXNQZXVja2VyKFxuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgdGhpcy5zdHJpZGUsXG4gICAgICBzcXVhcmVkVG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCAwKTtcbiAgICByZXR1cm4gbmV3IExpbmVhclJpbmcoc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgR2VvbWV0cnlMYXlvdXQuWFkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKiBAYXBpXG4gICAqL1xuICBMaW5lYXJSaW5nLnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24gZ2V0VHlwZSAoKSB7XG4gICAgcmV0dXJuIEdlb21ldHJ5VHlwZS5MSU5FQVJfUklORztcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIExpbmVhclJpbmcucHJvdG90eXBlLmludGVyc2VjdHNFeHRlbnQgPSBmdW5jdGlvbiBpbnRlcnNlY3RzRXh0ZW50IChleHRlbnQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIGxpbmVhciByaW5nLlxuICAgKiBAcGFyYW0geyFBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICogQHBhcmFtIHtHZW9tZXRyeUxheW91dD19IG9wdF9sYXlvdXQgTGF5b3V0LlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQGFwaVxuICAgKi9cbiAgTGluZWFyUmluZy5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiBzZXRDb29yZGluYXRlcyAoY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQpIHtcbiAgICB0aGlzLnNldExheW91dChvcHRfbGF5b3V0LCBjb29yZGluYXRlcywgMSk7XG4gICAgaWYgKCF0aGlzLmZsYXRDb29yZGluYXRlcykge1xuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICB9XG4gICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gZGVmbGF0ZUNvb3JkaW5hdGVzKFxuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIGNvb3JkaW5hdGVzLCB0aGlzLnN0cmlkZSk7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgcmV0dXJuIExpbmVhclJpbmc7XG59KFNpbXBsZUdlb21ldHJ5KSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgTGluZWFyUmluZztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TGluZWFyUmluZy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9Qb2x5Z29uXG4gKi9cbmltcG9ydCB7ZXh0ZW5kfSBmcm9tICcuLi9hcnJheS5qcyc7XG5pbXBvcnQge2Nsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWSwgZ2V0Q2VudGVyfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IEdlb21ldHJ5TGF5b3V0IGZyb20gJy4vR2VvbWV0cnlMYXlvdXQuanMnO1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgTGluZWFyUmluZyBmcm9tICcuL0xpbmVhclJpbmcuanMnO1xuaW1wb3J0IFBvaW50IGZyb20gJy4vUG9pbnQuanMnO1xuaW1wb3J0IFNpbXBsZUdlb21ldHJ5IGZyb20gJy4vU2ltcGxlR2VvbWV0cnkuanMnO1xuaW1wb3J0IHtvZmZzZXQgYXMgc3BoZXJlT2Zmc2V0fSBmcm9tICcuLi9zcGhlcmUuanMnO1xuaW1wb3J0IHtsaW5lYXJSaW5ncyBhcyBsaW5lYXJSaW5nc0FyZWF9IGZyb20gJy4vZmxhdC9hcmVhLmpzJztcbmltcG9ydCB7YXNzaWduQ2xvc2VzdEFycmF5UG9pbnQsIGFycmF5TWF4U3F1YXJlZERlbHRhfSBmcm9tICcuL2ZsYXQvY2xvc2VzdC5qcyc7XG5pbXBvcnQge2xpbmVhclJpbmdzQ29udGFpbnNYWX0gZnJvbSAnLi9mbGF0L2NvbnRhaW5zLmpzJztcbmltcG9ydCB7ZGVmbGF0ZUNvb3JkaW5hdGVzQXJyYXl9IGZyb20gJy4vZmxhdC9kZWZsYXRlLmpzJztcbmltcG9ydCB7aW5mbGF0ZUNvb3JkaW5hdGVzQXJyYXl9IGZyb20gJy4vZmxhdC9pbmZsYXRlLmpzJztcbmltcG9ydCB7Z2V0SW50ZXJpb3JQb2ludE9mQXJyYXl9IGZyb20gJy4vZmxhdC9pbnRlcmlvcnBvaW50LmpzJztcbmltcG9ydCB7aW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheX0gZnJvbSAnLi9mbGF0L2ludGVyc2VjdHNleHRlbnQuanMnO1xuaW1wb3J0IHtsaW5lYXJSaW5nSXNPcmllbnRlZCwgb3JpZW50TGluZWFyUmluZ3N9IGZyb20gJy4vZmxhdC9vcmllbnQuanMnO1xuaW1wb3J0IHtxdWFudGl6ZUFycmF5fSBmcm9tICcuL2ZsYXQvc2ltcGxpZnkuanMnO1xuaW1wb3J0IHttb2R1bG99IGZyb20gJy4uL21hdGguanMnO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFBvbHlnb24gZ2VvbWV0cnkuXG4gKlxuICogQGFwaVxuICovXG52YXIgUG9seWdvbiA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFNpbXBsZUdlb21ldHJ5KSB7XG4gIGZ1bmN0aW9uIFBvbHlnb24oY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQsIG9wdF9lbmRzKSB7XG5cbiAgICBTaW1wbGVHZW9tZXRyeS5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmVuZHNfID0gW107XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5mbGF0SW50ZXJpb3JQb2ludFJldmlzaW9uXyA9IC0xO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAqL1xuICAgIHRoaXMuZmxhdEludGVyaW9yUG9pbnRfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1heERlbHRhXyA9IC0xO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubWF4RGVsdGFSZXZpc2lvbl8gPSAtMTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm9yaWVudGVkUmV2aXNpb25fID0gLTE7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAqL1xuICAgIHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfID0gbnVsbDtcblxuICAgIGlmIChvcHRfbGF5b3V0ICE9PSB1bmRlZmluZWQgJiYgb3B0X2VuZHMpIHtcbiAgICAgIHRoaXMuc2V0RmxhdENvb3JkaW5hdGVzKG9wdF9sYXlvdXQsIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGNvb3JkaW5hdGVzKSk7XG4gICAgICB0aGlzLmVuZHNfID0gb3B0X2VuZHM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0Q29vcmRpbmF0ZXMoLyoqIEB0eXBlIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gKi8gKGNvb3JkaW5hdGVzKSwgb3B0X2xheW91dCk7XG4gICAgfVxuXG4gIH1cblxuICBpZiAoIFNpbXBsZUdlb21ldHJ5ICkgUG9seWdvbi5fX3Byb3RvX18gPSBTaW1wbGVHZW9tZXRyeTtcbiAgUG9seWdvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBTaW1wbGVHZW9tZXRyeSAmJiBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUgKTtcbiAgUG9seWdvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQb2x5Z29uO1xuXG4gIC8qKlxuICAgKiBBcHBlbmQgdGhlIHBhc3NlZCBsaW5lYXIgcmluZyB0byB0aGlzIHBvbHlnb24uXG4gICAqIEBwYXJhbSB7TGluZWFyUmluZ30gbGluZWFyUmluZyBMaW5lYXIgcmluZy5cbiAgICogQGFwaVxuICAgKi9cbiAgUG9seWdvbi5wcm90b3R5cGUuYXBwZW5kTGluZWFyUmluZyA9IGZ1bmN0aW9uIGFwcGVuZExpbmVhclJpbmcgKGxpbmVhclJpbmcpIHtcbiAgICBpZiAoIXRoaXMuZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyA9IGxpbmVhclJpbmcuZ2V0RmxhdENvb3JkaW5hdGVzKCkuc2xpY2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXh0ZW5kKHRoaXMuZmxhdENvb3JkaW5hdGVzLCBsaW5lYXJSaW5nLmdldEZsYXRDb29yZGluYXRlcygpKTtcbiAgICB9XG4gICAgdGhpcy5lbmRzXy5wdXNoKHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCk7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1ha2UgYSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBnZW9tZXRyeS5cbiAgICogQHJldHVybiB7IVBvbHlnb259IENsb25lLlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQGFwaVxuICAgKi9cbiAgUG9seWdvbi5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiBjbG9uZSAoKSB7XG4gICAgcmV0dXJuIG5ldyBQb2x5Z29uKHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKCksIHRoaXMubGF5b3V0LCB0aGlzLmVuZHNfLnNsaWNlKCkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgUG9seWdvbi5wcm90b3R5cGUuY2xvc2VzdFBvaW50WFkgPSBmdW5jdGlvbiBjbG9zZXN0UG9pbnRYWSAoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICBpZiAobWluU3F1YXJlZERpc3RhbmNlIDwgY2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZKHRoaXMuZ2V0RXh0ZW50KCksIHgsIHkpKSB7XG4gICAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xuICAgIH1cbiAgICBpZiAodGhpcy5tYXhEZWx0YVJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgIHRoaXMubWF4RGVsdGFfID0gTWF0aC5zcXJ0KGFycmF5TWF4U3F1YXJlZERlbHRhKFxuICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsIDApKTtcbiAgICAgIHRoaXMubWF4RGVsdGFSZXZpc2lvbl8gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgfVxuICAgIHJldHVybiBhc3NpZ25DbG9zZXN0QXJyYXlQb2ludChcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSxcbiAgICAgIHRoaXMubWF4RGVsdGFfLCB0cnVlLCB4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBQb2x5Z29uLnByb3RvdHlwZS5jb250YWluc1hZID0gZnVuY3Rpb24gY29udGFpbnNYWSAoeCwgeSkge1xuICAgIHJldHVybiBsaW5lYXJSaW5nc0NvbnRhaW5zWFkodGhpcy5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSwgeCwgeSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgYXJlYSBvZiB0aGUgcG9seWdvbiBvbiBwcm9qZWN0ZWQgcGxhbmUuXG4gICAqIEByZXR1cm4ge251bWJlcn0gQXJlYSAob24gcHJvamVjdGVkIHBsYW5lKS5cbiAgICogQGFwaVxuICAgKi9cbiAgUG9seWdvbi5wcm90b3R5cGUuZ2V0QXJlYSA9IGZ1bmN0aW9uIGdldEFyZWEgKCkge1xuICAgIHJldHVybiBsaW5lYXJSaW5nc0FyZWEodGhpcy5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY29vcmRpbmF0ZSBhcnJheSBmb3IgdGhpcyBnZW9tZXRyeS4gIFRoaXMgYXJyYXkgaGFzIHRoZSBzdHJ1Y3R1cmVcbiAgICogb2YgYSBHZW9KU09OIGNvb3JkaW5hdGUgYXJyYXkgZm9yIHBvbHlnb25zLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfcmlnaHQgT3JpZW50IGNvb3JkaW5hdGVzIGFjY29yZGluZyB0byB0aGUgcmlnaHQtaGFuZFxuICAgKiAgICAgcnVsZSAoY291bnRlci1jbG9ja3dpc2UgZm9yIGV4dGVyaW9yIGFuZCBjbG9ja3dpc2UgZm9yIGludGVyaW9yIHJpbmdzKS5cbiAgICogICAgIElmIGBmYWxzZWAsIGNvb3JkaW5hdGVzIHdpbGwgYmUgb3JpZW50ZWQgYWNjb3JkaW5nIHRvIHRoZSBsZWZ0LWhhbmQgcnVsZVxuICAgKiAgICAgKGNsb2Nrd2lzZSBmb3IgZXh0ZXJpb3IgYW5kIGNvdW50ZXItY2xvY2t3aXNlIGZvciBpbnRlcmlvciByaW5ncykuXG4gICAqICAgICBCeSBkZWZhdWx0LCBjb29yZGluYXRlIG9yaWVudGF0aW9uIHdpbGwgZGVwZW5kIG9uIGhvdyB0aGUgZ2VvbWV0cnkgd2FzXG4gICAqICAgICBjb25zdHJ1Y3RlZC5cbiAgICogQHJldHVybiB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IENvb3JkaW5hdGVzLlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQGFwaVxuICAgKi9cbiAgUG9seWdvbi5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiBnZXRDb29yZGluYXRlcyAob3B0X3JpZ2h0KSB7XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcztcbiAgICBpZiAob3B0X3JpZ2h0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKS5zbGljZSgpO1xuICAgICAgb3JpZW50TGluZWFyUmluZ3MoXG4gICAgICAgIGZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsIG9wdF9yaWdodCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZmxhdENvb3JkaW5hdGVzO1xuICAgIH1cblxuICAgIHJldHVybiBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheShcbiAgICAgIGZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBFbmRzLlxuICAgKi9cbiAgUG9seWdvbi5wcm90b3R5cGUuZ2V0RW5kcyA9IGZ1bmN0aW9uIGdldEVuZHMgKCkge1xuICAgIHJldHVybiB0aGlzLmVuZHNfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBJbnRlcmlvciBwb2ludC5cbiAgICovXG4gIFBvbHlnb24ucHJvdG90eXBlLmdldEZsYXRJbnRlcmlvclBvaW50ID0gZnVuY3Rpb24gZ2V0RmxhdEludGVyaW9yUG9pbnQgKCkge1xuICAgIGlmICh0aGlzLmZsYXRJbnRlcmlvclBvaW50UmV2aXNpb25fICE9IHRoaXMuZ2V0UmV2aXNpb24oKSkge1xuICAgICAgdmFyIGZsYXRDZW50ZXIgPSBnZXRDZW50ZXIodGhpcy5nZXRFeHRlbnQoKSk7XG4gICAgICB0aGlzLmZsYXRJbnRlcmlvclBvaW50XyA9IGdldEludGVyaW9yUG9pbnRPZkFycmF5KFxuICAgICAgICB0aGlzLmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCksIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlLFxuICAgICAgICBmbGF0Q2VudGVyLCAwKTtcbiAgICAgIHRoaXMuZmxhdEludGVyaW9yUG9pbnRSZXZpc2lvbl8gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZsYXRJbnRlcmlvclBvaW50XztcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIGFuIGludGVyaW9yIHBvaW50IG9mIHRoZSBwb2x5Z29uLlxuICAgKiBAcmV0dXJuIHtQb2ludH0gSW50ZXJpb3IgcG9pbnQgYXMgWFlNIGNvb3JkaW5hdGUsIHdoZXJlIE0gaXMgdGhlXG4gICAqIGxlbmd0aCBvZiB0aGUgaG9yaXpvbnRhbCBpbnRlcnNlY3Rpb24gdGhhdCB0aGUgcG9pbnQgYmVsb25ncyB0by5cbiAgICogQGFwaVxuICAgKi9cbiAgUG9seWdvbi5wcm90b3R5cGUuZ2V0SW50ZXJpb3JQb2ludCA9IGZ1bmN0aW9uIGdldEludGVyaW9yUG9pbnQgKCkge1xuICAgIHJldHVybiBuZXcgUG9pbnQodGhpcy5nZXRGbGF0SW50ZXJpb3JQb2ludCgpLCBHZW9tZXRyeUxheW91dC5YWU0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG51bWJlciBvZiByaW5ncyBvZiB0aGUgcG9seWdvbiwgIHRoaXMgaW5jbHVkZXMgdGhlIGV4dGVyaW9yXG4gICAqIHJpbmcgYW5kIGFueSBpbnRlcmlvciByaW5ncy5cbiAgICpcbiAgICogQHJldHVybiB7bnVtYmVyfSBOdW1iZXIgb2YgcmluZ3MuXG4gICAqIEBhcGlcbiAgICovXG4gIFBvbHlnb24ucHJvdG90eXBlLmdldExpbmVhclJpbmdDb3VudCA9IGZ1bmN0aW9uIGdldExpbmVhclJpbmdDb3VudCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW5kc18ubGVuZ3RoO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIE50aCBsaW5lYXIgcmluZyBvZiB0aGUgcG9seWdvbiBnZW9tZXRyeS4gUmV0dXJuIGBudWxsYCBpZiB0aGVcbiAgICogZ2l2ZW4gaW5kZXggaXMgb3V0IG9mIHJhbmdlLlxuICAgKiBUaGUgZXh0ZXJpb3IgbGluZWFyIHJpbmcgaXMgYXZhaWxhYmxlIGF0IGluZGV4IGAwYCBhbmQgdGhlIGludGVyaW9yIHJpbmdzXG4gICAqIGF0IGluZGV4IGAxYCBhbmQgYmV5b25kLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXguXG4gICAqIEByZXR1cm4ge0xpbmVhclJpbmd9IExpbmVhciByaW5nLlxuICAgKiBAYXBpXG4gICAqL1xuICBQb2x5Z29uLnByb3RvdHlwZS5nZXRMaW5lYXJSaW5nID0gZnVuY3Rpb24gZ2V0TGluZWFyUmluZyAoaW5kZXgpIHtcbiAgICBpZiAoaW5kZXggPCAwIHx8IHRoaXMuZW5kc18ubGVuZ3RoIDw9IGluZGV4KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBMaW5lYXJSaW5nKHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKFxuICAgICAgaW5kZXggPT09IDAgPyAwIDogdGhpcy5lbmRzX1tpbmRleCAtIDFdLCB0aGlzLmVuZHNfW2luZGV4XSksIHRoaXMubGF5b3V0KTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBsaW5lYXIgcmluZ3Mgb2YgdGhlIHBvbHlnb24uXG4gICAqIEByZXR1cm4ge0FycmF5PExpbmVhclJpbmc+fSBMaW5lYXIgcmluZ3MuXG4gICAqIEBhcGlcbiAgICovXG4gIFBvbHlnb24ucHJvdG90eXBlLmdldExpbmVhclJpbmdzID0gZnVuY3Rpb24gZ2V0TGluZWFyUmluZ3MgKCkge1xuICAgIHZhciBsYXlvdXQgPSB0aGlzLmxheW91dDtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5mbGF0Q29vcmRpbmF0ZXM7XG4gICAgdmFyIGVuZHMgPSB0aGlzLmVuZHNfO1xuICAgIHZhciBsaW5lYXJSaW5ncyA9IFtdO1xuICAgIHZhciBvZmZzZXQgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICB2YXIgbGluZWFyUmluZyA9IG5ldyBMaW5lYXJSaW5nKGZsYXRDb29yZGluYXRlcy5zbGljZShvZmZzZXQsIGVuZCksIGxheW91dCk7XG4gICAgICBsaW5lYXJSaW5ncy5wdXNoKGxpbmVhclJpbmcpO1xuICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICByZXR1cm4gbGluZWFyUmluZ3M7XG4gIH07XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IE9yaWVudGVkIGZsYXQgY29vcmRpbmF0ZXMuXG4gICAqL1xuICBQb2x5Z29uLnByb3RvdHlwZS5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIGdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzICgpIHtcbiAgICBpZiAodGhpcy5vcmllbnRlZFJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmZsYXRDb29yZGluYXRlcztcbiAgICAgIGlmIChsaW5lYXJSaW5nSXNPcmllbnRlZChcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSkpIHtcbiAgICAgICAgdGhpcy5vcmllbnRlZEZsYXRDb29yZGluYXRlc18gPSBmbGF0Q29vcmRpbmF0ZXM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXyA9IGZsYXRDb29yZGluYXRlcy5zbGljZSgpO1xuICAgICAgICB0aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXy5sZW5ndGggPVxuICAgICAgICAgICAgb3JpZW50TGluZWFyUmluZ3MoXG4gICAgICAgICAgICAgIHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSk7XG4gICAgICB9XG4gICAgICB0aGlzLm9yaWVudGVkUmV2aXNpb25fID0gdGhpcy5nZXRSZXZpc2lvbigpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5vcmllbnRlZEZsYXRDb29yZGluYXRlc187XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBQb2x5Z29uLnByb3RvdHlwZS5nZXRTaW1wbGlmaWVkR2VvbWV0cnlJbnRlcm5hbCA9IGZ1bmN0aW9uIGdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsIChzcXVhcmVkVG9sZXJhbmNlKSB7XG4gICAgdmFyIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICB2YXIgc2ltcGxpZmllZEVuZHMgPSBbXTtcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IHF1YW50aXplQXJyYXkoXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsXG4gICAgICBNYXRoLnNxcnQoc3F1YXJlZFRvbGVyYW5jZSksXG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCAwLCBzaW1wbGlmaWVkRW5kcyk7XG4gICAgcmV0dXJuIG5ldyBQb2x5Z29uKHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIEdlb21ldHJ5TGF5b3V0LlhZLCBzaW1wbGlmaWVkRW5kcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqIEBhcGlcbiAgICovXG4gIFBvbHlnb24ucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiBnZXRUeXBlICgpIHtcbiAgICByZXR1cm4gR2VvbWV0cnlUeXBlLlBPTFlHT047XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqIEBhcGlcbiAgICovXG4gIFBvbHlnb24ucHJvdG90eXBlLmludGVyc2VjdHNFeHRlbnQgPSBmdW5jdGlvbiBpbnRlcnNlY3RzRXh0ZW50IChleHRlbnQpIHtcbiAgICByZXR1cm4gaW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheShcbiAgICAgIHRoaXMuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKSwgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsIGV4dGVudCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIHBvbHlnb24uXG4gICAqIEBwYXJhbSB7IUFycmF5PEFycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICogQHBhcmFtIHtHZW9tZXRyeUxheW91dD19IG9wdF9sYXlvdXQgTGF5b3V0LlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQGFwaVxuICAgKi9cbiAgUG9seWdvbi5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiBzZXRDb29yZGluYXRlcyAoY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQpIHtcbiAgICB0aGlzLnNldExheW91dChvcHRfbGF5b3V0LCBjb29yZGluYXRlcywgMik7XG4gICAgaWYgKCF0aGlzLmZsYXRDb29yZGluYXRlcykge1xuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICB9XG4gICAgdmFyIGVuZHMgPSBkZWZsYXRlQ29vcmRpbmF0ZXNBcnJheShcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCBjb29yZGluYXRlcywgdGhpcy5zdHJpZGUsIHRoaXMuZW5kc18pO1xuICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IGVuZHMubGVuZ3RoID09PSAwID8gMCA6IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICByZXR1cm4gUG9seWdvbjtcbn0oU2ltcGxlR2VvbWV0cnkpKTtcblxuXG5leHBvcnQgZGVmYXVsdCBQb2x5Z29uO1xuXG5cbi8qKlxuICogQ3JlYXRlIGFuIGFwcHJveGltYXRpb24gb2YgYSBjaXJjbGUgb24gdGhlIHN1cmZhY2Ugb2YgYSBzcGhlcmUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2VudGVyIENlbnRlciAoYFtsb24sIGxhdF1gIGluIGRlZ3JlZXMpLlxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyBUaGUgZ3JlYXQtY2lyY2xlIGRpc3RhbmNlIGZyb20gdGhlIGNlbnRlciB0b1xuICogICAgIHRoZSBwb2x5Z29uIHZlcnRpY2VzLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfbiBPcHRpb25hbCBudW1iZXIgb2YgdmVydGljZXMgZm9yIHRoZSByZXN1bHRpbmdcbiAqICAgICBwb2x5Z29uLiBEZWZhdWx0IGlzIGAzMmAuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9zcGhlcmVSYWRpdXMgT3B0aW9uYWwgcmFkaXVzIGZvciB0aGUgc3BoZXJlIChkZWZhdWx0cyB0b1xuICogICAgIHRoZSBFYXJ0aCdzIG1lYW4gcmFkaXVzIHVzaW5nIHRoZSBXR1M4NCBlbGxpcHNvaWQpLlxuICogQHJldHVybiB7UG9seWdvbn0gVGhlIFwiY2lyY3VsYXJcIiBwb2x5Z29uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2lyY3VsYXIoY2VudGVyLCByYWRpdXMsIG9wdF9uLCBvcHRfc3BoZXJlUmFkaXVzKSB7XG4gIHZhciBuID0gb3B0X24gPyBvcHRfbiA6IDMyO1xuICAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovXG4gIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICBleHRlbmQoZmxhdENvb3JkaW5hdGVzLCBzcGhlcmVPZmZzZXQoY2VudGVyLCByYWRpdXMsIDIgKiBNYXRoLlBJICogaSAvIG4sIG9wdF9zcGhlcmVSYWRpdXMpKTtcbiAgfVxuICBmbGF0Q29vcmRpbmF0ZXMucHVzaChmbGF0Q29vcmRpbmF0ZXNbMF0sIGZsYXRDb29yZGluYXRlc1sxXSk7XG4gIHJldHVybiBuZXcgUG9seWdvbihmbGF0Q29vcmRpbmF0ZXMsIEdlb21ldHJ5TGF5b3V0LlhZLCBbZmxhdENvb3JkaW5hdGVzLmxlbmd0aF0pO1xufVxuXG5cbi8qKlxuICogQ3JlYXRlIGEgcG9seWdvbiBmcm9tIGFuIGV4dGVudC4gVGhlIGxheW91dCB1c2VkIGlzIGBYWWAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBUaGUgZXh0ZW50LlxuICogQHJldHVybiB7UG9seWdvbn0gVGhlIHBvbHlnb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRXh0ZW50KGV4dGVudCkge1xuICB2YXIgbWluWCA9IGV4dGVudFswXTtcbiAgdmFyIG1pblkgPSBleHRlbnRbMV07XG4gIHZhciBtYXhYID0gZXh0ZW50WzJdO1xuICB2YXIgbWF4WSA9IGV4dGVudFszXTtcbiAgdmFyIGZsYXRDb29yZGluYXRlcyA9XG4gICAgICBbbWluWCwgbWluWSwgbWluWCwgbWF4WSwgbWF4WCwgbWF4WSwgbWF4WCwgbWluWSwgbWluWCwgbWluWV07XG4gIHJldHVybiBuZXcgUG9seWdvbihmbGF0Q29vcmRpbmF0ZXMsIEdlb21ldHJ5TGF5b3V0LlhZLCBbZmxhdENvb3JkaW5hdGVzLmxlbmd0aF0pO1xufVxuXG5cbi8qKlxuICogQ3JlYXRlIGEgcmVndWxhciBwb2x5Z29uIGZyb20gYSBjaXJjbGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vQ2lyY2xlLmpzXCIpLmRlZmF1bHR9IGNpcmNsZSBDaXJjbGUgZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9zaWRlcyBOdW1iZXIgb2Ygc2lkZXMgb2YgdGhlIHBvbHlnb24uIERlZmF1bHQgaXMgMzIuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9hbmdsZSBTdGFydCBhbmdsZSBmb3IgdGhlIGZpcnN0IHZlcnRleCBvZiB0aGUgcG9seWdvbiBpblxuICogICAgIHJhZGlhbnMuIERlZmF1bHQgaXMgMC5cbiAqIEByZXR1cm4ge1BvbHlnb259IFBvbHlnb24gZ2VvbWV0cnkuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tQ2lyY2xlKGNpcmNsZSwgb3B0X3NpZGVzLCBvcHRfYW5nbGUpIHtcbiAgdmFyIHNpZGVzID0gb3B0X3NpZGVzID8gb3B0X3NpZGVzIDogMzI7XG4gIHZhciBzdHJpZGUgPSBjaXJjbGUuZ2V0U3RyaWRlKCk7XG4gIHZhciBsYXlvdXQgPSBjaXJjbGUuZ2V0TGF5b3V0KCk7XG4gIHZhciBjZW50ZXIgPSBjaXJjbGUuZ2V0Q2VudGVyKCk7XG4gIHZhciBhcnJheUxlbmd0aCA9IHN0cmlkZSAqIChzaWRlcyArIDEpO1xuICB2YXIgZmxhdENvb3JkaW5hdGVzID0gbmV3IEFycmF5KGFycmF5TGVuZ3RoKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheUxlbmd0aDsgaSArPSBzdHJpZGUpIHtcbiAgICBmbGF0Q29vcmRpbmF0ZXNbaV0gPSAwO1xuICAgIGZsYXRDb29yZGluYXRlc1tpICsgMV0gPSAwO1xuICAgIGZvciAodmFyIGogPSAyOyBqIDwgc3RyaWRlOyBqKyspIHtcbiAgICAgIGZsYXRDb29yZGluYXRlc1tpICsgal0gPSBjZW50ZXJbal07XG4gICAgfVxuICB9XG4gIHZhciBlbmRzID0gW2ZsYXRDb29yZGluYXRlcy5sZW5ndGhdO1xuICB2YXIgcG9seWdvbiA9IG5ldyBQb2x5Z29uKGZsYXRDb29yZGluYXRlcywgbGF5b3V0LCBlbmRzKTtcbiAgbWFrZVJlZ3VsYXIocG9seWdvbiwgY2VudGVyLCBjaXJjbGUuZ2V0UmFkaXVzKCksIG9wdF9hbmdsZSk7XG4gIHJldHVybiBwb2x5Z29uO1xufVxuXG5cbi8qKlxuICogTW9kaWZ5IHRoZSBjb29yZGluYXRlcyBvZiBhIHBvbHlnb24gdG8gbWFrZSBpdCBhIHJlZ3VsYXIgcG9seWdvbi5cbiAqIEBwYXJhbSB7UG9seWdvbn0gcG9seWdvbiBQb2x5Z29uIGdlb21ldHJ5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNlbnRlciBDZW50ZXIgb2YgdGhlIHJlZ3VsYXIgcG9seWdvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgUmFkaXVzIG9mIHRoZSByZWd1bGFyIHBvbHlnb24uXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9hbmdsZSBTdGFydCBhbmdsZSBmb3IgdGhlIGZpcnN0IHZlcnRleCBvZiB0aGUgcG9seWdvbiBpblxuICogICAgIHJhZGlhbnMuIERlZmF1bHQgaXMgMC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1ha2VSZWd1bGFyKHBvbHlnb24sIGNlbnRlciwgcmFkaXVzLCBvcHRfYW5nbGUpIHtcbiAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHBvbHlnb24uZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gIHZhciBzdHJpZGUgPSBwb2x5Z29uLmdldFN0cmlkZSgpO1xuICB2YXIgc2lkZXMgPSBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoIC8gc3RyaWRlIC0gMTtcbiAgdmFyIHN0YXJ0QW5nbGUgPSBvcHRfYW5nbGUgPyBvcHRfYW5nbGUgOiAwO1xuICBmb3IgKHZhciBpID0gMDsgaSA8PSBzaWRlczsgKytpKSB7XG4gICAgdmFyIG9mZnNldCA9IGkgKiBzdHJpZGU7XG4gICAgdmFyIGFuZ2xlID0gc3RhcnRBbmdsZSArIChtb2R1bG8oaSwgc2lkZXMpICogMiAqIE1hdGguUEkgLyBzaWRlcyk7XG4gICAgZmxhdENvb3JkaW5hdGVzW29mZnNldF0gPSBjZW50ZXJbMF0gKyAocmFkaXVzICogTWF0aC5jb3MoYW5nbGUpKTtcbiAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV0gPSBjZW50ZXJbMV0gKyAocmFkaXVzICogTWF0aC5zaW4oYW5nbGUpKTtcbiAgfVxuICBwb2x5Z29uLmNoYW5nZWQoKTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UG9seWdvbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvTGF5ZXJcbiAqL1xuaW1wb3J0IHtsaXN0ZW4sIHVubGlzdGVuQnlLZXl9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHtnZXRVaWR9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHtnZXRDaGFuZ2VFdmVudFR5cGV9IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQgQmFzZUxheWVyIGZyb20gJy4vQmFzZS5qcyc7XG5pbXBvcnQgTGF5ZXJQcm9wZXJ0eSBmcm9tICcuL1Byb3BlcnR5LmpzJztcbmltcG9ydCB7YXNzaWdufSBmcm9tICcuLi9vYmouanMnO1xuaW1wb3J0IFJlbmRlckV2ZW50VHlwZSBmcm9tICcuLi9yZW5kZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBTb3VyY2VTdGF0ZSBmcm9tICcuLi9zb3VyY2UvU3RhdGUuanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFtvcGFjaXR5PTFdIE9wYWNpdHkgKDAsIDEpLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdmlzaWJsZT10cnVlXSBWaXNpYmlsaXR5LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBUaGUgYm91bmRpbmcgZXh0ZW50IGZvciBsYXllciByZW5kZXJpbmcuICBUaGUgbGF5ZXIgd2lsbCBub3QgYmVcbiAqIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhpcyBleHRlbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pJbmRleF0gVGhlIHotaW5kZXggZm9yIGxheWVyIHJlbmRlcmluZy4gIEF0IHJlbmRlcmluZyB0aW1lLCB0aGUgbGF5ZXJzXG4gKiB3aWxsIGJlIG9yZGVyZWQsIGZpcnN0IGJ5IFotaW5kZXggYW5kIHRoZW4gYnkgcG9zaXRpb24uIFdoZW4gYHVuZGVmaW5lZGAsIGEgYHpJbmRleGAgb2YgMCBpcyBhc3N1bWVkXG4gKiBmb3IgbGF5ZXJzIHRoYXQgYXJlIGFkZGVkIHRvIHRoZSBtYXAncyBgbGF5ZXJzYCBjb2xsZWN0aW9uLCBvciBgSW5maW5pdHlgIHdoZW4gdGhlIGxheWVyJ3MgYHNldE1hcCgpYFxuICogbWV0aG9kIHdhcyB1c2VkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uXSBUaGUgbWluaW11bSByZXNvbHV0aW9uIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4UmVzb2x1dGlvbl0gVGhlIG1heGltdW0gcmVzb2x1dGlvbiAoZXhjbHVzaXZlKSBiZWxvdyB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3NvdXJjZS9Tb3VyY2UuanNcIikuZGVmYXVsdH0gW3NvdXJjZV0gU291cmNlIGZvciB0aGlzIGxheWVyLiAgSWYgbm90IHByb3ZpZGVkIHRvIHRoZSBjb25zdHJ1Y3RvcixcbiAqIHRoZSBzb3VyY2UgY2FuIGJlIHNldCBieSBjYWxsaW5nIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXIjc2V0U291cmNlIGxheWVyLnNldFNvdXJjZShzb3VyY2UpfSBhZnRlclxuICogY29uc3RydWN0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gW21hcF0gTWFwLlxuICovXG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTdGF0ZVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdH0gbGF5ZXJcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBvcGFjaXR5XG4gKiBAcHJvcGVydHkge1NvdXJjZVN0YXRlfSBzb3VyY2VTdGF0ZVxuICogQHByb3BlcnR5IHtib29sZWFufSB2aXNpYmxlXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IG1hbmFnZWRcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB6SW5kZXhcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtYXhSZXNvbHV0aW9uXG4gKiBAcHJvcGVydHkge251bWJlcn0gbWluUmVzb2x1dGlvblxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogQSB2aXN1YWwgcmVwcmVzZW50YXRpb24gb2YgcmFzdGVyIG9yIHZlY3RvciBtYXAgZGF0YS5cbiAqIExheWVycyBncm91cCB0b2dldGhlciB0aG9zZSBwcm9wZXJ0aWVzIHRoYXQgcGVydGFpbiB0byBob3cgdGhlIGRhdGEgaXMgdG8gYmVcbiAqIGRpc3BsYXllZCwgaXJyZXNwZWN0aXZlIG9mIHRoZSBzb3VyY2Ugb2YgdGhhdCBkYXRhLlxuICpcbiAqIExheWVycyBhcmUgdXN1YWxseSBhZGRlZCB0byBhIG1hcCB3aXRoIHtAbGluayBtb2R1bGU6b2wvTWFwI2FkZExheWVyfS4gQ29tcG9uZW50c1xuICogbGlrZSB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL1NlbGVjdH5TZWxlY3R9IHVzZSB1bm1hbmFnZWQgbGF5ZXJzXG4gKiBpbnRlcm5hbGx5LiBUaGVzZSB1bm1hbmFnZWQgbGF5ZXJzIGFyZSBhc3NvY2lhdGVkIHdpdGggdGhlIG1hcCB1c2luZ1xuICoge0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllcn5MYXllciNzZXRNYXB9IGluc3RlYWQuXG4gKlxuICogQSBnZW5lcmljIGBjaGFuZ2VgIGV2ZW50IGlzIGZpcmVkIHdoZW4gdGhlIHN0YXRlIG9mIHRoZSBzb3VyY2UgY2hhbmdlcy5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50LmpzXCIpLlJlbmRlckV2ZW50XG4gKi9cbnZhciBMYXllciA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEJhc2VMYXllcikge1xuICBmdW5jdGlvbiBMYXllcihvcHRpb25zKSB7XG5cbiAgICB2YXIgYmFzZU9wdGlvbnMgPSBhc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy5zb3VyY2U7XG5cbiAgICBCYXNlTGF5ZXIuY2FsbCh0aGlzLCBiYXNlT3B0aW9ucyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgKi9cbiAgICB0aGlzLm1hcFByZWNvbXBvc2VLZXlfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAqL1xuICAgIHRoaXMubWFwUmVuZGVyS2V5XyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgKi9cbiAgICB0aGlzLnNvdXJjZUNoYW5nZUtleV8gPSBudWxsO1xuXG4gICAgaWYgKG9wdGlvbnMubWFwKSB7XG4gICAgICB0aGlzLnNldE1hcChvcHRpb25zLm1hcCk7XG4gICAgfVxuXG4gICAgbGlzdGVuKHRoaXMsXG4gICAgICBnZXRDaGFuZ2VFdmVudFR5cGUoTGF5ZXJQcm9wZXJ0eS5TT1VSQ0UpLFxuICAgICAgdGhpcy5oYW5kbGVTb3VyY2VQcm9wZXJ0eUNoYW5nZV8sIHRoaXMpO1xuXG4gICAgdmFyIHNvdXJjZSA9IG9wdGlvbnMuc291cmNlID8gb3B0aW9ucy5zb3VyY2UgOiBudWxsO1xuICAgIHRoaXMuc2V0U291cmNlKHNvdXJjZSk7XG4gIH1cblxuICBpZiAoIEJhc2VMYXllciApIExheWVyLl9fcHJvdG9fXyA9IEJhc2VMYXllcjtcbiAgTGF5ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggQmFzZUxheWVyICYmIEJhc2VMYXllci5wcm90b3R5cGUgKTtcbiAgTGF5ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTGF5ZXI7XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBMYXllci5wcm90b3R5cGUuZ2V0TGF5ZXJzQXJyYXkgPSBmdW5jdGlvbiBnZXRMYXllcnNBcnJheSAob3B0X2FycmF5KSB7XG4gICAgdmFyIGFycmF5ID0gb3B0X2FycmF5ID8gb3B0X2FycmF5IDogW107XG4gICAgYXJyYXkucHVzaCh0aGlzKTtcbiAgICByZXR1cm4gYXJyYXk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBMYXllci5wcm90b3R5cGUuZ2V0TGF5ZXJTdGF0ZXNBcnJheSA9IGZ1bmN0aW9uIGdldExheWVyU3RhdGVzQXJyYXkgKG9wdF9zdGF0ZXMpIHtcbiAgICB2YXIgc3RhdGVzID0gb3B0X3N0YXRlcyA/IG9wdF9zdGF0ZXMgOiBbXTtcbiAgICBzdGF0ZXMucHVzaCh0aGlzLmdldExheWVyU3RhdGUoKSk7XG4gICAgcmV0dXJuIHN0YXRlcztcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBsYXllciBzb3VyY2UuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NvdXJjZS9Tb3VyY2UuanNcIikuZGVmYXVsdH0gVGhlIGxheWVyIHNvdXJjZSAob3IgYG51bGxgIGlmIG5vdCB5ZXQgc2V0KS5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgTGF5ZXIucHJvdG90eXBlLmdldFNvdXJjZSA9IGZ1bmN0aW9uIGdldFNvdXJjZSAoKSB7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXMuZ2V0KExheWVyUHJvcGVydHkuU09VUkNFKTtcbiAgICByZXR1cm4gKFxuICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9zb3VyY2UvU291cmNlLmpzXCIpLmRlZmF1bHR9ICovIChzb3VyY2UpIHx8IG51bGxcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgICogQGluaGVyaXREb2NcbiAgICAqL1xuICBMYXllci5wcm90b3R5cGUuZ2V0U291cmNlU3RhdGUgPSBmdW5jdGlvbiBnZXRTb3VyY2VTdGF0ZSAoKSB7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXMuZ2V0U291cmNlKCk7XG4gICAgcmV0dXJuICFzb3VyY2UgPyBTb3VyY2VTdGF0ZS5VTkRFRklORUQgOiBzb3VyY2UuZ2V0U3RhdGUoKTtcbiAgfTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIExheWVyLnByb3RvdHlwZS5oYW5kbGVTb3VyY2VDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlU291cmNlQ2hhbmdlXyAoKSB7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBMYXllci5wcm90b3R5cGUuaGFuZGxlU291cmNlUHJvcGVydHlDaGFuZ2VfID0gZnVuY3Rpb24gaGFuZGxlU291cmNlUHJvcGVydHlDaGFuZ2VfICgpIHtcbiAgICBpZiAodGhpcy5zb3VyY2VDaGFuZ2VLZXlfKSB7XG4gICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMuc291cmNlQ2hhbmdlS2V5Xyk7XG4gICAgICB0aGlzLnNvdXJjZUNoYW5nZUtleV8gPSBudWxsO1xuICAgIH1cbiAgICB2YXIgc291cmNlID0gdGhpcy5nZXRTb3VyY2UoKTtcbiAgICBpZiAoc291cmNlKSB7XG4gICAgICB0aGlzLnNvdXJjZUNoYW5nZUtleV8gPSBsaXN0ZW4oc291cmNlLFxuICAgICAgICBFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmhhbmRsZVNvdXJjZUNoYW5nZV8sIHRoaXMpO1xuICAgIH1cbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0cyB0aGUgbGF5ZXIgdG8gYmUgcmVuZGVyZWQgb24gdG9wIG9mIG90aGVyIGxheWVycyBvbiBhIG1hcC4gVGhlIG1hcCB3aWxsXG4gICAqIG5vdCBtYW5hZ2UgdGhpcyBsYXllciBpbiBpdHMgbGF5ZXJzIGNvbGxlY3Rpb24sIGFuZCB0aGUgY2FsbGJhY2sgaW5cbiAgICoge0BsaW5rIG1vZHVsZTpvbC9NYXAjZm9yRWFjaExheWVyQXRQaXhlbH0gd2lsbCByZWNlaXZlIGBudWxsYCBhcyBsYXllci4gVGhpc1xuICAgKiBpcyB1c2VmdWwgZm9yIHRlbXBvcmFyeSBsYXllcnMuIFRvIHJlbW92ZSBhbiB1bm1hbmFnZWQgbGF5ZXIgZnJvbSB0aGUgbWFwLFxuICAgKiB1c2UgYCNzZXRNYXAobnVsbClgLlxuICAgKlxuICAgKiBUbyBhZGQgdGhlIGxheWVyIHRvIGEgbWFwIGFuZCBoYXZlIGl0IG1hbmFnZWQgYnkgdGhlIG1hcCwgdXNlXG4gICAqIHtAbGluayBtb2R1bGU6b2wvTWFwI2FkZExheWVyfSBpbnN0ZWFkLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgKiBAYXBpXG4gICAqL1xuICBMYXllci5wcm90b3R5cGUuc2V0TWFwID0gZnVuY3Rpb24gc2V0TWFwIChtYXApIHtcbiAgICBpZiAodGhpcy5tYXBQcmVjb21wb3NlS2V5Xykge1xuICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLm1hcFByZWNvbXBvc2VLZXlfKTtcbiAgICAgIHRoaXMubWFwUHJlY29tcG9zZUtleV8gPSBudWxsO1xuICAgIH1cbiAgICBpZiAoIW1hcCkge1xuICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLm1hcFJlbmRlcktleV8pIHtcbiAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5tYXBSZW5kZXJLZXlfKTtcbiAgICAgIHRoaXMubWFwUmVuZGVyS2V5XyA9IG51bGw7XG4gICAgfVxuICAgIGlmIChtYXApIHtcbiAgICAgIHRoaXMubWFwUHJlY29tcG9zZUtleV8gPSBsaXN0ZW4obWFwLCBSZW5kZXJFdmVudFR5cGUuUFJFQ09NUE9TRSwgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgIHZhciByZW5kZXJFdmVudCA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50LmpzXCIpLmRlZmF1bHR9ICovIChldnQpO1xuICAgICAgICB2YXIgbGF5ZXJTdGF0ZSA9IHRoaXMuZ2V0TGF5ZXJTdGF0ZSgpO1xuICAgICAgICBsYXllclN0YXRlLm1hbmFnZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuZ2V0WkluZGV4KCkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGxheWVyU3RhdGUuekluZGV4ID0gSW5maW5pdHk7XG4gICAgICAgIH1cbiAgICAgICAgcmVuZGVyRXZlbnQuZnJhbWVTdGF0ZS5sYXllclN0YXRlc0FycmF5LnB1c2gobGF5ZXJTdGF0ZSk7XG4gICAgICAgIHJlbmRlckV2ZW50LmZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNbZ2V0VWlkKHRoaXMpXSA9IGxheWVyU3RhdGU7XG4gICAgICB9LCB0aGlzKTtcbiAgICAgIHRoaXMubWFwUmVuZGVyS2V5XyA9IGxpc3Rlbih0aGlzLCBFdmVudFR5cGUuQ0hBTkdFLCBtYXAucmVuZGVyLCBtYXApO1xuICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGxheWVyIHNvdXJjZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zb3VyY2UvU291cmNlLmpzXCIpLmRlZmF1bHR9IHNvdXJjZSBUaGUgbGF5ZXIgc291cmNlLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBMYXllci5wcm90b3R5cGUuc2V0U291cmNlID0gZnVuY3Rpb24gc2V0U291cmNlIChzb3VyY2UpIHtcbiAgICB0aGlzLnNldChMYXllclByb3BlcnR5LlNPVVJDRSwgc291cmNlKTtcbiAgfTtcblxuICByZXR1cm4gTGF5ZXI7XG59KEJhc2VMYXllcikpO1xuXG5cbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgbGF5ZXIgaXMgdmlzaWJsZSwgYW5kIGlmIHRoZSBwYXNzZWQgcmVzb2x1dGlvbiBpc1xuICogYmV0d2VlbiB0aGUgbGF5ZXIncyBtaW5SZXNvbHV0aW9uIGFuZCBtYXhSZXNvbHV0aW9uLiBUaGUgY29tcGFyaXNvbiBpc1xuICogaW5jbHVzaXZlIGZvciBgbWluUmVzb2x1dGlvbmAgYW5kIGV4Y2x1c2l2ZSBmb3IgYG1heFJlc29sdXRpb25gLlxuICogQHBhcmFtIHtTdGF0ZX0gbGF5ZXJTdGF0ZSBMYXllciBzdGF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgbGF5ZXIgaXMgdmlzaWJsZSBhdCB0aGUgZ2l2ZW4gcmVzb2x1dGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZpc2libGVBdFJlc29sdXRpb24obGF5ZXJTdGF0ZSwgcmVzb2x1dGlvbikge1xuICByZXR1cm4gbGF5ZXJTdGF0ZS52aXNpYmxlICYmIHJlc29sdXRpb24gPj0gbGF5ZXJTdGF0ZS5taW5SZXNvbHV0aW9uICYmXG4gICAgICByZXNvbHV0aW9uIDwgbGF5ZXJTdGF0ZS5tYXhSZXNvbHV0aW9uO1xufVxuXG5cbmV4cG9ydCBkZWZhdWx0IExheWVyO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1MYXllci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2Nsb3Nlc3RcbiAqL1xuaW1wb3J0IHtsZXJwLCBzcXVhcmVkRGlzdGFuY2UgYXMgc3F1YXJlZER4fSBmcm9tICcuLi8uLi9tYXRoLmpzJztcblxuXG4vKipcbiAqIFJldHVybnMgdGhlIHBvaW50IG9uIHRoZSAyRCBsaW5lIHNlZ21lbnQgZmxhdENvb3JkaW5hdGVzW29mZnNldDFdIHRvXG4gKiBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0Ml0gdGhhdCBpcyBjbG9zZXN0IHRvIHRoZSBwb2ludCAoeCwgeSkuICBFeHRyYVxuICogZGltZW5zaW9ucyBhcmUgbGluZWFybHkgaW50ZXJwb2xhdGVkLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQxIE9mZnNldCAxLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldDIgT2Zmc2V0IDIuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAqL1xuZnVuY3Rpb24gYXNzaWduQ2xvc2VzdChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldDEsIG9mZnNldDIsIHN0cmlkZSwgeCwgeSwgY2xvc2VzdFBvaW50KSB7XG4gIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQxXTtcbiAgdmFyIHkxID0gZmxhdENvb3JkaW5hdGVzW29mZnNldDEgKyAxXTtcbiAgdmFyIGR4ID0gZmxhdENvb3JkaW5hdGVzW29mZnNldDJdIC0geDE7XG4gIHZhciBkeSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQyICsgMV0gLSB5MTtcbiAgdmFyIG9mZnNldDtcbiAgaWYgKGR4ID09PSAwICYmIGR5ID09PSAwKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0MTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdCA9ICgoeCAtIHgxKSAqIGR4ICsgKHkgLSB5MSkgKiBkeSkgLyAoZHggKiBkeCArIGR5ICogZHkpO1xuICAgIGlmICh0ID4gMSkge1xuICAgICAgb2Zmc2V0ID0gb2Zmc2V0MjtcbiAgICB9IGVsc2UgaWYgKHQgPiAwKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmlkZTsgKytpKSB7XG4gICAgICAgIGNsb3Nlc3RQb2ludFtpXSA9IGxlcnAoZmxhdENvb3JkaW5hdGVzW29mZnNldDEgKyBpXSxcbiAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0MiArIGldLCB0KTtcbiAgICAgIH1cbiAgICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgIG9mZnNldCA9IG9mZnNldDE7XG4gICAgfVxuICB9XG4gIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IHN0cmlkZTsgKytpJDEpIHtcbiAgICBjbG9zZXN0UG9pbnRbaSQxXSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBpJDFdO1xuICB9XG4gIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG59XG5cblxuLyoqXG4gKiBSZXR1cm4gdGhlIHNxdWFyZWQgb2YgdGhlIGxhcmdlc3QgZGlzdGFuY2UgYmV0d2VlbiBhbnkgcGFpciBvZiBjb25zZWN1dGl2ZVxuICogY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heCBNYXggc3F1YXJlZCBkZWx0YS5cbiAqIEByZXR1cm4ge251bWJlcn0gTWF4IHNxdWFyZWQgZGVsdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXhTcXVhcmVkRGVsdGEoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBtYXgpIHtcbiAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gIHZhciB5MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgZm9yIChvZmZzZXQgKz0gc3RyaWRlOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICB2YXIgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICB2YXIgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgdmFyIHNxdWFyZWREZWx0YSA9IHNxdWFyZWREeCh4MSwgeTEsIHgyLCB5Mik7XG4gICAgaWYgKHNxdWFyZWREZWx0YSA+IG1heCkge1xuICAgICAgbWF4ID0gc3F1YXJlZERlbHRhO1xuICAgIH1cbiAgICB4MSA9IHgyO1xuICAgIHkxID0geTI7XG4gIH1cbiAgcmV0dXJuIG1heDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IE1heCBzcXVhcmVkIGRlbHRhLlxuICogQHJldHVybiB7bnVtYmVyfSBNYXggc3F1YXJlZCBkZWx0YS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFycmF5TWF4U3F1YXJlZERlbHRhKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIG1heCkge1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICBtYXggPSBtYXhTcXVhcmVkRGVsdGEoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIG1heCk7XG4gICAgb2Zmc2V0ID0gZW5kO1xuICB9XG4gIHJldHVybiBtYXg7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heCBNYXggc3F1YXJlZCBkZWx0YS5cbiAqIEByZXR1cm4ge251bWJlcn0gTWF4IHNxdWFyZWQgZGVsdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aUFycmF5TWF4U3F1YXJlZERlbHRhKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCBtYXgpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgbWF4ID0gYXJyYXlNYXhTcXVhcmVkRGVsdGEoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBtYXgpO1xuICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgfVxuICByZXR1cm4gbWF4O1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhEZWx0YSBNYXggZGVsdGEuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzUmluZyBJcyByaW5nLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfdG1wUG9pbnQgVGVtcG9yYXJ5IHBvaW50IG9iamVjdC5cbiAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduQ2xvc2VzdFBvaW50KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsXG4gIHN0cmlkZSwgbWF4RGVsdGEsIGlzUmluZywgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UsXG4gIG9wdF90bXBQb2ludCkge1xuICBpZiAob2Zmc2V0ID09IGVuZCkge1xuICAgIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG4gIH1cbiAgdmFyIGksIHNxdWFyZWREaXN0YW5jZTtcbiAgaWYgKG1heERlbHRhID09PSAwKSB7XG4gICAgLy8gQWxsIHBvaW50cyBhcmUgaWRlbnRpY2FsLCBzbyBqdXN0IHRlc3QgdGhlIGZpcnN0IHBvaW50LlxuICAgIHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREeChcbiAgICAgIHgsIHksIGZsYXRDb29yZGluYXRlc1tvZmZzZXRdLCBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV0pO1xuICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICBjbG9zZXN0UG9pbnRbaV0gPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgaV07XG4gICAgICB9XG4gICAgICBjbG9zZXN0UG9pbnQubGVuZ3RoID0gc3RyaWRlO1xuICAgICAgcmV0dXJuIHNxdWFyZWREaXN0YW5jZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbiAgICB9XG4gIH1cbiAgdmFyIHRtcFBvaW50ID0gb3B0X3RtcFBvaW50ID8gb3B0X3RtcFBvaW50IDogW05hTiwgTmFOXTtcbiAgdmFyIGluZGV4ID0gb2Zmc2V0ICsgc3RyaWRlO1xuICB3aGlsZSAoaW5kZXggPCBlbmQpIHtcbiAgICBhc3NpZ25DbG9zZXN0KFxuICAgICAgZmxhdENvb3JkaW5hdGVzLCBpbmRleCAtIHN0cmlkZSwgaW5kZXgsIHN0cmlkZSwgeCwgeSwgdG1wUG9pbnQpO1xuICAgIHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREeCh4LCB5LCB0bXBQb2ludFswXSwgdG1wUG9pbnRbMV0pO1xuICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgIG1pblNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREaXN0YW5jZTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICBjbG9zZXN0UG9pbnRbaV0gPSB0bXBQb2ludFtpXTtcbiAgICAgIH1cbiAgICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG4gICAgICBpbmRleCArPSBzdHJpZGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNraXAgYWhlYWQgbXVsdGlwbGUgcG9pbnRzLCBiZWNhdXNlIHdlIGtub3cgdGhhdCBhbGwgdGhlIHNraXBwZWRcbiAgICAgIC8vIHBvaW50cyBjYW5ub3QgYmUgYW55IGNsb3NlciB0aGFuIHRoZSBjbG9zZXN0IHBvaW50IHdlIGhhdmUgZm91bmQgc29cbiAgICAgIC8vIGZhci4gIFdlIGtub3cgdGhpcyBiZWNhdXNlIHdlIGtub3cgaG93IGNsb3NlIHRoZSBjdXJyZW50IHBvaW50IGlzLCBob3dcbiAgICAgIC8vIGNsb3NlIHRoZSBjbG9zZXN0IHBvaW50IHdlIGhhdmUgZm91bmQgc28gZmFyIGlzLCBhbmQgdGhlIG1heGltdW1cbiAgICAgIC8vIGRpc3RhbmNlIGJldHdlZW4gY29uc2VjdXRpdmUgcG9pbnRzLiAgRm9yIGV4YW1wbGUsIGlmIHdlJ3JlIGN1cnJlbnRseVxuICAgICAgLy8gYXQgZGlzdGFuY2UgMTAsIHRoZSBiZXN0IHdlJ3ZlIGZvdW5kIHNvIGZhciBpcyAzLCBhbmQgdGhhdCB0aGUgbWF4aW11bVxuICAgICAgLy8gZGlzdGFuY2UgYmV0d2VlbiBjb25zZWN1dGl2ZSBwb2ludHMgaXMgMiwgdGhlbiB3ZSdsbCBuZWVkIHRvIHNraXAgYXRcbiAgICAgIC8vIGxlYXN0ICgxMCAtIDMpIC8gMiA9PSAzIChyb3VuZGVkIGRvd24pIHBvaW50cyB0byBoYXZlIGFueSBjaGFuY2Ugb2ZcbiAgICAgIC8vIGZpbmRpbmcgYSBjbG9zZXIgcG9pbnQuICBXZSB1c2UgTWF0aC5tYXgoLi4uLCAxKSB0byBlbnN1cmUgdGhhdCB3ZVxuICAgICAgLy8gYWx3YXlzIGFkdmFuY2UgYXQgbGVhc3Qgb25lIHBvaW50LCB0byBhdm9pZCBhbiBpbmZpbml0ZSBsb29wLlxuICAgICAgaW5kZXggKz0gc3RyaWRlICogTWF0aC5tYXgoXG4gICAgICAgICgoTWF0aC5zcXJ0KHNxdWFyZWREaXN0YW5jZSkgLVxuICAgICAgICAgICAgTWF0aC5zcXJ0KG1pblNxdWFyZWREaXN0YW5jZSkpIC8gbWF4RGVsdGEpIHwgMCwgMSk7XG4gICAgfVxuICB9XG4gIGlmIChpc1JpbmcpIHtcbiAgICAvLyBDaGVjayB0aGUgY2xvc2luZyBzZWdtZW50LlxuICAgIGFzc2lnbkNsb3Nlc3QoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIGVuZCAtIHN0cmlkZSwgb2Zmc2V0LCBzdHJpZGUsIHgsIHksIHRtcFBvaW50KTtcbiAgICBzcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRHgoeCwgeSwgdG1wUG9pbnRbMF0sIHRtcFBvaW50WzFdKTtcbiAgICBpZiAoc3F1YXJlZERpc3RhbmNlIDwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICBtaW5TcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRGlzdGFuY2U7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gdG1wUG9pbnRbaV07XG4gICAgICB9XG4gICAgICBjbG9zZXN0UG9pbnQubGVuZ3RoID0gc3RyaWRlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhEZWx0YSBNYXggZGVsdGEuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzUmluZyBJcyByaW5nLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfdG1wUG9pbnQgVGVtcG9yYXJ5IHBvaW50IG9iamVjdC5cbiAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduQ2xvc2VzdEFycmF5UG9pbnQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsXG4gIHN0cmlkZSwgbWF4RGVsdGEsIGlzUmluZywgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UsXG4gIG9wdF90bXBQb2ludCkge1xuICB2YXIgdG1wUG9pbnQgPSBvcHRfdG1wUG9pbnQgPyBvcHRfdG1wUG9pbnQgOiBbTmFOLCBOYU5dO1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICBtaW5TcXVhcmVkRGlzdGFuY2UgPSBhc3NpZ25DbG9zZXN0UG9pbnQoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsXG4gICAgICBtYXhEZWx0YSwgaXNSaW5nLCB4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSwgdG1wUG9pbnQpO1xuICAgIG9mZnNldCA9IGVuZDtcbiAgfVxuICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhEZWx0YSBNYXggZGVsdGEuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzUmluZyBJcyByaW5nLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfdG1wUG9pbnQgVGVtcG9yYXJ5IHBvaW50IG9iamVjdC5cbiAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduQ2xvc2VzdE11bHRpQXJyYXlQb2ludChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCxcbiAgZW5kc3MsIHN0cmlkZSwgbWF4RGVsdGEsIGlzUmluZywgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UsXG4gIG9wdF90bXBQb2ludCkge1xuICB2YXIgdG1wUG9pbnQgPSBvcHRfdG1wUG9pbnQgPyBvcHRfdG1wUG9pbnQgOiBbTmFOLCBOYU5dO1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICBtaW5TcXVhcmVkRGlzdGFuY2UgPSBhc3NpZ25DbG9zZXN0QXJyYXlQb2ludChcbiAgICAgIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsXG4gICAgICBtYXhEZWx0YSwgaXNSaW5nLCB4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSwgdG1wUG9pbnQpO1xuICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgfVxuICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbG9zZXN0LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9WZWN0b3JcbiAqL1xuaW1wb3J0IExheWVyVHlwZSBmcm9tICcuLi9MYXllclR5cGUuanMnO1xuaW1wb3J0IExheWVyIGZyb20gJy4vTGF5ZXIuanMnO1xuaW1wb3J0IFZlY3RvclJlbmRlclR5cGUgZnJvbSAnLi9WZWN0b3JSZW5kZXJUeXBlLmpzJztcbmltcG9ydCB7YXNzaWdufSBmcm9tICcuLi9vYmouanMnO1xuaW1wb3J0IHtjcmVhdGVEZWZhdWx0U3R5bGUsIHRvRnVuY3Rpb24gYXMgdG9TdHlsZUZ1bmN0aW9ufSBmcm9tICcuLi9zdHlsZS9TdHlsZS5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSAoMCwgMSkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt2aXNpYmxlPXRydWVdIFZpc2liaWxpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBib3VuZGluZyBleHRlbnQgZm9yIGxheWVyIHJlbmRlcmluZy4gIFRoZSBsYXllciB3aWxsIG5vdCBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGlzIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4XSBUaGUgei1pbmRleCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgQXQgcmVuZGVyaW5nIHRpbWUsIHRoZSBsYXllcnNcbiAqIHdpbGwgYmUgb3JkZXJlZCwgZmlyc3QgYnkgWi1pbmRleCBhbmQgdGhlbiBieSBwb3NpdGlvbi4gV2hlbiBgdW5kZWZpbmVkYCwgYSBgekluZGV4YCBvZiAwIGlzIGFzc3VtZWRcbiAqIGZvciBsYXllcnMgdGhhdCBhcmUgYWRkZWQgdG8gdGhlIG1hcCdzIGBsYXllcnNgIGNvbGxlY3Rpb24sIG9yIGBJbmZpbml0eWAgd2hlbiB0aGUgbGF5ZXIncyBgc2V0TWFwKClgXG4gKiBtZXRob2Qgd2FzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIChleGNsdXNpdmUpIGJlbG93IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcmVuZGVyLmpzXCIpLk9yZGVyRnVuY3Rpb259IFtyZW5kZXJPcmRlcl0gUmVuZGVyIG9yZGVyLiBGdW5jdGlvbiB0byBiZSB1c2VkIHdoZW4gc29ydGluZ1xuICogZmVhdHVyZXMgYmVmb3JlIHJlbmRlcmluZy4gQnkgZGVmYXVsdCBmZWF0dXJlcyBhcmUgZHJhd24gaW4gdGhlIG9yZGVyIHRoYXQgdGhleSBhcmUgY3JlYXRlZC4gVXNlXG4gKiBgbnVsbGAgdG8gYXZvaWQgdGhlIHNvcnQsIGJ1dCBnZXQgYW4gdW5kZWZpbmVkIGRyYXcgb3JkZXIuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JlbmRlckJ1ZmZlcj0xMDBdIFRoZSBidWZmZXIgaW4gcGl4ZWxzIGFyb3VuZCB0aGUgdmlld3BvcnQgZXh0ZW50IHVzZWQgYnkgdGhlXG4gKiByZW5kZXJlciB3aGVuIGdldHRpbmcgZmVhdHVyZXMgZnJvbSB0aGUgdmVjdG9yIHNvdXJjZSBmb3IgdGhlIHJlbmRlcmluZyBvciBoaXQtZGV0ZWN0aW9uLlxuICogUmVjb21tZW5kZWQgdmFsdWU6IHRoZSBzaXplIG9mIHRoZSBsYXJnZXN0IHN5bWJvbCwgbGluZSB3aWR0aCBvciBsYWJlbC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9WZWN0b3JSZW5kZXJUeXBlLmpzXCIpLmRlZmF1bHR8c3RyaW5nfSBbcmVuZGVyTW9kZT0ndmVjdG9yJ10gUmVuZGVyIG1vZGUgZm9yIHZlY3RvciBsYXllcnM6XG4gKiAgKiBgJ2ltYWdlJ2A6IFZlY3RvciBsYXllcnMgYXJlIHJlbmRlcmVkIGFzIGltYWdlcy4gR3JlYXQgcGVyZm9ybWFuY2UsIGJ1dCBwb2ludCBzeW1ib2xzIGFuZFxuICogICAgdGV4dHMgYXJlIGFsd2F5cyByb3RhdGVkIHdpdGggdGhlIHZpZXcgYW5kIHBpeGVscyBhcmUgc2NhbGVkIGR1cmluZyB6b29tIGFuaW1hdGlvbnMuXG4gKiAgKiBgJ3ZlY3RvcidgOiBWZWN0b3IgbGF5ZXJzIGFyZSByZW5kZXJlZCBhcyB2ZWN0b3JzLiBNb3N0IGFjY3VyYXRlIHJlbmRlcmluZyBldmVuIGR1cmluZ1xuICogICAgYW5pbWF0aW9ucywgYnV0IHNsb3dlciBwZXJmb3JtYW5jZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc291cmNlL1ZlY3Rvci5qc1wiKS5kZWZhdWx0fSBbc291cmNlXSBTb3VyY2UuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBbbWFwXSBTZXRzIHRoZSBsYXllciBhcyBvdmVybGF5IG9uIGEgbWFwLiBUaGUgbWFwIHdpbGwgbm90IG1hbmFnZVxuICogdGhpcyBsYXllciBpbiBpdHMgbGF5ZXJzIGNvbGxlY3Rpb24sIGFuZCB0aGUgbGF5ZXIgd2lsbCBiZSByZW5kZXJlZCBvbiB0b3AuIFRoaXMgaXMgdXNlZnVsIGZvclxuICogdGVtcG9yYXJ5IGxheWVycy4gVGhlIHN0YW5kYXJkIHdheSB0byBhZGQgYSBsYXllciB0byBhIG1hcCBhbmQgaGF2ZSBpdCBtYW5hZ2VkIGJ5IHRoZSBtYXAgaXMgdG9cbiAqIHVzZSB7QGxpbmsgbW9kdWxlOm9sL01hcCNhZGRMYXllcn0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtkZWNsdXR0ZXI9ZmFsc2VdIERlY2x1dHRlciBpbWFnZXMgYW5kIHRleHQuIERlY2x1dHRlcmluZyBpcyBhcHBsaWVkIHRvIGFsbFxuICogaW1hZ2UgYW5kIHRleHQgc3R5bGVzLCBhbmQgdGhlIHByaW9yaXR5IGlzIGRlZmluZWQgYnkgdGhlIHotaW5kZXggb2YgdGhlIHN0eWxlLiBMb3dlciB6LWluZGV4XG4gKiBtZWFucyBoaWdoZXIgcHJpb3JpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLlN0eWxlTGlrZX0gW3N0eWxlXSBMYXllciBzdHlsZS4gU2VlXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3N0eWxlfSBmb3IgZGVmYXVsdCBzdHlsZSB3aGljaCB3aWxsIGJlIHVzZWQgaWYgdGhpcyBpcyBub3QgZGVmaW5lZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3VwZGF0ZVdoaWxlQW5pbWF0aW5nPWZhbHNlXSBXaGVuIHNldCB0byBgdHJ1ZWAgYW5kIGByZW5kZXJNb2RlYFxuICogaXMgYHZlY3RvcmAsIGZlYXR1cmUgYmF0Y2hlcyB3aWxsIGJlIHJlY3JlYXRlZCBkdXJpbmcgYW5pbWF0aW9ucy4gVGhpcyBtZWFucyB0aGF0IG5vXG4gKiB2ZWN0b3JzIHdpbGwgYmUgc2hvd24gY2xpcHBlZCwgYnV0IHRoZSBzZXR0aW5nIHdpbGwgaGF2ZSBhIHBlcmZvcm1hbmNlIGltcGFjdCBmb3IgbGFyZ2VcbiAqIGFtb3VudHMgb2YgdmVjdG9yIGRhdGEuIFdoZW4gc2V0IHRvIGBmYWxzZWAsIGJhdGNoZXMgd2lsbCBiZSByZWNyZWF0ZWQgd2hlbiBubyBhbmltYXRpb25cbiAqIGlzIGFjdGl2ZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3VwZGF0ZVdoaWxlSW50ZXJhY3Rpbmc9ZmFsc2VdIFdoZW4gc2V0IHRvIGB0cnVlYCBhbmQgYHJlbmRlck1vZGVgXG4gKiBpcyBgdmVjdG9yYCwgZmVhdHVyZSBiYXRjaGVzIHdpbGwgYmUgcmVjcmVhdGVkIGR1cmluZyBpbnRlcmFjdGlvbnMuIFNlZSBhbHNvXG4gKiBgdXBkYXRlV2hpbGVBbmltYXRpbmdgLlxuICovXG5cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xudmFyIFByb3BlcnR5ID0ge1xuICBSRU5ERVJfT1JERVI6ICdyZW5kZXJPcmRlcidcbn07XG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBWZWN0b3IgZGF0YSB0aGF0IGlzIHJlbmRlcmVkIGNsaWVudC1zaWRlLlxuICogTm90ZSB0aGF0IGFueSBwcm9wZXJ0eSBzZXQgaW4gdGhlIG9wdGlvbnMgaXMgc2V0IGFzIGEge0BsaW5rIG1vZHVsZTpvbC9PYmplY3R+QmFzZU9iamVjdH1cbiAqIHByb3BlcnR5IG9uIHRoZSBsYXllciBvYmplY3Q7IGZvciBleGFtcGxlLCBzZXR0aW5nIGB0aXRsZTogJ015IFRpdGxlJ2AgaW4gdGhlXG4gKiBvcHRpb25zIG1lYW5zIHRoYXQgYHRpdGxlYCBpcyBvYnNlcnZhYmxlLCBhbmQgaGFzIGdldC9zZXQgYWNjZXNzb3JzLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIFZlY3RvckxheWVyID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoTGF5ZXIpIHtcbiAgZnVuY3Rpb24gVmVjdG9yTGF5ZXIob3B0X29wdGlvbnMpIHtcbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID9cbiAgICAgIG9wdF9vcHRpb25zIDogLyoqIEB0eXBlIHtPcHRpb25zfSAqLyAoe30pO1xuXG4gICAgdmFyIGJhc2VPcHRpb25zID0gYXNzaWduKHt9LCBvcHRpb25zKTtcblxuICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy5zdHlsZTtcbiAgICBkZWxldGUgYmFzZU9wdGlvbnMucmVuZGVyQnVmZmVyO1xuICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy51cGRhdGVXaGlsZUFuaW1hdGluZztcbiAgICBkZWxldGUgYmFzZU9wdGlvbnMudXBkYXRlV2hpbGVJbnRlcmFjdGluZztcbiAgICBMYXllci5jYWxsKHRoaXMsIGJhc2VPcHRpb25zKTtcblxuICAgIC8qKlxuICAgICogQHByaXZhdGVcbiAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICovXG4gICAgdGhpcy5kZWNsdXR0ZXJfID0gb3B0aW9ucy5kZWNsdXR0ZXIgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZGVjbHV0dGVyIDogZmFsc2U7XG5cbiAgICAvKipcbiAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgKiBAcHJpdmF0ZVxuICAgICovXG4gICAgdGhpcy5yZW5kZXJCdWZmZXJfID0gb3B0aW9ucy5yZW5kZXJCdWZmZXIgIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRpb25zLnJlbmRlckJ1ZmZlciA6IDEwMDtcblxuICAgIC8qKlxuICAgICogVXNlciBwcm92aWRlZCBzdHlsZS5cbiAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZUxpa2V9XG4gICAgKiBAcHJpdmF0ZVxuICAgICovXG4gICAgdGhpcy5zdHlsZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgKiBTdHlsZSBmdW5jdGlvbiBmb3IgdXNlIHdpdGhpbiB0aGUgbGlicmFyeS5cbiAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZUZ1bmN0aW9ufHVuZGVmaW5lZH1cbiAgICAqIEBwcml2YXRlXG4gICAgKi9cbiAgICB0aGlzLnN0eWxlRnVuY3Rpb25fID0gdW5kZWZpbmVkO1xuXG4gICAgdGhpcy5zZXRTdHlsZShvcHRpb25zLnN0eWxlKTtcblxuICAgIC8qKlxuICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgKiBAcHJpdmF0ZVxuICAgICovXG4gICAgdGhpcy51cGRhdGVXaGlsZUFuaW1hdGluZ18gPSBvcHRpb25zLnVwZGF0ZVdoaWxlQW5pbWF0aW5nICE9PSB1bmRlZmluZWQgP1xuICAgICAgb3B0aW9ucy51cGRhdGVXaGlsZUFuaW1hdGluZyA6IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAqIEBwcml2YXRlXG4gICAgKi9cbiAgICB0aGlzLnVwZGF0ZVdoaWxlSW50ZXJhY3RpbmdfID0gb3B0aW9ucy51cGRhdGVXaGlsZUludGVyYWN0aW5nICE9PSB1bmRlZmluZWQgP1xuICAgICAgb3B0aW9ucy51cGRhdGVXaGlsZUludGVyYWN0aW5nIDogZmFsc2U7XG5cbiAgICAvKipcbiAgICAqIEBwcml2YXRlXG4gICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9WZWN0b3JUaWxlUmVuZGVyVHlwZS5qc1wiKS5kZWZhdWx0fHN0cmluZ31cbiAgICAqL1xuICAgIHRoaXMucmVuZGVyTW9kZV8gPSBvcHRpb25zLnJlbmRlck1vZGUgfHwgVmVjdG9yUmVuZGVyVHlwZS5WRUNUT1I7XG5cbiAgICAvKipcbiAgICAqIFRoZSBsYXllciB0eXBlLlxuICAgICogQHByb3RlY3RlZFxuICAgICogQHR5cGUge2ltcG9ydChcIi4uL0xheWVyVHlwZS5qc1wiKS5kZWZhdWx0fVxuICAgICovXG4gICAgdGhpcy50eXBlID0gTGF5ZXJUeXBlLlZFQ1RPUjtcblxuICB9XG5cbiAgaWYgKCBMYXllciApIFZlY3RvckxheWVyLl9fcHJvdG9fXyA9IExheWVyO1xuICBWZWN0b3JMYXllci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBMYXllciAmJiBMYXllci5wcm90b3R5cGUgKTtcbiAgVmVjdG9yTGF5ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVmVjdG9yTGF5ZXI7XG5cbiAgLyoqXG4gICogQHJldHVybiB7Ym9vbGVhbn0gRGVjbHV0dGVyLlxuICAqL1xuICBWZWN0b3JMYXllci5wcm90b3R5cGUuZ2V0RGVjbHV0dGVyID0gZnVuY3Rpb24gZ2V0RGVjbHV0dGVyICgpIHtcbiAgICByZXR1cm4gdGhpcy5kZWNsdXR0ZXJfO1xuICB9O1xuXG4gIC8qKlxuICAqIEBwYXJhbSB7Ym9vbGVhbn0gZGVjbHV0dGVyIERlY2x1dHRlci5cbiAgKi9cbiAgVmVjdG9yTGF5ZXIucHJvdG90eXBlLnNldERlY2x1dHRlciA9IGZ1bmN0aW9uIHNldERlY2x1dHRlciAoZGVjbHV0dGVyKSB7XG4gICAgdGhpcy5kZWNsdXR0ZXJfID0gZGVjbHV0dGVyO1xuICB9O1xuXG4gIC8qKlxuICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFJlbmRlciBidWZmZXIuXG4gICovXG4gIFZlY3RvckxheWVyLnByb3RvdHlwZS5nZXRSZW5kZXJCdWZmZXIgPSBmdW5jdGlvbiBnZXRSZW5kZXJCdWZmZXIgKCkge1xuICAgIHJldHVybiB0aGlzLnJlbmRlckJ1ZmZlcl87XG4gIH07XG5cbiAgLyoqXG4gICogQHJldHVybiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0LCBpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQpOiBudW1iZXJ8bnVsbHx1bmRlZmluZWR9IFJlbmRlclxuICAqICAgICBvcmRlci5cbiAgKi9cbiAgVmVjdG9yTGF5ZXIucHJvdG90eXBlLmdldFJlbmRlck9yZGVyID0gZnVuY3Rpb24gZ2V0UmVuZGVyT3JkZXIgKCkge1xuICAgIHJldHVybiAoXG4gICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9yZW5kZXIuanNcIikuT3JkZXJGdW5jdGlvbnxudWxsfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LlJFTkRFUl9PUkRFUikpXG4gICAgKTtcbiAgfTtcblxuICAvKipcbiAgKiBHZXQgdGhlIHN0eWxlIGZvciBmZWF0dXJlcy4gIFRoaXMgcmV0dXJucyB3aGF0ZXZlciB3YXMgcGFzc2VkIHRvIHRoZSBgc3R5bGVgXG4gICogb3B0aW9uIGF0IGNvbnN0cnVjdGlvbiBvciB0byB0aGUgYHNldFN0eWxlYCBtZXRob2QuXG4gICogQHJldHVybiB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVMaWtlfVxuICAqICAgICBMYXllciBzdHlsZS5cbiAgKiBAYXBpXG4gICovXG4gIFZlY3RvckxheWVyLnByb3RvdHlwZS5nZXRTdHlsZSA9IGZ1bmN0aW9uIGdldFN0eWxlICgpIHtcbiAgICByZXR1cm4gdGhpcy5zdHlsZV87XG4gIH07XG5cbiAgLyoqXG4gICogR2V0IHRoZSBzdHlsZSBmdW5jdGlvbi5cbiAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZUZ1bmN0aW9ufHVuZGVmaW5lZH0gTGF5ZXIgc3R5bGUgZnVuY3Rpb24uXG4gICogQGFwaVxuICAqL1xuICBWZWN0b3JMYXllci5wcm90b3R5cGUuZ2V0U3R5bGVGdW5jdGlvbiA9IGZ1bmN0aW9uIGdldFN0eWxlRnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnN0eWxlRnVuY3Rpb25fO1xuICB9O1xuXG4gIC8qKlxuICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHJlbmRlcmVkIGxheWVyIHNob3VsZCBiZSB1cGRhdGVkIHdoaWxlXG4gICogICAgIGFuaW1hdGluZy5cbiAgKi9cbiAgVmVjdG9yTGF5ZXIucHJvdG90eXBlLmdldFVwZGF0ZVdoaWxlQW5pbWF0aW5nID0gZnVuY3Rpb24gZ2V0VXBkYXRlV2hpbGVBbmltYXRpbmcgKCkge1xuICAgIHJldHVybiB0aGlzLnVwZGF0ZVdoaWxlQW5pbWF0aW5nXztcbiAgfTtcblxuICAvKipcbiAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSByZW5kZXJlZCBsYXllciBzaG91bGQgYmUgdXBkYXRlZCB3aGlsZVxuICAqICAgICBpbnRlcmFjdGluZy5cbiAgKi9cbiAgVmVjdG9yTGF5ZXIucHJvdG90eXBlLmdldFVwZGF0ZVdoaWxlSW50ZXJhY3RpbmcgPSBmdW5jdGlvbiBnZXRVcGRhdGVXaGlsZUludGVyYWN0aW5nICgpIHtcbiAgICByZXR1cm4gdGhpcy51cGRhdGVXaGlsZUludGVyYWN0aW5nXztcbiAgfTtcblxuICAvKipcbiAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci5qc1wiKS5PcmRlckZ1bmN0aW9ufG51bGx8dW5kZWZpbmVkfSByZW5kZXJPcmRlclxuICAqICAgICBSZW5kZXIgb3JkZXIuXG4gICovXG4gIFZlY3RvckxheWVyLnByb3RvdHlwZS5zZXRSZW5kZXJPcmRlciA9IGZ1bmN0aW9uIHNldFJlbmRlck9yZGVyIChyZW5kZXJPcmRlcikge1xuICAgIHRoaXMuc2V0KFByb3BlcnR5LlJFTkRFUl9PUkRFUiwgcmVuZGVyT3JkZXIpO1xuICB9O1xuXG4gIC8qKlxuICAqIFNldCB0aGUgc3R5bGUgZm9yIGZlYXR1cmVzLiAgVGhpcyBjYW4gYmUgYSBzaW5nbGUgc3R5bGUgb2JqZWN0LCBhbiBhcnJheVxuICAqIG9mIHN0eWxlcywgb3IgYSBmdW5jdGlvbiB0aGF0IHRha2VzIGEgZmVhdHVyZSBhbmQgcmVzb2x1dGlvbiBhbmQgcmV0dXJuc1xuICAqIGFuIGFycmF5IG9mIHN0eWxlcy4gSWYgaXQgaXMgYHVuZGVmaW5lZGAgdGhlIGRlZmF1bHQgc3R5bGUgaXMgdXNlZC4gSWZcbiAgKiBpdCBpcyBgbnVsbGAgdGhlIGxheWVyIGhhcyBubyBzdHlsZSAoYSBgbnVsbGAgc3R5bGUpLCBzbyBvbmx5IGZlYXR1cmVzXG4gICogdGhhdCBoYXZlIHRoZWlyIG93biBzdHlsZXMgd2lsbCBiZSByZW5kZXJlZCBpbiB0aGUgbGF5ZXIuIFNlZVxuICAqIHtAbGluayBtb2R1bGU6b2wvc3R5bGV9IGZvciBpbmZvcm1hdGlvbiBvbiB0aGUgZGVmYXVsdCBzdHlsZS5cbiAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR8QXJyYXk8aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdD58aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVGdW5jdGlvbnxudWxsfHVuZGVmaW5lZH0gc3R5bGUgTGF5ZXIgc3R5bGUuXG4gICogQGFwaVxuICAqL1xuICBWZWN0b3JMYXllci5wcm90b3R5cGUuc2V0U3R5bGUgPSBmdW5jdGlvbiBzZXRTdHlsZSAoc3R5bGUpIHtcbiAgICB0aGlzLnN0eWxlXyA9IHN0eWxlICE9PSB1bmRlZmluZWQgPyBzdHlsZSA6IGNyZWF0ZURlZmF1bHRTdHlsZTtcbiAgICB0aGlzLnN0eWxlRnVuY3Rpb25fID0gc3R5bGUgPT09IG51bGwgP1xuICAgICAgdW5kZWZpbmVkIDogdG9TdHlsZUZ1bmN0aW9uKHRoaXMuc3R5bGVfKTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICAvKipcbiAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1ZlY3RvclJlbmRlclR5cGUuanNcIikuZGVmYXVsdHxzdHJpbmd9IFRoZSByZW5kZXIgbW9kZS5cbiAgKi9cbiAgVmVjdG9yTGF5ZXIucHJvdG90eXBlLmdldFJlbmRlck1vZGUgPSBmdW5jdGlvbiBnZXRSZW5kZXJNb2RlICgpIHtcbiAgICByZXR1cm4gdGhpcy5yZW5kZXJNb2RlXztcbiAgfTtcblxuICByZXR1cm4gVmVjdG9yTGF5ZXI7XG59KExheWVyKSk7XG5cblxuLyoqXG4gKiBSZXR1cm4gdGhlIGFzc29jaWF0ZWQge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yIHZlY3RvcnNvdXJjZX0gb2YgdGhlIGxheWVyLlxuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zb3VyY2UvVmVjdG9yLmpzXCIpLmRlZmF1bHR9IFNvdXJjZS5cbiAqIEBhcGlcbiAqL1xuVmVjdG9yTGF5ZXIucHJvdG90eXBlLmdldFNvdXJjZTtcblxuXG5leHBvcnQgZGVmYXVsdCBWZWN0b3JMYXllcjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VmVjdG9yLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvY29udGFpbnNcbiAqL1xuaW1wb3J0IHtmb3JFYWNoQ29ybmVyfSBmcm9tICcuLi8uLi9leHRlbnQuanMnO1xuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zIGV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdDb250YWluc0V4dGVudChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGV4dGVudCkge1xuICB2YXIgb3V0c2lkZSA9IGZvckVhY2hDb3JuZXIoZXh0ZW50LFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uKGNvb3JkaW5hdGUpIHtcbiAgICAgIHJldHVybiAhbGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdKTtcbiAgICB9KTtcbiAgcmV0dXJuICFvdXRzaWRlO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCB4LCB5KSB7XG4gIC8vIGh0dHA6Ly9nZW9tYWxnb3JpdGhtcy5jb20vYTAzLV9pbmNsdXNpb24uaHRtbFxuICAvLyBDb3B5cmlnaHQgMjAwMCBzb2Z0U3VyZmVyLCAyMDEyIERhbiBTdW5kYXlcbiAgLy8gVGhpcyBjb2RlIG1heSBiZSBmcmVlbHkgdXNlZCBhbmQgbW9kaWZpZWQgZm9yIGFueSBwdXJwb3NlXG4gIC8vIHByb3ZpZGluZyB0aGF0IHRoaXMgY29weXJpZ2h0IG5vdGljZSBpcyBpbmNsdWRlZCB3aXRoIGl0LlxuICAvLyBTb2Z0U3VyZmVyIG1ha2VzIG5vIHdhcnJhbnR5IGZvciB0aGlzIGNvZGUsIGFuZCBjYW5ub3QgYmUgaGVsZFxuICAvLyBsaWFibGUgZm9yIGFueSByZWFsIG9yIGltYWdpbmVkIGRhbWFnZSByZXN1bHRpbmcgZnJvbSBpdHMgdXNlLlxuICAvLyBVc2VycyBvZiB0aGlzIGNvZGUgbXVzdCB2ZXJpZnkgY29ycmVjdG5lc3MgZm9yIHRoZWlyIGFwcGxpY2F0aW9uLlxuICB2YXIgd24gPSAwO1xuICB2YXIgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlXTtcbiAgdmFyIHkxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIDFdO1xuICBmb3IgKDsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgdmFyIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgdmFyIHkyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgIGlmICh5MSA8PSB5KSB7XG4gICAgICBpZiAoeTIgPiB5ICYmICgoeDIgLSB4MSkgKiAoeSAtIHkxKSkgLSAoKHggLSB4MSkgKiAoeTIgLSB5MSkpID4gMCkge1xuICAgICAgICB3bisrO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoeTIgPD0geSAmJiAoKHgyIC0geDEpICogKHkgLSB5MSkpIC0gKCh4IC0geDEpICogKHkyIC0geTEpKSA8IDApIHtcbiAgICAgIHduLS07XG4gICAgfVxuICAgIHgxID0geDI7XG4gICAgeTEgPSB5MjtcbiAgfVxuICByZXR1cm4gd24gIT09IDA7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyAoeCwgeSkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nc0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgeCwgeSkge1xuICBpZiAoZW5kcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKCFsaW5lYXJSaW5nQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc1swXSwgc3RyaWRlLCB4LCB5KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBmb3IgKHZhciBpID0gMSwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBpZiAobGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBlbmRzW2kgLSAxXSwgZW5kc1tpXSwgc3RyaWRlLCB4LCB5KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zICh4LCB5KS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdzc0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIHgsIHkpIHtcbiAgaWYgKGVuZHNzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICBpZiAobGluZWFyUmluZ3NDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIHgsIHkpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29udGFpbnMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2xvYWRpbmdzdHJhdGVneVxuICovXG5cblxuLyoqXG4gKiBTdHJhdGVneSBmdW5jdGlvbiBmb3IgbG9hZGluZyBhbGwgZmVhdHVyZXMgd2l0aCBhIHNpbmdsZSByZXF1ZXN0LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50Pn0gRXh0ZW50cy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFsbChleHRlbnQsIHJlc29sdXRpb24pIHtcbiAgcmV0dXJuIFtbLUluZmluaXR5LCAtSW5maW5pdHksIEluZmluaXR5LCBJbmZpbml0eV1dO1xufVxuXG5cbi8qKlxuICogU3RyYXRlZ3kgZnVuY3Rpb24gZm9yIGxvYWRpbmcgZmVhdHVyZXMgYmFzZWQgb24gdGhlIHZpZXcncyBleHRlbnQgYW5kXG4gKiByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50Pn0gRXh0ZW50cy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJib3goZXh0ZW50LCByZXNvbHV0aW9uKSB7XG4gIHJldHVybiBbZXh0ZW50XTtcbn1cblxuXG4vKipcbiAqIENyZWF0ZXMgYSBzdHJhdGVneSBmdW5jdGlvbiBmb3IgbG9hZGluZyBmZWF0dXJlcyBiYXNlZCBvbiBhIHRpbGUgZ3JpZC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSB0aWxlR3JpZCBUaWxlIGdyaWQuXG4gKiBAcmV0dXJuIHtmdW5jdGlvbihpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnQsIG51bWJlcik6IEFycmF5PGltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudD59IExvYWRpbmcgc3RyYXRlZ3kuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0aWxlKHRpbGVHcmlkKSB7XG4gIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnQ+fSBFeHRlbnRzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uKGV4dGVudCwgcmVzb2x1dGlvbikge1xuICAgICAgdmFyIHogPSB0aWxlR3JpZC5nZXRaRm9yUmVzb2x1dGlvbihyZXNvbHV0aW9uKTtcbiAgICAgIHZhciB0aWxlUmFuZ2UgPSB0aWxlR3JpZC5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKGV4dGVudCwgeik7XG4gICAgICAvKiogQHR5cGUge0FycmF5PGltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudD59ICovXG4gICAgICB2YXIgZXh0ZW50cyA9IFtdO1xuICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9ICovXG4gICAgICB2YXIgdGlsZUNvb3JkID0gW3osIDAsIDBdO1xuICAgICAgZm9yICh0aWxlQ29vcmRbMV0gPSB0aWxlUmFuZ2UubWluWDsgdGlsZUNvb3JkWzFdIDw9IHRpbGVSYW5nZS5tYXhYOyArK3RpbGVDb29yZFsxXSkge1xuICAgICAgICBmb3IgKHRpbGVDb29yZFsyXSA9IHRpbGVSYW5nZS5taW5ZOyB0aWxlQ29vcmRbMl0gPD0gdGlsZVJhbmdlLm1heFk7ICsrdGlsZUNvb3JkWzJdKSB7XG4gICAgICAgICAgZXh0ZW50cy5wdXNoKHRpbGVHcmlkLmdldFRpbGVDb29yZEV4dGVudCh0aWxlQ29vcmQpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGV4dGVudHM7XG4gICAgfVxuICApO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2FkaW5nc3RyYXRlZ3kuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9WZWN0b3JcbiAqL1xuXG5pbXBvcnQge2dldFVpZH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tICcuLi9Db2xsZWN0aW9uLmpzJztcbmltcG9ydCBDb2xsZWN0aW9uRXZlbnRUeXBlIGZyb20gJy4uL0NvbGxlY3Rpb25FdmVudFR5cGUuanMnO1xuaW1wb3J0IE9iamVjdEV2ZW50VHlwZSBmcm9tICcuLi9PYmplY3RFdmVudFR5cGUuanMnO1xuaW1wb3J0IHtleHRlbmR9IGZyb20gJy4uL2FycmF5LmpzJztcbmltcG9ydCB7YXNzZXJ0fSBmcm9tICcuLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7bGlzdGVuLCB1bmxpc3RlbkJ5S2V5fSBmcm9tICcuLi9ldmVudHMuanMnO1xuaW1wb3J0IEV2ZW50IGZyb20gJy4uL2V2ZW50cy9FdmVudC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHtjb250YWluc0V4dGVudCwgZXF1YWxzfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHt4aHJ9IGZyb20gJy4uL2ZlYXR1cmVsb2FkZXIuanMnO1xuaW1wb3J0IHtUUlVFLCBWT0lEfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHthbGwgYXMgYWxsU3RyYXRlZ3l9IGZyb20gJy4uL2xvYWRpbmdzdHJhdGVneS5qcyc7XG5pbXBvcnQge2lzRW1wdHksIGdldFZhbHVlc30gZnJvbSAnLi4vb2JqLmpzJztcbmltcG9ydCBTb3VyY2UgZnJvbSAnLi9Tb3VyY2UuanMnO1xuaW1wb3J0IFNvdXJjZVN0YXRlIGZyb20gJy4vU3RhdGUuanMnO1xuaW1wb3J0IFZlY3RvckV2ZW50VHlwZSBmcm9tICcuL1ZlY3RvckV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgUkJ1c2ggZnJvbSAnLi4vc3RydWN0cy9SQnVzaC5qcyc7XG5cbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvZXh0ZW50fkV4dGVudH0gYW5kIGEgcmVzb2x1dGlvbiBhcyBhcmd1bWVudHMsIGFuZFxuICogcmV0dXJucyBhbiBhcnJheSBvZiB7QGxpbmsgbW9kdWxlOm9sL2V4dGVudH5FeHRlbnR9IHdpdGggdGhlIGV4dGVudHMgdG8gbG9hZC4gVXN1YWxseSB0aGlzXG4gKiBpcyBvbmUgb2YgdGhlIHN0YW5kYXJkIHtAbGluayBtb2R1bGU6b2wvbG9hZGluZ3N0cmF0ZWd5fSBzdHJhdGVnaWVzLlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50LCBudW1iZXIpOiBBcnJheTxpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50Pn0gTG9hZGluZ1N0cmF0ZWd5XG4gKiBAYXBpXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGJ5IHtAbGluayBtb2R1bGU6b2wvc291cmNlL1ZlY3Rvcn0gaW5zdGFuY2VzIGFyZSBpbnN0YW5jZXMgb2YgdGhpc1xuICogdHlwZS5cbiAqL1xuZXhwb3J0IHZhciBWZWN0b3JTb3VyY2VFdmVudCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEV2ZW50KSB7XG4gIGZ1bmN0aW9uIFZlY3RvclNvdXJjZUV2ZW50KHR5cGUsIG9wdF9mZWF0dXJlKSB7XG5cbiAgICBFdmVudC5jYWxsKHRoaXMsIHR5cGUpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGZlYXR1cmUgYmVpbmcgYWRkZWQgb3IgcmVtb3ZlZC5cbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5mZWF0dXJlID0gb3B0X2ZlYXR1cmU7XG5cbiAgfVxuXG4gIGlmICggRXZlbnQgKSBWZWN0b3JTb3VyY2VFdmVudC5fX3Byb3RvX18gPSBFdmVudDtcbiAgVmVjdG9yU291cmNlRXZlbnQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXZlbnQgJiYgRXZlbnQucHJvdG90eXBlICk7XG4gIFZlY3RvclNvdXJjZUV2ZW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFZlY3RvclNvdXJjZUV2ZW50O1xuXG4gIHJldHVybiBWZWN0b3JTb3VyY2VFdmVudDtcbn0oRXZlbnQpKTtcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuQXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXSBBdHRyaWJ1dGlvbnMuXG4gKiBAcHJvcGVydHkge0FycmF5PGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdD58Q29sbGVjdGlvbjxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ+fSBbZmVhdHVyZXNdXG4gKiBGZWF0dXJlcy4gSWYgcHJvdmlkZWQgYXMge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufSwgdGhlIGZlYXR1cmVzIGluIHRoZSBzb3VyY2VcbiAqIGFuZCB0aGUgY29sbGVjdGlvbiB3aWxsIHN0YXkgaW4gc3luYy5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZm9ybWF0L0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gW2Zvcm1hdF0gVGhlIGZlYXR1cmUgZm9ybWF0IHVzZWQgYnkgdGhlIFhIUlxuICogZmVhdHVyZSBsb2FkZXIgd2hlbiBgdXJsYCBpcyBzZXQuIFJlcXVpcmVkIGlmIGB1cmxgIGlzIHNldCwgb3RoZXJ3aXNlIGlnbm9yZWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2ZlYXR1cmVsb2FkZXIuanNcIikuRmVhdHVyZUxvYWRlcn0gW2xvYWRlcl1cbiAqIFRoZSBsb2FkZXIgZnVuY3Rpb24gdXNlZCB0byBsb2FkIGZlYXR1cmVzLCBmcm9tIGEgcmVtb3RlIHNvdXJjZSBmb3IgZXhhbXBsZS5cbiAqIElmIHRoaXMgaXMgbm90IHNldCBhbmQgYHVybGAgaXMgc2V0LCB0aGUgc291cmNlIHdpbGwgY3JlYXRlIGFuZCB1c2UgYW4gWEhSXG4gKiBmZWF0dXJlIGxvYWRlci5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQge1ZlY3Rvcn0gZnJvbSAnb2wvc291cmNlJztcbiAqIGltcG9ydCB7R2VvSlNPTn0gZnJvbSAnb2wvZm9ybWF0JztcbiAqIGltcG9ydCB7YmJveH0gZnJvbSAnb2wvbG9hZGluZ3N0cmF0ZWd5JztcbiAqXG4gKiB2YXIgdmVjdG9yU291cmNlID0gbmV3IFZlY3Rvcih7XG4gKiAgIGZvcm1hdDogbmV3IEdlb0pTT04oKSxcbiAqICAgbG9hZGVyOiBmdW5jdGlvbihleHRlbnQsIHJlc29sdXRpb24sIHByb2plY3Rpb24pIHtcbiAqICAgICAgdmFyIHByb2ogPSBwcm9qZWN0aW9uLmdldENvZGUoKTtcbiAqICAgICAgdmFyIHVybCA9ICdodHRwczovL2Fob2NldmFyLmNvbS9nZW9zZXJ2ZXIvd2ZzP3NlcnZpY2U9V0ZTJicgK1xuICogICAgICAgICAgJ3ZlcnNpb249MS4xLjAmcmVxdWVzdD1HZXRGZWF0dXJlJnR5cGVuYW1lPW9zbTp3YXRlcl9hcmVhcyYnICtcbiAqICAgICAgICAgICdvdXRwdXRGb3JtYXQ9YXBwbGljYXRpb24vanNvbiZzcnNuYW1lPScgKyBwcm9qICsgJyYnICtcbiAqICAgICAgICAgICdiYm94PScgKyBleHRlbnQuam9pbignLCcpICsgJywnICsgcHJvajtcbiAqICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICogICAgICB4aHIub3BlbignR0VUJywgdXJsKTtcbiAqICAgICAgdmFyIG9uRXJyb3IgPSBmdW5jdGlvbigpIHtcbiAqICAgICAgICB2ZWN0b3JTb3VyY2UucmVtb3ZlTG9hZGVkRXh0ZW50KGV4dGVudCk7XG4gKiAgICAgIH1cbiAqICAgICAgeGhyLm9uZXJyb3IgPSBvbkVycm9yO1xuICogICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgaWYgKHhoci5zdGF0dXMgPT0gMjAwKSB7XG4gKiAgICAgICAgICB2ZWN0b3JTb3VyY2UuYWRkRmVhdHVyZXMoXG4gKiAgICAgICAgICAgICAgdmVjdG9yU291cmNlLmdldEZvcm1hdCgpLnJlYWRGZWF0dXJlcyh4aHIucmVzcG9uc2VUZXh0KSk7XG4gKiAgICAgICAgfSBlbHNlIHtcbiAqICAgICAgICAgIG9uRXJyb3IoKTtcbiAqICAgICAgICB9XG4gKiAgICAgIH1cbiAqICAgICAgeGhyLnNlbmQoKTtcbiAqICAgIH0sXG4gKiAgICBzdHJhdGVneTogYmJveFxuICogIH0pO1xuICogYGBgXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvdmVybGFwcz10cnVlXSBUaGlzIHNvdXJjZSBtYXkgaGF2ZSBvdmVybGFwcGluZyBnZW9tZXRyaWVzLlxuICogU2V0dGluZyB0aGlzIHRvIGBmYWxzZWAgKGUuZy4gZm9yIHNvdXJjZXMgd2l0aCBwb2x5Z29ucyB0aGF0IHJlcHJlc2VudCBhZG1pbmlzdHJhdGl2ZVxuICogYm91bmRhcmllcyBvciBUb3BvSlNPTiBzb3VyY2VzKSBhbGxvd3MgdGhlIHJlbmRlcmVyIHRvIG9wdGltaXNlIGZpbGwgYW5kXG4gKiBzdHJva2Ugb3BlcmF0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7TG9hZGluZ1N0cmF0ZWd5fSBbc3RyYXRlZ3ldIFRoZSBsb2FkaW5nIHN0cmF0ZWd5IHRvIHVzZS5cbiAqIEJ5IGRlZmF1bHQgYW4ge0BsaW5rIG1vZHVsZTpvbC9sb2FkaW5nc3RyYXRlZ3l+YWxsfVxuICogc3RyYXRlZ3kgaXMgdXNlZCwgYSBvbmUtb2ZmIHN0cmF0ZWd5IHdoaWNoIGxvYWRzIGFsbCBmZWF0dXJlcyBhdCBvbmNlLlxuICogQHByb3BlcnR5IHtzdHJpbmd8aW1wb3J0KFwiLi4vZmVhdHVyZWxvYWRlci5qc1wiKS5GZWF0dXJlVXJsRnVuY3Rpb259IFt1cmxdXG4gKiBTZXR0aW5nIHRoaXMgb3B0aW9uIGluc3RydWN0cyB0aGUgc291cmNlIHRvIGxvYWQgZmVhdHVyZXMgdXNpbmcgYW4gWEhSIGxvYWRlclxuICogKHNlZSB7QGxpbmsgbW9kdWxlOm9sL2ZlYXR1cmVsb2FkZXJ+eGhyfSkuIFVzZSBhIGBzdHJpbmdgIGFuZCBhblxuICoge0BsaW5rIG1vZHVsZTpvbC9sb2FkaW5nc3RyYXRlZ3l+YWxsfSBmb3IgYSBvbmUtb2ZmIGRvd25sb2FkIG9mIGFsbCBmZWF0dXJlcyBmcm9tXG4gKiB0aGUgZ2l2ZW4gVVJMLiBVc2UgYSB7QGxpbmsgbW9kdWxlOm9sL2ZlYXR1cmVsb2FkZXJ+RmVhdHVyZVVybEZ1bmN0aW9ufSB0byBnZW5lcmF0ZSB0aGUgdXJsIHdpdGhcbiAqIG90aGVyIGxvYWRpbmcgc3RyYXRlZ2llcy5cbiAqIFJlcXVpcmVzIGBmb3JtYXRgIHRvIGJlIHNldCBhcyB3ZWxsLlxuICogV2hlbiBkZWZhdWx0IFhIUiBmZWF0dXJlIGxvYWRlciBpcyBwcm92aWRlZCwgdGhlIGZlYXR1cmVzIHdpbGxcbiAqIGJlIHRyYW5zZm9ybWVkIGZyb20gdGhlIGRhdGEgcHJvamVjdGlvbiB0byB0aGUgdmlldyBwcm9qZWN0aW9uXG4gKiBkdXJpbmcgcGFyc2luZy4gSWYgeW91ciByZW1vdGUgZGF0YSBzb3VyY2UgZG9lcyBub3QgYWR2ZXJ0aXNlIGl0cyBwcm9qZWN0aW9uXG4gKiBwcm9wZXJseSwgdGhpcyB0cmFuc2Zvcm1hdGlvbiB3aWxsIGJlIGluY29ycmVjdC4gRm9yIHNvbWUgZm9ybWF0cywgdGhlXG4gKiBkZWZhdWx0IHByb2plY3Rpb24gKHVzdWFsbHkgRVBTRzo0MzI2KSBjYW4gYmUgb3ZlcnJpZGRlbiBieSBzZXR0aW5nIHRoZVxuICogZGF0YVByb2plY3Rpb24gY29uc3RydWN0b3Igb3B0aW9uIG9uIHRoZSBmb3JtYXQuXG4gKiBOb3RlIHRoYXQgaWYgYSBzb3VyY2UgY29udGFpbnMgbm9uLWZlYXR1cmUgZGF0YSwgc3VjaCBhcyBhIEdlb0pTT04gZ2VvbWV0cnlcbiAqIG9yIGEgS01MIE5ldHdvcmtMaW5rLCB0aGVzZSB3aWxsIGJlIGlnbm9yZWQuIFVzZSBhIGN1c3RvbSBsb2FkZXIgdG8gbG9hZCB0aGVzZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3VzZVNwYXRpYWxJbmRleD10cnVlXVxuICogQnkgZGVmYXVsdCwgYW4gUlRyZWUgaXMgdXNlZCBhcyBzcGF0aWFsIGluZGV4LiBXaGVuIGZlYXR1cmVzIGFyZSByZW1vdmVkIGFuZFxuICogYWRkZWQgZnJlcXVlbnRseSwgYW5kIHRoZSB0b3RhbCBudW1iZXIgb2YgZmVhdHVyZXMgaXMgbG93LCBzZXR0aW5nIHRoaXMgdG9cbiAqIGBmYWxzZWAgbWF5IGltcHJvdmUgcGVyZm9ybWFuY2UuXG4gKlxuICogTm90ZSB0aGF0XG4gKiB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3J+VmVjdG9yU291cmNlI2dldEZlYXR1cmVzSW5FeHRlbnR9LFxuICoge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yflZlY3RvclNvdXJjZSNnZXRDbG9zZXN0RmVhdHVyZVRvQ29vcmRpbmF0ZX0gYW5kXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3J+VmVjdG9yU291cmNlI2dldEV4dGVudH0gY2Fubm90IGJlIHVzZWQgd2hlbiBgdXNlU3BhdGlhbEluZGV4YCBpc1xuICogc2V0IHRvIGBmYWxzZWAsIGFuZCB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3J+VmVjdG9yU291cmNlI2ZvckVhY2hGZWF0dXJlSW5FeHRlbnR9IHdpbGwgbG9vcFxuICogdGhyb3VnaCBhbGwgZmVhdHVyZXMuXG4gKlxuICogV2hlbiBzZXQgdG8gYGZhbHNlYCwgdGhlIGZlYXR1cmVzIHdpbGwgYmUgbWFpbnRhaW5lZCBpbiBhblxuICoge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufSwgd2hpY2ggY2FuIGJlIHJldHJpZXZlZCB0aHJvdWdoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3J+VmVjdG9yU291cmNlI2dldEZlYXR1cmVzQ29sbGVjdGlvbn0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWD10cnVlXSBXcmFwIHRoZSB3b3JsZCBob3Jpem9udGFsbHkuIEZvciB2ZWN0b3IgZWRpdGluZyBhY3Jvc3MgdGhlXG4gKiAtMTgwwrAgYW5kIDE4MMKwIG1lcmlkaWFucyB0byB3b3JrIHByb3Blcmx5LCB0aGlzIHNob3VsZCBiZSBzZXQgdG8gYGZhbHNlYC4gVGhlXG4gKiByZXN1bHRpbmcgZ2VvbWV0cnkgY29vcmRpbmF0ZXMgd2lsbCB0aGVuIGV4Y2VlZCB0aGUgd29ybGQgYm91bmRzLlxuICovXG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBQcm92aWRlcyBhIHNvdXJjZSBvZiBmZWF0dXJlcyBmb3IgdmVjdG9yIGxheWVycy4gVmVjdG9yIGZlYXR1cmVzIHByb3ZpZGVkXG4gKiBieSB0aGlzIHNvdXJjZSBhcmUgc3VpdGFibGUgZm9yIGVkaXRpbmcuIFNlZSB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3JUaWxlflZlY3RvclRpbGV9IGZvclxuICogdmVjdG9yIGRhdGEgdGhhdCBpcyBvcHRpbWl6ZWQgZm9yIHJlbmRlcmluZy5cbiAqXG4gKiBAZmlyZXMgb2wvc291cmNlL1ZlY3Rvci5WZWN0b3JTb3VyY2VFdmVudFxuICogQGFwaVxuICovXG52YXIgVmVjdG9yU291cmNlID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoU291cmNlKSB7XG4gIGZ1bmN0aW9uIFZlY3RvclNvdXJjZShvcHRfb3B0aW9ucykge1xuXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcblxuICAgIFNvdXJjZS5jYWxsKHRoaXMsIHtcbiAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbnMsXG4gICAgICBwcm9qZWN0aW9uOiB1bmRlZmluZWQsXG4gICAgICBzdGF0ZTogU291cmNlU3RhdGUuUkVBRFksXG4gICAgICB3cmFwWDogb3B0aW9ucy53cmFwWCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy53cmFwWCA6IHRydWVcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2ZlYXR1cmVsb2FkZXIuanNcIikuRmVhdHVyZUxvYWRlcn1cbiAgICAgKi9cbiAgICB0aGlzLmxvYWRlcl8gPSBWT0lEO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZm9ybWF0L0ZlYXR1cmUuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy5mb3JtYXRfID0gb3B0aW9ucy5mb3JtYXQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMub3ZlcmxhcHNfID0gb3B0aW9ucy5vdmVybGFwcyA9PSB1bmRlZmluZWQgPyB0cnVlIDogb3B0aW9ucy5vdmVybGFwcztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge3N0cmluZ3xpbXBvcnQoXCIuLi9mZWF0dXJlbG9hZGVyLmpzXCIpLkZlYXR1cmVVcmxGdW5jdGlvbnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy51cmxfID0gb3B0aW9ucy51cmw7XG5cbiAgICBpZiAob3B0aW9ucy5sb2FkZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5sb2FkZXJfID0gb3B0aW9ucy5sb2FkZXI7XG4gICAgfSBlbHNlIGlmICh0aGlzLnVybF8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgYXNzZXJ0KHRoaXMuZm9ybWF0XywgNyk7IC8vIGBmb3JtYXRgIG11c3QgYmUgc2V0IHdoZW4gYHVybGAgaXMgc2V0XG4gICAgICAvLyBjcmVhdGUgYSBYSFIgZmVhdHVyZSBsb2FkZXIgZm9yIFwidXJsXCIgYW5kIFwiZm9ybWF0XCJcbiAgICAgIHRoaXMubG9hZGVyXyA9IHhocih0aGlzLnVybF8sIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vZm9ybWF0L0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuZm9ybWF0XykpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0xvYWRpbmdTdHJhdGVneX1cbiAgICAgKi9cbiAgICB0aGlzLnN0cmF0ZWd5XyA9IG9wdGlvbnMuc3RyYXRlZ3kgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuc3RyYXRlZ3kgOiBhbGxTdHJhdGVneTtcblxuICAgIHZhciB1c2VTcGF0aWFsSW5kZXggPVxuICAgICAgICBvcHRpb25zLnVzZVNwYXRpYWxJbmRleCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy51c2VTcGF0aWFsSW5kZXggOiB0cnVlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7UkJ1c2g8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgKi9cbiAgICB0aGlzLmZlYXR1cmVzUnRyZWVfID0gdXNlU3BhdGlhbEluZGV4ID8gbmV3IFJCdXNoKCkgOiBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7UkJ1c2g8e2V4dGVudDogaW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0+fVxuICAgICAqL1xuICAgIHRoaXMubG9hZGVkRXh0ZW50c1J0cmVlXyA9IG5ldyBSQnVzaCgpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdD59XG4gICAgICovXG4gICAgdGhpcy5udWxsR2VvbWV0cnlGZWF0dXJlc18gPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEEgbG9va3VwIG9mIGZlYXR1cmVzIGJ5IGlkICh0aGUgcmV0dXJuIGZyb20gZmVhdHVyZS5nZXRJZCgpKS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgKi9cbiAgICB0aGlzLmlkSW5kZXhfID0ge307XG5cbiAgICAvKipcbiAgICAgKiBBIGxvb2t1cCBvZiBmZWF0dXJlcyB3aXRob3V0IGlkIChrZXllZCBieSBnZXRVaWQoZmVhdHVyZSkpLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAqL1xuICAgIHRoaXMudW5kZWZJZEluZGV4XyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgQXJyYXk8aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT4+fVxuICAgICAqL1xuICAgIHRoaXMuZmVhdHVyZUNoYW5nZUtleXNfID0ge307XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtDb2xsZWN0aW9uPGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdD59XG4gICAgICovXG4gICAgdGhpcy5mZWF0dXJlc0NvbGxlY3Rpb25fID0gbnVsbDtcblxuICAgIHZhciBjb2xsZWN0aW9uLCBmZWF0dXJlcztcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLmZlYXR1cmVzKSkge1xuICAgICAgZmVhdHVyZXMgPSBvcHRpb25zLmZlYXR1cmVzO1xuICAgIH0gZWxzZSBpZiAob3B0aW9ucy5mZWF0dXJlcykge1xuICAgICAgY29sbGVjdGlvbiA9IG9wdGlvbnMuZmVhdHVyZXM7XG4gICAgICBmZWF0dXJlcyA9IGNvbGxlY3Rpb24uZ2V0QXJyYXkoKTtcbiAgICB9XG4gICAgaWYgKCF1c2VTcGF0aWFsSW5kZXggJiYgY29sbGVjdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb2xsZWN0aW9uID0gbmV3IENvbGxlY3Rpb24oZmVhdHVyZXMpO1xuICAgIH1cbiAgICBpZiAoZmVhdHVyZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5hZGRGZWF0dXJlc0ludGVybmFsKGZlYXR1cmVzKTtcbiAgICB9XG4gICAgaWYgKGNvbGxlY3Rpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5iaW5kRmVhdHVyZXNDb2xsZWN0aW9uXyhjb2xsZWN0aW9uKTtcbiAgICB9XG5cbiAgfVxuXG4gIGlmICggU291cmNlICkgVmVjdG9yU291cmNlLl9fcHJvdG9fXyA9IFNvdXJjZTtcbiAgVmVjdG9yU291cmNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFNvdXJjZSAmJiBTb3VyY2UucHJvdG90eXBlICk7XG4gIFZlY3RvclNvdXJjZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBWZWN0b3JTb3VyY2U7XG5cbiAgLyoqXG4gICAqIEFkZCBhIHNpbmdsZSBmZWF0dXJlIHRvIHRoZSBzb3VyY2UuICBJZiB5b3Ugd2FudCB0byBhZGQgYSBiYXRjaCBvZiBmZWF0dXJlc1xuICAgKiBhdCBvbmNlLCBjYWxsIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1ZlY3Rvcn5WZWN0b3JTb3VyY2UjYWRkRmVhdHVyZXMgI2FkZEZlYXR1cmVzKCl9XG4gICAqIGluc3RlYWQuIEEgZmVhdHVyZSB3aWxsIG5vdCBiZSBhZGRlZCB0byB0aGUgc291cmNlIGlmIGZlYXR1cmUgd2l0aFxuICAgKiB0aGUgc2FtZSBpZCBpcyBhbHJlYWR5IHRoZXJlLiBUaGUgcmVhc29uIGZvciB0aGlzIGJlaGF2aW9yIGlzIHRvIGF2b2lkXG4gICAqIGZlYXR1cmUgZHVwbGljYXRpb24gd2hlbiB1c2luZyBiYm94IG9yIHRpbGUgbG9hZGluZyBzdHJhdGVnaWVzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlIHRvIGFkZC5cbiAgICogQGFwaVxuICAgKi9cbiAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5hZGRGZWF0dXJlID0gZnVuY3Rpb24gYWRkRmVhdHVyZSAoZmVhdHVyZSkge1xuICAgIHRoaXMuYWRkRmVhdHVyZUludGVybmFsKGZlYXR1cmUpO1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEFkZCBhIGZlYXR1cmUgd2l0aG91dCBmaXJpbmcgYSBgY2hhbmdlYCBldmVudC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5hZGRGZWF0dXJlSW50ZXJuYWwgPSBmdW5jdGlvbiBhZGRGZWF0dXJlSW50ZXJuYWwgKGZlYXR1cmUpIHtcbiAgICB2YXIgZmVhdHVyZUtleSA9IGdldFVpZChmZWF0dXJlKTtcblxuICAgIGlmICghdGhpcy5hZGRUb0luZGV4XyhmZWF0dXJlS2V5LCBmZWF0dXJlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuc2V0dXBDaGFuZ2VFdmVudHNfKGZlYXR1cmVLZXksIGZlYXR1cmUpO1xuXG4gICAgdmFyIGdlb21ldHJ5ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuICAgIGlmIChnZW9tZXRyeSkge1xuICAgICAgdmFyIGV4dGVudCA9IGdlb21ldHJ5LmdldEV4dGVudCgpO1xuICAgICAgaWYgKHRoaXMuZmVhdHVyZXNSdHJlZV8pIHtcbiAgICAgICAgdGhpcy5mZWF0dXJlc1J0cmVlXy5pbnNlcnQoZXh0ZW50LCBmZWF0dXJlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5udWxsR2VvbWV0cnlGZWF0dXJlc19bZmVhdHVyZUtleV0gPSBmZWF0dXJlO1xuICAgIH1cblxuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcbiAgICAgIG5ldyBWZWN0b3JTb3VyY2VFdmVudChWZWN0b3JFdmVudFR5cGUuQURERkVBVFVSRSwgZmVhdHVyZSkpO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmZWF0dXJlS2V5IFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgZmVhdHVyZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgVGhlIGZlYXR1cmUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLnNldHVwQ2hhbmdlRXZlbnRzXyA9IGZ1bmN0aW9uIHNldHVwQ2hhbmdlRXZlbnRzXyAoZmVhdHVyZUtleSwgZmVhdHVyZSkge1xuICAgIHRoaXMuZmVhdHVyZUNoYW5nZUtleXNfW2ZlYXR1cmVLZXldID0gW1xuICAgICAgbGlzdGVuKGZlYXR1cmUsIEV2ZW50VHlwZS5DSEFOR0UsXG4gICAgICAgIHRoaXMuaGFuZGxlRmVhdHVyZUNoYW5nZV8sIHRoaXMpLFxuICAgICAgbGlzdGVuKGZlYXR1cmUsIE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRSxcbiAgICAgICAgdGhpcy5oYW5kbGVGZWF0dXJlQ2hhbmdlXywgdGhpcylcbiAgICBdO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmZWF0dXJlS2V5IFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgZmVhdHVyZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgVGhlIGZlYXR1cmUuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBmZWF0dXJlIGlzIFwidmFsaWRcIiwgaW4gdGhlIHNlbnNlIHRoYXQgaXQgaXMgYWxzbyBhXG4gICAqICAgICBjYW5kaWRhdGUgZm9yIGluc2VydGlvbiBpbnRvIHRoZSBSdHJlZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIFZlY3RvclNvdXJjZS5wcm90b3R5cGUuYWRkVG9JbmRleF8gPSBmdW5jdGlvbiBhZGRUb0luZGV4XyAoZmVhdHVyZUtleSwgZmVhdHVyZSkge1xuICAgIHZhciB2YWxpZCA9IHRydWU7XG4gICAgdmFyIGlkID0gZmVhdHVyZS5nZXRJZCgpO1xuICAgIGlmIChpZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoIShpZC50b1N0cmluZygpIGluIHRoaXMuaWRJbmRleF8pKSB7XG4gICAgICAgIHRoaXMuaWRJbmRleF9baWQudG9TdHJpbmcoKV0gPSBmZWF0dXJlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYXNzZXJ0KCEoZmVhdHVyZUtleSBpbiB0aGlzLnVuZGVmSWRJbmRleF8pLFxuICAgICAgICAzMCk7IC8vIFRoZSBwYXNzZWQgYGZlYXR1cmVgIHdhcyBhbHJlYWR5IGFkZGVkIHRvIHRoZSBzb3VyY2VcbiAgICAgIHRoaXMudW5kZWZJZEluZGV4X1tmZWF0dXJlS2V5XSA9IGZlYXR1cmU7XG4gICAgfVxuICAgIHJldHVybiB2YWxpZDtcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBBZGQgYSBiYXRjaCBvZiBmZWF0dXJlcyB0byB0aGUgc291cmNlLlxuICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdD59IGZlYXR1cmVzIEZlYXR1cmVzIHRvIGFkZC5cbiAgICogQGFwaVxuICAgKi9cbiAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5hZGRGZWF0dXJlcyA9IGZ1bmN0aW9uIGFkZEZlYXR1cmVzIChmZWF0dXJlcykge1xuICAgIHRoaXMuYWRkRmVhdHVyZXNJbnRlcm5hbChmZWF0dXJlcyk7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cblxuICAvKipcbiAgICogQWRkIGZlYXR1cmVzIHdpdGhvdXQgZmlyaW5nIGEgYGNoYW5nZWAgZXZlbnQuXG4gICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0Pn0gZmVhdHVyZXMgRmVhdHVyZXMuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIFZlY3RvclNvdXJjZS5wcm90b3R5cGUuYWRkRmVhdHVyZXNJbnRlcm5hbCA9IGZ1bmN0aW9uIGFkZEZlYXR1cmVzSW50ZXJuYWwgKGZlYXR1cmVzKSB7XG4gICAgdmFyIGV4dGVudHMgPSBbXTtcbiAgICB2YXIgbmV3RmVhdHVyZXMgPSBbXTtcbiAgICB2YXIgZ2VvbWV0cnlGZWF0dXJlcyA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGZlYXR1cmVzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZmVhdHVyZSA9IGZlYXR1cmVzW2ldO1xuICAgICAgdmFyIGZlYXR1cmVLZXkgPSBnZXRVaWQoZmVhdHVyZSk7XG4gICAgICBpZiAodGhpcy5hZGRUb0luZGV4XyhmZWF0dXJlS2V5LCBmZWF0dXJlKSkge1xuICAgICAgICBuZXdGZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIGkkMSA9IDAsIGxlbmd0aCQxID0gbmV3RmVhdHVyZXMubGVuZ3RoOyBpJDEgPCBsZW5ndGgkMTsgaSQxKyspIHtcbiAgICAgIHZhciBmZWF0dXJlJDEgPSBuZXdGZWF0dXJlc1tpJDFdO1xuICAgICAgdmFyIGZlYXR1cmVLZXkkMSA9IGdldFVpZChmZWF0dXJlJDEpO1xuICAgICAgdGhpcy5zZXR1cENoYW5nZUV2ZW50c18oZmVhdHVyZUtleSQxLCBmZWF0dXJlJDEpO1xuXG4gICAgICB2YXIgZ2VvbWV0cnkgPSBmZWF0dXJlJDEuZ2V0R2VvbWV0cnkoKTtcbiAgICAgIGlmIChnZW9tZXRyeSkge1xuICAgICAgICB2YXIgZXh0ZW50ID0gZ2VvbWV0cnkuZ2V0RXh0ZW50KCk7XG4gICAgICAgIGV4dGVudHMucHVzaChleHRlbnQpO1xuICAgICAgICBnZW9tZXRyeUZlYXR1cmVzLnB1c2goZmVhdHVyZSQxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubnVsbEdlb21ldHJ5RmVhdHVyZXNfW2ZlYXR1cmVLZXkkMV0gPSBmZWF0dXJlJDE7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmZlYXR1cmVzUnRyZWVfKSB7XG4gICAgICB0aGlzLmZlYXR1cmVzUnRyZWVfLmxvYWQoZXh0ZW50cywgZ2VvbWV0cnlGZWF0dXJlcyk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSQyID0gMCwgbGVuZ3RoJDIgPSBuZXdGZWF0dXJlcy5sZW5ndGg7IGkkMiA8IGxlbmd0aCQyOyBpJDIrKykge1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBWZWN0b3JTb3VyY2VFdmVudChWZWN0b3JFdmVudFR5cGUuQURERkVBVFVSRSwgbmV3RmVhdHVyZXNbaSQyXSkpO1xuICAgIH1cbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFDb2xsZWN0aW9uPGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdD59IGNvbGxlY3Rpb24gQ29sbGVjdGlvbi5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIFZlY3RvclNvdXJjZS5wcm90b3R5cGUuYmluZEZlYXR1cmVzQ29sbGVjdGlvbl8gPSBmdW5jdGlvbiBiaW5kRmVhdHVyZXNDb2xsZWN0aW9uXyAoY29sbGVjdGlvbikge1xuICAgIHZhciBtb2RpZnlpbmdDb2xsZWN0aW9uID0gZmFsc2U7XG4gICAgbGlzdGVuKHRoaXMsIFZlY3RvckV2ZW50VHlwZS5BRERGRUFUVVJFLFxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0ge1ZlY3RvclNvdXJjZUV2ZW50fSBldnQgVGhlIHZlY3RvciBzb3VyY2UgZXZlbnRcbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgIGlmICghbW9kaWZ5aW5nQ29sbGVjdGlvbikge1xuICAgICAgICAgIG1vZGlmeWluZ0NvbGxlY3Rpb24gPSB0cnVlO1xuICAgICAgICAgIGNvbGxlY3Rpb24ucHVzaChldnQuZmVhdHVyZSk7XG4gICAgICAgICAgbW9kaWZ5aW5nQ29sbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICBsaXN0ZW4odGhpcywgVmVjdG9yRXZlbnRUeXBlLlJFTU9WRUZFQVRVUkUsXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7VmVjdG9yU291cmNlRXZlbnR9IGV2dCBUaGUgdmVjdG9yIHNvdXJjZSBldmVudFxuICAgICAgICovXG4gICAgICBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgaWYgKCFtb2RpZnlpbmdDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgbW9kaWZ5aW5nQ29sbGVjdGlvbiA9IHRydWU7XG4gICAgICAgICAgY29sbGVjdGlvbi5yZW1vdmUoZXZ0LmZlYXR1cmUpO1xuICAgICAgICAgIG1vZGlmeWluZ0NvbGxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgbGlzdGVuKGNvbGxlY3Rpb24sIENvbGxlY3Rpb25FdmVudFR5cGUuQURELFxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBldnQgVGhlIGNvbGxlY3Rpb24gZXZlbnRcbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgIGlmICghbW9kaWZ5aW5nQ29sbGVjdGlvbikge1xuICAgICAgICAgIG1vZGlmeWluZ0NvbGxlY3Rpb24gPSB0cnVlO1xuICAgICAgICAgIHRoaXMuYWRkRmVhdHVyZSgvKiogQHR5cGUge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gKi8gKGV2dC5lbGVtZW50KSk7XG4gICAgICAgICAgbW9kaWZ5aW5nQ29sbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzKTtcbiAgICBsaXN0ZW4oY29sbGVjdGlvbiwgQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGV2dCBUaGUgY29sbGVjdGlvbiBldmVudFxuICAgICAgICovXG4gICAgICBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgaWYgKCFtb2RpZnlpbmdDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgbW9kaWZ5aW5nQ29sbGVjdGlvbiA9IHRydWU7XG4gICAgICAgICAgdGhpcy5yZW1vdmVGZWF0dXJlKC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSAqLyAoZXZ0LmVsZW1lbnQpKTtcbiAgICAgICAgICBtb2RpZnlpbmdDb2xsZWN0aW9uID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0sIHRoaXMpO1xuICAgIHRoaXMuZmVhdHVyZXNDb2xsZWN0aW9uXyA9IGNvbGxlY3Rpb247XG4gIH07XG5cblxuICAvKipcbiAgICogUmVtb3ZlIGFsbCBmZWF0dXJlcyBmcm9tIHRoZSBzb3VyY2UuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9mYXN0IFNraXAgZGlzcGF0Y2hpbmcgb2Yge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yLlZlY3RvclNvdXJjZUV2ZW50I3JlbW92ZWZlYXR1cmV9IGV2ZW50cy5cbiAgICogQGFwaVxuICAgKi9cbiAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uIGNsZWFyIChvcHRfZmFzdCkge1xuICAgIGlmIChvcHRfZmFzdCkge1xuICAgICAgZm9yICh2YXIgZmVhdHVyZUlkIGluIHRoaXMuZmVhdHVyZUNoYW5nZUtleXNfKSB7XG4gICAgICAgIHZhciBrZXlzID0gdGhpcy5mZWF0dXJlQ2hhbmdlS2V5c19bZmVhdHVyZUlkXTtcbiAgICAgICAga2V5cy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmZlYXR1cmVzQ29sbGVjdGlvbl8pIHtcbiAgICAgICAgdGhpcy5mZWF0dXJlQ2hhbmdlS2V5c18gPSB7fTtcbiAgICAgICAgdGhpcy5pZEluZGV4XyA9IHt9O1xuICAgICAgICB0aGlzLnVuZGVmSWRJbmRleF8gPSB7fTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuZmVhdHVyZXNSdHJlZV8pIHtcbiAgICAgICAgdGhpcy5mZWF0dXJlc1J0cmVlXy5mb3JFYWNoKHRoaXMucmVtb3ZlRmVhdHVyZUludGVybmFsLCB0aGlzKTtcbiAgICAgICAgZm9yICh2YXIgaWQgaW4gdGhpcy5udWxsR2VvbWV0cnlGZWF0dXJlc18pIHtcbiAgICAgICAgICB0aGlzLnJlbW92ZUZlYXR1cmVJbnRlcm5hbCh0aGlzLm51bGxHZW9tZXRyeUZlYXR1cmVzX1tpZF0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmZlYXR1cmVzQ29sbGVjdGlvbl8pIHtcbiAgICAgIHRoaXMuZmVhdHVyZXNDb2xsZWN0aW9uXy5jbGVhcigpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmZlYXR1cmVzUnRyZWVfKSB7XG4gICAgICB0aGlzLmZlYXR1cmVzUnRyZWVfLmNsZWFyKCk7XG4gICAgfVxuICAgIHRoaXMubG9hZGVkRXh0ZW50c1J0cmVlXy5jbGVhcigpO1xuICAgIHRoaXMubnVsbEdlb21ldHJ5RmVhdHVyZXNfID0ge307XG5cbiAgICB2YXIgY2xlYXJFdmVudCA9IG5ldyBWZWN0b3JTb3VyY2VFdmVudChWZWN0b3JFdmVudFR5cGUuQ0xFQVIpO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChjbGVhckV2ZW50KTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBJdGVyYXRlIHRocm91Z2ggYWxsIGZlYXR1cmVzIG9uIHRoZSBzb3VyY2UsIGNhbGxpbmcgdGhlIHByb3ZpZGVkIGNhbGxiYWNrXG4gICAqIHdpdGggZWFjaCBvbmUuICBJZiB0aGUgY2FsbGJhY2sgcmV0dXJucyBhbnkgXCJ0cnV0aHlcIiB2YWx1ZSwgaXRlcmF0aW9uIHdpbGxcbiAgICogc3RvcCBhbmQgdGhlIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIHRoZSBzYW1lIHZhbHVlLlxuICAgKiBOb3RlOiB0aGlzIGZ1bmN0aW9uIG9ubHkgaXRlcmF0ZSB0aHJvdWdoIHRoZSBmZWF0dXJlIHRoYXQgaGF2ZSBhIGRlZmluZWQgZ2VvbWV0cnkuXG4gICAqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0KTogVH0gY2FsbGJhY2sgQ2FsbGVkIHdpdGggZWFjaCBmZWF0dXJlXG4gICAqICAgICBvbiB0aGUgc291cmNlLiAgUmV0dXJuIGEgdHJ1dGh5IHZhbHVlIHRvIHN0b3AgaXRlcmF0aW9uLlxuICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gVGhlIHJldHVybiB2YWx1ZSBmcm9tIHRoZSBsYXN0IGNhbGwgdG8gdGhlIGNhbGxiYWNrLlxuICAgKiBAdGVtcGxhdGUgVFxuICAgKiBAYXBpXG4gICAqL1xuICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmZvckVhY2hGZWF0dXJlID0gZnVuY3Rpb24gZm9yRWFjaEZlYXR1cmUgKGNhbGxiYWNrKSB7XG4gICAgaWYgKHRoaXMuZmVhdHVyZXNSdHJlZV8pIHtcbiAgICAgIHJldHVybiB0aGlzLmZlYXR1cmVzUnRyZWVfLmZvckVhY2goY2FsbGJhY2spO1xuICAgIH0gZWxzZSBpZiAodGhpcy5mZWF0dXJlc0NvbGxlY3Rpb25fKSB7XG4gICAgICB0aGlzLmZlYXR1cmVzQ29sbGVjdGlvbl8uZm9yRWFjaChjYWxsYmFjayk7XG4gICAgfVxuICB9O1xuXG5cbiAgLyoqXG4gICAqIEl0ZXJhdGUgdGhyb3VnaCBhbGwgZmVhdHVyZXMgd2hvc2UgZ2VvbWV0cmllcyBjb250YWluIHRoZSBwcm92aWRlZFxuICAgKiBjb29yZGluYXRlLCBjYWxsaW5nIHRoZSBjYWxsYmFjayB3aXRoIGVhY2ggZmVhdHVyZS4gIElmIHRoZSBjYWxsYmFjayByZXR1cm5zXG4gICAqIGEgXCJ0cnV0aHlcIiB2YWx1ZSwgaXRlcmF0aW9uIHdpbGwgc3RvcCBhbmQgdGhlIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIHRoZSBzYW1lXG4gICAqIHZhbHVlLlxuICAgKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdCk6IFR9IGNhbGxiYWNrIENhbGxlZCB3aXRoIGVhY2ggZmVhdHVyZVxuICAgKiAgICAgd2hvc2UgZ29lbWV0cnkgY29udGFpbnMgdGhlIHByb3ZpZGVkIGNvb3JkaW5hdGUuXG4gICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBUaGUgcmV0dXJuIHZhbHVlIGZyb20gdGhlIGxhc3QgY2FsbCB0byB0aGUgY2FsbGJhY2suXG4gICAqIEB0ZW1wbGF0ZSBUXG4gICAqL1xuICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlRGlyZWN0ID0gZnVuY3Rpb24gZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGVEaXJlY3QgKGNvb3JkaW5hdGUsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGV4dGVudCA9IFtjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdLCBjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdXTtcbiAgICByZXR1cm4gdGhpcy5mb3JFYWNoRmVhdHVyZUluRXh0ZW50KGV4dGVudCwgZnVuY3Rpb24oZmVhdHVyZSkge1xuICAgICAgdmFyIGdlb21ldHJ5ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuICAgICAgaWYgKGdlb21ldHJ5LmludGVyc2VjdHNDb29yZGluYXRlKGNvb3JkaW5hdGUpKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhmZWF0dXJlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cblxuICAvKipcbiAgICogSXRlcmF0ZSB0aHJvdWdoIGFsbCBmZWF0dXJlcyB3aG9zZSBib3VuZGluZyBib3ggaW50ZXJzZWN0cyB0aGUgcHJvdmlkZWRcbiAgICogZXh0ZW50IChub3RlIHRoYXQgdGhlIGZlYXR1cmUncyBnZW9tZXRyeSBtYXkgbm90IGludGVyc2VjdCB0aGUgZXh0ZW50KSxcbiAgICogY2FsbGluZyB0aGUgY2FsbGJhY2sgd2l0aCBlYWNoIGZlYXR1cmUuICBJZiB0aGUgY2FsbGJhY2sgcmV0dXJucyBhIFwidHJ1dGh5XCJcbiAgICogdmFsdWUsIGl0ZXJhdGlvbiB3aWxsIHN0b3AgYW5kIHRoZSBmdW5jdGlvbiB3aWxsIHJldHVybiB0aGUgc2FtZSB2YWx1ZS5cbiAgICpcbiAgICogSWYgeW91IGFyZSBpbnRlcmVzdGVkIGluIGZlYXR1cmVzIHdob3NlIGdlb21ldHJ5IGludGVyc2VjdHMgYW4gZXh0ZW50LCBjYWxsXG4gICAqIHRoZSB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3J+VmVjdG9yU291cmNlI2ZvckVhY2hGZWF0dXJlSW50ZXJzZWN0aW5nRXh0ZW50ICNmb3JFYWNoRmVhdHVyZUludGVyc2VjdGluZ0V4dGVudCgpfSBtZXRob2QgaW5zdGVhZC5cbiAgICpcbiAgICogV2hlbiBgdXNlU3BhdGlhbEluZGV4YCBpcyBzZXQgdG8gZmFsc2UsIHRoaXMgbWV0aG9kIHdpbGwgbG9vcCB0aHJvdWdoIGFsbFxuICAgKiBmZWF0dXJlcywgZXF1aXZhbGVudCB0byB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9WZWN0b3J+VmVjdG9yU291cmNlI2ZvckVhY2hGZWF0dXJlICNmb3JFYWNoRmVhdHVyZSgpfS5cbiAgICpcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdCk6IFR9IGNhbGxiYWNrIENhbGxlZCB3aXRoIGVhY2ggZmVhdHVyZVxuICAgKiAgICAgd2hvc2UgYm91bmRpbmcgYm94IGludGVyc2VjdHMgdGhlIHByb3ZpZGVkIGV4dGVudC5cbiAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IFRoZSByZXR1cm4gdmFsdWUgZnJvbSB0aGUgbGFzdCBjYWxsIHRvIHRoZSBjYWxsYmFjay5cbiAgICogQHRlbXBsYXRlIFRcbiAgICogQGFwaVxuICAgKi9cbiAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5mb3JFYWNoRmVhdHVyZUluRXh0ZW50ID0gZnVuY3Rpb24gZm9yRWFjaEZlYXR1cmVJbkV4dGVudCAoZXh0ZW50LCBjYWxsYmFjaykge1xuICAgIGlmICh0aGlzLmZlYXR1cmVzUnRyZWVfKSB7XG4gICAgICByZXR1cm4gdGhpcy5mZWF0dXJlc1J0cmVlXy5mb3JFYWNoSW5FeHRlbnQoZXh0ZW50LCBjYWxsYmFjayk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmZlYXR1cmVzQ29sbGVjdGlvbl8pIHtcbiAgICAgIHRoaXMuZmVhdHVyZXNDb2xsZWN0aW9uXy5mb3JFYWNoKGNhbGxiYWNrKTtcbiAgICB9XG4gIH07XG5cblxuICAvKipcbiAgICogSXRlcmF0ZSB0aHJvdWdoIGFsbCBmZWF0dXJlcyB3aG9zZSBnZW9tZXRyeSBpbnRlcnNlY3RzIHRoZSBwcm92aWRlZCBleHRlbnQsXG4gICAqIGNhbGxpbmcgdGhlIGNhbGxiYWNrIHdpdGggZWFjaCBmZWF0dXJlLiAgSWYgdGhlIGNhbGxiYWNrIHJldHVybnMgYSBcInRydXRoeVwiXG4gICAqIHZhbHVlLCBpdGVyYXRpb24gd2lsbCBzdG9wIGFuZCB0aGUgZnVuY3Rpb24gd2lsbCByZXR1cm4gdGhlIHNhbWUgdmFsdWUuXG4gICAqXG4gICAqIElmIHlvdSBvbmx5IHdhbnQgdG8gdGVzdCBmb3IgYm91bmRpbmcgYm94IGludGVyc2VjdGlvbiwgY2FsbCB0aGVcbiAgICoge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yflZlY3RvclNvdXJjZSNmb3JFYWNoRmVhdHVyZUluRXh0ZW50ICNmb3JFYWNoRmVhdHVyZUluRXh0ZW50KCl9IG1ldGhvZCBpbnN0ZWFkLlxuICAgKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0KTogVH0gY2FsbGJhY2sgQ2FsbGVkIHdpdGggZWFjaCBmZWF0dXJlXG4gICAqICAgICB3aG9zZSBnZW9tZXRyeSBpbnRlcnNlY3RzIHRoZSBwcm92aWRlZCBleHRlbnQuXG4gICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBUaGUgcmV0dXJuIHZhbHVlIGZyb20gdGhlIGxhc3QgY2FsbCB0byB0aGUgY2FsbGJhY2suXG4gICAqIEB0ZW1wbGF0ZSBUXG4gICAqIEBhcGlcbiAgICovXG4gIFZlY3RvclNvdXJjZS5wcm90b3R5cGUuZm9yRWFjaEZlYXR1cmVJbnRlcnNlY3RpbmdFeHRlbnQgPSBmdW5jdGlvbiBmb3JFYWNoRmVhdHVyZUludGVyc2VjdGluZ0V4dGVudCAoZXh0ZW50LCBjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLmZvckVhY2hGZWF0dXJlSW5FeHRlbnQoZXh0ZW50LFxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IFRoZSByZXR1cm4gdmFsdWUgZnJvbSB0aGUgbGFzdCBjYWxsIHRvIHRoZSBjYWxsYmFjay5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24oZmVhdHVyZSkge1xuICAgICAgICB2YXIgZ2VvbWV0cnkgPSBmZWF0dXJlLmdldEdlb21ldHJ5KCk7XG4gICAgICAgIGlmIChnZW9tZXRyeS5pbnRlcnNlY3RzRXh0ZW50KGV4dGVudCkpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gY2FsbGJhY2soZmVhdHVyZSk7XG4gICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZmVhdHVyZXMgY29sbGVjdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhpcyBzb3VyY2UuIFdpbGwgYmUgYG51bGxgXG4gICAqIHVubGVzcyB0aGUgc291cmNlIHdhcyBjb25maWd1cmVkIHdpdGggYHVzZVNwYXRpYWxJbmRleGAgc2V0IHRvIGBmYWxzZWAsIG9yXG4gICAqIHdpdGggYW4ge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufSBhcyBgZmVhdHVyZXNgLlxuICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdD59IFRoZSBjb2xsZWN0aW9uIG9mIGZlYXR1cmVzLlxuICAgKiBAYXBpXG4gICAqL1xuICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmdldEZlYXR1cmVzQ29sbGVjdGlvbiA9IGZ1bmN0aW9uIGdldEZlYXR1cmVzQ29sbGVjdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZmVhdHVyZXNDb2xsZWN0aW9uXztcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIGZlYXR1cmVzIG9uIHRoZSBzb3VyY2UgaW4gcmFuZG9tIG9yZGVyLlxuICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ+fSBGZWF0dXJlcy5cbiAgICogQGFwaVxuICAgKi9cbiAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5nZXRGZWF0dXJlcyA9IGZ1bmN0aW9uIGdldEZlYXR1cmVzICgpIHtcbiAgICB2YXIgZmVhdHVyZXM7XG4gICAgaWYgKHRoaXMuZmVhdHVyZXNDb2xsZWN0aW9uXykge1xuICAgICAgZmVhdHVyZXMgPSB0aGlzLmZlYXR1cmVzQ29sbGVjdGlvbl8uZ2V0QXJyYXkoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuZmVhdHVyZXNSdHJlZV8pIHtcbiAgICAgIGZlYXR1cmVzID0gdGhpcy5mZWF0dXJlc1J0cmVlXy5nZXRBbGwoKTtcbiAgICAgIGlmICghaXNFbXB0eSh0aGlzLm51bGxHZW9tZXRyeUZlYXR1cmVzXykpIHtcbiAgICAgICAgZXh0ZW5kKGZlYXR1cmVzLCBnZXRWYWx1ZXModGhpcy5udWxsR2VvbWV0cnlGZWF0dXJlc18pKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAgIC8qKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0Pn0gKi8gKGZlYXR1cmVzKVxuICAgICk7XG4gIH07XG5cblxuICAvKipcbiAgICogR2V0IGFsbCBmZWF0dXJlcyB3aG9zZSBnZW9tZXRyeSBpbnRlcnNlY3RzIHRoZSBwcm92aWRlZCBjb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ+fSBGZWF0dXJlcy5cbiAgICogQGFwaVxuICAgKi9cbiAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5nZXRGZWF0dXJlc0F0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uIGdldEZlYXR1cmVzQXRDb29yZGluYXRlIChjb29yZGluYXRlKSB7XG4gICAgdmFyIGZlYXR1cmVzID0gW107XG4gICAgdGhpcy5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZURpcmVjdChjb29yZGluYXRlLCBmdW5jdGlvbihmZWF0dXJlKSB7XG4gICAgICBmZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xuICAgIH0pO1xuICAgIHJldHVybiBmZWF0dXJlcztcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIGZlYXR1cmVzIGluIHRoZSBwcm92aWRlZCBleHRlbnQuICBOb3RlIHRoYXQgdGhpcyByZXR1cm5zIGFuIGFycmF5IG9mXG4gICAqIGFsbCBmZWF0dXJlcyBpbnRlcnNlY3RpbmcgdGhlIGdpdmVuIGV4dGVudCBpbiByYW5kb20gb3JkZXIgKHNvIGl0IG1heSBpbmNsdWRlXG4gICAqIGZlYXR1cmVzIHdob3NlIGdlb21ldHJpZXMgZG8gbm90IGludGVyc2VjdCB0aGUgZXh0ZW50KS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgaXMgbm90IGF2YWlsYWJsZSB3aGVuIHRoZSBzb3VyY2UgaXMgY29uZmlndXJlZCB3aXRoXG4gICAqIGB1c2VTcGF0aWFsSW5kZXhgIHNldCB0byBgZmFsc2VgLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdD59IEZlYXR1cmVzLlxuICAgKiBAYXBpXG4gICAqL1xuICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmdldEZlYXR1cmVzSW5FeHRlbnQgPSBmdW5jdGlvbiBnZXRGZWF0dXJlc0luRXh0ZW50IChleHRlbnQpIHtcbiAgICByZXR1cm4gdGhpcy5mZWF0dXJlc1J0cmVlXy5nZXRJbkV4dGVudChleHRlbnQpO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY2xvc2VzdCBmZWF0dXJlIHRvIHRoZSBwcm92aWRlZCBjb29yZGluYXRlLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBpcyBub3QgYXZhaWxhYmxlIHdoZW4gdGhlIHNvdXJjZSBpcyBjb25maWd1cmVkIHdpdGhcbiAgICogYHVzZVNwYXRpYWxJbmRleGAgc2V0IHRvIGBmYWxzZWAuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0KTpib29sZWFuPX0gb3B0X2ZpbHRlciBGZWF0dXJlIGZpbHRlciBmdW5jdGlvbi5cbiAgICogICAgIFRoZSBmaWx0ZXIgZnVuY3Rpb24gd2lsbCByZWNlaXZlIG9uZSBhcmd1bWVudCwgdGhlIHtAbGluayBtb2R1bGU6b2wvRmVhdHVyZSBmZWF0dXJlfVxuICAgKiAgICAgYW5kIGl0IHNob3VsZCByZXR1cm4gYSBib29sZWFuIHZhbHVlLiBCeSBkZWZhdWx0LCBubyBmaWx0ZXJpbmcgaXMgbWFkZS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBDbG9zZXN0IGZlYXR1cmUuXG4gICAqIEBhcGlcbiAgICovXG4gIFZlY3RvclNvdXJjZS5wcm90b3R5cGUuZ2V0Q2xvc2VzdEZlYXR1cmVUb0Nvb3JkaW5hdGUgPSBmdW5jdGlvbiBnZXRDbG9zZXN0RmVhdHVyZVRvQ29vcmRpbmF0ZSAoY29vcmRpbmF0ZSwgb3B0X2ZpbHRlcikge1xuICAgIC8vIEZpbmQgdGhlIGNsb3Nlc3QgZmVhdHVyZSB1c2luZyBicmFuY2ggYW5kIGJvdW5kLiAgV2Ugc3RhcnQgc2VhcmNoaW5nIGFuXG4gICAgLy8gaW5maW5pdGUgZXh0ZW50LCBhbmQgZmluZCB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgZmlyc3QgZmVhdHVyZSBmb3VuZC4gIFRoaXNcbiAgICAvLyBiZWNvbWVzIHRoZSBjbG9zZXN0IGZlYXR1cmUuICBXZSB0aGVuIGNvbXB1dGUgYSBzbWFsbGVyIGV4dGVudCB3aGljaCBhbnlcbiAgICAvLyBjbG9zZXIgZmVhdHVyZSBtdXN0IGludGVyc2VjdC4gIFdlIGNvbnRpbnVlIHNlYXJjaGluZyB3aXRoIHRoaXMgc21hbGxlclxuICAgIC8vIGV4dGVudCwgdHJ5aW5nIHRvIGZpbmQgYSBjbG9zZXIgZmVhdHVyZS4gIEV2ZXJ5IHRpbWUgd2UgZmluZCBhIGNsb3NlclxuICAgIC8vIGZlYXR1cmUsIHdlIHVwZGF0ZSB0aGUgZXh0ZW50IGJlaW5nIHNlYXJjaGVkIHNvIHRoYXQgYW55IGV2ZW4gY2xvc2VyXG4gICAgLy8gZmVhdHVyZSBtdXN0IGludGVyc2VjdCBpdC4gIFdlIGNvbnRpbnVlIHVudGlsIHdlIHJ1biBvdXQgb2YgZmVhdHVyZXMuXG4gICAgdmFyIHggPSBjb29yZGluYXRlWzBdO1xuICAgIHZhciB5ID0gY29vcmRpbmF0ZVsxXTtcbiAgICB2YXIgY2xvc2VzdEZlYXR1cmUgPSBudWxsO1xuICAgIHZhciBjbG9zZXN0UG9pbnQgPSBbTmFOLCBOYU5dO1xuICAgIHZhciBtaW5TcXVhcmVkRGlzdGFuY2UgPSBJbmZpbml0eTtcbiAgICB2YXIgZXh0ZW50ID0gWy1JbmZpbml0eSwgLUluZmluaXR5LCBJbmZpbml0eSwgSW5maW5pdHldO1xuICAgIHZhciBmaWx0ZXIgPSBvcHRfZmlsdGVyID8gb3B0X2ZpbHRlciA6IFRSVUU7XG4gICAgdGhpcy5mZWF0dXJlc1J0cmVlXy5mb3JFYWNoSW5FeHRlbnQoZXh0ZW50LFxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbihmZWF0dXJlKSB7XG4gICAgICAgIGlmIChmaWx0ZXIoZmVhdHVyZSkpIHtcbiAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBmZWF0dXJlLmdldEdlb21ldHJ5KCk7XG4gICAgICAgICAgdmFyIHByZXZpb3VzTWluU3F1YXJlZERpc3RhbmNlID0gbWluU3F1YXJlZERpc3RhbmNlO1xuICAgICAgICAgIG1pblNxdWFyZWREaXN0YW5jZSA9IGdlb21ldHJ5LmNsb3Nlc3RQb2ludFhZKFxuICAgICAgICAgICAgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpO1xuICAgICAgICAgIGlmIChtaW5TcXVhcmVkRGlzdGFuY2UgPCBwcmV2aW91c01pblNxdWFyZWREaXN0YW5jZSkge1xuICAgICAgICAgICAgY2xvc2VzdEZlYXR1cmUgPSBmZWF0dXJlO1xuICAgICAgICAgICAgLy8gVGhpcyBpcyBzbmVha3kuICBSZWR1Y2UgdGhlIGV4dGVudCB0aGF0IGl0IGlzIGN1cnJlbnRseSBiZWluZ1xuICAgICAgICAgICAgLy8gc2VhcmNoZWQgd2hpbGUgdGhlIFItVHJlZSB0cmF2ZXJzYWwgdXNpbmcgdGhpcyBzYW1lIGV4dGVudCBvYmplY3RcbiAgICAgICAgICAgIC8vIGlzIHN0aWxsIGluIHByb2dyZXNzLiAgVGhpcyBpcyBzYWZlIGJlY2F1c2UgdGhlIG5ldyBleHRlbnQgaXNcbiAgICAgICAgICAgIC8vIHN0cmljdGx5IGNvbnRhaW5lZCBieSB0aGUgb2xkIGV4dGVudC5cbiAgICAgICAgICAgIHZhciBtaW5EaXN0YW5jZSA9IE1hdGguc3FydChtaW5TcXVhcmVkRGlzdGFuY2UpO1xuICAgICAgICAgICAgZXh0ZW50WzBdID0geCAtIG1pbkRpc3RhbmNlO1xuICAgICAgICAgICAgZXh0ZW50WzFdID0geSAtIG1pbkRpc3RhbmNlO1xuICAgICAgICAgICAgZXh0ZW50WzJdID0geCArIG1pbkRpc3RhbmNlO1xuICAgICAgICAgICAgZXh0ZW50WzNdID0geSArIG1pbkRpc3RhbmNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgcmV0dXJuIGNsb3Nlc3RGZWF0dXJlO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZXh0ZW50IG9mIHRoZSBmZWF0dXJlcyBjdXJyZW50bHkgaW4gdGhlIHNvdXJjZS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgaXMgbm90IGF2YWlsYWJsZSB3aGVuIHRoZSBzb3VyY2UgaXMgY29uZmlndXJlZCB3aXRoXG4gICAqIGB1c2VTcGF0aWFsSW5kZXhgIHNldCB0byBgZmFsc2VgLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQ9fSBvcHRfZXh0ZW50IERlc3RpbmF0aW9uIGV4dGVudC4gSWYgcHJvdmlkZWQsIG5vIG5ldyBleHRlbnRcbiAgICogICAgIHdpbGwgYmUgY3JlYXRlZC4gSW5zdGVhZCwgdGhhdCBleHRlbnQncyBjb29yZGluYXRlcyB3aWxsIGJlIG92ZXJ3cml0dGVuLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIFZlY3RvclNvdXJjZS5wcm90b3R5cGUuZ2V0RXh0ZW50ID0gZnVuY3Rpb24gZ2V0RXh0ZW50IChvcHRfZXh0ZW50KSB7XG4gICAgcmV0dXJuIHRoaXMuZmVhdHVyZXNSdHJlZV8uZ2V0RXh0ZW50KG9wdF9leHRlbnQpO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEdldCBhIGZlYXR1cmUgYnkgaXRzIGlkZW50aWZpZXIgKHRoZSB2YWx1ZSByZXR1cm5lZCBieSBmZWF0dXJlLmdldElkKCkpLlxuICAgKiBOb3RlIHRoYXQgdGhlIGluZGV4IHRyZWF0cyBzdHJpbmcgYW5kIG51bWVyaWMgaWRlbnRpZmllcnMgYXMgdGhlIHNhbWUuICBTb1xuICAgKiBgc291cmNlLmdldEZlYXR1cmVCeUlkKDIpYCB3aWxsIHJldHVybiBhIGZlYXR1cmUgd2l0aCBpZCBgJzInYCBvciBgMmAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gaWQgRmVhdHVyZSBpZGVudGlmaWVyLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IFRoZSBmZWF0dXJlIChvciBgbnVsbGAgaWYgbm90IGZvdW5kKS5cbiAgICogQGFwaVxuICAgKi9cbiAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5nZXRGZWF0dXJlQnlJZCA9IGZ1bmN0aW9uIGdldEZlYXR1cmVCeUlkIChpZCkge1xuICAgIHZhciBmZWF0dXJlID0gdGhpcy5pZEluZGV4X1tpZC50b1N0cmluZygpXTtcbiAgICByZXR1cm4gZmVhdHVyZSAhPT0gdW5kZWZpbmVkID8gZmVhdHVyZSA6IG51bGw7XG4gIH07XG5cblxuICAvKipcbiAgICogR2V0IHRoZSBmb3JtYXQgYXNzb2NpYXRlZCB3aXRoIHRoaXMgc291cmNlLlxuICAgKlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9mb3JtYXQvRmVhdHVyZS5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gVGhlIGZlYXR1cmUgZm9ybWF0LlxuICAgKiBAYXBpXG4gICAqL1xuICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmdldEZvcm1hdCA9IGZ1bmN0aW9uIGdldEZvcm1hdCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZm9ybWF0XztcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgc291cmNlIGNhbiBoYXZlIG92ZXJsYXBwaW5nIGdlb21ldHJpZXMuXG4gICAqL1xuICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmdldE92ZXJsYXBzID0gZnVuY3Rpb24gZ2V0T3ZlcmxhcHMgKCkge1xuICAgIHJldHVybiB0aGlzLm92ZXJsYXBzXztcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHVybCBhc3NvY2lhdGVkIHdpdGggdGhpcyBzb3VyY2UuXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ3xpbXBvcnQoXCIuLi9mZWF0dXJlbG9hZGVyLmpzXCIpLkZlYXR1cmVVcmxGdW5jdGlvbnx1bmRlZmluZWR9IFRoZSB1cmwuXG4gICAqIEBhcGlcbiAgICovXG4gIFZlY3RvclNvdXJjZS5wcm90b3R5cGUuZ2V0VXJsID0gZnVuY3Rpb24gZ2V0VXJsICgpIHtcbiAgICByZXR1cm4gdGhpcy51cmxfO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IEV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5oYW5kbGVGZWF0dXJlQ2hhbmdlXyA9IGZ1bmN0aW9uIGhhbmRsZUZlYXR1cmVDaGFuZ2VfIChldmVudCkge1xuICAgIHZhciBmZWF0dXJlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9ICovIChldmVudC50YXJnZXQpO1xuICAgIHZhciBmZWF0dXJlS2V5ID0gZ2V0VWlkKGZlYXR1cmUpO1xuICAgIHZhciBnZW9tZXRyeSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcbiAgICBpZiAoIWdlb21ldHJ5KSB7XG4gICAgICBpZiAoIShmZWF0dXJlS2V5IGluIHRoaXMubnVsbEdlb21ldHJ5RmVhdHVyZXNfKSkge1xuICAgICAgICBpZiAodGhpcy5mZWF0dXJlc1J0cmVlXykge1xuICAgICAgICAgIHRoaXMuZmVhdHVyZXNSdHJlZV8ucmVtb3ZlKGZlYXR1cmUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubnVsbEdlb21ldHJ5RmVhdHVyZXNfW2ZlYXR1cmVLZXldID0gZmVhdHVyZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGV4dGVudCA9IGdlb21ldHJ5LmdldEV4dGVudCgpO1xuICAgICAgaWYgKGZlYXR1cmVLZXkgaW4gdGhpcy5udWxsR2VvbWV0cnlGZWF0dXJlc18pIHtcbiAgICAgICAgZGVsZXRlIHRoaXMubnVsbEdlb21ldHJ5RmVhdHVyZXNfW2ZlYXR1cmVLZXldO1xuICAgICAgICBpZiAodGhpcy5mZWF0dXJlc1J0cmVlXykge1xuICAgICAgICAgIHRoaXMuZmVhdHVyZXNSdHJlZV8uaW5zZXJ0KGV4dGVudCwgZmVhdHVyZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLmZlYXR1cmVzUnRyZWVfKSB7XG4gICAgICAgICAgdGhpcy5mZWF0dXJlc1J0cmVlXy51cGRhdGUoZXh0ZW50LCBmZWF0dXJlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB2YXIgaWQgPSBmZWF0dXJlLmdldElkKCk7XG4gICAgaWYgKGlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciBzaWQgPSBpZC50b1N0cmluZygpO1xuICAgICAgaWYgKGZlYXR1cmVLZXkgaW4gdGhpcy51bmRlZklkSW5kZXhfKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnVuZGVmSWRJbmRleF9bZmVhdHVyZUtleV07XG4gICAgICAgIHRoaXMuaWRJbmRleF9bc2lkXSA9IGZlYXR1cmU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy5pZEluZGV4X1tzaWRdICE9PSBmZWF0dXJlKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVGcm9tSWRJbmRleF8oZmVhdHVyZSk7XG4gICAgICAgICAgdGhpcy5pZEluZGV4X1tzaWRdID0gZmVhdHVyZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIShmZWF0dXJlS2V5IGluIHRoaXMudW5kZWZJZEluZGV4XykpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVGcm9tSWRJbmRleF8oZmVhdHVyZSk7XG4gICAgICAgIHRoaXMudW5kZWZJZEluZGV4X1tmZWF0dXJlS2V5XSA9IGZlYXR1cmU7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgVmVjdG9yU291cmNlRXZlbnQoXG4gICAgICBWZWN0b3JFdmVudFR5cGUuQ0hBTkdFRkVBVFVSRSwgZmVhdHVyZSkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGZlYXR1cmUgaXMgY29udGFpbmVkIHdpdGhpbiB0aGUgc291cmNlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBIYXMgZmVhdHVyZS5cbiAgICogQGFwaVxuICAgKi9cbiAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5oYXNGZWF0dXJlID0gZnVuY3Rpb24gaGFzRmVhdHVyZSAoZmVhdHVyZSkge1xuICAgIHZhciBpZCA9IGZlYXR1cmUuZ2V0SWQoKTtcbiAgICBpZiAoaWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGlkIGluIHRoaXMuaWRJbmRleF87XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBnZXRVaWQoZmVhdHVyZSkgaW4gdGhpcy51bmRlZklkSW5kZXhfO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgZW1wdHkuXG4gICAqL1xuICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiBpc0VtcHR5JDEgKCkge1xuICAgIHJldHVybiB0aGlzLmZlYXR1cmVzUnRyZWVfLmlzRW1wdHkoKSAmJiBpc0VtcHR5KHRoaXMubnVsbEdlb21ldHJ5RmVhdHVyZXNfKTtcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICovXG4gIFZlY3RvclNvdXJjZS5wcm90b3R5cGUubG9hZEZlYXR1cmVzID0gZnVuY3Rpb24gbG9hZEZlYXR1cmVzIChleHRlbnQsIHJlc29sdXRpb24sIHByb2plY3Rpb24pIHtcbiAgICB2YXIgdGhpcyQxID0gdGhpcztcblxuICAgIHZhciBsb2FkZWRFeHRlbnRzUnRyZWUgPSB0aGlzLmxvYWRlZEV4dGVudHNSdHJlZV87XG4gICAgdmFyIGV4dGVudHNUb0xvYWQgPSB0aGlzLnN0cmF0ZWd5XyhleHRlbnQsIHJlc29sdXRpb24pO1xuICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgIHZhciBsb29wID0gZnVuY3Rpb24gKCBpLCBpaSApIHtcbiAgICAgIHZhciBleHRlbnRUb0xvYWQgPSBleHRlbnRzVG9Mb2FkW2ldO1xuICAgICAgdmFyIGFscmVhZHlMb2FkZWQgPSBsb2FkZWRFeHRlbnRzUnRyZWUuZm9yRWFjaEluRXh0ZW50KGV4dGVudFRvTG9hZCxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7e2V4dGVudDogaW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH19IG9iamVjdCBPYmplY3QuXG4gICAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zLlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICAgICAgcmV0dXJuIGNvbnRhaW5zRXh0ZW50KG9iamVjdC5leHRlbnQsIGV4dGVudFRvTG9hZCk7XG4gICAgICAgIH0pO1xuICAgICAgaWYgKCFhbHJlYWR5TG9hZGVkKSB7XG4gICAgICAgIHRoaXMkMS5sb2FkZXJfLmNhbGwodGhpcyQxLCBleHRlbnRUb0xvYWQsIHJlc29sdXRpb24sIHByb2plY3Rpb24pO1xuICAgICAgICBsb2FkZWRFeHRlbnRzUnRyZWUuaW5zZXJ0KGV4dGVudFRvTG9hZCwge2V4dGVudDogZXh0ZW50VG9Mb2FkLnNsaWNlKCl9KTtcbiAgICAgICAgdGhpcyQxLmxvYWRpbmcgPSB0aGlzJDEubG9hZGVyXyAhPT0gVk9JRDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZXh0ZW50c1RvTG9hZC5sZW5ndGg7IGkgPCBpaTsgKytpKSBsb29wKCBpLCBpaSApO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbiBleHRlbnQgZnJvbSB0aGUgbGlzdCBvZiBsb2FkZWQgZXh0ZW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgKiBAYXBpXG4gICAqL1xuICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLnJlbW92ZUxvYWRlZEV4dGVudCA9IGZ1bmN0aW9uIHJlbW92ZUxvYWRlZEV4dGVudCAoZXh0ZW50KSB7XG4gICAgdmFyIGxvYWRlZEV4dGVudHNSdHJlZSA9IHRoaXMubG9hZGVkRXh0ZW50c1J0cmVlXztcbiAgICB2YXIgb2JqO1xuICAgIGxvYWRlZEV4dGVudHNSdHJlZS5mb3JFYWNoSW5FeHRlbnQoZXh0ZW50LCBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgIGlmIChlcXVhbHMob2JqZWN0LmV4dGVudCwgZXh0ZW50KSkge1xuICAgICAgICBvYmogPSBvYmplY3Q7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChvYmopIHtcbiAgICAgIGxvYWRlZEV4dGVudHNSdHJlZS5yZW1vdmUob2JqKTtcbiAgICB9XG4gIH07XG5cblxuICAvKipcbiAgICogUmVtb3ZlIGEgc2luZ2xlIGZlYXR1cmUgZnJvbSB0aGUgc291cmNlLiAgSWYgeW91IHdhbnQgdG8gcmVtb3ZlIGFsbCBmZWF0dXJlc1xuICAgKiBhdCBvbmNlLCB1c2UgdGhlIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1ZlY3Rvcn5WZWN0b3JTb3VyY2UjY2xlYXIgI2NsZWFyKCl9IG1ldGhvZFxuICAgKiBpbnN0ZWFkLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlIHRvIHJlbW92ZS5cbiAgICogQGFwaVxuICAgKi9cbiAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5yZW1vdmVGZWF0dXJlID0gZnVuY3Rpb24gcmVtb3ZlRmVhdHVyZSAoZmVhdHVyZSkge1xuICAgIHZhciBmZWF0dXJlS2V5ID0gZ2V0VWlkKGZlYXR1cmUpO1xuICAgIGlmIChmZWF0dXJlS2V5IGluIHRoaXMubnVsbEdlb21ldHJ5RmVhdHVyZXNfKSB7XG4gICAgICBkZWxldGUgdGhpcy5udWxsR2VvbWV0cnlGZWF0dXJlc19bZmVhdHVyZUtleV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmZlYXR1cmVzUnRyZWVfKSB7XG4gICAgICAgIHRoaXMuZmVhdHVyZXNSdHJlZV8ucmVtb3ZlKGZlYXR1cmUpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlbW92ZUZlYXR1cmVJbnRlcm5hbChmZWF0dXJlKTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBSZW1vdmUgZmVhdHVyZSB3aXRob3V0IGZpcmluZyBhIGBjaGFuZ2VgIGV2ZW50LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLnJlbW92ZUZlYXR1cmVJbnRlcm5hbCA9IGZ1bmN0aW9uIHJlbW92ZUZlYXR1cmVJbnRlcm5hbCAoZmVhdHVyZSkge1xuICAgIHZhciBmZWF0dXJlS2V5ID0gZ2V0VWlkKGZlYXR1cmUpO1xuICAgIHRoaXMuZmVhdHVyZUNoYW5nZUtleXNfW2ZlYXR1cmVLZXldLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgZGVsZXRlIHRoaXMuZmVhdHVyZUNoYW5nZUtleXNfW2ZlYXR1cmVLZXldO1xuICAgIHZhciBpZCA9IGZlYXR1cmUuZ2V0SWQoKTtcbiAgICBpZiAoaWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZGVsZXRlIHRoaXMuaWRJbmRleF9baWQudG9TdHJpbmcoKV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlbGV0ZSB0aGlzLnVuZGVmSWRJbmRleF9bZmVhdHVyZUtleV07XG4gICAgfVxuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgVmVjdG9yU291cmNlRXZlbnQoXG4gICAgICBWZWN0b3JFdmVudFR5cGUuUkVNT1ZFRkVBVFVSRSwgZmVhdHVyZSkpO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhIGZlYXR1cmUgZnJvbSB0aGUgaWQgaW5kZXguICBDYWxsZWQgaW50ZXJuYWxseSB3aGVuIHRoZSBmZWF0dXJlIGlkXG4gICAqIG1heSBoYXZlIGNoYW5nZWQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIFRoZSBmZWF0dXJlLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBSZW1vdmVkIHRoZSBmZWF0dXJlIGZyb20gdGhlIGluZGV4LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgVmVjdG9yU291cmNlLnByb3RvdHlwZS5yZW1vdmVGcm9tSWRJbmRleF8gPSBmdW5jdGlvbiByZW1vdmVGcm9tSWRJbmRleF8gKGZlYXR1cmUpIHtcbiAgICB2YXIgcmVtb3ZlZCA9IGZhbHNlO1xuICAgIGZvciAodmFyIGlkIGluIHRoaXMuaWRJbmRleF8pIHtcbiAgICAgIGlmICh0aGlzLmlkSW5kZXhfW2lkXSA9PT0gZmVhdHVyZSkge1xuICAgICAgICBkZWxldGUgdGhpcy5pZEluZGV4X1tpZF07XG4gICAgICAgIHJlbW92ZWQgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlbW92ZWQ7XG4gIH07XG5cblxuICAvKipcbiAgICogU2V0IHRoZSBuZXcgbG9hZGVyIG9mIHRoZSBzb3VyY2UuIFRoZSBuZXh0IGxvYWRGZWF0dXJlcyBjYWxsIHdpbGwgdXNlIHRoZVxuICAgKiBuZXcgbG9hZGVyLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2ZlYXR1cmVsb2FkZXIuanNcIikuRmVhdHVyZUxvYWRlcn0gbG9hZGVyIFRoZSBsb2FkZXIgdG8gc2V0LlxuICAgKiBAYXBpXG4gICAqL1xuICBWZWN0b3JTb3VyY2UucHJvdG90eXBlLnNldExvYWRlciA9IGZ1bmN0aW9uIHNldExvYWRlciAobG9hZGVyKSB7XG4gICAgdGhpcy5sb2FkZXJfID0gbG9hZGVyO1xuICB9O1xuXG4gIHJldHVybiBWZWN0b3JTb3VyY2U7XG59KFNvdXJjZSkpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IFZlY3RvclNvdXJjZTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VmVjdG9yLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvRXZlbnRUeXBlXG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIC8qKlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL3JlbmRlci9FdmVudH5SZW5kZXJFdmVudCNwb3N0Y29tcG9zZVxuICAgKiBAYXBpXG4gICAqL1xuICBQT1NUQ09NUE9TRTogJ3Bvc3Rjb21wb3NlJyxcbiAgLyoqXG4gICAqIEBldmVudCBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3ByZWNvbXBvc2VcbiAgICogQGFwaVxuICAgKi9cbiAgUFJFQ09NUE9TRTogJ3ByZWNvbXBvc2UnLFxuICAvKipcbiAgICogQGV2ZW50IG1vZHVsZTpvbC9yZW5kZXIvRXZlbnR+UmVuZGVyRXZlbnQjcmVuZGVyXG4gICAqIEBhcGlcbiAgICovXG4gIFJFTkRFUjogJ3JlbmRlcicsXG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgd2hlbiByZW5kZXJpbmcgaXMgY29tcGxldGUsIGkuZS4gYWxsIHNvdXJjZXMgYW5kIHRpbGVzIGhhdmVcbiAgICogZmluaXNoZWQgbG9hZGluZyBmb3IgdGhlIGN1cnJlbnQgdmlld3BvcnQsIGFuZCBhbGwgdGlsZXMgYXJlIGZhZGVkIGluLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL3JlbmRlci9FdmVudH5SZW5kZXJFdmVudCNyZW5kZXJjb21wbGV0ZVxuICAgKiBAYXBpXG4gICAqL1xuICBSRU5ERVJDT01QTEVURTogJ3JlbmRlcmNvbXBsZXRlJ1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXZlbnRUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvaW50ZXJzZWN0c2V4dGVudFxuICovXG5pbXBvcnQge2NvbnRhaW5zRXh0ZW50LCBjcmVhdGVFbXB0eSwgZXh0ZW5kRmxhdENvb3JkaW5hdGVzLCBpbnRlcnNlY3RzLCBpbnRlcnNlY3RzU2VnbWVudH0gZnJvbSAnLi4vLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7bGluZWFyUmluZ0NvbnRhaW5zWFksIGxpbmVhclJpbmdDb250YWluc0V4dGVudH0gZnJvbSAnLi9jb250YWlucy5qcyc7XG5pbXBvcnQge2ZvckVhY2ggYXMgZm9yRWFjaFNlZ21lbnR9IGZyb20gJy4vc2VnbWVudHMuanMnO1xuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNMaW5lU3RyaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50KSB7XG4gIHZhciBjb29yZGluYXRlc0V4dGVudCA9IGV4dGVuZEZsYXRDb29yZGluYXRlcyhcbiAgICBjcmVhdGVFbXB0eSgpLCBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpO1xuICBpZiAoIWludGVyc2VjdHMoZXh0ZW50LCBjb29yZGluYXRlc0V4dGVudCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKGNvbnRhaW5zRXh0ZW50KGV4dGVudCwgY29vcmRpbmF0ZXNFeHRlbnQpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKGNvb3JkaW5hdGVzRXh0ZW50WzBdID49IGV4dGVudFswXSAmJlxuICAgICAgY29vcmRpbmF0ZXNFeHRlbnRbMl0gPD0gZXh0ZW50WzJdKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKGNvb3JkaW5hdGVzRXh0ZW50WzFdID49IGV4dGVudFsxXSAmJlxuICAgICAgY29vcmRpbmF0ZXNFeHRlbnRbM10gPD0gZXh0ZW50WzNdKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZvckVhY2hTZWdtZW50KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSxcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gcG9pbnQxIFN0YXJ0IHBvaW50LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwb2ludDIgRW5kIHBvaW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgc2VnbWVudCBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QsXG4gICAgICogICAgIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uKHBvaW50MSwgcG9pbnQyKSB7XG4gICAgICByZXR1cm4gaW50ZXJzZWN0c1NlZ21lbnQoZXh0ZW50LCBwb2ludDEsIHBvaW50Mik7XG4gICAgfSk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0c0xpbmVTdHJpbmdBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBleHRlbnQpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgaWYgKGludGVyc2VjdHNMaW5lU3RyaW5nKFxuICAgICAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNbaV0sIHN0cmlkZSwgZXh0ZW50KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIG9mZnNldCA9IGVuZHNbaV07XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNMaW5lYXJSaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50KSB7XG4gIGlmIChpbnRlcnNlY3RzTGluZVN0cmluZyhcbiAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGV4dGVudCkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAobGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBleHRlbnRbMF0sIGV4dGVudFsxXSkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAobGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBleHRlbnRbMF0sIGV4dGVudFszXSkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAobGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBleHRlbnRbMl0sIGV4dGVudFsxXSkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAobGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBleHRlbnRbMl0sIGV4dGVudFszXSkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBleHRlbnQpIHtcbiAgaWYgKCFpbnRlcnNlY3RzTGluZWFyUmluZyhcbiAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc1swXSwgc3RyaWRlLCBleHRlbnQpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChlbmRzLmxlbmd0aCA9PT0gMSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGZvciAodmFyIGkgPSAxLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGlmIChsaW5lYXJSaW5nQ29udGFpbnNFeHRlbnQoZmxhdENvb3JkaW5hdGVzLCBlbmRzW2kgLSAxXSwgZW5kc1tpXSwgc3RyaWRlLCBleHRlbnQpKSB7XG4gICAgICBpZiAoIWludGVyc2VjdHNMaW5lU3RyaW5nKGZsYXRDb29yZGluYXRlcywgZW5kc1tpIC0gMV0sIGVuZHNbaV0sIHN0cmlkZSwgZXh0ZW50KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNMaW5lYXJSaW5nTXVsdGlBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgZXh0ZW50KSB7XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgIGlmIChpbnRlcnNlY3RzTGluZWFyUmluZ0FycmF5KFxuICAgICAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgZXh0ZW50KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVyc2VjdHNleHRlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9hcmVhXG4gKi9cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSkge1xuICB2YXIgdHdpY2VBcmVhID0gMDtcbiAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZV07XG4gIHZhciB5MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyAxXTtcbiAgZm9yICg7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgIHZhciB4MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgIHZhciB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICB0d2ljZUFyZWEgKz0geTEgKiB4MiAtIHgxICogeTI7XG4gICAgeDEgPSB4MjtcbiAgICB5MSA9IHkyO1xuICB9XG4gIHJldHVybiB0d2ljZUFyZWEgLyAyO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge251bWJlcn0gQXJlYS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUpIHtcbiAgdmFyIGFyZWEgPSAwO1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICBhcmVhICs9IGxpbmVhclJpbmcoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKTtcbiAgICBvZmZzZXQgPSBlbmQ7XG4gIH1cbiAgcmV0dXJuIGFyZWE7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7bnVtYmVyfSBBcmVhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3NzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlKSB7XG4gIHZhciBhcmVhID0gMDtcbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgYXJlYSArPSBsaW5lYXJSaW5ncyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlKTtcbiAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gIH1cbiAgcmV0dXJuIGFyZWE7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFyZWEuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JvdGF0aW9uY29uc3RyYWludFxuICovXG5pbXBvcnQge3RvUmFkaWFuc30gZnJvbSAnLi9tYXRoLmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbigobnVtYmVyfHVuZGVmaW5lZCksIG51bWJlcik6IChudW1iZXJ8dW5kZWZpbmVkKX0gVHlwZVxuICovXG5cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIERlbHRhLlxuICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUm90YXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXNhYmxlKHJvdGF0aW9uLCBkZWx0YSkge1xuICBpZiAocm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiAwO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgRGVsdGEuXG4gKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSb3RhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vbmUocm90YXRpb24sIGRlbHRhKSB7XG4gIGlmIChyb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHJvdGF0aW9uICsgZGVsdGE7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IG4gTi5cbiAqIEByZXR1cm4ge1R5cGV9IFJvdGF0aW9uIGNvbnN0cmFpbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTbmFwVG9OKG4pIHtcbiAgdmFyIHRoZXRhID0gMiAqIE1hdGguUEkgLyBuO1xuICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcm90YXRpb24gUm90YXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIERlbHRhLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFJvdGF0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uKHJvdGF0aW9uLCBkZWx0YSkge1xuICAgICAgaWYgKHJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcm90YXRpb24gPSBNYXRoLmZsb29yKChyb3RhdGlvbiArIGRlbHRhKSAvIHRoZXRhICsgMC41KSAqIHRoZXRhO1xuICAgICAgICByZXR1cm4gcm90YXRpb247XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0pO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfdG9sZXJhbmNlIFRvbGVyYW5jZS5cbiAqIEByZXR1cm4ge1R5cGV9IFJvdGF0aW9uIGNvbnN0cmFpbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTbmFwVG9aZXJvKG9wdF90b2xlcmFuY2UpIHtcbiAgdmFyIHRvbGVyYW5jZSA9IG9wdF90b2xlcmFuY2UgfHwgdG9SYWRpYW5zKDUpO1xuICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcm90YXRpb24gUm90YXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIERlbHRhLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFJvdGF0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uKHJvdGF0aW9uLCBkZWx0YSkge1xuICAgICAgaWYgKHJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKE1hdGguYWJzKHJvdGF0aW9uICsgZGVsdGEpIDw9IHRvbGVyYW5jZSkge1xuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiByb3RhdGlvbiArIGRlbHRhO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0pO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1yb3RhdGlvbmNvbnN0cmFpbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL0ZlYXR1cmVcbiAqL1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQge2xpc3RlbiwgdW5saXN0ZW4sIHVubGlzdGVuQnlLZXl9IGZyb20gJy4vZXZlbnRzLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBCYXNlT2JqZWN0LCB7Z2V0Q2hhbmdlRXZlbnRUeXBlfSBmcm9tICcuL09iamVjdC5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge3R5cGVvZiBGZWF0dXJlfHR5cGVvZiBpbXBvcnQoXCIuL3JlbmRlci9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IEZlYXR1cmVDbGFzc1xuICovXG5cbi8qKlxuICogQHR5cGVkZWYge0ZlYXR1cmV8aW1wb3J0KFwiLi9yZW5kZXIvRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBGZWF0dXJlTGlrZVxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSB2ZWN0b3Igb2JqZWN0IGZvciBnZW9ncmFwaGljIGZlYXR1cmVzIHdpdGggYSBnZW9tZXRyeSBhbmQgb3RoZXJcbiAqIGF0dHJpYnV0ZSBwcm9wZXJ0aWVzLCBzaW1pbGFyIHRvIHRoZSBmZWF0dXJlcyBpbiB2ZWN0b3IgZmlsZSBmb3JtYXRzIGxpa2VcbiAqIEdlb0pTT04uXG4gKlxuICogRmVhdHVyZXMgY2FuIGJlIHN0eWxlZCBpbmRpdmlkdWFsbHkgd2l0aCBgc2V0U3R5bGVgOyBvdGhlcndpc2UgdGhleSB1c2UgdGhlXG4gKiBzdHlsZSBvZiB0aGVpciB2ZWN0b3IgbGF5ZXIuXG4gKlxuICogTm90ZSB0aGF0IGF0dHJpYnV0ZSBwcm9wZXJ0aWVzIGFyZSBzZXQgYXMge0BsaW5rIG1vZHVsZTpvbC9PYmplY3R9IHByb3BlcnRpZXMgb25cbiAqIHRoZSBmZWF0dXJlIG9iamVjdCwgc28gdGhleSBhcmUgb2JzZXJ2YWJsZSwgYW5kIGhhdmUgZ2V0L3NldCBhY2Nlc3NvcnMuXG4gKlxuICogVHlwaWNhbGx5LCBhIGZlYXR1cmUgaGFzIGEgc2luZ2xlIGdlb21ldHJ5IHByb3BlcnR5LiBZb3UgY2FuIHNldCB0aGVcbiAqIGdlb21ldHJ5IHVzaW5nIHRoZSBgc2V0R2VvbWV0cnlgIG1ldGhvZCBhbmQgZ2V0IGl0IHdpdGggYGdldEdlb21ldHJ5YC5cbiAqIEl0IGlzIHBvc3NpYmxlIHRvIHN0b3JlIG1vcmUgdGhhbiBvbmUgZ2VvbWV0cnkgb24gYSBmZWF0dXJlIHVzaW5nIGF0dHJpYnV0ZVxuICogcHJvcGVydGllcy4gQnkgZGVmYXVsdCwgdGhlIGdlb21ldHJ5IHVzZWQgZm9yIHJlbmRlcmluZyBpcyBpZGVudGlmaWVkIGJ5XG4gKiB0aGUgcHJvcGVydHkgbmFtZSBgZ2VvbWV0cnlgLiBJZiB5b3Ugd2FudCB0byB1c2UgYW5vdGhlciBnZW9tZXRyeSBwcm9wZXJ0eVxuICogZm9yIHJlbmRlcmluZywgdXNlIHRoZSBgc2V0R2VvbWV0cnlOYW1lYCBtZXRob2QgdG8gY2hhbmdlIHRoZSBhdHRyaWJ1dGVcbiAqIHByb3BlcnR5IGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2VvbWV0cnkgZm9yIHRoZSBmZWF0dXJlLiAgRm9yIGV4YW1wbGU6XG4gKlxuICogYGBganNcbiAqXG4gKiBpbXBvcnQgRmVhdHVyZSBmcm9tICdvbC9GZWF0dXJlJztcbiAqIGltcG9ydCBQb2x5Z29uIGZyb20gJ29sL2dlb20vUG9seWdvbic7XG4gKiBpbXBvcnQgUG9pbnQgZnJvbSAnb2wvZ2VvbS9Qb2ludCc7XG4gKlxuICogdmFyIGZlYXR1cmUgPSBuZXcgRmVhdHVyZSh7XG4gKiAgIGdlb21ldHJ5OiBuZXcgUG9seWdvbihwb2x5Q29vcmRzKSxcbiAqICAgbGFiZWxQb2ludDogbmV3IFBvaW50KGxhYmVsQ29vcmRzKSxcbiAqICAgbmFtZTogJ015IFBvbHlnb24nXG4gKiB9KTtcbiAqXG4gKiAvLyBnZXQgdGhlIHBvbHlnb24gZ2VvbWV0cnlcbiAqIHZhciBwb2x5ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuICpcbiAqIC8vIFJlbmRlciB0aGUgZmVhdHVyZSBhcyBhIHBvaW50IHVzaW5nIHRoZSBjb29yZGluYXRlcyBmcm9tIGxhYmVsUG9pbnRcbiAqIGZlYXR1cmUuc2V0R2VvbWV0cnlOYW1lKCdsYWJlbFBvaW50Jyk7XG4gKlxuICogLy8gZ2V0IHRoZSBwb2ludCBnZW9tZXRyeVxuICogdmFyIHBvaW50ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xuICogYGBgXG4gKlxuICogQGFwaVxuICovXG52YXIgRmVhdHVyZSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEJhc2VPYmplY3QpIHtcbiAgZnVuY3Rpb24gRmVhdHVyZShvcHRfZ2VvbWV0cnlPclByb3BlcnRpZXMpIHtcblxuICAgIEJhc2VPYmplY3QuY2FsbCh0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcnxzdHJpbmd8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMuaWRfID0gdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZ2VvbWV0cnlOYW1lXyA9ICdnZW9tZXRyeSc7XG5cbiAgICAvKipcbiAgICAgKiBVc2VyIHByb3ZpZGVkIHN0eWxlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVMaWtlfVxuICAgICAqL1xuICAgIHRoaXMuc3R5bGVfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVGdW5jdGlvbnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy5zdHlsZUZ1bmN0aW9uXyA9IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICovXG4gICAgdGhpcy5nZW9tZXRyeUNoYW5nZUtleV8gPSBudWxsO1xuXG4gICAgbGlzdGVuKFxuICAgICAgdGhpcywgZ2V0Q2hhbmdlRXZlbnRUeXBlKHRoaXMuZ2VvbWV0cnlOYW1lXyksXG4gICAgICB0aGlzLmhhbmRsZUdlb21ldHJ5Q2hhbmdlZF8sIHRoaXMpO1xuXG4gICAgaWYgKG9wdF9nZW9tZXRyeU9yUHJvcGVydGllcykge1xuICAgICAgaWYgKHR5cGVvZiAvKiogQHR5cGUgez99ICovIChvcHRfZ2VvbWV0cnlPclByb3BlcnRpZXMpLmdldFNpbXBsaWZpZWRHZW9tZXRyeSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2YXIgZ2VvbWV0cnkgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSAqLyAob3B0X2dlb21ldHJ5T3JQcm9wZXJ0aWVzKTtcbiAgICAgICAgdGhpcy5zZXRHZW9tZXRyeShnZW9tZXRyeSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvKiogQHR5cGUge09iamVjdDxzdHJpbmcsICo+fSAqL1xuICAgICAgICB2YXIgcHJvcGVydGllcyA9IG9wdF9nZW9tZXRyeU9yUHJvcGVydGllcztcbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHByb3BlcnRpZXMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmICggQmFzZU9iamVjdCApIEZlYXR1cmUuX19wcm90b19fID0gQmFzZU9iamVjdDtcbiAgRmVhdHVyZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBCYXNlT2JqZWN0ICYmIEJhc2VPYmplY3QucHJvdG90eXBlICk7XG4gIEZlYXR1cmUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRmVhdHVyZTtcblxuICAvKipcbiAgICogQ2xvbmUgdGhpcyBmZWF0dXJlLiBJZiB0aGUgb3JpZ2luYWwgZmVhdHVyZSBoYXMgYSBnZW9tZXRyeSBpdFxuICAgKiBpcyBhbHNvIGNsb25lZC4gVGhlIGZlYXR1cmUgaWQgaXMgbm90IHNldCBpbiB0aGUgY2xvbmUuXG4gICAqIEByZXR1cm4ge0ZlYXR1cmV9IFRoZSBjbG9uZS5cbiAgICogQGFwaVxuICAgKi9cbiAgRmVhdHVyZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiBjbG9uZSAoKSB7XG4gICAgdmFyIGNsb25lID0gbmV3IEZlYXR1cmUodGhpcy5nZXRQcm9wZXJ0aWVzKCkpO1xuICAgIGNsb25lLnNldEdlb21ldHJ5TmFtZSh0aGlzLmdldEdlb21ldHJ5TmFtZSgpKTtcbiAgICB2YXIgZ2VvbWV0cnkgPSB0aGlzLmdldEdlb21ldHJ5KCk7XG4gICAgaWYgKGdlb21ldHJ5KSB7XG4gICAgICBjbG9uZS5zZXRHZW9tZXRyeShnZW9tZXRyeS5jbG9uZSgpKTtcbiAgICB9XG4gICAgdmFyIHN0eWxlID0gdGhpcy5nZXRTdHlsZSgpO1xuICAgIGlmIChzdHlsZSkge1xuICAgICAgY2xvbmUuc2V0U3R5bGUoc3R5bGUpO1xuICAgIH1cbiAgICByZXR1cm4gY2xvbmU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZmVhdHVyZSdzIGRlZmF1bHQgZ2VvbWV0cnkuICBBIGZlYXR1cmUgbWF5IGhhdmUgYW55IG51bWJlciBvZiBuYW1lZFxuICAgKiBnZW9tZXRyaWVzLiAgVGhlIFwiZGVmYXVsdFwiIGdlb21ldHJ5ICh0aGUgb25lIHRoYXQgaXMgcmVuZGVyZWQgYnkgZGVmYXVsdCkgaXNcbiAgICogc2V0IHdoZW4gY2FsbGluZyB7QGxpbmsgbW9kdWxlOm9sL0ZlYXR1cmV+RmVhdHVyZSNzZXRHZW9tZXRyeX0uXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gVGhlIGRlZmF1bHQgZ2VvbWV0cnkgZm9yIHRoZSBmZWF0dXJlLlxuICAgKiBAYXBpXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqL1xuICBGZWF0dXJlLnByb3RvdHlwZS5nZXRHZW9tZXRyeSA9IGZ1bmN0aW9uIGdldEdlb21ldHJ5ICgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9ICovICh0aGlzLmdldCh0aGlzLmdlb21ldHJ5TmFtZV8pKVxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZmVhdHVyZSBpZGVudGlmaWVyLiAgVGhpcyBpcyBhIHN0YWJsZSBpZGVudGlmaWVyIGZvciB0aGUgZmVhdHVyZSBhbmRcbiAgICogaXMgZWl0aGVyIHNldCB3aGVuIHJlYWRpbmcgZGF0YSBmcm9tIGEgcmVtb3RlIHNvdXJjZSBvciBzZXQgZXhwbGljaXRseSBieVxuICAgKiBjYWxsaW5nIHtAbGluayBtb2R1bGU6b2wvRmVhdHVyZX5GZWF0dXJlI3NldElkfS5cbiAgICogQHJldHVybiB7bnVtYmVyfHN0cmluZ3x1bmRlZmluZWR9IElkLlxuICAgKiBAYXBpXG4gICAqL1xuICBGZWF0dXJlLnByb3RvdHlwZS5nZXRJZCA9IGZ1bmN0aW9uIGdldElkICgpIHtcbiAgICByZXR1cm4gdGhpcy5pZF87XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbmFtZSBvZiB0aGUgZmVhdHVyZSdzIGRlZmF1bHQgZ2VvbWV0cnkuICBCeSBkZWZhdWx0LCB0aGUgZGVmYXVsdFxuICAgKiBnZW9tZXRyeSBpcyBuYW1lZCBgZ2VvbWV0cnlgLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IEdldCB0aGUgcHJvcGVydHkgbmFtZSBhc3NvY2lhdGVkIHdpdGggdGhlIGRlZmF1bHQgZ2VvbWV0cnlcbiAgICogICAgIGZvciB0aGlzIGZlYXR1cmUuXG4gICAqIEBhcGlcbiAgICovXG4gIEZlYXR1cmUucHJvdG90eXBlLmdldEdlb21ldHJ5TmFtZSA9IGZ1bmN0aW9uIGdldEdlb21ldHJ5TmFtZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2VvbWV0cnlOYW1lXztcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBmZWF0dXJlJ3Mgc3R5bGUuIFdpbGwgcmV0dXJuIHdoYXQgd2FzIHByb3ZpZGVkIHRvIHRoZVxuICAgKiB7QGxpbmsgbW9kdWxlOm9sL0ZlYXR1cmV+RmVhdHVyZSNzZXRTdHlsZX0gbWV0aG9kLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3N0eWxlL1N0eWxlLmpzXCIpLlN0eWxlTGlrZX0gVGhlIGZlYXR1cmUgc3R5bGUuXG4gICAqIEBhcGlcbiAgICovXG4gIEZlYXR1cmUucHJvdG90eXBlLmdldFN0eWxlID0gZnVuY3Rpb24gZ2V0U3R5bGUgKCkge1xuICAgIHJldHVybiB0aGlzLnN0eWxlXztcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBmZWF0dXJlJ3Mgc3R5bGUgZnVuY3Rpb24uXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVGdW5jdGlvbnx1bmRlZmluZWR9IFJldHVybiBhIGZ1bmN0aW9uXG4gICAqIHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBzdHlsZSBvZiB0aGlzIGZlYXR1cmUuXG4gICAqIEBhcGlcbiAgICovXG4gIEZlYXR1cmUucHJvdG90eXBlLmdldFN0eWxlRnVuY3Rpb24gPSBmdW5jdGlvbiBnZXRTdHlsZUZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5zdHlsZUZ1bmN0aW9uXztcbiAgfTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIEZlYXR1cmUucHJvdG90eXBlLmhhbmRsZUdlb21ldHJ5Q2hhbmdlXyA9IGZ1bmN0aW9uIGhhbmRsZUdlb21ldHJ5Q2hhbmdlXyAoKSB7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBGZWF0dXJlLnByb3RvdHlwZS5oYW5kbGVHZW9tZXRyeUNoYW5nZWRfID0gZnVuY3Rpb24gaGFuZGxlR2VvbWV0cnlDaGFuZ2VkXyAoKSB7XG4gICAgaWYgKHRoaXMuZ2VvbWV0cnlDaGFuZ2VLZXlfKSB7XG4gICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMuZ2VvbWV0cnlDaGFuZ2VLZXlfKTtcbiAgICAgIHRoaXMuZ2VvbWV0cnlDaGFuZ2VLZXlfID0gbnVsbDtcbiAgICB9XG4gICAgdmFyIGdlb21ldHJ5ID0gdGhpcy5nZXRHZW9tZXRyeSgpO1xuICAgIGlmIChnZW9tZXRyeSkge1xuICAgICAgdGhpcy5nZW9tZXRyeUNoYW5nZUtleV8gPSBsaXN0ZW4oZ2VvbWV0cnksXG4gICAgICAgIEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuaGFuZGxlR2VvbWV0cnlDaGFuZ2VfLCB0aGlzKTtcbiAgICB9XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgZGVmYXVsdCBnZW9tZXRyeSBmb3IgdGhlIGZlYXR1cmUuICBUaGlzIHdpbGwgdXBkYXRlIHRoZSBwcm9wZXJ0eVxuICAgKiB3aXRoIHRoZSBuYW1lIHJldHVybmVkIGJ5IHtAbGluayBtb2R1bGU6b2wvRmVhdHVyZX5GZWF0dXJlI2dldEdlb21ldHJ5TmFtZX0uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSBnZW9tZXRyeSBUaGUgbmV3IGdlb21ldHJ5LlxuICAgKiBAYXBpXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqL1xuICBGZWF0dXJlLnByb3RvdHlwZS5zZXRHZW9tZXRyeSA9IGZ1bmN0aW9uIHNldEdlb21ldHJ5IChnZW9tZXRyeSkge1xuICAgIHRoaXMuc2V0KHRoaXMuZ2VvbWV0cnlOYW1lXywgZ2VvbWV0cnkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHN0eWxlIGZvciB0aGUgZmVhdHVyZS4gIFRoaXMgY2FuIGJlIGEgc2luZ2xlIHN0eWxlIG9iamVjdCwgYW4gYXJyYXlcbiAgICogb2Ygc3R5bGVzLCBvciBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSByZXNvbHV0aW9uIGFuZCByZXR1cm5zIGFuIGFycmF5IG9mXG4gICAqIHN0eWxlcy4gSWYgaXQgaXMgYG51bGxgIHRoZSBmZWF0dXJlIGhhcyBubyBzdHlsZSAoYSBgbnVsbGAgc3R5bGUpLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVMaWtlfSBzdHlsZSBTdHlsZSBmb3IgdGhpcyBmZWF0dXJlLlxuICAgKiBAYXBpXG4gICAqIEBmaXJlcyBtb2R1bGU6b2wvZXZlbnRzL0V2ZW50fkV2ZW50I2V2ZW50OmNoYW5nZVxuICAgKi9cbiAgRmVhdHVyZS5wcm90b3R5cGUuc2V0U3R5bGUgPSBmdW5jdGlvbiBzZXRTdHlsZSAoc3R5bGUpIHtcbiAgICB0aGlzLnN0eWxlXyA9IHN0eWxlO1xuICAgIHRoaXMuc3R5bGVGdW5jdGlvbl8gPSAhc3R5bGUgPyB1bmRlZmluZWQgOiBjcmVhdGVTdHlsZUZ1bmN0aW9uKHN0eWxlKTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBmZWF0dXJlIGlkLiAgVGhlIGZlYXR1cmUgaWQgaXMgY29uc2lkZXJlZCBzdGFibGUgYW5kIG1heSBiZSB1c2VkIHdoZW5cbiAgICogcmVxdWVzdGluZyBmZWF0dXJlcyBvciBjb21wYXJpbmcgaWRlbnRpZmllcnMgcmV0dXJuZWQgZnJvbSBhIHJlbW90ZSBzb3VyY2UuXG4gICAqIFRoZSBmZWF0dXJlIGlkIGNhbiBiZSB1c2VkIHdpdGggdGhlXG4gICAqIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1ZlY3Rvcn5WZWN0b3JTb3VyY2UjZ2V0RmVhdHVyZUJ5SWR9IG1ldGhvZC5cbiAgICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfHVuZGVmaW5lZH0gaWQgVGhlIGZlYXR1cmUgaWQuXG4gICAqIEBhcGlcbiAgICogQGZpcmVzIG1vZHVsZTpvbC9ldmVudHMvRXZlbnR+RXZlbnQjZXZlbnQ6Y2hhbmdlXG4gICAqL1xuICBGZWF0dXJlLnByb3RvdHlwZS5zZXRJZCA9IGZ1bmN0aW9uIHNldElkIChpZCkge1xuICAgIHRoaXMuaWRfID0gaWQ7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgcHJvcGVydHkgbmFtZSB0byBiZSB1c2VkIHdoZW4gZ2V0dGluZyB0aGUgZmVhdHVyZSdzIGRlZmF1bHQgZ2VvbWV0cnkuXG4gICAqIFdoZW4gY2FsbGluZyB7QGxpbmsgbW9kdWxlOm9sL0ZlYXR1cmV+RmVhdHVyZSNnZXRHZW9tZXRyeX0sIHRoZSB2YWx1ZSBvZiB0aGUgcHJvcGVydHkgd2l0aFxuICAgKiB0aGlzIG5hbWUgd2lsbCBiZSByZXR1cm5lZC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIHByb3BlcnR5IG5hbWUgb2YgdGhlIGRlZmF1bHQgZ2VvbWV0cnkuXG4gICAqIEBhcGlcbiAgICovXG4gIEZlYXR1cmUucHJvdG90eXBlLnNldEdlb21ldHJ5TmFtZSA9IGZ1bmN0aW9uIHNldEdlb21ldHJ5TmFtZSAobmFtZSkge1xuICAgIHVubGlzdGVuKFxuICAgICAgdGhpcywgZ2V0Q2hhbmdlRXZlbnRUeXBlKHRoaXMuZ2VvbWV0cnlOYW1lXyksXG4gICAgICB0aGlzLmhhbmRsZUdlb21ldHJ5Q2hhbmdlZF8sIHRoaXMpO1xuICAgIHRoaXMuZ2VvbWV0cnlOYW1lXyA9IG5hbWU7XG4gICAgbGlzdGVuKFxuICAgICAgdGhpcywgZ2V0Q2hhbmdlRXZlbnRUeXBlKHRoaXMuZ2VvbWV0cnlOYW1lXyksXG4gICAgICB0aGlzLmhhbmRsZUdlb21ldHJ5Q2hhbmdlZF8sIHRoaXMpO1xuICAgIHRoaXMuaGFuZGxlR2VvbWV0cnlDaGFuZ2VkXygpO1xuICB9O1xuXG4gIHJldHVybiBGZWF0dXJlO1xufShCYXNlT2JqZWN0KSk7XG5cblxuLyoqXG4gKiBDb252ZXJ0IHRoZSBwcm92aWRlZCBvYmplY3QgaW50byBhIGZlYXR1cmUgc3R5bGUgZnVuY3Rpb24uICBGdW5jdGlvbnMgcGFzc2VkXG4gKiB0aHJvdWdoIHVuY2hhbmdlZC4gIEFycmF5cyBvZiBTdHlsZSBvciBzaW5nbGUgc3R5bGUgb2JqZWN0cyB3cmFwcGVkXG4gKiBpbiBhIG5ldyBmZWF0dXJlIHN0eWxlIGZ1bmN0aW9uLlxuICogQHBhcmFtIHshaW1wb3J0KFwiLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZUZ1bmN0aW9ufCFBcnJheTxpbXBvcnQoXCIuL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHQ+fCFpbXBvcnQoXCIuL3N0eWxlL1N0eWxlLmpzXCIpLmRlZmF1bHR9IG9ialxuICogICAgIEEgZmVhdHVyZSBzdHlsZSBmdW5jdGlvbiwgYSBzaW5nbGUgc3R5bGUsIG9yIGFuIGFycmF5IG9mIHN0eWxlcy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVGdW5jdGlvbn0gQSBzdHlsZSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN0eWxlRnVuY3Rpb24ob2JqKSB7XG4gIGlmICh0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIG9iajtcbiAgfSBlbHNlIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi9zdHlsZS9TdHlsZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgKi9cbiAgICB2YXIgc3R5bGVzO1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgIHN0eWxlcyA9IG9iajtcbiAgICB9IGVsc2Uge1xuICAgICAgYXNzZXJ0KHR5cGVvZiAvKiogQHR5cGUgez99ICovIChvYmopLmdldFpJbmRleCA9PT0gJ2Z1bmN0aW9uJyxcbiAgICAgICAgNDEpOyAvLyBFeHBlY3RlZCBhbiBgaW1wb3J0KFwiLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZWAgb3IgYW4gYXJyYXkgb2YgYGltcG9ydChcIi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVgXG4gICAgICB2YXIgc3R5bGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vc3R5bGUvU3R5bGUuanNcIikuZGVmYXVsdH0gKi8gKG9iaik7XG4gICAgICBzdHlsZXMgPSBbc3R5bGVdO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gc3R5bGVzO1xuICAgIH07XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IEZlYXR1cmU7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZlYXR1cmUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3N0cmluZ1xuICovXG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IG51bWJlciBOdW1iZXIgdG8gYmUgZm9ybWF0dGVkXG4gKiBAcGFyYW0ge251bWJlcn0gd2lkdGggVGhlIGRlc2lyZWQgd2lkdGhcbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X3ByZWNpc2lvbiBQcmVjaXNpb24gb2YgdGhlIG91dHB1dCBzdHJpbmcgKGkuZS4gbnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzKVxuICogQHJldHVybnMge3N0cmluZ30gRm9ybWF0dGVkIHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGFkTnVtYmVyKG51bWJlciwgd2lkdGgsIG9wdF9wcmVjaXNpb24pIHtcbiAgdmFyIG51bWJlclN0cmluZyA9IG9wdF9wcmVjaXNpb24gIT09IHVuZGVmaW5lZCA/IG51bWJlci50b0ZpeGVkKG9wdF9wcmVjaXNpb24pIDogJycgKyBudW1iZXI7XG4gIHZhciBkZWNpbWFsID0gbnVtYmVyU3RyaW5nLmluZGV4T2YoJy4nKTtcbiAgZGVjaW1hbCA9IGRlY2ltYWwgPT09IC0xID8gbnVtYmVyU3RyaW5nLmxlbmd0aCA6IGRlY2ltYWw7XG4gIHJldHVybiBkZWNpbWFsID4gd2lkdGggPyBudW1iZXJTdHJpbmcgOiBuZXcgQXJyYXkoMSArIHdpZHRoIC0gZGVjaW1hbCkuam9pbignMCcpICsgbnVtYmVyU3RyaW5nO1xufVxuXG5cbi8qKlxuICogQWRhcHRlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9vbWljaGVsc2VuL2NvbXBhcmUtdmVyc2lvbnMvYmxvYi9tYXN0ZXIvaW5kZXguanNcbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gdjEgRmlyc3QgdmVyc2lvblxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSB2MiBTZWNvbmQgdmVyc2lvblxuICogQHJldHVybnMge251bWJlcn0gVmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhcmVWZXJzaW9ucyh2MSwgdjIpIHtcbiAgdmFyIHMxID0gKCcnICsgdjEpLnNwbGl0KCcuJyk7XG4gIHZhciBzMiA9ICgnJyArIHYyKS5zcGxpdCgnLicpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgTWF0aC5tYXgoczEubGVuZ3RoLCBzMi5sZW5ndGgpOyBpKyspIHtcbiAgICB2YXIgbjEgPSBwYXJzZUludChzMVtpXSB8fCAnMCcsIDEwKTtcbiAgICB2YXIgbjIgPSBwYXJzZUludChzMltpXSB8fCAnMCcsIDEwKTtcblxuICAgIGlmIChuMSA+IG4yKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgaWYgKG4yID4gbjEpIHtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gMDtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RyaW5nLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zdHJ1Y3RzL1JCdXNoXG4gKi9cbmltcG9ydCB7Z2V0VWlkfSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCByYnVzaCBmcm9tICdyYnVzaCc7XG5pbXBvcnQge2NyZWF0ZU9yVXBkYXRlLCBlcXVhbHN9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQge2lzRW1wdHl9IGZyb20gJy4uL29iai5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRW50cnlcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtaW5YXG4gKiBAcHJvcGVydHkge251bWJlcn0gbWluWVxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1heFhcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtYXhZXG4gKiBAcHJvcGVydHkge09iamVjdH0gW3ZhbHVlXVxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogV3JhcHBlciBhcm91bmQgdGhlIFJCdXNoIGJ5IFZsYWRpbWlyIEFnYWZvbmtpbi5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbW91cm5lci9yYnVzaC5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICovXG52YXIgUkJ1c2ggPSBmdW5jdGlvbiBSQnVzaChvcHRfbWF4RW50cmllcykge1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5yYnVzaF8gPSByYnVzaChvcHRfbWF4RW50cmllcywgdW5kZWZpbmVkKTtcblxuICAvKipcbiAgICogQSBtYXBwaW5nIGJldHdlZW4gdGhlIG9iamVjdHMgYWRkZWQgdG8gdGhpcyByYnVzaCB3cmFwcGVyXG4gICAqIGFuZCB0aGUgb2JqZWN0cyB0aGF0IGFyZSBhY3R1YWxseSBhZGRlZCB0byB0aGUgaW50ZXJuYWwgcmJ1c2guXG4gICAqIEBwcml2YXRlXG4gICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBFbnRyeT59XG4gICAqL1xuICB0aGlzLml0ZW1zXyA9IHt9O1xuXG59O1xuXG4vKipcbiAqIEluc2VydCBhIHZhbHVlIGludG8gdGhlIFJCdXNoLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtUfSB2YWx1ZSBWYWx1ZS5cbiAqL1xuUkJ1c2gucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIGluc2VydCAoZXh0ZW50LCB2YWx1ZSkge1xuICAvKiogQHR5cGUge0VudHJ5fSAqL1xuICB2YXIgaXRlbSA9IHtcbiAgICBtaW5YOiBleHRlbnRbMF0sXG4gICAgbWluWTogZXh0ZW50WzFdLFxuICAgIG1heFg6IGV4dGVudFsyXSxcbiAgICBtYXhZOiBleHRlbnRbM10sXG4gICAgdmFsdWU6IHZhbHVlXG4gIH07XG5cbiAgdGhpcy5yYnVzaF8uaW5zZXJ0KGl0ZW0pO1xuICB0aGlzLml0ZW1zX1tnZXRVaWQodmFsdWUpXSA9IGl0ZW07XG59O1xuXG5cbi8qKlxuICogQnVsay1pbnNlcnQgdmFsdWVzIGludG8gdGhlIFJCdXNoLlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50Pn0gZXh0ZW50cyBFeHRlbnRzLlxuICogQHBhcmFtIHtBcnJheTxUPn0gdmFsdWVzIFZhbHVlcy5cbiAqL1xuUkJ1c2gucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiBsb2FkIChleHRlbnRzLCB2YWx1ZXMpIHtcbiAgdmFyIGl0ZW1zID0gbmV3IEFycmF5KHZhbHVlcy5sZW5ndGgpO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB2YXIgZXh0ZW50ID0gZXh0ZW50c1tpXTtcbiAgICB2YXIgdmFsdWUgPSB2YWx1ZXNbaV07XG5cbiAgICAvKiogQHR5cGUge0VudHJ5fSAqL1xuICAgIHZhciBpdGVtID0ge1xuICAgICAgbWluWDogZXh0ZW50WzBdLFxuICAgICAgbWluWTogZXh0ZW50WzFdLFxuICAgICAgbWF4WDogZXh0ZW50WzJdLFxuICAgICAgbWF4WTogZXh0ZW50WzNdLFxuICAgICAgdmFsdWU6IHZhbHVlXG4gICAgfTtcbiAgICBpdGVtc1tpXSA9IGl0ZW07XG4gICAgdGhpcy5pdGVtc19bZ2V0VWlkKHZhbHVlKV0gPSBpdGVtO1xuICB9XG4gIHRoaXMucmJ1c2hfLmxvYWQoaXRlbXMpO1xufTtcblxuXG4vKipcbiAqIFJlbW92ZSBhIHZhbHVlIGZyb20gdGhlIFJCdXNoLlxuICogQHBhcmFtIHtUfSB2YWx1ZSBWYWx1ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFJlbW92ZWQuXG4gKi9cblJCdXNoLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUgKHZhbHVlKSB7XG4gIHZhciB1aWQgPSBnZXRVaWQodmFsdWUpO1xuXG4gIC8vIGdldCB0aGUgb2JqZWN0IGluIHdoaWNoIHRoZSB2YWx1ZSB3YXMgd3JhcHBlZCB3aGVuIGFkZGluZyB0byB0aGVcbiAgLy8gaW50ZXJuYWwgcmJ1c2guIHRoZW4gdXNlIHRoYXQgb2JqZWN0IHRvIGRvIHRoZSByZW1vdmFsLlxuICB2YXIgaXRlbSA9IHRoaXMuaXRlbXNfW3VpZF07XG4gIGRlbGV0ZSB0aGlzLml0ZW1zX1t1aWRdO1xuICByZXR1cm4gdGhpcy5yYnVzaF8ucmVtb3ZlKGl0ZW0pICE9PSBudWxsO1xufTtcblxuXG4vKipcbiAqIFVwZGF0ZSB0aGUgZXh0ZW50IG9mIGEgdmFsdWUgaW4gdGhlIFJCdXNoLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtUfSB2YWx1ZSBWYWx1ZS5cbiAqL1xuUkJ1c2gucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZSAoZXh0ZW50LCB2YWx1ZSkge1xuICB2YXIgaXRlbSA9IHRoaXMuaXRlbXNfW2dldFVpZCh2YWx1ZSldO1xuICB2YXIgYmJveCA9IFtpdGVtLm1pblgsIGl0ZW0ubWluWSwgaXRlbS5tYXhYLCBpdGVtLm1heFldO1xuICBpZiAoIWVxdWFscyhiYm94LCBleHRlbnQpKSB7XG4gICAgdGhpcy5yZW1vdmUodmFsdWUpO1xuICAgIHRoaXMuaW5zZXJ0KGV4dGVudCwgdmFsdWUpO1xuICB9XG59O1xuXG5cbi8qKlxuICogUmV0dXJuIGFsbCB2YWx1ZXMgaW4gdGhlIFJCdXNoLlxuICogQHJldHVybiB7QXJyYXk8VD59IEFsbC5cbiAqL1xuUkJ1c2gucHJvdG90eXBlLmdldEFsbCA9IGZ1bmN0aW9uIGdldEFsbCAoKSB7XG4gIHZhciBpdGVtcyA9IHRoaXMucmJ1c2hfLmFsbCgpO1xuICByZXR1cm4gaXRlbXMubWFwKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICByZXR1cm4gaXRlbS52YWx1ZTtcbiAgfSk7XG59O1xuXG5cbi8qKlxuICogUmV0dXJuIGFsbCB2YWx1ZXMgaW4gdGhlIGdpdmVuIGV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge0FycmF5PFQ+fSBBbGwgaW4gZXh0ZW50LlxuICovXG5SQnVzaC5wcm90b3R5cGUuZ2V0SW5FeHRlbnQgPSBmdW5jdGlvbiBnZXRJbkV4dGVudCAoZXh0ZW50KSB7XG4gIC8qKiBAdHlwZSB7RW50cnl9ICovXG4gIHZhciBiYm94ID0ge1xuICAgIG1pblg6IGV4dGVudFswXSxcbiAgICBtaW5ZOiBleHRlbnRbMV0sXG4gICAgbWF4WDogZXh0ZW50WzJdLFxuICAgIG1heFk6IGV4dGVudFszXVxuICB9O1xuICB2YXIgaXRlbXMgPSB0aGlzLnJidXNoXy5zZWFyY2goYmJveCk7XG4gIHJldHVybiBpdGVtcy5tYXAoZnVuY3Rpb24oaXRlbSkge1xuICAgIHJldHVybiBpdGVtLnZhbHVlO1xuICB9KTtcbn07XG5cblxuLyoqXG4gKiBDYWxscyBhIGNhbGxiYWNrIGZ1bmN0aW9uIHdpdGggZWFjaCB2YWx1ZSBpbiB0aGUgdHJlZS5cbiAqIElmIHRoZSBjYWxsYmFjayByZXR1cm5zIGEgdHJ1dGh5IHZhbHVlLCB0aGlzIHZhbHVlIGlzIHJldHVybmVkIHdpdGhvdXRcbiAqIGNoZWNraW5nIHRoZSByZXN0IG9mIHRoZSB0cmVlLlxuICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOiBTLCBUKTogKn0gY2FsbGJhY2sgQ2FsbGJhY2suXG4gKiBAcGFyYW0ge1M9fSBvcHRfdGhpcyBUaGUgb2JqZWN0IHRvIHVzZSBhcyBgdGhpc2AgaW4gYGNhbGxiYWNrYC5cbiAqIEByZXR1cm4geyp9IENhbGxiYWNrIHJldHVybiB2YWx1ZS5cbiAqIEB0ZW1wbGF0ZSBTXG4gKi9cblJCdXNoLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gZm9yRWFjaCAoY2FsbGJhY2ssIG9wdF90aGlzKSB7XG4gIHJldHVybiB0aGlzLmZvckVhY2hfKHRoaXMuZ2V0QWxsKCksIGNhbGxiYWNrLCBvcHRfdGhpcyk7XG59O1xuXG5cbi8qKlxuICogQ2FsbHMgYSBjYWxsYmFjayBmdW5jdGlvbiB3aXRoIGVhY2ggdmFsdWUgaW4gdGhlIHByb3ZpZGVkIGV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogUywgVCk6ICp9IGNhbGxiYWNrIENhbGxiYWNrLlxuICogQHBhcmFtIHtTPX0gb3B0X3RoaXMgVGhlIG9iamVjdCB0byB1c2UgYXMgYHRoaXNgIGluIGBjYWxsYmFja2AuXG4gKiBAcmV0dXJuIHsqfSBDYWxsYmFjayByZXR1cm4gdmFsdWUuXG4gKiBAdGVtcGxhdGUgU1xuICovXG5SQnVzaC5wcm90b3R5cGUuZm9yRWFjaEluRXh0ZW50ID0gZnVuY3Rpb24gZm9yRWFjaEluRXh0ZW50IChleHRlbnQsIGNhbGxiYWNrLCBvcHRfdGhpcykge1xuICByZXR1cm4gdGhpcy5mb3JFYWNoXyh0aGlzLmdldEluRXh0ZW50KGV4dGVudCksIGNhbGxiYWNrLCBvcHRfdGhpcyk7XG59O1xuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxUPn0gdmFsdWVzIFZhbHVlcy5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogUywgVCk6ICp9IGNhbGxiYWNrIENhbGxiYWNrLlxuICogQHBhcmFtIHtTPX0gb3B0X3RoaXMgVGhlIG9iamVjdCB0byB1c2UgYXMgYHRoaXNgIGluIGBjYWxsYmFja2AuXG4gKiBAcHJpdmF0ZVxuICogQHJldHVybiB7Kn0gQ2FsbGJhY2sgcmV0dXJuIHZhbHVlLlxuICogQHRlbXBsYXRlIFNcbiAqL1xuUkJ1c2gucHJvdG90eXBlLmZvckVhY2hfID0gZnVuY3Rpb24gZm9yRWFjaF8gKHZhbHVlcywgY2FsbGJhY2ssIG9wdF90aGlzKSB7XG4gIHZhciByZXN1bHQ7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHJlc3VsdCA9IGNhbGxiYWNrLmNhbGwob3B0X3RoaXMsIHZhbHVlc1tpXSk7XG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cblxuLyoqXG4gKiBAcmV0dXJuIHtib29sZWFufSBJcyBlbXB0eS5cbiAqL1xuUkJ1c2gucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiBpc0VtcHR5JDEgKCkge1xuICByZXR1cm4gaXNFbXB0eSh0aGlzLml0ZW1zXyk7XG59O1xuXG5cbi8qKlxuICogUmVtb3ZlIGFsbCB2YWx1ZXMgZnJvbSB0aGUgUkJ1c2guXG4gKi9cblJCdXNoLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uIGNsZWFyICgpIHtcbiAgdGhpcy5yYnVzaF8uY2xlYXIoKTtcbiAgdGhpcy5pdGVtc18gPSB7fTtcbn07XG5cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQ9fSBvcHRfZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAqL1xuUkJ1c2gucHJvdG90eXBlLmdldEV4dGVudCA9IGZ1bmN0aW9uIGdldEV4dGVudCAob3B0X2V4dGVudCkge1xuICB2YXIgZGF0YSA9IHRoaXMucmJ1c2hfLnRvSlNPTigpO1xuICByZXR1cm4gY3JlYXRlT3JVcGRhdGUoZGF0YS5taW5YLCBkYXRhLm1pblksIGRhdGEubWF4WCwgZGF0YS5tYXhZLCBvcHRfZXh0ZW50KTtcbn07XG5cblxuLyoqXG4gKiBAcGFyYW0ge1JCdXNofSByYnVzaCBSLVRyZWUuXG4gKi9cblJCdXNoLnByb3RvdHlwZS5jb25jYXQgPSBmdW5jdGlvbiBjb25jYXQgKHJidXNoKSB7XG4gIHRoaXMucmJ1c2hfLmxvYWQocmJ1c2gucmJ1c2hfLmFsbCgpKTtcbiAgZm9yICh2YXIgaSBpbiByYnVzaC5pdGVtc18pIHtcbiAgICB0aGlzLml0ZW1zX1tpXSA9IHJidXNoLml0ZW1zX1tpXTtcbiAgfVxufTtcblxuXG5leHBvcnQgZGVmYXVsdCBSQnVzaDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UkJ1c2guanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9WZWN0b3JFdmVudFR5cGVcbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgLyoqXG4gICAqIFRyaWdnZXJlZCB3aGVuIGEgZmVhdHVyZSBpcyBhZGRlZCB0byB0aGUgc291cmNlLlxuICAgKiBAZXZlbnQgb2wvc291cmNlL1ZlY3Rvci5WZWN0b3JTb3VyY2VFdmVudCNhZGRmZWF0dXJlXG4gICAqIEBhcGlcbiAgICovXG4gIEFEREZFQVRVUkU6ICdhZGRmZWF0dXJlJyxcblxuICAvKipcbiAgICogVHJpZ2dlcmVkIHdoZW4gYSBmZWF0dXJlIGlzIHVwZGF0ZWQuXG4gICAqIEBldmVudCBvbC9zb3VyY2UvVmVjdG9yLlZlY3RvclNvdXJjZUV2ZW50I2NoYW5nZWZlYXR1cmVcbiAgICogQGFwaVxuICAgKi9cbiAgQ0hBTkdFRkVBVFVSRTogJ2NoYW5nZWZlYXR1cmUnLFxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgd2hlbiB0aGUgY2xlYXIgbWV0aG9kIGlzIGNhbGxlZCBvbiB0aGUgc291cmNlLlxuICAgKiBAZXZlbnQgb2wvc291cmNlL1ZlY3Rvci5WZWN0b3JTb3VyY2VFdmVudCNjbGVhclxuICAgKiBAYXBpXG4gICAqL1xuICBDTEVBUjogJ2NsZWFyJyxcblxuICAvKipcbiAgICogVHJpZ2dlcmVkIHdoZW4gYSBmZWF0dXJlIGlzIHJlbW92ZWQgZnJvbSB0aGUgc291cmNlLlxuICAgKiBTZWUge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yI2NsZWFyIHNvdXJjZS5jbGVhcigpfSBmb3IgZXhjZXB0aW9ucy5cbiAgICogQGV2ZW50IG9sL3NvdXJjZS9WZWN0b3IuVmVjdG9yU291cmNlRXZlbnQjcmVtb3ZlZmVhdHVyZVxuICAgKiBAYXBpXG4gICAqL1xuICBSRU1PVkVGRUFUVVJFOiAncmVtb3ZlZmVhdHVyZSdcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZlY3RvckV2ZW50VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL1NvdXJjZVxuICovXG5pbXBvcnQge2Fic3RyYWN0fSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQge2dldCBhcyBnZXRQcm9qZWN0aW9ufSBmcm9tICcuLi9wcm9qLmpzJztcbmltcG9ydCBTb3VyY2VTdGF0ZSBmcm9tICcuL1N0YXRlLmpzJztcblxuXG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgc3RyaW5nIG9yIGFuIGFycmF5IG9mIHN0cmluZ3MgcmVwcmVzZW50aW5nIHNvdXJjZVxuICogYXR0cmlidXRpb25zLlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZSk6IChzdHJpbmd8QXJyYXk8c3RyaW5nPil9IEF0dHJpYnV0aW9uXG4gKi9cblxuXG4vKipcbiAqIEEgdHlwZSB0aGF0IGNhbiBiZSB1c2VkIHRvIHByb3ZpZGUgYXR0cmlidXRpb24gaW5mb3JtYXRpb24gZm9yIGRhdGEgc291cmNlcy5cbiAqXG4gKiBJdCByZXByZXNlbnRzIGVpdGhlclxuICogKiBhIHNpbXBsZSBzdHJpbmcgKGUuZy4gYCfCqSBBY21lIEluYy4nYClcbiAqICogYW4gYXJyYXkgb2Ygc2ltcGxlIHN0cmluZ3MgKGUuZy4gYFsnwqkgQWNtZSBJbmMuJywgJ8KpIEJhY21lIEluYy4nXWApXG4gKiAqIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgc3RyaW5nIG9yIGFycmF5IG9mIHN0cmluZ3MgKGB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9Tb3VyY2V+QXR0cmlidXRpb259YClcbiAqXG4gKiBAdHlwZWRlZiB7c3RyaW5nfEFycmF5PHN0cmluZz58QXR0cmlidXRpb259IEF0dHJpYnV0aW9uTGlrZVxuICovXG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge0F0dHJpYnV0aW9uTGlrZX0gW2F0dHJpYnV0aW9uc11cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2F0dHJpYnV0aW9uc0NvbGxhcHNpYmxlPXRydWVdIEF0dHJpYnV0aW9ucyBhcmUgY29sbGFwc2libGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb25cbiAqIEBwcm9wZXJ0eSB7U291cmNlU3RhdGV9IFtzdGF0ZT0ncmVhZHknXVxuICogQHByb3BlcnR5IHtib29sZWFufSBbd3JhcFg9ZmFsc2VdXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIEJhc2UgY2xhc3MgZm9yIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXJ9IHNvdXJjZXMuXG4gKlxuICogQSBnZW5lcmljIGBjaGFuZ2VgIGV2ZW50IGlzIHRyaWdnZXJlZCB3aGVuIHRoZSBzdGF0ZSBvZiB0aGUgc291cmNlIGNoYW5nZXMuXG4gKiBAYWJzdHJhY3RcbiAqIEBhcGlcbiAqL1xudmFyIFNvdXJjZSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEJhc2VPYmplY3QpIHtcbiAgZnVuY3Rpb24gU291cmNlKG9wdGlvbnMpIHtcblxuICAgIEJhc2VPYmplY3QuY2FsbCh0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fVxuICAgICAqL1xuICAgIHRoaXMucHJvamVjdGlvbl8gPSBnZXRQcm9qZWN0aW9uKG9wdGlvbnMucHJvamVjdGlvbik7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/QXR0cmlidXRpb259XG4gICAgICovXG4gICAgdGhpcy5hdHRyaWJ1dGlvbnNfID0gYWRhcHRBdHRyaWJ1dGlvbnMob3B0aW9ucy5hdHRyaWJ1dGlvbnMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlXyA9IG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGUgIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRpb25zLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlIDogdHJ1ZTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgc291cmNlIGlzIGN1cnJlbnRseSBsb2FkaW5nIGRhdGEuIFNvdXJjZXMgdGhhdCBkZWZlciBsb2FkaW5nIHRvIHRoZVxuICAgICAqIG1hcCdzIHRpbGUgcXVldWUgbmV2ZXIgc2V0IHRoaXMgdG8gYHRydWVgLlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7U291cmNlU3RhdGV9XG4gICAgICovXG4gICAgdGhpcy5zdGF0ZV8gPSBvcHRpb25zLnN0YXRlICE9PSB1bmRlZmluZWQgP1xuICAgICAgb3B0aW9ucy5zdGF0ZSA6IFNvdXJjZVN0YXRlLlJFQURZO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLndyYXBYXyA9IG9wdGlvbnMud3JhcFggIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMud3JhcFggOiBmYWxzZTtcblxuICB9XG5cbiAgaWYgKCBCYXNlT2JqZWN0ICkgU291cmNlLl9fcHJvdG9fXyA9IEJhc2VPYmplY3Q7XG4gIFNvdXJjZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBCYXNlT2JqZWN0ICYmIEJhc2VPYmplY3QucHJvdG90eXBlICk7XG4gIFNvdXJjZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTb3VyY2U7XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgYXR0cmlidXRpb24gZnVuY3Rpb24gZm9yIHRoZSBzb3VyY2UuXG4gICAqIEByZXR1cm4gez9BdHRyaWJ1dGlvbn0gQXR0cmlidXRpb24gZnVuY3Rpb24uXG4gICAqL1xuICBTb3VyY2UucHJvdG90eXBlLmdldEF0dHJpYnV0aW9ucyA9IGZ1bmN0aW9uIGdldEF0dHJpYnV0aW9ucyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYXR0cmlidXRpb25zXztcbiAgfTtcblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gQWF0dHJpYnV0aW9ucyBhcmUgY29sbGFwc2libGUuXG4gICAqL1xuICBTb3VyY2UucHJvdG90eXBlLmdldEF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlID0gZnVuY3Rpb24gZ2V0QXR0cmlidXRpb25zQ29sbGFwc2libGUgKCkge1xuICAgIHJldHVybiB0aGlzLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlXztcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBwcm9qZWN0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBQcm9qZWN0aW9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBTb3VyY2UucHJvdG90eXBlLmdldFByb2plY3Rpb24gPSBmdW5jdGlvbiBnZXRQcm9qZWN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9qZWN0aW9uXztcbiAgfTtcblxuICAvKipcbiAgICogQGFic3RyYWN0XG4gICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj58dW5kZWZpbmVkfSBSZXNvbHV0aW9ucy5cbiAgICovXG4gIFNvdXJjZS5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbnMgPSBmdW5jdGlvbiBnZXRSZXNvbHV0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgc3RhdGUgb2YgdGhlIHNvdXJjZSwgc2VlIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1N0YXRlflN0YXRlfSBmb3IgcG9zc2libGUgc3RhdGVzLlxuICAgKiBAcmV0dXJuIHtTb3VyY2VTdGF0ZX0gU3RhdGUuXG4gICAqIEBhcGlcbiAgICovXG4gIFNvdXJjZS5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiBnZXRTdGF0ZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGVfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufHVuZGVmaW5lZH0gV3JhcCBYLlxuICAgKi9cbiAgU291cmNlLnByb3RvdHlwZS5nZXRXcmFwWCA9IGZ1bmN0aW9uIGdldFdyYXBYICgpIHtcbiAgICByZXR1cm4gdGhpcy53cmFwWF87XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlZnJlc2hlcyB0aGUgc291cmNlIGFuZCBmaW5hbGx5IGRpc3BhdGNoZXMgYSAnY2hhbmdlJyBldmVudC5cbiAgICogQGFwaVxuICAgKi9cbiAgU291cmNlLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gcmVmcmVzaCAoKSB7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgYXR0cmlidXRpb25zIG9mIHRoZSBzb3VyY2UuXG4gICAqIEBwYXJhbSB7QXR0cmlidXRpb25MaWtlfHVuZGVmaW5lZH0gYXR0cmlidXRpb25zIEF0dHJpYnV0aW9ucy5cbiAgICogICAgIENhbiBiZSBwYXNzZWQgYXMgYHN0cmluZ2AsIGBBcnJheTxzdHJpbmc+YCwgYHtAbGluayBtb2R1bGU6b2wvc291cmNlL1NvdXJjZX5BdHRyaWJ1dGlvbn1gLFxuICAgKiAgICAgb3IgYHVuZGVmaW5lZGAuXG4gICAqIEBhcGlcbiAgICovXG4gIFNvdXJjZS5wcm90b3R5cGUuc2V0QXR0cmlidXRpb25zID0gZnVuY3Rpb24gc2V0QXR0cmlidXRpb25zIChhdHRyaWJ1dGlvbnMpIHtcbiAgICB0aGlzLmF0dHJpYnV0aW9uc18gPSBhZGFwdEF0dHJpYnV0aW9ucyhhdHRyaWJ1dGlvbnMpO1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHN0YXRlIG9mIHRoZSBzb3VyY2UuXG4gICAqIEBwYXJhbSB7U291cmNlU3RhdGV9IHN0YXRlIFN0YXRlLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBTb3VyY2UucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24gc2V0U3RhdGUgKHN0YXRlKSB7XG4gICAgdGhpcy5zdGF0ZV8gPSBzdGF0ZTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICByZXR1cm4gU291cmNlO1xufShCYXNlT2JqZWN0KSk7XG5cblxuLyoqXG4gKiBUdXJucyB0aGUgYXR0cmlidXRpb25zIG9wdGlvbiBpbnRvIGFuIGF0dHJpYnV0aW9ucyBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7QXR0cmlidXRpb25MaWtlfHVuZGVmaW5lZH0gYXR0cmlidXRpb25MaWtlIFRoZSBhdHRyaWJ1dGlvbiBvcHRpb24uXG4gKiBAcmV0dXJuIHs/QXR0cmlidXRpb259IEFuIGF0dHJpYnV0aW9uIGZ1bmN0aW9uIChvciBudWxsKS5cbiAqL1xuZnVuY3Rpb24gYWRhcHRBdHRyaWJ1dGlvbnMoYXR0cmlidXRpb25MaWtlKSB7XG4gIGlmICghYXR0cmlidXRpb25MaWtlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkoYXR0cmlidXRpb25MaWtlKSkge1xuICAgIHJldHVybiBmdW5jdGlvbihmcmFtZVN0YXRlKSB7XG4gICAgICByZXR1cm4gYXR0cmlidXRpb25MaWtlO1xuICAgIH07XG4gIH1cblxuICBpZiAodHlwZW9mIGF0dHJpYnV0aW9uTGlrZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBhdHRyaWJ1dGlvbkxpa2U7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24oZnJhbWVTdGF0ZSkge1xuICAgIHJldHVybiBbYXR0cmlidXRpb25MaWtlXTtcbiAgfTtcbn1cblxuXG5leHBvcnQgZGVmYXVsdCBTb3VyY2U7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNvdXJjZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvUHJvcGVydHlcbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgT1BBQ0lUWTogJ29wYWNpdHknLFxuICBWSVNJQkxFOiAndmlzaWJsZScsXG4gIEVYVEVOVDogJ2V4dGVudCcsXG4gIFpfSU5ERVg6ICd6SW5kZXgnLFxuICBNQVhfUkVTT0xVVElPTjogJ21heFJlc29sdXRpb24nLFxuICBNSU5fUkVTT0xVVElPTjogJ21pblJlc29sdXRpb24nLFxuICBTT1VSQ0U6ICdzb3VyY2UnXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qcm9wZXJ0eS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvQmFzZVxuICovXG5pbXBvcnQge2Fic3RyYWN0fSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQgTGF5ZXJQcm9wZXJ0eSBmcm9tICcuL1Byb3BlcnR5LmpzJztcbmltcG9ydCB7Y2xhbXB9IGZyb20gJy4uL21hdGguanMnO1xuaW1wb3J0IHthc3NpZ259IGZyb20gJy4uL29iai5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSAoMCwgMSkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt2aXNpYmxlPXRydWVdIFZpc2liaWxpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBib3VuZGluZyBleHRlbnQgZm9yIGxheWVyIHJlbmRlcmluZy4gIFRoZSBsYXllciB3aWxsIG5vdCBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGlzIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4XSBUaGUgei1pbmRleCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgQXQgcmVuZGVyaW5nIHRpbWUsIHRoZSBsYXllcnNcbiAqIHdpbGwgYmUgb3JkZXJlZCwgZmlyc3QgYnkgWi1pbmRleCBhbmQgdGhlbiBieSBwb3NpdGlvbi4gV2hlbiBgdW5kZWZpbmVkYCwgYSBgekluZGV4YCBvZiAwIGlzIGFzc3VtZWRcbiAqIGZvciBsYXllcnMgdGhhdCBhcmUgYWRkZWQgdG8gdGhlIG1hcCdzIGBsYXllcnNgIGNvbGxlY3Rpb24sIG9yIGBJbmZpbml0eWAgd2hlbiB0aGUgbGF5ZXIncyBgc2V0TWFwKClgXG4gKiBtZXRob2Qgd2FzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIChleGNsdXNpdmUpIGJlbG93IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqL1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogTm90ZSB0aGF0IHdpdGgge0BsaW5rIG1vZHVsZTpvbC9sYXllci9CYXNlfSBhbmQgYWxsIGl0cyBzdWJjbGFzc2VzLCBhbnkgcHJvcGVydHkgc2V0IGluXG4gKiB0aGUgb3B0aW9ucyBpcyBzZXQgYXMgYSB7QGxpbmsgbW9kdWxlOm9sL09iamVjdH0gcHJvcGVydHkgb24gdGhlIGxheWVyIG9iamVjdCwgc29cbiAqIGlzIG9ic2VydmFibGUsIGFuZCBoYXMgZ2V0L3NldCBhY2Nlc3NvcnMuXG4gKlxuICogQGFwaVxuICovXG52YXIgQmFzZUxheWVyID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoQmFzZU9iamVjdCkge1xuICBmdW5jdGlvbiBCYXNlTGF5ZXIob3B0aW9ucykge1xuXG4gICAgQmFzZU9iamVjdC5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsICo+fVxuICAgICAqL1xuICAgIHZhciBwcm9wZXJ0aWVzID0gYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuT1BBQ0lUWV0gPVxuICAgICAgIG9wdGlvbnMub3BhY2l0eSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5vcGFjaXR5IDogMTtcbiAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuVklTSUJMRV0gPVxuICAgICAgIG9wdGlvbnMudmlzaWJsZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy52aXNpYmxlIDogdHJ1ZTtcbiAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuWl9JTkRFWF0gPSBvcHRpb25zLnpJbmRleDtcbiAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuTUFYX1JFU09MVVRJT05dID1cbiAgICAgICBvcHRpb25zLm1heFJlc29sdXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWF4UmVzb2x1dGlvbiA6IEluZmluaXR5O1xuICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5NSU5fUkVTT0xVVElPTl0gPVxuICAgICAgIG9wdGlvbnMubWluUmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5taW5SZXNvbHV0aW9uIDogMDtcblxuICAgIHRoaXMuc2V0UHJvcGVydGllcyhwcm9wZXJ0aWVzKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5zdGF0ZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGxheWVyIHR5cGUuXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL0xheWVyVHlwZS5qc1wiKS5kZWZhdWx0fVxuICAgICAqIEBwcm90ZWN0ZWQ7XG4gICAgICovXG4gICAgdGhpcy50eXBlO1xuXG4gIH1cblxuICBpZiAoIEJhc2VPYmplY3QgKSBCYXNlTGF5ZXIuX19wcm90b19fID0gQmFzZU9iamVjdDtcbiAgQmFzZUxheWVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEJhc2VPYmplY3QgJiYgQmFzZU9iamVjdC5wcm90b3R5cGUgKTtcbiAgQmFzZUxheWVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEJhc2VMYXllcjtcblxuICAvKipcbiAgICogR2V0IHRoZSBsYXllciB0eXBlICh1c2VkIHdoZW4gY3JlYXRpbmcgYSBsYXllciByZW5kZXJlcikuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL0xheWVyVHlwZS5qc1wiKS5kZWZhdWx0fSBUaGUgbGF5ZXIgdHlwZS5cbiAgICovXG4gIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uIGdldFR5cGUgKCkge1xuICAgIHJldHVybiB0aGlzLnR5cGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGV9IExheWVyIHN0YXRlLlxuICAgKi9cbiAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRMYXllclN0YXRlID0gZnVuY3Rpb24gZ2V0TGF5ZXJTdGF0ZSAoKSB7XG4gICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlfSAqL1xuICAgIHZhciBzdGF0ZSA9IHRoaXMuc3RhdGVfIHx8IC8qKiBAdHlwZSB7P30gKi8gKHtcbiAgICAgIGxheWVyOiB0aGlzLFxuICAgICAgbWFuYWdlZDogdHJ1ZVxuICAgIH0pO1xuICAgIHN0YXRlLm9wYWNpdHkgPSBjbGFtcCh0aGlzLmdldE9wYWNpdHkoKSwgMCwgMSk7XG4gICAgc3RhdGUuc291cmNlU3RhdGUgPSB0aGlzLmdldFNvdXJjZVN0YXRlKCk7XG4gICAgc3RhdGUudmlzaWJsZSA9IHRoaXMuZ2V0VmlzaWJsZSgpO1xuICAgIHN0YXRlLmV4dGVudCA9IHRoaXMuZ2V0RXh0ZW50KCk7XG4gICAgc3RhdGUuekluZGV4ID0gdGhpcy5nZXRaSW5kZXgoKSB8fCAwO1xuICAgIHN0YXRlLm1heFJlc29sdXRpb24gPSB0aGlzLmdldE1heFJlc29sdXRpb24oKTtcbiAgICBzdGF0ZS5taW5SZXNvbHV0aW9uID0gTWF0aC5tYXgodGhpcy5nZXRNaW5SZXNvbHV0aW9uKCksIDApO1xuICAgIHRoaXMuc3RhdGVfID0gc3RhdGU7XG5cbiAgICByZXR1cm4gc3RhdGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdD49fSBvcHRfYXJyYXkgQXJyYXkgb2YgbGF5ZXJzICh0byBiZVxuICAgKiAgICAgbW9kaWZpZWQgaW4gcGxhY2UpLlxuICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHQ+fSBBcnJheSBvZiBsYXllcnMuXG4gICAqL1xuICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldExheWVyc0FycmF5ID0gZnVuY3Rpb24gZ2V0TGF5ZXJzQXJyYXkgKG9wdF9hcnJheSkge1xuICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlPj19IG9wdF9zdGF0ZXMgT3B0aW9uYWwgbGlzdCBvZiBsYXllclxuICAgKiAgICAgc3RhdGVzICh0byBiZSBtb2RpZmllZCBpbiBwbGFjZSkuXG4gICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGU+fSBMaXN0IG9mIGxheWVyIHN0YXRlcy5cbiAgICovXG4gIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0TGF5ZXJTdGF0ZXNBcnJheSA9IGZ1bmN0aW9uIGdldExheWVyU3RhdGVzQXJyYXkgKG9wdF9zdGF0ZXMpIHtcbiAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSB7QGxpbmsgbW9kdWxlOm9sL2V4dGVudH5FeHRlbnQgZXh0ZW50fSBvZiB0aGUgbGF5ZXIgb3IgYHVuZGVmaW5lZGAgaWYgaXRcbiAgICogd2lsbCBiZSB2aXNpYmxlIHJlZ2FyZGxlc3Mgb2YgZXh0ZW50LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fHVuZGVmaW5lZH0gVGhlIGxheWVyIGV4dGVudC5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRFeHRlbnQgPSBmdW5jdGlvbiBnZXRFeHRlbnQgKCkge1xuICAgIHJldHVybiAoXG4gICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5FWFRFTlQpKVxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbWF4aW11bSByZXNvbHV0aW9uIG9mIHRoZSBsYXllci5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIG9mIHRoZSBsYXllci5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRNYXhSZXNvbHV0aW9uID0gZnVuY3Rpb24gZ2V0TWF4UmVzb2x1dGlvbiAoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5NQVhfUkVTT0xVVElPTikpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG1pbmltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0TWluUmVzb2x1dGlvbiA9IGZ1bmN0aW9uIGdldE1pblJlc29sdXRpb24gKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuTUlOX1JFU09MVVRJT04pKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBvcGFjaXR5IG9mIHRoZSBsYXllciAoYmV0d2VlbiAwIGFuZCAxKS5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgb3BhY2l0eSBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0T3BhY2l0eSA9IGZ1bmN0aW9uIGdldE9wYWNpdHkgKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuT1BBQ0lUWSkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc291cmNlL1N0YXRlLmpzXCIpLmRlZmF1bHR9IFNvdXJjZSBzdGF0ZS5cbiAgICovXG4gIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0U291cmNlU3RhdGUgPSBmdW5jdGlvbiBnZXRTb3VyY2VTdGF0ZSAoKSB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgbGF5ZXIgKGB0cnVlYCBvciBgZmFsc2VgKS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHZpc2liaWxpdHkgb2YgdGhlIGxheWVyLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldFZpc2libGUgPSBmdW5jdGlvbiBnZXRWaXNpYmxlICgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtib29sZWFufSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5WSVNJQkxFKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgWi1pbmRleCBvZiB0aGUgbGF5ZXIsIHdoaWNoIGlzIHVzZWQgdG8gb3JkZXIgbGF5ZXJzIGJlZm9yZVxuICAgKiByZW5kZXJpbmcuIFRoZSBkZWZhdWx0IFotaW5kZXggaXMgMC5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgWi1pbmRleCBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0WkluZGV4ID0gZnVuY3Rpb24gZ2V0WkluZGV4ICgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5LlpfSU5ERVgpKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBleHRlbnQgYXQgd2hpY2ggdGhlIGxheWVyIGlzIHZpc2libGUuICBJZiBgdW5kZWZpbmVkYCwgdGhlIGxheWVyXG4gICAqIHdpbGwgYmUgdmlzaWJsZSBhdCBhbGwgZXh0ZW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fHVuZGVmaW5lZH0gZXh0ZW50IFRoZSBleHRlbnQgb2YgdGhlIGxheWVyLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBCYXNlTGF5ZXIucHJvdG90eXBlLnNldEV4dGVudCA9IGZ1bmN0aW9uIHNldEV4dGVudCAoZXh0ZW50KSB7XG4gICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5FWFRFTlQsIGV4dGVudCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgbWF4aW11bSByZXNvbHV0aW9uIGF0IHdoaWNoIHRoZSBsYXllciBpcyB2aXNpYmxlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gbWF4UmVzb2x1dGlvbiBUaGUgbWF4aW11bSByZXNvbHV0aW9uIG9mIHRoZSBsYXllci5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRNYXhSZXNvbHV0aW9uID0gZnVuY3Rpb24gc2V0TWF4UmVzb2x1dGlvbiAobWF4UmVzb2x1dGlvbikge1xuICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuTUFYX1JFU09MVVRJT04sIG1heFJlc29sdXRpb24pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIG1pbmltdW0gcmVzb2x1dGlvbiBhdCB3aGljaCB0aGUgbGF5ZXIgaXMgdmlzaWJsZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1pblJlc29sdXRpb24gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIEJhc2VMYXllci5wcm90b3R5cGUuc2V0TWluUmVzb2x1dGlvbiA9IGZ1bmN0aW9uIHNldE1pblJlc29sdXRpb24gKG1pblJlc29sdXRpb24pIHtcbiAgICB0aGlzLnNldChMYXllclByb3BlcnR5Lk1JTl9SRVNPTFVUSU9OLCBtaW5SZXNvbHV0aW9uKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBvcGFjaXR5IG9mIHRoZSBsYXllciwgYWxsb3dlZCB2YWx1ZXMgcmFuZ2UgZnJvbSAwIHRvIDEuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvcGFjaXR5IFRoZSBvcGFjaXR5IG9mIHRoZSBsYXllci5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRPcGFjaXR5ID0gZnVuY3Rpb24gc2V0T3BhY2l0eSAob3BhY2l0eSkge1xuICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuT1BBQ0lUWSwgb3BhY2l0eSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgbGF5ZXIgKGB0cnVlYCBvciBgZmFsc2VgKS5cbiAgICogQHBhcmFtIHtib29sZWFufSB2aXNpYmxlIFRoZSB2aXNpYmlsaXR5IG9mIHRoZSBsYXllci5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRWaXNpYmxlID0gZnVuY3Rpb24gc2V0VmlzaWJsZSAodmlzaWJsZSkge1xuICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuVklTSUJMRSwgdmlzaWJsZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCBaLWluZGV4IG9mIHRoZSBsYXllciwgd2hpY2ggaXMgdXNlZCB0byBvcmRlciBsYXllcnMgYmVmb3JlIHJlbmRlcmluZy5cbiAgICogVGhlIGRlZmF1bHQgWi1pbmRleCBpcyAwLlxuICAgKiBAcGFyYW0ge251bWJlcn0gemluZGV4IFRoZSB6LWluZGV4IG9mIHRoZSBsYXllci5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRaSW5kZXggPSBmdW5jdGlvbiBzZXRaSW5kZXggKHppbmRleCkge1xuICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuWl9JTkRFWCwgemluZGV4KTtcbiAgfTtcblxuICByZXR1cm4gQmFzZUxheWVyO1xufShCYXNlT2JqZWN0KSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgQmFzZUxheWVyO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1CYXNlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvaW50ZXJpb3Jwb2ludFxuICovXG5pbXBvcnQge251bWJlclNhZmVDb21wYXJlRnVuY3Rpb259IGZyb20gJy4uLy4uL2FycmF5LmpzJztcbmltcG9ydCB7bGluZWFyUmluZ3NDb250YWluc1hZfSBmcm9tICcuL2NvbnRhaW5zLmpzJztcblxuXG4vKipcbiAqIENhbGN1bGF0ZXMgYSBwb2ludCB0aGF0IGlzIGxpa2VseSB0byBsaWUgaW4gdGhlIGludGVyaW9yIG9mIHRoZSBsaW5lYXIgcmluZ3MuXG4gKiBJbnNwaXJlZCBieSBKVFMncyBjb20udml2aWRzb2x1dGlvbnMuanRzLmdlb20uR2VvbWV0cnkjZ2V0SW50ZXJpb3JQb2ludC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDZW50ZXJzIEZsYXQgY2VudGVycy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBmbGF0Q2VudGVyc09mZnNldCBGbGF0IGNlbnRlciBvZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfZGVzdCBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IERlc3RpbmF0aW9uIHBvaW50IGFzIFhZTSBjb29yZGluYXRlLCB3aGVyZSBNIGlzIHRoZVxuICogbGVuZ3RoIG9mIHRoZSBob3Jpem9udGFsIGludGVyc2VjdGlvbiB0aGF0IHRoZSBwb2ludCBiZWxvbmdzIHRvLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW50ZXJpb3JQb2ludE9mQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsXG4gIGVuZHMsIHN0cmlkZSwgZmxhdENlbnRlcnMsIGZsYXRDZW50ZXJzT2Zmc2V0LCBvcHRfZGVzdCkge1xuICB2YXIgaSwgaWksIHgsIHgxLCB4MiwgeTEsIHkyO1xuICB2YXIgeSA9IGZsYXRDZW50ZXJzW2ZsYXRDZW50ZXJzT2Zmc2V0ICsgMV07XG4gIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi9cbiAgdmFyIGludGVyc2VjdGlvbnMgPSBbXTtcbiAgLy8gQ2FsY3VsYXRlIGludGVyc2VjdGlvbnMgd2l0aCB0aGUgaG9yaXpvbnRhbCBsaW5lXG4gIGZvciAodmFyIHIgPSAwLCByciA9IGVuZHMubGVuZ3RoOyByIDwgcnI7ICsrcikge1xuICAgIHZhciBlbmQgPSBlbmRzW3JdO1xuICAgIHgxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZV07XG4gICAgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlICsgMV07XG4gICAgZm9yIChpID0gb2Zmc2V0OyBpIDwgZW5kOyBpICs9IHN0cmlkZSkge1xuICAgICAgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbaV07XG4gICAgICB5MiA9IGZsYXRDb29yZGluYXRlc1tpICsgMV07XG4gICAgICBpZiAoKHkgPD0geTEgJiYgeTIgPD0geSkgfHwgKHkxIDw9IHkgJiYgeSA8PSB5MikpIHtcbiAgICAgICAgeCA9ICh5IC0geTEpIC8gKHkyIC0geTEpICogKHgyIC0geDEpICsgeDE7XG4gICAgICAgIGludGVyc2VjdGlvbnMucHVzaCh4KTtcbiAgICAgIH1cbiAgICAgIHgxID0geDI7XG4gICAgICB5MSA9IHkyO1xuICAgIH1cbiAgfVxuICAvLyBGaW5kIHRoZSBsb25nZXN0IHNlZ21lbnQgb2YgdGhlIGhvcml6b250YWwgbGluZSB0aGF0IGhhcyBpdHMgY2VudGVyIHBvaW50XG4gIC8vIGluc2lkZSB0aGUgbGluZWFyIHJpbmcuXG4gIHZhciBwb2ludFggPSBOYU47XG4gIHZhciBtYXhTZWdtZW50TGVuZ3RoID0gLUluZmluaXR5O1xuICBpbnRlcnNlY3Rpb25zLnNvcnQobnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbik7XG4gIHgxID0gaW50ZXJzZWN0aW9uc1swXTtcbiAgZm9yIChpID0gMSwgaWkgPSBpbnRlcnNlY3Rpb25zLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICB4MiA9IGludGVyc2VjdGlvbnNbaV07XG4gICAgdmFyIHNlZ21lbnRMZW5ndGggPSBNYXRoLmFicyh4MiAtIHgxKTtcbiAgICBpZiAoc2VnbWVudExlbmd0aCA+IG1heFNlZ21lbnRMZW5ndGgpIHtcbiAgICAgIHggPSAoeDEgKyB4MikgLyAyO1xuICAgICAgaWYgKGxpbmVhclJpbmdzQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCB4LCB5KSkge1xuICAgICAgICBwb2ludFggPSB4O1xuICAgICAgICBtYXhTZWdtZW50TGVuZ3RoID0gc2VnbWVudExlbmd0aDtcbiAgICAgIH1cbiAgICB9XG4gICAgeDEgPSB4MjtcbiAgfVxuICBpZiAoaXNOYU4ocG9pbnRYKSkge1xuICAgIC8vIFRoZXJlIGlzIG5vIGhvcml6b250YWwgbGluZSB0aGF0IGhhcyBpdHMgY2VudGVyIHBvaW50IGluc2lkZSB0aGUgbGluZWFyXG4gICAgLy8gcmluZy4gIFVzZSB0aGUgY2VudGVyIG9mIHRoZSB0aGUgbGluZWFyIHJpbmcncyBleHRlbnQuXG4gICAgcG9pbnRYID0gZmxhdENlbnRlcnNbZmxhdENlbnRlcnNPZmZzZXRdO1xuICB9XG4gIGlmIChvcHRfZGVzdCkge1xuICAgIG9wdF9kZXN0LnB1c2gocG9pbnRYLCB5LCBtYXhTZWdtZW50TGVuZ3RoKTtcbiAgICByZXR1cm4gb3B0X2Rlc3Q7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFtwb2ludFgsIHksIG1heFNlZ21lbnRMZW5ndGhdO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q2VudGVycyBGbGF0IGNlbnRlcnMuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBJbnRlcmlvciBwb2ludHMgYXMgWFlNIGNvb3JkaW5hdGVzLCB3aGVyZSBNIGlzIHRoZVxuICogbGVuZ3RoIG9mIHRoZSBob3Jpem9udGFsIGludGVyc2VjdGlvbiB0aGF0IHRoZSBwb2ludCBiZWxvbmdzIHRvLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW50ZXJpb3JQb2ludHNPZk11bHRpQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIGZsYXRDZW50ZXJzKSB7XG4gIHZhciBpbnRlcmlvclBvaW50cyA9IFtdO1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICBpbnRlcmlvclBvaW50cyA9IGdldEludGVyaW9yUG9pbnRPZkFycmF5KGZsYXRDb29yZGluYXRlcyxcbiAgICAgIG9mZnNldCwgZW5kcywgc3RyaWRlLCBmbGF0Q2VudGVycywgMiAqIGksIGludGVyaW9yUG9pbnRzKTtcbiAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gIH1cbiAgcmV0dXJuIGludGVyaW9yUG9pbnRzO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcmlvcnBvaW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvc2VnbWVudHNcbiAqL1xuXG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBjYWxscyBgY2FsbGJhY2tgIGZvciBlYWNoIHNlZ21lbnQgb2YgdGhlIGZsYXQgY29vcmRpbmF0ZXNcbiAqIGFycmF5LiBJZiB0aGUgY2FsbGJhY2sgcmV0dXJucyBhIHRydXRoeSB2YWx1ZSB0aGUgZnVuY3Rpb24gcmV0dXJucyB0aGF0XG4gKiB2YWx1ZSBpbW1lZGlhdGVseS4gT3RoZXJ3aXNlIHRoZSBmdW5jdGlvbiByZXR1cm5zIGBmYWxzZWAuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOiBTLCBpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUsIGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IFR9IGNhbGxiYWNrIEZ1bmN0aW9uXG4gKiAgICAgY2FsbGVkIGZvciBlYWNoIHNlZ21lbnQuXG4gKiBAcGFyYW0ge1M9fSBvcHRfdGhpcyBUaGUgb2JqZWN0IHRvIGJlIHVzZWQgYXMgdGhlIHZhbHVlIG9mICd0aGlzJ1xuICogICAgIHdpdGhpbiBjYWxsYmFjay5cbiAqIEByZXR1cm4ge1R8Ym9vbGVhbn0gVmFsdWUuXG4gKiBAdGVtcGxhdGUgVCxTXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JFYWNoKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgY2FsbGJhY2ssIG9wdF90aGlzKSB7XG4gIHZhciBwb2ludDEgPSBbZmxhdENvb3JkaW5hdGVzW29mZnNldF0sIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXV07XG4gIHZhciBwb2ludDIgPSBbXTtcbiAgdmFyIHJldDtcbiAgZm9yICg7IChvZmZzZXQgKyBzdHJpZGUpIDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgcG9pbnQyWzBdID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIHN0cmlkZV07XG4gICAgcG9pbnQyWzFdID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIHN0cmlkZSArIDFdO1xuICAgIHJldCA9IGNhbGxiYWNrLmNhbGwob3B0X3RoaXMsIHBvaW50MSwgcG9pbnQyKTtcbiAgICBpZiAocmV0KSB7XG4gICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICBwb2ludDFbMF0gPSBwb2ludDJbMF07XG4gICAgcG9pbnQxWzFdID0gcG9pbnQyWzFdO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2VnbWVudHMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL1ZlY3RvclJlbmRlclR5cGVcbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKiBSZW5kZXIgbW9kZSBmb3IgdmVjdG9yIGxheWVyczpcbiAqICAqIGAnaW1hZ2UnYDogVmVjdG9yIGxheWVycyBhcmUgcmVuZGVyZWQgYXMgaW1hZ2VzLiBHcmVhdCBwZXJmb3JtYW5jZSwgYnV0XG4gKiAgICBwb2ludCBzeW1ib2xzIGFuZCB0ZXh0cyBhcmUgYWx3YXlzIHJvdGF0ZWQgd2l0aCB0aGUgdmlldyBhbmQgcGl4ZWxzIGFyZVxuICogICAgc2NhbGVkIGR1cmluZyB6b29tIGFuaW1hdGlvbnMuXG4gKiAgKiBgJ3ZlY3RvcidgOiBWZWN0b3IgbGF5ZXJzIGFyZSByZW5kZXJlZCBhcyB2ZWN0b3JzLiBNb3N0IGFjY3VyYXRlIHJlbmRlcmluZ1xuICogICAgZXZlbiBkdXJpbmcgYW5pbWF0aW9ucywgYnV0IHNsb3dlciBwZXJmb3JtYW5jZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICBJTUFHRTogJ2ltYWdlJyxcbiAgVkVDVE9SOiAndmVjdG9yJ1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VmVjdG9yUmVuZGVyVHlwZS5qcy5tYXAiLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gcmJ1c2g7XG5tb2R1bGUuZXhwb3J0cy5kZWZhdWx0ID0gcmJ1c2g7XG5cbnZhciBxdWlja3NlbGVjdCA9IHJlcXVpcmUoJ3F1aWNrc2VsZWN0Jyk7XG5cbmZ1bmN0aW9uIHJidXNoKG1heEVudHJpZXMsIGZvcm1hdCkge1xuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiByYnVzaCkpIHJldHVybiBuZXcgcmJ1c2gobWF4RW50cmllcywgZm9ybWF0KTtcblxuICAgIC8vIG1heCBlbnRyaWVzIGluIGEgbm9kZSBpcyA5IGJ5IGRlZmF1bHQ7IG1pbiBub2RlIGZpbGwgaXMgNDAlIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgdGhpcy5fbWF4RW50cmllcyA9IE1hdGgubWF4KDQsIG1heEVudHJpZXMgfHwgOSk7XG4gICAgdGhpcy5fbWluRW50cmllcyA9IE1hdGgubWF4KDIsIE1hdGguY2VpbCh0aGlzLl9tYXhFbnRyaWVzICogMC40KSk7XG5cbiAgICBpZiAoZm9ybWF0KSB7XG4gICAgICAgIHRoaXMuX2luaXRGb3JtYXQoZm9ybWF0KTtcbiAgICB9XG5cbiAgICB0aGlzLmNsZWFyKCk7XG59XG5cbnJidXNoLnByb3RvdHlwZSA9IHtcblxuICAgIGFsbDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWxsKHRoaXMuZGF0YSwgW10pO1xuICAgIH0sXG5cbiAgICBzZWFyY2g6IGZ1bmN0aW9uIChiYm94KSB7XG5cbiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmRhdGEsXG4gICAgICAgICAgICByZXN1bHQgPSBbXSxcbiAgICAgICAgICAgIHRvQkJveCA9IHRoaXMudG9CQm94O1xuXG4gICAgICAgIGlmICghaW50ZXJzZWN0cyhiYm94LCBub2RlKSkgcmV0dXJuIHJlc3VsdDtcblxuICAgICAgICB2YXIgbm9kZXNUb1NlYXJjaCA9IFtdLFxuICAgICAgICAgICAgaSwgbGVuLCBjaGlsZCwgY2hpbGRCQm94O1xuXG4gICAgICAgIHdoaWxlIChub2RlKSB7XG4gICAgICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSBub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cbiAgICAgICAgICAgICAgICBjaGlsZCA9IG5vZGUuY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgY2hpbGRCQm94ID0gbm9kZS5sZWFmID8gdG9CQm94KGNoaWxkKSA6IGNoaWxkO1xuXG4gICAgICAgICAgICAgICAgaWYgKGludGVyc2VjdHMoYmJveCwgY2hpbGRCQm94KSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5sZWFmKSByZXN1bHQucHVzaChjaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbnRhaW5zKGJib3gsIGNoaWxkQkJveCkpIHRoaXMuX2FsbChjaGlsZCwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBub2Rlc1RvU2VhcmNoLnB1c2goY2hpbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGUgPSBub2Rlc1RvU2VhcmNoLnBvcCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuXG4gICAgY29sbGlkZXM6IGZ1bmN0aW9uIChiYm94KSB7XG5cbiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmRhdGEsXG4gICAgICAgICAgICB0b0JCb3ggPSB0aGlzLnRvQkJveDtcblxuICAgICAgICBpZiAoIWludGVyc2VjdHMoYmJveCwgbm9kZSkpIHJldHVybiBmYWxzZTtcblxuICAgICAgICB2YXIgbm9kZXNUb1NlYXJjaCA9IFtdLFxuICAgICAgICAgICAgaSwgbGVuLCBjaGlsZCwgY2hpbGRCQm94O1xuXG4gICAgICAgIHdoaWxlIChub2RlKSB7XG4gICAgICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSBub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cbiAgICAgICAgICAgICAgICBjaGlsZCA9IG5vZGUuY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgY2hpbGRCQm94ID0gbm9kZS5sZWFmID8gdG9CQm94KGNoaWxkKSA6IGNoaWxkO1xuXG4gICAgICAgICAgICAgICAgaWYgKGludGVyc2VjdHMoYmJveCwgY2hpbGRCQm94KSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5sZWFmIHx8IGNvbnRhaW5zKGJib3gsIGNoaWxkQkJveCkpIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBub2Rlc1RvU2VhcmNoLnB1c2goY2hpbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGUgPSBub2Rlc1RvU2VhcmNoLnBvcCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG5cbiAgICBsb2FkOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBpZiAoIShkYXRhICYmIGRhdGEubGVuZ3RoKSkgcmV0dXJuIHRoaXM7XG5cbiAgICAgICAgaWYgKGRhdGEubGVuZ3RoIDwgdGhpcy5fbWluRW50cmllcykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGRhdGEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluc2VydChkYXRhW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmVjdXJzaXZlbHkgYnVpbGQgdGhlIHRyZWUgd2l0aCB0aGUgZ2l2ZW4gZGF0YSBmcm9tIHNjcmF0Y2ggdXNpbmcgT01UIGFsZ29yaXRobVxuICAgICAgICB2YXIgbm9kZSA9IHRoaXMuX2J1aWxkKGRhdGEuc2xpY2UoKSwgMCwgZGF0YS5sZW5ndGggLSAxLCAwKTtcblxuICAgICAgICBpZiAoIXRoaXMuZGF0YS5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIHNhdmUgYXMgaXMgaWYgdHJlZSBpcyBlbXB0eVxuICAgICAgICAgICAgdGhpcy5kYXRhID0gbm9kZTtcblxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5oZWlnaHQgPT09IG5vZGUuaGVpZ2h0KSB7XG4gICAgICAgICAgICAvLyBzcGxpdCByb290IGlmIHRyZWVzIGhhdmUgdGhlIHNhbWUgaGVpZ2h0XG4gICAgICAgICAgICB0aGlzLl9zcGxpdFJvb3QodGhpcy5kYXRhLCBub2RlKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5oZWlnaHQgPCBub2RlLmhlaWdodCkge1xuICAgICAgICAgICAgICAgIC8vIHN3YXAgdHJlZXMgaWYgaW5zZXJ0ZWQgb25lIGlzIGJpZ2dlclxuICAgICAgICAgICAgICAgIHZhciB0bXBOb2RlID0gdGhpcy5kYXRhO1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IG5vZGU7XG4gICAgICAgICAgICAgICAgbm9kZSA9IHRtcE5vZGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGluc2VydCB0aGUgc21hbGwgdHJlZSBpbnRvIHRoZSBsYXJnZSB0cmVlIGF0IGFwcHJvcHJpYXRlIGxldmVsXG4gICAgICAgICAgICB0aGlzLl9pbnNlcnQobm9kZSwgdGhpcy5kYXRhLmhlaWdodCAtIG5vZGUuaGVpZ2h0IC0gMSwgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgaW5zZXJ0OiBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICBpZiAoaXRlbSkgdGhpcy5faW5zZXJ0KGl0ZW0sIHRoaXMuZGF0YS5oZWlnaHQgLSAxKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIGNsZWFyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IGNyZWF0ZU5vZGUoW10pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiAoaXRlbSwgZXF1YWxzRm4pIHtcbiAgICAgICAgaWYgKCFpdGVtKSByZXR1cm4gdGhpcztcblxuICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZGF0YSxcbiAgICAgICAgICAgIGJib3ggPSB0aGlzLnRvQkJveChpdGVtKSxcbiAgICAgICAgICAgIHBhdGggPSBbXSxcbiAgICAgICAgICAgIGluZGV4ZXMgPSBbXSxcbiAgICAgICAgICAgIGksIHBhcmVudCwgaW5kZXgsIGdvaW5nVXA7XG5cbiAgICAgICAgLy8gZGVwdGgtZmlyc3QgaXRlcmF0aXZlIHRyZWUgdHJhdmVyc2FsXG4gICAgICAgIHdoaWxlIChub2RlIHx8IHBhdGgubGVuZ3RoKSB7XG5cbiAgICAgICAgICAgIGlmICghbm9kZSkgeyAvLyBnbyB1cFxuICAgICAgICAgICAgICAgIG5vZGUgPSBwYXRoLnBvcCgpO1xuICAgICAgICAgICAgICAgIHBhcmVudCA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICBpID0gaW5kZXhlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBnb2luZ1VwID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG5vZGUubGVhZikgeyAvLyBjaGVjayBjdXJyZW50IG5vZGVcbiAgICAgICAgICAgICAgICBpbmRleCA9IGZpbmRJdGVtKGl0ZW0sIG5vZGUuY2hpbGRyZW4sIGVxdWFsc0ZuKTtcblxuICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaXRlbSBmb3VuZCwgcmVtb3ZlIHRoZSBpdGVtIGFuZCBjb25kZW5zZSB0cmVlIHVwd2FyZHNcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICBwYXRoLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbmRlbnNlKHBhdGgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghZ29pbmdVcCAmJiAhbm9kZS5sZWFmICYmIGNvbnRhaW5zKG5vZGUsIGJib3gpKSB7IC8vIGdvIGRvd25cbiAgICAgICAgICAgICAgICBwYXRoLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgaW5kZXhlcy5wdXNoKGkpO1xuICAgICAgICAgICAgICAgIGkgPSAwO1xuICAgICAgICAgICAgICAgIHBhcmVudCA9IG5vZGU7XG4gICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUuY2hpbGRyZW5bMF07XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyZW50KSB7IC8vIGdvIHJpZ2h0XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIG5vZGUgPSBwYXJlbnQuY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgZ29pbmdVcCA9IGZhbHNlO1xuXG4gICAgICAgICAgICB9IGVsc2Ugbm9kZSA9IG51bGw7IC8vIG5vdGhpbmcgZm91bmRcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICB0b0JCb3g6IGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBpdGVtOyB9LFxuXG4gICAgY29tcGFyZU1pblg6IGNvbXBhcmVOb2RlTWluWCxcbiAgICBjb21wYXJlTWluWTogY29tcGFyZU5vZGVNaW5ZLFxuXG4gICAgdG9KU09OOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmRhdGE7IH0sXG5cbiAgICBmcm9tSlNPTjogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIF9hbGw6IGZ1bmN0aW9uIChub2RlLCByZXN1bHQpIHtcbiAgICAgICAgdmFyIG5vZGVzVG9TZWFyY2ggPSBbXTtcbiAgICAgICAgd2hpbGUgKG5vZGUpIHtcbiAgICAgICAgICAgIGlmIChub2RlLmxlYWYpIHJlc3VsdC5wdXNoLmFwcGx5KHJlc3VsdCwgbm9kZS5jaGlsZHJlbik7XG4gICAgICAgICAgICBlbHNlIG5vZGVzVG9TZWFyY2gucHVzaC5hcHBseShub2Rlc1RvU2VhcmNoLCBub2RlLmNoaWxkcmVuKTtcblxuICAgICAgICAgICAgbm9kZSA9IG5vZGVzVG9TZWFyY2gucG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuXG4gICAgX2J1aWxkOiBmdW5jdGlvbiAoaXRlbXMsIGxlZnQsIHJpZ2h0LCBoZWlnaHQpIHtcblxuICAgICAgICB2YXIgTiA9IHJpZ2h0IC0gbGVmdCArIDEsXG4gICAgICAgICAgICBNID0gdGhpcy5fbWF4RW50cmllcyxcbiAgICAgICAgICAgIG5vZGU7XG5cbiAgICAgICAgaWYgKE4gPD0gTSkge1xuICAgICAgICAgICAgLy8gcmVhY2hlZCBsZWFmIGxldmVsOyByZXR1cm4gbGVhZlxuICAgICAgICAgICAgbm9kZSA9IGNyZWF0ZU5vZGUoaXRlbXMuc2xpY2UobGVmdCwgcmlnaHQgKyAxKSk7XG4gICAgICAgICAgICBjYWxjQkJveChub2RlLCB0aGlzLnRvQkJveCk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaGVpZ2h0KSB7XG4gICAgICAgICAgICAvLyB0YXJnZXQgaGVpZ2h0IG9mIHRoZSBidWxrLWxvYWRlZCB0cmVlXG4gICAgICAgICAgICBoZWlnaHQgPSBNYXRoLmNlaWwoTWF0aC5sb2coTikgLyBNYXRoLmxvZyhNKSk7XG5cbiAgICAgICAgICAgIC8vIHRhcmdldCBudW1iZXIgb2Ygcm9vdCBlbnRyaWVzIHRvIG1heGltaXplIHN0b3JhZ2UgdXRpbGl6YXRpb25cbiAgICAgICAgICAgIE0gPSBNYXRoLmNlaWwoTiAvIE1hdGgucG93KE0sIGhlaWdodCAtIDEpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG5vZGUgPSBjcmVhdGVOb2RlKFtdKTtcbiAgICAgICAgbm9kZS5sZWFmID0gZmFsc2U7XG4gICAgICAgIG5vZGUuaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgICAgIC8vIHNwbGl0IHRoZSBpdGVtcyBpbnRvIE0gbW9zdGx5IHNxdWFyZSB0aWxlc1xuXG4gICAgICAgIHZhciBOMiA9IE1hdGguY2VpbChOIC8gTSksXG4gICAgICAgICAgICBOMSA9IE4yICogTWF0aC5jZWlsKE1hdGguc3FydChNKSksXG4gICAgICAgICAgICBpLCBqLCByaWdodDIsIHJpZ2h0MztcblxuICAgICAgICBtdWx0aVNlbGVjdChpdGVtcywgbGVmdCwgcmlnaHQsIE4xLCB0aGlzLmNvbXBhcmVNaW5YKTtcblxuICAgICAgICBmb3IgKGkgPSBsZWZ0OyBpIDw9IHJpZ2h0OyBpICs9IE4xKSB7XG5cbiAgICAgICAgICAgIHJpZ2h0MiA9IE1hdGgubWluKGkgKyBOMSAtIDEsIHJpZ2h0KTtcblxuICAgICAgICAgICAgbXVsdGlTZWxlY3QoaXRlbXMsIGksIHJpZ2h0MiwgTjIsIHRoaXMuY29tcGFyZU1pblkpO1xuXG4gICAgICAgICAgICBmb3IgKGogPSBpOyBqIDw9IHJpZ2h0MjsgaiArPSBOMikge1xuXG4gICAgICAgICAgICAgICAgcmlnaHQzID0gTWF0aC5taW4oaiArIE4yIC0gMSwgcmlnaHQyKTtcblxuICAgICAgICAgICAgICAgIC8vIHBhY2sgZWFjaCBlbnRyeSByZWN1cnNpdmVseVxuICAgICAgICAgICAgICAgIG5vZGUuY2hpbGRyZW4ucHVzaCh0aGlzLl9idWlsZChpdGVtcywgaiwgcmlnaHQzLCBoZWlnaHQgLSAxKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjYWxjQkJveChub2RlLCB0aGlzLnRvQkJveCk7XG5cbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfSxcblxuICAgIF9jaG9vc2VTdWJ0cmVlOiBmdW5jdGlvbiAoYmJveCwgbm9kZSwgbGV2ZWwsIHBhdGgpIHtcblxuICAgICAgICB2YXIgaSwgbGVuLCBjaGlsZCwgdGFyZ2V0Tm9kZSwgYXJlYSwgZW5sYXJnZW1lbnQsIG1pbkFyZWEsIG1pbkVubGFyZ2VtZW50O1xuXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBwYXRoLnB1c2gobm9kZSk7XG5cbiAgICAgICAgICAgIGlmIChub2RlLmxlYWYgfHwgcGF0aC5sZW5ndGggLSAxID09PSBsZXZlbCkgYnJlYWs7XG5cbiAgICAgICAgICAgIG1pbkFyZWEgPSBtaW5FbmxhcmdlbWVudCA9IEluZmluaXR5O1xuXG4gICAgICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSBub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY2hpbGQgPSBub2RlLmNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgICAgIGFyZWEgPSBiYm94QXJlYShjaGlsZCk7XG4gICAgICAgICAgICAgICAgZW5sYXJnZW1lbnQgPSBlbmxhcmdlZEFyZWEoYmJveCwgY2hpbGQpIC0gYXJlYTtcblxuICAgICAgICAgICAgICAgIC8vIGNob29zZSBlbnRyeSB3aXRoIHRoZSBsZWFzdCBhcmVhIGVubGFyZ2VtZW50XG4gICAgICAgICAgICAgICAgaWYgKGVubGFyZ2VtZW50IDwgbWluRW5sYXJnZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgbWluRW5sYXJnZW1lbnQgPSBlbmxhcmdlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgbWluQXJlYSA9IGFyZWEgPCBtaW5BcmVhID8gYXJlYSA6IG1pbkFyZWE7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldE5vZGUgPSBjaGlsZDtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZW5sYXJnZW1lbnQgPT09IG1pbkVubGFyZ2VtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSBjaG9vc2Ugb25lIHdpdGggdGhlIHNtYWxsZXN0IGFyZWFcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZWEgPCBtaW5BcmVhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5BcmVhID0gYXJlYTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldE5vZGUgPSBjaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbm9kZSA9IHRhcmdldE5vZGUgfHwgbm9kZS5jaGlsZHJlblswXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH0sXG5cbiAgICBfaW5zZXJ0OiBmdW5jdGlvbiAoaXRlbSwgbGV2ZWwsIGlzTm9kZSkge1xuXG4gICAgICAgIHZhciB0b0JCb3ggPSB0aGlzLnRvQkJveCxcbiAgICAgICAgICAgIGJib3ggPSBpc05vZGUgPyBpdGVtIDogdG9CQm94KGl0ZW0pLFxuICAgICAgICAgICAgaW5zZXJ0UGF0aCA9IFtdO1xuXG4gICAgICAgIC8vIGZpbmQgdGhlIGJlc3Qgbm9kZSBmb3IgYWNjb21tb2RhdGluZyB0aGUgaXRlbSwgc2F2aW5nIGFsbCBub2RlcyBhbG9uZyB0aGUgcGF0aCB0b29cbiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLl9jaG9vc2VTdWJ0cmVlKGJib3gsIHRoaXMuZGF0YSwgbGV2ZWwsIGluc2VydFBhdGgpO1xuXG4gICAgICAgIC8vIHB1dCB0aGUgaXRlbSBpbnRvIHRoZSBub2RlXG4gICAgICAgIG5vZGUuY2hpbGRyZW4ucHVzaChpdGVtKTtcbiAgICAgICAgZXh0ZW5kKG5vZGUsIGJib3gpO1xuXG4gICAgICAgIC8vIHNwbGl0IG9uIG5vZGUgb3ZlcmZsb3c7IHByb3BhZ2F0ZSB1cHdhcmRzIGlmIG5lY2Vzc2FyeVxuICAgICAgICB3aGlsZSAobGV2ZWwgPj0gMCkge1xuICAgICAgICAgICAgaWYgKGluc2VydFBhdGhbbGV2ZWxdLmNoaWxkcmVuLmxlbmd0aCA+IHRoaXMuX21heEVudHJpZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zcGxpdChpbnNlcnRQYXRoLCBsZXZlbCk7XG4gICAgICAgICAgICAgICAgbGV2ZWwtLTtcbiAgICAgICAgICAgIH0gZWxzZSBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFkanVzdCBiYm94ZXMgYWxvbmcgdGhlIGluc2VydGlvbiBwYXRoXG4gICAgICAgIHRoaXMuX2FkanVzdFBhcmVudEJCb3hlcyhiYm94LCBpbnNlcnRQYXRoLCBsZXZlbCk7XG4gICAgfSxcblxuICAgIC8vIHNwbGl0IG92ZXJmbG93ZWQgbm9kZSBpbnRvIHR3b1xuICAgIF9zcGxpdDogZnVuY3Rpb24gKGluc2VydFBhdGgsIGxldmVsKSB7XG5cbiAgICAgICAgdmFyIG5vZGUgPSBpbnNlcnRQYXRoW2xldmVsXSxcbiAgICAgICAgICAgIE0gPSBub2RlLmNoaWxkcmVuLmxlbmd0aCxcbiAgICAgICAgICAgIG0gPSB0aGlzLl9taW5FbnRyaWVzO1xuXG4gICAgICAgIHRoaXMuX2Nob29zZVNwbGl0QXhpcyhub2RlLCBtLCBNKTtcblxuICAgICAgICB2YXIgc3BsaXRJbmRleCA9IHRoaXMuX2Nob29zZVNwbGl0SW5kZXgobm9kZSwgbSwgTSk7XG5cbiAgICAgICAgdmFyIG5ld05vZGUgPSBjcmVhdGVOb2RlKG5vZGUuY2hpbGRyZW4uc3BsaWNlKHNwbGl0SW5kZXgsIG5vZGUuY2hpbGRyZW4ubGVuZ3RoIC0gc3BsaXRJbmRleCkpO1xuICAgICAgICBuZXdOb2RlLmhlaWdodCA9IG5vZGUuaGVpZ2h0O1xuICAgICAgICBuZXdOb2RlLmxlYWYgPSBub2RlLmxlYWY7XG5cbiAgICAgICAgY2FsY0JCb3gobm9kZSwgdGhpcy50b0JCb3gpO1xuICAgICAgICBjYWxjQkJveChuZXdOb2RlLCB0aGlzLnRvQkJveCk7XG5cbiAgICAgICAgaWYgKGxldmVsKSBpbnNlcnRQYXRoW2xldmVsIC0gMV0uY2hpbGRyZW4ucHVzaChuZXdOb2RlKTtcbiAgICAgICAgZWxzZSB0aGlzLl9zcGxpdFJvb3Qobm9kZSwgbmV3Tm9kZSk7XG4gICAgfSxcblxuICAgIF9zcGxpdFJvb3Q6IGZ1bmN0aW9uIChub2RlLCBuZXdOb2RlKSB7XG4gICAgICAgIC8vIHNwbGl0IHJvb3Qgbm9kZVxuICAgICAgICB0aGlzLmRhdGEgPSBjcmVhdGVOb2RlKFtub2RlLCBuZXdOb2RlXSk7XG4gICAgICAgIHRoaXMuZGF0YS5oZWlnaHQgPSBub2RlLmhlaWdodCArIDE7XG4gICAgICAgIHRoaXMuZGF0YS5sZWFmID0gZmFsc2U7XG4gICAgICAgIGNhbGNCQm94KHRoaXMuZGF0YSwgdGhpcy50b0JCb3gpO1xuICAgIH0sXG5cbiAgICBfY2hvb3NlU3BsaXRJbmRleDogZnVuY3Rpb24gKG5vZGUsIG0sIE0pIHtcblxuICAgICAgICB2YXIgaSwgYmJveDEsIGJib3gyLCBvdmVybGFwLCBhcmVhLCBtaW5PdmVybGFwLCBtaW5BcmVhLCBpbmRleDtcblxuICAgICAgICBtaW5PdmVybGFwID0gbWluQXJlYSA9IEluZmluaXR5O1xuXG4gICAgICAgIGZvciAoaSA9IG07IGkgPD0gTSAtIG07IGkrKykge1xuICAgICAgICAgICAgYmJveDEgPSBkaXN0QkJveChub2RlLCAwLCBpLCB0aGlzLnRvQkJveCk7XG4gICAgICAgICAgICBiYm94MiA9IGRpc3RCQm94KG5vZGUsIGksIE0sIHRoaXMudG9CQm94KTtcblxuICAgICAgICAgICAgb3ZlcmxhcCA9IGludGVyc2VjdGlvbkFyZWEoYmJveDEsIGJib3gyKTtcbiAgICAgICAgICAgIGFyZWEgPSBiYm94QXJlYShiYm94MSkgKyBiYm94QXJlYShiYm94Mik7XG5cbiAgICAgICAgICAgIC8vIGNob29zZSBkaXN0cmlidXRpb24gd2l0aCBtaW5pbXVtIG92ZXJsYXBcbiAgICAgICAgICAgIGlmIChvdmVybGFwIDwgbWluT3ZlcmxhcCkge1xuICAgICAgICAgICAgICAgIG1pbk92ZXJsYXAgPSBvdmVybGFwO1xuICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcblxuICAgICAgICAgICAgICAgIG1pbkFyZWEgPSBhcmVhIDwgbWluQXJlYSA/IGFyZWEgOiBtaW5BcmVhO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG92ZXJsYXAgPT09IG1pbk92ZXJsYXApIHtcbiAgICAgICAgICAgICAgICAvLyBvdGhlcndpc2UgY2hvb3NlIGRpc3RyaWJ1dGlvbiB3aXRoIG1pbmltdW0gYXJlYVxuICAgICAgICAgICAgICAgIGlmIChhcmVhIDwgbWluQXJlYSkge1xuICAgICAgICAgICAgICAgICAgICBtaW5BcmVhID0gYXJlYTtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpbmRleDtcbiAgICB9LFxuXG4gICAgLy8gc29ydHMgbm9kZSBjaGlsZHJlbiBieSB0aGUgYmVzdCBheGlzIGZvciBzcGxpdFxuICAgIF9jaG9vc2VTcGxpdEF4aXM6IGZ1bmN0aW9uIChub2RlLCBtLCBNKSB7XG5cbiAgICAgICAgdmFyIGNvbXBhcmVNaW5YID0gbm9kZS5sZWFmID8gdGhpcy5jb21wYXJlTWluWCA6IGNvbXBhcmVOb2RlTWluWCxcbiAgICAgICAgICAgIGNvbXBhcmVNaW5ZID0gbm9kZS5sZWFmID8gdGhpcy5jb21wYXJlTWluWSA6IGNvbXBhcmVOb2RlTWluWSxcbiAgICAgICAgICAgIHhNYXJnaW4gPSB0aGlzLl9hbGxEaXN0TWFyZ2luKG5vZGUsIG0sIE0sIGNvbXBhcmVNaW5YKSxcbiAgICAgICAgICAgIHlNYXJnaW4gPSB0aGlzLl9hbGxEaXN0TWFyZ2luKG5vZGUsIG0sIE0sIGNvbXBhcmVNaW5ZKTtcblxuICAgICAgICAvLyBpZiB0b3RhbCBkaXN0cmlidXRpb25zIG1hcmdpbiB2YWx1ZSBpcyBtaW5pbWFsIGZvciB4LCBzb3J0IGJ5IG1pblgsXG4gICAgICAgIC8vIG90aGVyd2lzZSBpdCdzIGFscmVhZHkgc29ydGVkIGJ5IG1pbllcbiAgICAgICAgaWYgKHhNYXJnaW4gPCB5TWFyZ2luKSBub2RlLmNoaWxkcmVuLnNvcnQoY29tcGFyZU1pblgpO1xuICAgIH0sXG5cbiAgICAvLyB0b3RhbCBtYXJnaW4gb2YgYWxsIHBvc3NpYmxlIHNwbGl0IGRpc3RyaWJ1dGlvbnMgd2hlcmUgZWFjaCBub2RlIGlzIGF0IGxlYXN0IG0gZnVsbFxuICAgIF9hbGxEaXN0TWFyZ2luOiBmdW5jdGlvbiAobm9kZSwgbSwgTSwgY29tcGFyZSkge1xuXG4gICAgICAgIG5vZGUuY2hpbGRyZW4uc29ydChjb21wYXJlKTtcblxuICAgICAgICB2YXIgdG9CQm94ID0gdGhpcy50b0JCb3gsXG4gICAgICAgICAgICBsZWZ0QkJveCA9IGRpc3RCQm94KG5vZGUsIDAsIG0sIHRvQkJveCksXG4gICAgICAgICAgICByaWdodEJCb3ggPSBkaXN0QkJveChub2RlLCBNIC0gbSwgTSwgdG9CQm94KSxcbiAgICAgICAgICAgIG1hcmdpbiA9IGJib3hNYXJnaW4obGVmdEJCb3gpICsgYmJveE1hcmdpbihyaWdodEJCb3gpLFxuICAgICAgICAgICAgaSwgY2hpbGQ7XG5cbiAgICAgICAgZm9yIChpID0gbTsgaSA8IE0gLSBtOyBpKyspIHtcbiAgICAgICAgICAgIGNoaWxkID0gbm9kZS5jaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGV4dGVuZChsZWZ0QkJveCwgbm9kZS5sZWFmID8gdG9CQm94KGNoaWxkKSA6IGNoaWxkKTtcbiAgICAgICAgICAgIG1hcmdpbiArPSBiYm94TWFyZ2luKGxlZnRCQm94KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoaSA9IE0gLSBtIC0gMTsgaSA+PSBtOyBpLS0pIHtcbiAgICAgICAgICAgIGNoaWxkID0gbm9kZS5jaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGV4dGVuZChyaWdodEJCb3gsIG5vZGUubGVhZiA/IHRvQkJveChjaGlsZCkgOiBjaGlsZCk7XG4gICAgICAgICAgICBtYXJnaW4gKz0gYmJveE1hcmdpbihyaWdodEJCb3gpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1hcmdpbjtcbiAgICB9LFxuXG4gICAgX2FkanVzdFBhcmVudEJCb3hlczogZnVuY3Rpb24gKGJib3gsIHBhdGgsIGxldmVsKSB7XG4gICAgICAgIC8vIGFkanVzdCBiYm94ZXMgYWxvbmcgdGhlIGdpdmVuIHRyZWUgcGF0aFxuICAgICAgICBmb3IgKHZhciBpID0gbGV2ZWw7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBleHRlbmQocGF0aFtpXSwgYmJveCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgX2NvbmRlbnNlOiBmdW5jdGlvbiAocGF0aCkge1xuICAgICAgICAvLyBnbyB0aHJvdWdoIHRoZSBwYXRoLCByZW1vdmluZyBlbXB0eSBub2RlcyBhbmQgdXBkYXRpbmcgYmJveGVzXG4gICAgICAgIGZvciAodmFyIGkgPSBwYXRoLmxlbmd0aCAtIDEsIHNpYmxpbmdzOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgaWYgKHBhdGhbaV0uY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHNpYmxpbmdzID0gcGF0aFtpIC0gMV0uY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgICAgIHNpYmxpbmdzLnNwbGljZShzaWJsaW5ncy5pbmRleE9mKHBhdGhbaV0pLCAxKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB0aGlzLmNsZWFyKCk7XG5cbiAgICAgICAgICAgIH0gZWxzZSBjYWxjQkJveChwYXRoW2ldLCB0aGlzLnRvQkJveCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgX2luaXRGb3JtYXQ6IGZ1bmN0aW9uIChmb3JtYXQpIHtcbiAgICAgICAgLy8gZGF0YSBmb3JtYXQgKG1pblgsIG1pblksIG1heFgsIG1heFkgYWNjZXNzb3JzKVxuXG4gICAgICAgIC8vIHVzZXMgZXZhbC10eXBlIGZ1bmN0aW9uIGNvbXBpbGF0aW9uIGluc3RlYWQgb2YganVzdCBhY2NlcHRpbmcgYSB0b0JCb3ggZnVuY3Rpb25cbiAgICAgICAgLy8gYmVjYXVzZSB0aGUgYWxnb3JpdGhtcyBhcmUgdmVyeSBzZW5zaXRpdmUgdG8gc29ydGluZyBmdW5jdGlvbnMgcGVyZm9ybWFuY2UsXG4gICAgICAgIC8vIHNvIHRoZXkgc2hvdWxkIGJlIGRlYWQgc2ltcGxlIGFuZCB3aXRob3V0IGlubmVyIGNhbGxzXG5cbiAgICAgICAgdmFyIGNvbXBhcmVBcnIgPSBbJ3JldHVybiBhJywgJyAtIGInLCAnOyddO1xuXG4gICAgICAgIHRoaXMuY29tcGFyZU1pblggPSBuZXcgRnVuY3Rpb24oJ2EnLCAnYicsIGNvbXBhcmVBcnIuam9pbihmb3JtYXRbMF0pKTtcbiAgICAgICAgdGhpcy5jb21wYXJlTWluWSA9IG5ldyBGdW5jdGlvbignYScsICdiJywgY29tcGFyZUFyci5qb2luKGZvcm1hdFsxXSkpO1xuXG4gICAgICAgIHRoaXMudG9CQm94ID0gbmV3IEZ1bmN0aW9uKCdhJyxcbiAgICAgICAgICAgICdyZXR1cm4ge21pblg6IGEnICsgZm9ybWF0WzBdICtcbiAgICAgICAgICAgICcsIG1pblk6IGEnICsgZm9ybWF0WzFdICtcbiAgICAgICAgICAgICcsIG1heFg6IGEnICsgZm9ybWF0WzJdICtcbiAgICAgICAgICAgICcsIG1heFk6IGEnICsgZm9ybWF0WzNdICsgJ307Jyk7XG4gICAgfVxufTtcblxuZnVuY3Rpb24gZmluZEl0ZW0oaXRlbSwgaXRlbXMsIGVxdWFsc0ZuKSB7XG4gICAgaWYgKCFlcXVhbHNGbikgcmV0dXJuIGl0ZW1zLmluZGV4T2YoaXRlbSk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChlcXVhbHNGbihpdGVtLCBpdGVtc1tpXSkpIHJldHVybiBpO1xuICAgIH1cbiAgICByZXR1cm4gLTE7XG59XG5cbi8vIGNhbGN1bGF0ZSBub2RlJ3MgYmJveCBmcm9tIGJib3hlcyBvZiBpdHMgY2hpbGRyZW5cbmZ1bmN0aW9uIGNhbGNCQm94KG5vZGUsIHRvQkJveCkge1xuICAgIGRpc3RCQm94KG5vZGUsIDAsIG5vZGUuY2hpbGRyZW4ubGVuZ3RoLCB0b0JCb3gsIG5vZGUpO1xufVxuXG4vLyBtaW4gYm91bmRpbmcgcmVjdGFuZ2xlIG9mIG5vZGUgY2hpbGRyZW4gZnJvbSBrIHRvIHAtMVxuZnVuY3Rpb24gZGlzdEJCb3gobm9kZSwgaywgcCwgdG9CQm94LCBkZXN0Tm9kZSkge1xuICAgIGlmICghZGVzdE5vZGUpIGRlc3ROb2RlID0gY3JlYXRlTm9kZShudWxsKTtcbiAgICBkZXN0Tm9kZS5taW5YID0gSW5maW5pdHk7XG4gICAgZGVzdE5vZGUubWluWSA9IEluZmluaXR5O1xuICAgIGRlc3ROb2RlLm1heFggPSAtSW5maW5pdHk7XG4gICAgZGVzdE5vZGUubWF4WSA9IC1JbmZpbml0eTtcblxuICAgIGZvciAodmFyIGkgPSBrLCBjaGlsZDsgaSA8IHA7IGkrKykge1xuICAgICAgICBjaGlsZCA9IG5vZGUuY2hpbGRyZW5baV07XG4gICAgICAgIGV4dGVuZChkZXN0Tm9kZSwgbm9kZS5sZWFmID8gdG9CQm94KGNoaWxkKSA6IGNoaWxkKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGVzdE5vZGU7XG59XG5cbmZ1bmN0aW9uIGV4dGVuZChhLCBiKSB7XG4gICAgYS5taW5YID0gTWF0aC5taW4oYS5taW5YLCBiLm1pblgpO1xuICAgIGEubWluWSA9IE1hdGgubWluKGEubWluWSwgYi5taW5ZKTtcbiAgICBhLm1heFggPSBNYXRoLm1heChhLm1heFgsIGIubWF4WCk7XG4gICAgYS5tYXhZID0gTWF0aC5tYXgoYS5tYXhZLCBiLm1heFkpO1xuICAgIHJldHVybiBhO1xufVxuXG5mdW5jdGlvbiBjb21wYXJlTm9kZU1pblgoYSwgYikgeyByZXR1cm4gYS5taW5YIC0gYi5taW5YOyB9XG5mdW5jdGlvbiBjb21wYXJlTm9kZU1pblkoYSwgYikgeyByZXR1cm4gYS5taW5ZIC0gYi5taW5ZOyB9XG5cbmZ1bmN0aW9uIGJib3hBcmVhKGEpICAgeyByZXR1cm4gKGEubWF4WCAtIGEubWluWCkgKiAoYS5tYXhZIC0gYS5taW5ZKTsgfVxuZnVuY3Rpb24gYmJveE1hcmdpbihhKSB7IHJldHVybiAoYS5tYXhYIC0gYS5taW5YKSArIChhLm1heFkgLSBhLm1pblkpOyB9XG5cbmZ1bmN0aW9uIGVubGFyZ2VkQXJlYShhLCBiKSB7XG4gICAgcmV0dXJuIChNYXRoLm1heChiLm1heFgsIGEubWF4WCkgLSBNYXRoLm1pbihiLm1pblgsIGEubWluWCkpICpcbiAgICAgICAgICAgKE1hdGgubWF4KGIubWF4WSwgYS5tYXhZKSAtIE1hdGgubWluKGIubWluWSwgYS5taW5ZKSk7XG59XG5cbmZ1bmN0aW9uIGludGVyc2VjdGlvbkFyZWEoYSwgYikge1xuICAgIHZhciBtaW5YID0gTWF0aC5tYXgoYS5taW5YLCBiLm1pblgpLFxuICAgICAgICBtaW5ZID0gTWF0aC5tYXgoYS5taW5ZLCBiLm1pblkpLFxuICAgICAgICBtYXhYID0gTWF0aC5taW4oYS5tYXhYLCBiLm1heFgpLFxuICAgICAgICBtYXhZID0gTWF0aC5taW4oYS5tYXhZLCBiLm1heFkpO1xuXG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIG1heFggLSBtaW5YKSAqXG4gICAgICAgICAgIE1hdGgubWF4KDAsIG1heFkgLSBtaW5ZKTtcbn1cblxuZnVuY3Rpb24gY29udGFpbnMoYSwgYikge1xuICAgIHJldHVybiBhLm1pblggPD0gYi5taW5YICYmXG4gICAgICAgICAgIGEubWluWSA8PSBiLm1pblkgJiZcbiAgICAgICAgICAgYi5tYXhYIDw9IGEubWF4WCAmJlxuICAgICAgICAgICBiLm1heFkgPD0gYS5tYXhZO1xufVxuXG5mdW5jdGlvbiBpbnRlcnNlY3RzKGEsIGIpIHtcbiAgICByZXR1cm4gYi5taW5YIDw9IGEubWF4WCAmJlxuICAgICAgICAgICBiLm1pblkgPD0gYS5tYXhZICYmXG4gICAgICAgICAgIGIubWF4WCA+PSBhLm1pblggJiZcbiAgICAgICAgICAgYi5tYXhZID49IGEubWluWTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTm9kZShjaGlsZHJlbikge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNoaWxkcmVuOiBjaGlsZHJlbixcbiAgICAgICAgaGVpZ2h0OiAxLFxuICAgICAgICBsZWFmOiB0cnVlLFxuICAgICAgICBtaW5YOiBJbmZpbml0eSxcbiAgICAgICAgbWluWTogSW5maW5pdHksXG4gICAgICAgIG1heFg6IC1JbmZpbml0eSxcbiAgICAgICAgbWF4WTogLUluZmluaXR5XG4gICAgfTtcbn1cblxuLy8gc29ydCBhbiBhcnJheSBzbyB0aGF0IGl0ZW1zIGNvbWUgaW4gZ3JvdXBzIG9mIG4gdW5zb3J0ZWQgaXRlbXMsIHdpdGggZ3JvdXBzIHNvcnRlZCBiZXR3ZWVuIGVhY2ggb3RoZXI7XG4vLyBjb21iaW5lcyBzZWxlY3Rpb24gYWxnb3JpdGhtIHdpdGggYmluYXJ5IGRpdmlkZSAmIGNvbnF1ZXIgYXBwcm9hY2hcblxuZnVuY3Rpb24gbXVsdGlTZWxlY3QoYXJyLCBsZWZ0LCByaWdodCwgbiwgY29tcGFyZSkge1xuICAgIHZhciBzdGFjayA9IFtsZWZ0LCByaWdodF0sXG4gICAgICAgIG1pZDtcblxuICAgIHdoaWxlIChzdGFjay5sZW5ndGgpIHtcbiAgICAgICAgcmlnaHQgPSBzdGFjay5wb3AoKTtcbiAgICAgICAgbGVmdCA9IHN0YWNrLnBvcCgpO1xuXG4gICAgICAgIGlmIChyaWdodCAtIGxlZnQgPD0gbikgY29udGludWU7XG5cbiAgICAgICAgbWlkID0gbGVmdCArIE1hdGguY2VpbCgocmlnaHQgLSBsZWZ0KSAvIG4gLyAyKSAqIG47XG4gICAgICAgIHF1aWNrc2VsZWN0KGFyciwgbWlkLCBsZWZ0LCByaWdodCwgY29tcGFyZSk7XG5cbiAgICAgICAgc3RhY2sucHVzaChsZWZ0LCBtaWQsIG1pZCwgcmlnaHQpO1xuICAgIH1cbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvcmV2ZXJzZVxuICovXG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gIHdoaWxlIChvZmZzZXQgPCBlbmQgLSBzdHJpZGUpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmlkZTsgKytpKSB7XG4gICAgICB2YXIgdG1wID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGldO1xuICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGldID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIGldO1xuICAgICAgZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIGldID0gdG1wO1xuICAgIH1cbiAgICBvZmZzZXQgKz0gc3RyaWRlO1xuICAgIGVuZCAtPSBzdHJpZGU7XG4gIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmV2ZXJzZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L29yaWVudFxuICovXG5pbXBvcnQge2Nvb3JkaW5hdGVzIGFzIHJldmVyc2VDb29yZGluYXRlc30gZnJvbSAnLi9yZXZlcnNlLmpzJztcblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBJcyBjbG9ja3dpc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nSXNDbG9ja3dpc2UoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gIC8vIGh0dHA6Ly90aW55dXJsLmNvbS9jbG9ja3dpc2UtbWV0aG9kXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9PU0dlby9nZGFsL2Jsb2IvdHJ1bmsvZ2RhbC9vZ3Ivb2dybGluZWFycmluZy5jcHBcbiAgdmFyIGVkZ2UgPSAwO1xuICB2YXIgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlXTtcbiAgdmFyIHkxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIDFdO1xuICBmb3IgKDsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgdmFyIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgdmFyIHkyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgIGVkZ2UgKz0gKHgyIC0geDEpICogKHkyICsgeTEpO1xuICAgIHgxID0geDI7XG4gICAgeTEgPSB5MjtcbiAgfVxuICByZXR1cm4gZWRnZSA+IDA7XG59XG5cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIGxpbmVhciByaW5ncyBhcmUgb3JpZW50ZWQuICBCeSBkZWZhdWx0LCBsZWZ0LWhhbmQgb3JpZW50YXRpb25cbiAqIGlzIHRlc3RlZCAoZmlyc3QgcmluZyBtdXN0IGJlIGNsb2Nrd2lzZSwgcmVtYWluaW5nIHJpbmdzIGNvdW50ZXItY2xvY2t3aXNlKS5cbiAqIFRvIHRlc3QgZm9yIHJpZ2h0LWhhbmQgb3JpZW50YXRpb24sIHVzZSB0aGUgYG9wdF9yaWdodGAgYXJndW1lbnQuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEFycmF5IG9mIGVuZCBpbmRleGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfcmlnaHQgVGVzdCBmb3IgcmlnaHQtaGFuZCBvcmllbnRhdGlvblxuICogICAgIChjb3VudGVyLWNsb2Nrd2lzZSBleHRlcmlvciByaW5nIGFuZCBjbG9ja3dpc2UgaW50ZXJpb3IgcmluZ3MpLlxuICogQHJldHVybiB7Ym9vbGVhbn0gUmluZ3MgYXJlIGNvcnJlY3RseSBvcmllbnRlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdJc09yaWVudGVkKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIG9wdF9yaWdodCkge1xuICB2YXIgcmlnaHQgPSBvcHRfcmlnaHQgIT09IHVuZGVmaW5lZCA/IG9wdF9yaWdodCA6IGZhbHNlO1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICB2YXIgaXNDbG9ja3dpc2UgPSBsaW5lYXJSaW5nSXNDbG9ja3dpc2UoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpO1xuICAgIGlmIChpID09PSAwKSB7XG4gICAgICBpZiAoKHJpZ2h0ICYmIGlzQ2xvY2t3aXNlKSB8fCAoIXJpZ2h0ICYmICFpc0Nsb2Nrd2lzZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoKHJpZ2h0ICYmICFpc0Nsb2Nrd2lzZSkgfHwgKCFyaWdodCAmJiBpc0Nsb2Nrd2lzZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICBvZmZzZXQgPSBlbmQ7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIGxpbmVhciByaW5ncyBhcmUgb3JpZW50ZWQuICBCeSBkZWZhdWx0LCBsZWZ0LWhhbmQgb3JpZW50YXRpb25cbiAqIGlzIHRlc3RlZCAoZmlyc3QgcmluZyBtdXN0IGJlIGNsb2Nrd2lzZSwgcmVtYWluaW5nIHJpbmdzIGNvdW50ZXItY2xvY2t3aXNlKS5cbiAqIFRvIHRlc3QgZm9yIHJpZ2h0LWhhbmQgb3JpZW50YXRpb24sIHVzZSB0aGUgYG9wdF9yaWdodGAgYXJndW1lbnQuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgQXJyYXkgb2YgYXJyYXkgb2YgZW5kIGluZGV4ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9yaWdodCBUZXN0IGZvciByaWdodC1oYW5kIG9yaWVudGF0aW9uXG4gKiAgICAgKGNvdW50ZXItY2xvY2t3aXNlIGV4dGVyaW9yIHJpbmcgYW5kIGNsb2Nrd2lzZSBpbnRlcmlvciByaW5ncykuXG4gKiBAcmV0dXJuIHtib29sZWFufSBSaW5ncyBhcmUgY29ycmVjdGx5IG9yaWVudGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3NBcmVPcmllbnRlZChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgb3B0X3JpZ2h0KSB7XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBpZiAoIWxpbmVhclJpbmdJc09yaWVudGVkKFxuICAgICAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzW2ldLCBzdHJpZGUsIG9wdF9yaWdodCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cblxuLyoqXG4gKiBPcmllbnQgY29vcmRpbmF0ZXMgaW4gYSBmbGF0IGFycmF5IG9mIGxpbmVhciByaW5ncy4gIEJ5IGRlZmF1bHQsIHJpbmdzXG4gKiBhcmUgb3JpZW50ZWQgZm9sbG93aW5nIHRoZSBsZWZ0LWhhbmQgcnVsZSAoY2xvY2t3aXNlIGZvciBleHRlcmlvciBhbmRcbiAqIGNvdW50ZXItY2xvY2t3aXNlIGZvciBpbnRlcmlvciByaW5ncykuICBUbyBvcmllbnQgYWNjb3JkaW5nIHRvIHRoZVxuICogcmlnaHQtaGFuZCBydWxlLCB1c2UgdGhlIGBvcHRfcmlnaHRgIGFyZ3VtZW50LlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfcmlnaHQgRm9sbG93IHRoZSByaWdodC1oYW5kIHJ1bGUgZm9yIG9yaWVudGF0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBFbmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvcmllbnRMaW5lYXJSaW5ncyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBvcHRfcmlnaHQpIHtcbiAgdmFyIHJpZ2h0ID0gb3B0X3JpZ2h0ICE9PSB1bmRlZmluZWQgPyBvcHRfcmlnaHQgOiBmYWxzZTtcbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgdmFyIGlzQ2xvY2t3aXNlID0gbGluZWFyUmluZ0lzQ2xvY2t3aXNlKFxuICAgICAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKTtcbiAgICB2YXIgcmV2ZXJzZSA9IGkgPT09IDAgP1xuICAgICAgKHJpZ2h0ICYmIGlzQ2xvY2t3aXNlKSB8fCAoIXJpZ2h0ICYmICFpc0Nsb2Nrd2lzZSkgOlxuICAgICAgKHJpZ2h0ICYmICFpc0Nsb2Nrd2lzZSkgfHwgKCFyaWdodCAmJiBpc0Nsb2Nrd2lzZSk7XG4gICAgaWYgKHJldmVyc2UpIHtcbiAgICAgIHJldmVyc2VDb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpO1xuICAgIH1cbiAgICBvZmZzZXQgPSBlbmQ7XG4gIH1cbiAgcmV0dXJuIG9mZnNldDtcbn1cblxuXG4vKipcbiAqIE9yaWVudCBjb29yZGluYXRlcyBpbiBhIGZsYXQgYXJyYXkgb2YgbGluZWFyIHJpbmdzLiAgQnkgZGVmYXVsdCwgcmluZ3NcbiAqIGFyZSBvcmllbnRlZCBmb2xsb3dpbmcgdGhlIGxlZnQtaGFuZCBydWxlIChjbG9ja3dpc2UgZm9yIGV4dGVyaW9yIGFuZFxuICogY291bnRlci1jbG9ja3dpc2UgZm9yIGludGVyaW9yIHJpbmdzKS4gIFRvIG9yaWVudCBhY2NvcmRpbmcgdG8gdGhlXG4gKiByaWdodC1oYW5kIHJ1bGUsIHVzZSB0aGUgYG9wdF9yaWdodGAgYXJndW1lbnQuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgQXJyYXkgb2YgYXJyYXkgb2YgZW5kIGluZGV4ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9yaWdodCBGb2xsb3cgdGhlIHJpZ2h0LWhhbmQgcnVsZSBmb3Igb3JpZW50YXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEVuZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9yaWVudExpbmVhclJpbmdzQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIG9wdF9yaWdodCkge1xuICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgb2Zmc2V0ID0gb3JpZW50TGluZWFyUmluZ3MoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3NbaV0sIHN0cmlkZSwgb3B0X3JpZ2h0KTtcbiAgfVxuICByZXR1cm4gb2Zmc2V0O1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcmllbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3BvaW50ZXIvRXZlbnRTb3VyY2VcbiAqL1xuXG52YXIgRXZlbnRTb3VyY2UgPSBmdW5jdGlvbiBFdmVudFNvdXJjZShkaXNwYXRjaGVyLCBtYXBwaW5nKSB7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtpbXBvcnQoXCIuL1BvaW50ZXJFdmVudEhhbmRsZXIuanNcIikuZGVmYXVsdH1cbiAgICovXG4gIHRoaXMuZGlzcGF0Y2hlciA9IGRpc3BhdGNoZXI7XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBjb25zdFxuICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGZ1bmN0aW9uKEV2ZW50KT59XG4gICAqL1xuICB0aGlzLm1hcHBpbmdfID0gbWFwcGluZztcbn07XG5cbi8qKlxuICogTGlzdCBvZiBldmVudHMgc3VwcG9ydGVkIGJ5IHRoaXMgc291cmNlLlxuICogQHJldHVybiB7QXJyYXk8c3RyaW5nPn0gRXZlbnQgbmFtZXNcbiAqL1xuRXZlbnRTb3VyY2UucHJvdG90eXBlLmdldEV2ZW50cyA9IGZ1bmN0aW9uIGdldEV2ZW50cyAoKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLm1hcHBpbmdfKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgaGFuZGxlciB0aGF0IHNob3VsZCBoYW5kbGUgYSBnaXZlbiBldmVudCB0eXBlLlxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZSBUaGUgZXZlbnQgdHlwZS5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKEV2ZW50KX0gSGFuZGxlclxuICovXG5FdmVudFNvdXJjZS5wcm90b3R5cGUuZ2V0SGFuZGxlckZvckV2ZW50ID0gZnVuY3Rpb24gZ2V0SGFuZGxlckZvckV2ZW50IChldmVudFR5cGUpIHtcbiAgcmV0dXJuIHRoaXMubWFwcGluZ19bZXZlbnRUeXBlXTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEV2ZW50U291cmNlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudFNvdXJjZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZm9ybWF0L0Zvcm1hdFR5cGVcbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgQVJSQVlfQlVGRkVSOiAnYXJyYXlidWZmZXInLFxuICBKU09OOiAnanNvbicsXG4gIFRFWFQ6ICd0ZXh0JyxcbiAgWE1MOiAneG1sJ1xufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Rm9ybWF0VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZmVhdHVyZWxvYWRlclxuICovXG5pbXBvcnQge1ZPSUR9IGZyb20gJy4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCBGb3JtYXRUeXBlIGZyb20gJy4vZm9ybWF0L0Zvcm1hdFR5cGUuanMnO1xuXG4vKipcbiAqIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1ZlY3Rvcn0gc291cmNlcyB1c2UgYSBmdW5jdGlvbiBvZiB0aGlzIHR5cGUgdG9cbiAqIGxvYWQgZmVhdHVyZXMuXG4gKlxuICogVGhpcyBmdW5jdGlvbiB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL2V4dGVudH5FeHRlbnR9IHJlcHJlc2VudGluZyB0aGUgYXJlYSB0byBiZSBsb2FkZWQsXG4gKiBhIGB7bnVtYmVyfWAgcmVwcmVzZW50aW5nIHRoZSByZXNvbHV0aW9uIChtYXAgdW5pdHMgcGVyIHBpeGVsKSBhbmQgYW5cbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9ufSBmb3IgdGhlIHByb2plY3Rpb24gIGFzXG4gKiBhcmd1bWVudHMuIGB0aGlzYCB3aXRoaW4gdGhlIGZ1bmN0aW9uIGlzIGJvdW5kIHRvIHRoZVxuICoge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yfSBpdCdzIGNhbGxlZCBmcm9tLlxuICpcbiAqIFRoZSBmdW5jdGlvbiBpcyByZXNwb25zaWJsZSBmb3IgbG9hZGluZyB0aGUgZmVhdHVyZXMgYW5kIGFkZGluZyB0aGVtIHRvIHRoZVxuICogc291cmNlLlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKHRoaXM6KGltcG9ydChcIi4vc291cmNlL1ZlY3RvclwiKS5kZWZhdWx0fGltcG9ydChcIi4vVmVjdG9yVGlsZS5qc1wiKS5kZWZhdWx0KSwgaW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50LCBudW1iZXIsXG4gKiAgICAgICAgICAgICAgICAgICAgaW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdCl9IEZlYXR1cmVMb2FkZXJcbiAqIEBhcGlcbiAqL1xuXG5cbi8qKlxuICoge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yfSBzb3VyY2VzIHVzZSBhIGZ1bmN0aW9uIG9mIHRoaXMgdHlwZSB0b1xuICogZ2V0IHRoZSB1cmwgdG8gbG9hZCBmZWF0dXJlcyBmcm9tLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9leHRlbnR+RXh0ZW50fSByZXByZXNlbnRpbmcgdGhlIGFyZWFcbiAqIHRvIGJlIGxvYWRlZCwgYSBge251bWJlcn1gIHJlcHJlc2VudGluZyB0aGUgcmVzb2x1dGlvbiAobWFwIHVuaXRzIHBlciBwaXhlbClcbiAqIGFuZCBhbiB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn0gZm9yIHRoZSBwcm9qZWN0aW9uICBhc1xuICogYXJndW1lbnRzIGFuZCByZXR1cm5zIGEgYHtzdHJpbmd9YCByZXByZXNlbnRpbmcgdGhlIFVSTC5cbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnQsIG51bWJlciwgaW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdCk6IHN0cmluZ30gRmVhdHVyZVVybEZ1bmN0aW9uXG4gKiBAYXBpXG4gKi9cblxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfEZlYXR1cmVVcmxGdW5jdGlvbn0gdXJsIEZlYXR1cmUgVVJMIHNlcnZpY2UuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZm9ybWF0L0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZm9ybWF0IEZlYXR1cmUgZm9ybWF0LlxuICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOmltcG9ydChcIi4vVmVjdG9yVGlsZS5qc1wiKS5kZWZhdWx0LCBBcnJheTxpbXBvcnQoXCIuL0ZlYXR1cmUuanNcIikuZGVmYXVsdD4sIGltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHQsIGltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudCl8ZnVuY3Rpb24odGhpczppbXBvcnQoXCIuL3NvdXJjZS9WZWN0b3JcIikuZGVmYXVsdCwgQXJyYXk8aW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ+KX0gc3VjY2Vzc1xuICogICAgIEZ1bmN0aW9uIGNhbGxlZCB3aXRoIHRoZSBsb2FkZWQgZmVhdHVyZXMgYW5kIG9wdGlvbmFsbHkgd2l0aCB0aGUgZGF0YVxuICogICAgIHByb2plY3Rpb24uIENhbGxlZCB3aXRoIHRoZSB2ZWN0b3IgdGlsZSBvciBzb3VyY2UgYXMgYHRoaXNgLlxuICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOmltcG9ydChcIi4vVmVjdG9yVGlsZS5qc1wiKS5kZWZhdWx0KXxmdW5jdGlvbih0aGlzOmltcG9ydChcIi4vc291cmNlL1ZlY3RvclwiKS5kZWZhdWx0KX0gZmFpbHVyZVxuICogICAgIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIGxvYWRpbmcgZmFpbGVkLiBDYWxsZWQgd2l0aCB0aGUgdmVjdG9yIHRpbGUgb3JcbiAqICAgICBzb3VyY2UgYXMgYHRoaXNgLlxuICogQHJldHVybiB7RmVhdHVyZUxvYWRlcn0gVGhlIGZlYXR1cmUgbG9hZGVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbG9hZEZlYXR1cmVzWGhyKHVybCwgZm9ybWF0LCBzdWNjZXNzLCBmYWlsdXJlKSB7XG4gIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAdGhpcyB7aW1wb3J0KFwiLi9zb3VyY2UvVmVjdG9yXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi9WZWN0b3JUaWxlLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgZnVuY3Rpb24oZXh0ZW50LCByZXNvbHV0aW9uLCBwcm9qZWN0aW9uKSB7XG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICB4aHIub3BlbignR0VUJyxcbiAgICAgICAgdHlwZW9mIHVybCA9PT0gJ2Z1bmN0aW9uJyA/IHVybChleHRlbnQsIHJlc29sdXRpb24sIHByb2plY3Rpb24pIDogdXJsLFxuICAgICAgICB0cnVlKTtcbiAgICAgIGlmIChmb3JtYXQuZ2V0VHlwZSgpID09IEZvcm1hdFR5cGUuQVJSQVlfQlVGRkVSKSB7XG4gICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudCBFdmVudC5cbiAgICAgICAqIEBwcml2YXRlXG4gICAgICAgKi9cbiAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAvLyBzdGF0dXMgd2lsbCBiZSAwIGZvciBmaWxlOi8vIHVybHNcbiAgICAgICAgaWYgKCF4aHIuc3RhdHVzIHx8IHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPCAzMDApIHtcbiAgICAgICAgICB2YXIgdHlwZSA9IGZvcm1hdC5nZXRUeXBlKCk7XG4gICAgICAgICAgLyoqIEB0eXBlIHtEb2N1bWVudHxOb2RlfE9iamVjdHxzdHJpbmd8dW5kZWZpbmVkfSAqL1xuICAgICAgICAgIHZhciBzb3VyY2U7XG4gICAgICAgICAgaWYgKHR5cGUgPT0gRm9ybWF0VHlwZS5KU09OIHx8IHR5cGUgPT0gRm9ybWF0VHlwZS5URVhUKSB7XG4gICAgICAgICAgICBzb3VyY2UgPSB4aHIucmVzcG9uc2VUZXh0O1xuICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSBGb3JtYXRUeXBlLlhNTCkge1xuICAgICAgICAgICAgc291cmNlID0geGhyLnJlc3BvbnNlWE1MO1xuICAgICAgICAgICAgaWYgKCFzb3VyY2UpIHtcbiAgICAgICAgICAgICAgc291cmNlID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyh4aHIucmVzcG9uc2VUZXh0LCAnYXBwbGljYXRpb24veG1sJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09IEZvcm1hdFR5cGUuQVJSQVlfQlVGRkVSKSB7XG4gICAgICAgICAgICBzb3VyY2UgPSAvKiogQHR5cGUge0FycmF5QnVmZmVyfSAqLyAoeGhyLnJlc3BvbnNlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICAgICAgc3VjY2Vzcy5jYWxsKHRoaXMsIGZvcm1hdC5yZWFkRmVhdHVyZXMoc291cmNlLFxuICAgICAgICAgICAgICB7ZmVhdHVyZVByb2plY3Rpb246IHByb2plY3Rpb259KSxcbiAgICAgICAgICAgIGZvcm1hdC5yZWFkUHJvamVjdGlvbihzb3VyY2UpLCBmb3JtYXQuZ2V0TGFzdEV4dGVudCgpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmFpbHVyZS5jYWxsKHRoaXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmYWlsdXJlLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICAgIH0uYmluZCh0aGlzKTtcbiAgICAgIC8qKlxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqL1xuICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgZmFpbHVyZS5jYWxsKHRoaXMpO1xuICAgICAgfS5iaW5kKHRoaXMpO1xuICAgICAgeGhyLnNlbmQoKTtcbiAgICB9XG4gICk7XG59XG5cblxuLyoqXG4gKiBDcmVhdGUgYW4gWEhSIGZlYXR1cmUgbG9hZGVyIGZvciBhIGB1cmxgIGFuZCBgZm9ybWF0YC4gVGhlIGZlYXR1cmUgbG9hZGVyXG4gKiBsb2FkcyBmZWF0dXJlcyAod2l0aCBYSFIpLCBwYXJzZXMgdGhlIGZlYXR1cmVzLCBhbmQgYWRkcyB0aGVtIHRvIHRoZVxuICogdmVjdG9yIHNvdXJjZS5cbiAqIEBwYXJhbSB7c3RyaW5nfEZlYXR1cmVVcmxGdW5jdGlvbn0gdXJsIEZlYXR1cmUgVVJMIHNlcnZpY2UuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZm9ybWF0L0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZm9ybWF0IEZlYXR1cmUgZm9ybWF0LlxuICogQHJldHVybiB7RmVhdHVyZUxvYWRlcn0gVGhlIGZlYXR1cmUgbG9hZGVyLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24geGhyKHVybCwgZm9ybWF0KSB7XG4gIHJldHVybiBsb2FkRmVhdHVyZXNYaHIodXJsLCBmb3JtYXQsXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL0ZlYXR1cmUuanNcIikuZGVmYXVsdD59IGZlYXR1cmVzIFRoZSBsb2FkZWQgZmVhdHVyZXMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBkYXRhUHJvamVjdGlvbiBEYXRhXG4gICAgICogcHJvamVjdGlvbi5cbiAgICAgKiBAdGhpcyB7aW1wb3J0KFwiLi9zb3VyY2UvVmVjdG9yXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi9WZWN0b3JUaWxlLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgZnVuY3Rpb24oZmVhdHVyZXMsIGRhdGFQcm9qZWN0aW9uKSB7XG4gICAgICB2YXIgc291cmNlT3JUaWxlID0gLyoqIEB0eXBlIHs/fSAqLyAodGhpcyk7XG4gICAgICBpZiAodHlwZW9mIHNvdXJjZU9yVGlsZS5hZGRGZWF0dXJlcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vc291cmNlL1ZlY3RvclwiKS5kZWZhdWx0fSAqLyAoc291cmNlT3JUaWxlKS5hZGRGZWF0dXJlcyhmZWF0dXJlcyk7XG4gICAgICB9XG4gICAgfSwgLyogRklYTUUgaGFuZGxlIGVycm9yICovIFZPSUQpO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1mZWF0dXJlbG9hZGVyLmpzLm1hcCIsIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcblx0dHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcblx0KGdsb2JhbC5xdWlja3NlbGVjdCA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gcXVpY2tzZWxlY3QoYXJyLCBrLCBsZWZ0LCByaWdodCwgY29tcGFyZSkge1xuICAgIHF1aWNrc2VsZWN0U3RlcChhcnIsIGssIGxlZnQgfHwgMCwgcmlnaHQgfHwgKGFyci5sZW5ndGggLSAxKSwgY29tcGFyZSB8fCBkZWZhdWx0Q29tcGFyZSk7XG59XG5cbmZ1bmN0aW9uIHF1aWNrc2VsZWN0U3RlcChhcnIsIGssIGxlZnQsIHJpZ2h0LCBjb21wYXJlKSB7XG5cbiAgICB3aGlsZSAocmlnaHQgPiBsZWZ0KSB7XG4gICAgICAgIGlmIChyaWdodCAtIGxlZnQgPiA2MDApIHtcbiAgICAgICAgICAgIHZhciBuID0gcmlnaHQgLSBsZWZ0ICsgMTtcbiAgICAgICAgICAgIHZhciBtID0gayAtIGxlZnQgKyAxO1xuICAgICAgICAgICAgdmFyIHogPSBNYXRoLmxvZyhuKTtcbiAgICAgICAgICAgIHZhciBzID0gMC41ICogTWF0aC5leHAoMiAqIHogLyAzKTtcbiAgICAgICAgICAgIHZhciBzZCA9IDAuNSAqIE1hdGguc3FydCh6ICogcyAqIChuIC0gcykgLyBuKSAqIChtIC0gbiAvIDIgPCAwID8gLTEgOiAxKTtcbiAgICAgICAgICAgIHZhciBuZXdMZWZ0ID0gTWF0aC5tYXgobGVmdCwgTWF0aC5mbG9vcihrIC0gbSAqIHMgLyBuICsgc2QpKTtcbiAgICAgICAgICAgIHZhciBuZXdSaWdodCA9IE1hdGgubWluKHJpZ2h0LCBNYXRoLmZsb29yKGsgKyAobiAtIG0pICogcyAvIG4gKyBzZCkpO1xuICAgICAgICAgICAgcXVpY2tzZWxlY3RTdGVwKGFyciwgaywgbmV3TGVmdCwgbmV3UmlnaHQsIGNvbXBhcmUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHQgPSBhcnJba107XG4gICAgICAgIHZhciBpID0gbGVmdDtcbiAgICAgICAgdmFyIGogPSByaWdodDtcblxuICAgICAgICBzd2FwKGFyciwgbGVmdCwgayk7XG4gICAgICAgIGlmIChjb21wYXJlKGFycltyaWdodF0sIHQpID4gMCkgc3dhcChhcnIsIGxlZnQsIHJpZ2h0KTtcblxuICAgICAgICB3aGlsZSAoaSA8IGopIHtcbiAgICAgICAgICAgIHN3YXAoYXJyLCBpLCBqKTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIGotLTtcbiAgICAgICAgICAgIHdoaWxlIChjb21wYXJlKGFycltpXSwgdCkgPCAwKSBpKys7XG4gICAgICAgICAgICB3aGlsZSAoY29tcGFyZShhcnJbal0sIHQpID4gMCkgai0tO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbXBhcmUoYXJyW2xlZnRdLCB0KSA9PT0gMCkgc3dhcChhcnIsIGxlZnQsIGopO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGorKztcbiAgICAgICAgICAgIHN3YXAoYXJyLCBqLCByaWdodCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaiA8PSBrKSBsZWZ0ID0gaiArIDE7XG4gICAgICAgIGlmIChrIDw9IGopIHJpZ2h0ID0gaiAtIDE7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzd2FwKGFyciwgaSwgaikge1xuICAgIHZhciB0bXAgPSBhcnJbaV07XG4gICAgYXJyW2ldID0gYXJyW2pdO1xuICAgIGFycltqXSA9IHRtcDtcbn1cblxuZnVuY3Rpb24gZGVmYXVsdENvbXBhcmUoYSwgYikge1xuICAgIHJldHVybiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogMDtcbn1cblxucmV0dXJuIHF1aWNrc2VsZWN0O1xuXG59KSkpO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3BvaW50ZXIvTW91c2VTb3VyY2VcbiAqL1xuXG4vLyBCYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vUG9seW1lci9Qb2ludGVyRXZlbnRzXG5cbi8vIENvcHlyaWdodCAoYykgMjAxMyBUaGUgUG9seW1lciBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy9cbi8vIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxuLy8gbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZVxuLy8gbWV0OlxuLy9cbi8vICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHRcbi8vIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbi8vICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZVxuLy8gY29weXJpZ2h0IG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lclxuLy8gaW4gdGhlIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZVxuLy8gZGlzdHJpYnV0aW9uLlxuLy8gKiBOZWl0aGVyIHRoZSBuYW1lIG9mIEdvb2dsZSBJbmMuIG5vciB0aGUgbmFtZXMgb2YgaXRzXG4vLyBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbVxuLy8gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cbi8vXG4vLyBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTXG4vLyBcIkFTIElTXCIgQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UXG4vLyBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1Jcbi8vIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUXG4vLyBPV05FUiBPUiBDT05UUklCVVRPUlMgQkUgTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCxcbi8vIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1Rcbi8vIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLFxuLy8gREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZXG4vLyBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUXG4vLyAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0Vcbi8vIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXG5cbmltcG9ydCBFdmVudFNvdXJjZSBmcm9tICcuL0V2ZW50U291cmNlLmpzJztcblxuXG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgUE9JTlRFUl9JRCA9IDE7XG5cblxuLyoqXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIFBPSU5URVJfVFlQRSA9ICdtb3VzZSc7XG5cblxuLyoqXG4gKiBSYWRpdXMgYXJvdW5kIHRvdWNoZW5kIHRoYXQgc3dhbGxvd3MgbW91c2UgZXZlbnRzLlxuICpcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbnZhciBERURVUF9ESVNUID0gMjU7XG5cbi8qKlxuICogSGFuZGxlciBmb3IgYG1vdXNlZG93bmAuXG4gKlxuICogQHRoaXMge01vdXNlU291cmNlfVxuICogQHBhcmFtIHtNb3VzZUV2ZW50fSBpbkV2ZW50IFRoZSBpbiBldmVudC5cbiAqL1xuZnVuY3Rpb24gbW91c2Vkb3duKGluRXZlbnQpIHtcbiAgaWYgKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2hfKGluRXZlbnQpKSB7XG4gICAgLy8gVE9ETyhkZnJlZWRtYW4pIHdvcmthcm91bmQgZm9yIHNvbWUgZWxlbWVudHMgbm90IHNlbmRpbmcgbW91c2V1cFxuICAgIC8vIGh0dHA6Ly9jcmJ1Zy8xNDkwOTFcbiAgICBpZiAoUE9JTlRFUl9JRC50b1N0cmluZygpIGluIHRoaXMucG9pbnRlck1hcCkge1xuICAgICAgdGhpcy5jYW5jZWwoaW5FdmVudCk7XG4gICAgfVxuICAgIHZhciBlID0gcHJlcGFyZUV2ZW50KGluRXZlbnQsIHRoaXMuZGlzcGF0Y2hlcik7XG4gICAgdGhpcy5wb2ludGVyTWFwW1BPSU5URVJfSUQudG9TdHJpbmcoKV0gPSBpbkV2ZW50O1xuICAgIHRoaXMuZGlzcGF0Y2hlci5kb3duKGUsIGluRXZlbnQpO1xuICB9XG59XG5cbi8qKlxuICogSGFuZGxlciBmb3IgYG1vdXNlbW92ZWAuXG4gKlxuICogQHRoaXMge01vdXNlU291cmNlfVxuICogQHBhcmFtIHtNb3VzZUV2ZW50fSBpbkV2ZW50IFRoZSBpbiBldmVudC5cbiAqL1xuZnVuY3Rpb24gbW91c2Vtb3ZlKGluRXZlbnQpIHtcbiAgaWYgKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2hfKGluRXZlbnQpKSB7XG4gICAgdmFyIGUgPSBwcmVwYXJlRXZlbnQoaW5FdmVudCwgdGhpcy5kaXNwYXRjaGVyKTtcbiAgICB0aGlzLmRpc3BhdGNoZXIubW92ZShlLCBpbkV2ZW50KTtcbiAgfVxufVxuXG4vKipcbiAqIEhhbmRsZXIgZm9yIGBtb3VzZXVwYC5cbiAqXG4gKiBAdGhpcyB7TW91c2VTb3VyY2V9XG4gKiBAcGFyYW0ge01vdXNlRXZlbnR9IGluRXZlbnQgVGhlIGluIGV2ZW50LlxuICovXG5mdW5jdGlvbiBtb3VzZXVwKGluRXZlbnQpIHtcbiAgaWYgKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2hfKGluRXZlbnQpKSB7XG4gICAgdmFyIHAgPSB0aGlzLnBvaW50ZXJNYXBbUE9JTlRFUl9JRC50b1N0cmluZygpXTtcblxuICAgIGlmIChwICYmIHAuYnV0dG9uID09PSBpbkV2ZW50LmJ1dHRvbikge1xuICAgICAgdmFyIGUgPSBwcmVwYXJlRXZlbnQoaW5FdmVudCwgdGhpcy5kaXNwYXRjaGVyKTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hlci51cChlLCBpbkV2ZW50KTtcbiAgICAgIHRoaXMuY2xlYW51cE1vdXNlKCk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogSGFuZGxlciBmb3IgYG1vdXNlb3ZlcmAuXG4gKlxuICogQHRoaXMge01vdXNlU291cmNlfVxuICogQHBhcmFtIHtNb3VzZUV2ZW50fSBpbkV2ZW50IFRoZSBpbiBldmVudC5cbiAqL1xuZnVuY3Rpb24gbW91c2VvdmVyKGluRXZlbnQpIHtcbiAgaWYgKCF0aGlzLmlzRXZlbnRTaW11bGF0ZWRGcm9tVG91Y2hfKGluRXZlbnQpKSB7XG4gICAgdmFyIGUgPSBwcmVwYXJlRXZlbnQoaW5FdmVudCwgdGhpcy5kaXNwYXRjaGVyKTtcbiAgICB0aGlzLmRpc3BhdGNoZXIuZW50ZXJPdmVyKGUsIGluRXZlbnQpO1xuICB9XG59XG5cbi8qKlxuICogSGFuZGxlciBmb3IgYG1vdXNlb3V0YC5cbiAqXG4gKiBAdGhpcyB7TW91c2VTb3VyY2V9XG4gKiBAcGFyYW0ge01vdXNlRXZlbnR9IGluRXZlbnQgVGhlIGluIGV2ZW50LlxuICovXG5mdW5jdGlvbiBtb3VzZW91dChpbkV2ZW50KSB7XG4gIGlmICghdGhpcy5pc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoXyhpbkV2ZW50KSkge1xuICAgIHZhciBlID0gcHJlcGFyZUV2ZW50KGluRXZlbnQsIHRoaXMuZGlzcGF0Y2hlcik7XG4gICAgdGhpcy5kaXNwYXRjaGVyLmxlYXZlT3V0KGUsIGluRXZlbnQpO1xuICB9XG59XG5cblxudmFyIE1vdXNlU291cmNlID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoRXZlbnRTb3VyY2UpIHtcbiAgZnVuY3Rpb24gTW91c2VTb3VyY2UoZGlzcGF0Y2hlcikge1xuICAgIHZhciBtYXBwaW5nID0ge1xuICAgICAgJ21vdXNlZG93bic6IG1vdXNlZG93bixcbiAgICAgICdtb3VzZW1vdmUnOiBtb3VzZW1vdmUsXG4gICAgICAnbW91c2V1cCc6IG1vdXNldXAsXG4gICAgICAnbW91c2VvdmVyJzogbW91c2VvdmVyLFxuICAgICAgJ21vdXNlb3V0JzogbW91c2VvdXRcbiAgICB9O1xuICAgIEV2ZW50U291cmNlLmNhbGwodGhpcywgZGlzcGF0Y2hlciwgbWFwcGluZyk7XG5cbiAgICAvKipcbiAgICAgKiBAY29uc3RcbiAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIEV2ZW50fE9iamVjdD59XG4gICAgICovXG4gICAgdGhpcy5wb2ludGVyTWFwID0gZGlzcGF0Y2hlci5wb2ludGVyTWFwO1xuXG4gICAgLyoqXG4gICAgICogQGNvbnN0XG4gICAgICogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsPn1cbiAgICAgKi9cbiAgICB0aGlzLmxhc3RUb3VjaGVzID0gW107XG4gIH1cblxuICBpZiAoIEV2ZW50U291cmNlICkgTW91c2VTb3VyY2UuX19wcm90b19fID0gRXZlbnRTb3VyY2U7XG4gIE1vdXNlU291cmNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEV2ZW50U291cmNlICYmIEV2ZW50U291cmNlLnByb3RvdHlwZSApO1xuICBNb3VzZVNvdXJjZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNb3VzZVNvdXJjZTtcblxuICAvKipcbiAgICogRGV0ZWN0IGlmIGEgbW91c2UgZXZlbnQgd2FzIHNpbXVsYXRlZCBmcm9tIGEgdG91Y2ggYnlcbiAgICogY2hlY2tpbmcgaWYgcHJldmlvdXNseSB0aGVyZSB3YXMgYSB0b3VjaCBldmVudCBhdCB0aGVcbiAgICogc2FtZSBwb3NpdGlvbi5cbiAgICpcbiAgICogRklYTUUgLSBLbm93biBwcm9ibGVtIHdpdGggdGhlIG5hdGl2ZSBBbmRyb2lkIGJyb3dzZXIgb25cbiAgICogU2Ftc3VuZyBHVC1JOTEwMCAoQW5kcm9pZCA0LjEuMik6XG4gICAqIEluIGNhc2UgdGhlIHBhZ2UgaXMgc2Nyb2xsZWQsIHRoaXMgZnVuY3Rpb24gZG9lcyBub3Qgd29ya1xuICAgKiBjb3JyZWN0bHkgd2hlbiBhIGNhbnZhcyBpcyB1c2VkIChXZWJHTCBvciBjYW52YXMgcmVuZGVyZXIpLlxuICAgKiBNb3VzZSBsaXN0ZW5lcnMgb24gY2FudmFzIGVsZW1lbnRzIChmb3IgdGhpcyBicm93c2VyKSwgY3JlYXRlXG4gICAqIHR3byBtb3VzZSBldmVudHM6IE9uZSAnZ29vZCcgYW5kIG9uZSAnYmFkJyBvbmUgKG9uIG90aGVyIGJyb3dzZXJzIG9yXG4gICAqIHdoZW4gYSBkaXYgaXMgdXNlZCwgdGhlcmUgaXMgb25seSBvbmUgZXZlbnQpLiBGb3IgdGhlICdiYWQnIG9uZSxcbiAgICogY2xpZW50WC9jbGllbnRZIGFuZCBhbHNvIHBhZ2VYL3BhZ2VZIGFyZSB3cm9uZyB3aGVuIHRoZSBwYWdlXG4gICAqIGlzIHNjcm9sbGVkLiBCZWNhdXNlIG9mIHRoYXQsIHRoaXMgZnVuY3Rpb24gY2FuIG5vdCBkZXRlY3QgaWZcbiAgICogdGhlIGV2ZW50cyB3ZXJlIHNpbXVsYXRlZCBmcm9tIGEgdG91Y2ggZXZlbnQuIEFzIHJlc3VsdCwgYVxuICAgKiBwb2ludGVyIGV2ZW50IGF0IGEgd3JvbmcgcG9zaXRpb24gaXMgZGlzcGF0Y2hlZCwgd2hpY2ggY29uZnVzZXNcbiAgICogdGhlIG1hcCBpbnRlcmFjdGlvbnMuXG4gICAqIEl0IGlzIHVuY2xlYXIsIGhvdyBvbmUgY2FuIGdldCB0aGUgY29ycmVjdCBwb3NpdGlvbiBmb3IgdGhlIGV2ZW50XG4gICAqIG9yIGRldGVjdCB0aGF0IHRoZSBwb3NpdGlvbnMgYXJlIGludmFsaWQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7TW91c2VFdmVudH0gaW5FdmVudCBUaGUgaW4gZXZlbnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUsIGlmIHRoZSBldmVudCB3YXMgZ2VuZXJhdGVkIGJ5IGEgdG91Y2guXG4gICAqL1xuICBNb3VzZVNvdXJjZS5wcm90b3R5cGUuaXNFdmVudFNpbXVsYXRlZEZyb21Ub3VjaF8gPSBmdW5jdGlvbiBpc0V2ZW50U2ltdWxhdGVkRnJvbVRvdWNoXyAoaW5FdmVudCkge1xuICAgIHZhciBsdHMgPSB0aGlzLmxhc3RUb3VjaGVzO1xuICAgIHZhciB4ID0gaW5FdmVudC5jbGllbnRYO1xuICAgIHZhciB5ID0gaW5FdmVudC5jbGllbnRZO1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gbHRzLmxlbmd0aCwgdCA9ICh2b2lkIDApOyBpIDwgbCAmJiAodCA9IGx0c1tpXSk7IGkrKykge1xuICAgICAgLy8gc2ltdWxhdGVkIG1vdXNlIGV2ZW50cyB3aWxsIGJlIHN3YWxsb3dlZCBuZWFyIGEgcHJpbWFyeSB0b3VjaGVuZFxuICAgICAgdmFyIGR4ID0gTWF0aC5hYnMoeCAtIHRbMF0pO1xuICAgICAgdmFyIGR5ID0gTWF0aC5hYnMoeSAtIHRbMV0pO1xuICAgICAgaWYgKGR4IDw9IERFRFVQX0RJU1QgJiYgZHkgPD0gREVEVVBfRElTVCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBEaXNwYXRjaGVzIGEgYHBvaW50ZXJjYW5jZWxgIGV2ZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge0V2ZW50fSBpbkV2ZW50IFRoZSBpbiBldmVudC5cbiAgICovXG4gIE1vdXNlU291cmNlLnByb3RvdHlwZS5jYW5jZWwgPSBmdW5jdGlvbiBjYW5jZWwgKGluRXZlbnQpIHtcbiAgICB2YXIgZSA9IHByZXBhcmVFdmVudChpbkV2ZW50LCB0aGlzLmRpc3BhdGNoZXIpO1xuICAgIHRoaXMuZGlzcGF0Y2hlci5jYW5jZWwoZSwgaW5FdmVudCk7XG4gICAgdGhpcy5jbGVhbnVwTW91c2UoKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBtb3VzZSBmcm9tIHRoZSBsaXN0IG9mIGFjdGl2ZSBwb2ludGVycy5cbiAgICovXG4gIE1vdXNlU291cmNlLnByb3RvdHlwZS5jbGVhbnVwTW91c2UgPSBmdW5jdGlvbiBjbGVhbnVwTW91c2UgKCkge1xuICAgIGRlbGV0ZSB0aGlzLnBvaW50ZXJNYXBbUE9JTlRFUl9JRC50b1N0cmluZygpXTtcbiAgfTtcblxuICByZXR1cm4gTW91c2VTb3VyY2U7XG59KEV2ZW50U291cmNlKSk7XG5cblxuLyoqXG4gKiBDcmVhdGVzIGEgY29weSBvZiB0aGUgb3JpZ2luYWwgZXZlbnQgdGhhdCB3aWxsIGJlIHVzZWRcbiAqIGZvciB0aGUgZmFrZSBwb2ludGVyIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7RXZlbnR9IGluRXZlbnQgVGhlIGluIGV2ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1BvaW50ZXJFdmVudEhhbmRsZXIuanNcIikuZGVmYXVsdH0gZGlzcGF0Y2hlciBFdmVudCBoYW5kbGVyLlxuICogQHJldHVybiB7T2JqZWN0fSBUaGUgY29waWVkIGV2ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJlcGFyZUV2ZW50KGluRXZlbnQsIGRpc3BhdGNoZXIpIHtcbiAgdmFyIGUgPSBkaXNwYXRjaGVyLmNsb25lRXZlbnQoaW5FdmVudCwgaW5FdmVudCk7XG5cbiAgLy8gZm9yd2FyZCBtb3VzZSBwcmV2ZW50RGVmYXVsdFxuICB2YXIgcGQgPSBlLnByZXZlbnREZWZhdWx0O1xuICBlLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24oKSB7XG4gICAgaW5FdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHBkKCk7XG4gIH07XG5cbiAgZS5wb2ludGVySWQgPSBQT0lOVEVSX0lEO1xuICBlLmlzUHJpbWFyeSA9IHRydWU7XG4gIGUucG9pbnRlclR5cGUgPSBQT0lOVEVSX1RZUEU7XG5cbiAgcmV0dXJuIGU7XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgTW91c2VTb3VyY2U7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1vdXNlU291cmNlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvbGVuZ3RoXG4gKi9cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IExlbmd0aC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVTdHJpbmdMZW5ndGgoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gIHZhciBsZW5ndGggPSAwO1xuICBmb3IgKHZhciBpID0gb2Zmc2V0ICsgc3RyaWRlOyBpIDwgZW5kOyBpICs9IHN0cmlkZSkge1xuICAgIHZhciB4MiA9IGZsYXRDb29yZGluYXRlc1tpXTtcbiAgICB2YXIgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdO1xuICAgIGxlbmd0aCArPSBNYXRoLnNxcnQoKHgyIC0geDEpICogKHgyIC0geDEpICsgKHkyIC0geTEpICogKHkyIC0geTEpKTtcbiAgICB4MSA9IHgyO1xuICAgIHkxID0geTI7XG4gIH1cbiAgcmV0dXJuIGxlbmd0aDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFBlcmltZXRlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdMZW5ndGgoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gIHZhciBwZXJpbWV0ZXIgPSBsaW5lU3RyaW5nTGVuZ3RoKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG4gIHZhciBkeCA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGVdIC0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gIHZhciBkeSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyAxXSAtIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgcGVyaW1ldGVyICs9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gIHJldHVybiBwZXJpbWV0ZXI7XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxlbmd0aC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvTWFwQnJvd3NlclBvaW50ZXJFdmVudFxuICovXG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50IGZyb20gJy4vTWFwQnJvd3NlckV2ZW50LmpzJztcblxudmFyIE1hcEJyb3dzZXJQb2ludGVyRXZlbnQgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChNYXBCcm93c2VyRXZlbnQpIHtcbiAgZnVuY3Rpb24gTWFwQnJvd3NlclBvaW50ZXJFdmVudCh0eXBlLCBtYXAsIHBvaW50ZXJFdmVudCwgb3B0X2RyYWdnaW5nLCBvcHRfZnJhbWVTdGF0ZSkge1xuXG4gICAgTWFwQnJvd3NlckV2ZW50LmNhbGwodGhpcywgdHlwZSwgbWFwLCBwb2ludGVyRXZlbnQub3JpZ2luYWxFdmVudCwgb3B0X2RyYWdnaW5nLCBvcHRfZnJhbWVTdGF0ZSk7XG5cbiAgICAvKipcbiAgICAgKiBAY29uc3RcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9wb2ludGVyL1BvaW50ZXJFdmVudC5qc1wiKS5kZWZhdWx0fVxuICAgICAqL1xuICAgIHRoaXMucG9pbnRlckV2ZW50ID0gcG9pbnRlckV2ZW50O1xuXG4gIH1cblxuICBpZiAoIE1hcEJyb3dzZXJFdmVudCApIE1hcEJyb3dzZXJQb2ludGVyRXZlbnQuX19wcm90b19fID0gTWFwQnJvd3NlckV2ZW50O1xuICBNYXBCcm93c2VyUG9pbnRlckV2ZW50LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIE1hcEJyb3dzZXJFdmVudCAmJiBNYXBCcm93c2VyRXZlbnQucHJvdG90eXBlICk7XG4gIE1hcEJyb3dzZXJQb2ludGVyRXZlbnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTWFwQnJvd3NlclBvaW50ZXJFdmVudDtcblxuICByZXR1cm4gTWFwQnJvd3NlclBvaW50ZXJFdmVudDtcbn0oTWFwQnJvd3NlckV2ZW50KSk7XG5cbmV4cG9ydCBkZWZhdWx0IE1hcEJyb3dzZXJQb2ludGVyRXZlbnQ7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcEJyb3dzZXJQb2ludGVyRXZlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL01hcEJyb3dzZXJFdmVudFxuICovXG5pbXBvcnQgTWFwRXZlbnQgZnJvbSAnLi9NYXBFdmVudC5qcyc7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYXMgbWFwIGJyb3dzZXIgZXZlbnRzIGFyZSBpbnN0YW5jZXMgb2YgdGhpcyB0eXBlLlxuICogU2VlIHtAbGluayBtb2R1bGU6b2wvUGx1Z2dhYmxlTWFwflBsdWdnYWJsZU1hcH0gZm9yIHdoaWNoIGV2ZW50cyB0cmlnZ2VyIGEgbWFwIGJyb3dzZXIgZXZlbnQuXG4gKi9cbnZhciBNYXBCcm93c2VyRXZlbnQgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChNYXBFdmVudCkge1xuICBmdW5jdGlvbiBNYXBCcm93c2VyRXZlbnQodHlwZSwgbWFwLCBicm93c2VyRXZlbnQsIG9wdF9kcmFnZ2luZywgb3B0X2ZyYW1lU3RhdGUpIHtcblxuICAgIE1hcEV2ZW50LmNhbGwodGhpcywgdHlwZSwgbWFwLCBvcHRfZnJhbWVTdGF0ZSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgb3JpZ2luYWwgYnJvd3NlciBldmVudC5cbiAgICAgKiBAY29uc3RcbiAgICAgKiBAdHlwZSB7RXZlbnR9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMub3JpZ2luYWxFdmVudCA9IGJyb3dzZXJFdmVudDtcblxuICAgIC8qKlxuICAgICAqIFRoZSBtYXAgcGl4ZWwgcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0IGNvcnJlc3BvbmRpbmcgdG8gdGhlIG9yaWdpbmFsIGJyb3dzZXIgZXZlbnQuXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMucGl4ZWwgPSBtYXAuZ2V0RXZlbnRQaXhlbChicm93c2VyRXZlbnQpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGNvb3JkaW5hdGUgaW4gdmlldyBwcm9qZWN0aW9uIGNvcnJlc3BvbmRpbmcgdG8gdGhlIG9yaWdpbmFsIGJyb3dzZXIgZXZlbnQuXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICB0aGlzLmNvb3JkaW5hdGUgPSBtYXAuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbCh0aGlzLnBpeGVsKTtcblxuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyBpZiB0aGUgbWFwIGlzIGN1cnJlbnRseSBiZWluZyBkcmFnZ2VkLiBPbmx5IHNldCBmb3JcbiAgICAgKiBgUE9JTlRFUkRSQUdgIGFuZCBgUE9JTlRFUk1PVkVgIGV2ZW50cy4gRGVmYXVsdCBpcyBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMuZHJhZ2dpbmcgPSBvcHRfZHJhZ2dpbmcgIT09IHVuZGVmaW5lZCA/IG9wdF9kcmFnZ2luZyA6IGZhbHNlO1xuXG4gIH1cblxuICBpZiAoIE1hcEV2ZW50ICkgTWFwQnJvd3NlckV2ZW50Ll9fcHJvdG9fXyA9IE1hcEV2ZW50O1xuICBNYXBCcm93c2VyRXZlbnQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggTWFwRXZlbnQgJiYgTWFwRXZlbnQucHJvdG90eXBlICk7XG4gIE1hcEJyb3dzZXJFdmVudC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNYXBCcm93c2VyRXZlbnQ7XG5cbiAgLyoqXG4gICAqIFByZXZlbnRzIHRoZSBkZWZhdWx0IGJyb3dzZXIgYWN0aW9uLlxuICAgKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL2V2ZW50LnByZXZlbnREZWZhdWx0LlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQGFwaVxuICAgKi9cbiAgTWFwQnJvd3NlckV2ZW50LnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0ICgpIHtcbiAgICBNYXBFdmVudC5wcm90b3R5cGUucHJldmVudERlZmF1bHQuY2FsbCh0aGlzKTtcbiAgICB0aGlzLm9yaWdpbmFsRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfTtcblxuICAvKipcbiAgICogUHJldmVudHMgZnVydGhlciBwcm9wYWdhdGlvbiBvZiB0aGUgY3VycmVudCBldmVudC5cbiAgICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9ldmVudC5zdG9wUHJvcGFnYXRpb24uXG4gICAqIEBvdmVycmlkZVxuICAgKiBAYXBpXG4gICAqL1xuICBNYXBCcm93c2VyRXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uIHN0b3BQcm9wYWdhdGlvbiAoKSB7XG4gICAgTWFwRXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbi5jYWxsKHRoaXMpO1xuICAgIHRoaXMub3JpZ2luYWxFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfTtcblxuICByZXR1cm4gTWFwQnJvd3NlckV2ZW50O1xufShNYXBFdmVudCkpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IE1hcEJyb3dzZXJFdmVudDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwQnJvd3NlckV2ZW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9NYXBFdmVudFxuICovXG5pbXBvcnQgRXZlbnQgZnJvbSAnLi9ldmVudHMvRXZlbnQuanMnO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGFzIG1hcCBldmVudHMgYXJlIGluc3RhbmNlcyBvZiB0aGlzIHR5cGUuXG4gKiBTZWUge0BsaW5rIG1vZHVsZTpvbC9QbHVnZ2FibGVNYXB+UGx1Z2dhYmxlTWFwfSBmb3Igd2hpY2ggZXZlbnRzIHRyaWdnZXIgYSBtYXAgZXZlbnQuXG4gKi9cbnZhciBNYXBFdmVudCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEV2ZW50KSB7XG4gIGZ1bmN0aW9uIE1hcEV2ZW50KHR5cGUsIG1hcCwgb3B0X2ZyYW1lU3RhdGUpIHtcblxuICAgIEV2ZW50LmNhbGwodGhpcywgdHlwZSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbWFwIHdoZXJlIHRoZSBldmVudCBvY2N1cnJlZC5cbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5tYXAgPSBtYXA7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZnJhbWUgc3RhdGUgYXQgdGhlIHRpbWUgb2YgdGhlIGV2ZW50LlxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5mcmFtZVN0YXRlID0gb3B0X2ZyYW1lU3RhdGUgIT09IHVuZGVmaW5lZCA/IG9wdF9mcmFtZVN0YXRlIDogbnVsbDtcblxuICB9XG5cbiAgaWYgKCBFdmVudCApIE1hcEV2ZW50Ll9fcHJvdG9fXyA9IEV2ZW50O1xuICBNYXBFdmVudC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBFdmVudCAmJiBFdmVudC5wcm90b3R5cGUgKTtcbiAgTWFwRXZlbnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTWFwRXZlbnQ7XG5cbiAgcmV0dXJuIE1hcEV2ZW50O1xufShFdmVudCkpO1xuXG5leHBvcnQgZGVmYXVsdCBNYXBFdmVudDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwRXZlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL0tpbmV0aWNcbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEltcGxlbWVudGF0aW9uIG9mIGluZXJ0aWFsIGRlY2VsZXJhdGlvbiBmb3IgbWFwIG1vdmVtZW50LlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIEtpbmV0aWMgPSBmdW5jdGlvbiBLaW5ldGljKGRlY2F5LCBtaW5WZWxvY2l0eSwgZGVsYXkpIHtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIHRoaXMuZGVjYXlfID0gZGVjYXk7XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICB0aGlzLm1pblZlbG9jaXR5XyA9IG1pblZlbG9jaXR5O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgdGhpcy5kZWxheV8gPSBkZWxheTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAqL1xuICB0aGlzLnBvaW50c18gPSBbXTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIHRoaXMuYW5nbGVfID0gMDtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIHRoaXMuaW5pdGlhbFZlbG9jaXR5XyA9IDA7XG59O1xuXG4vKipcbiAqIEZJWE1FIGVtcHR5IGRlc2NyaXB0aW9uIGZvciBqc2RvY1xuICovXG5LaW5ldGljLnByb3RvdHlwZS5iZWdpbiA9IGZ1bmN0aW9uIGJlZ2luICgpIHtcbiAgdGhpcy5wb2ludHNfLmxlbmd0aCA9IDA7XG4gIHRoaXMuYW5nbGVfID0gMDtcbiAgdGhpcy5pbml0aWFsVmVsb2NpdHlfID0gMDtcbn07XG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKi9cbktpbmV0aWMucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZSAoeCwgeSkge1xuICB0aGlzLnBvaW50c18ucHVzaCh4LCB5LCBEYXRlLm5vdygpKTtcbn07XG5cbi8qKlxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB3ZSBzaG91bGQgZG8ga2luZXRpYyBhbmltYXRpb24uXG4gKi9cbktpbmV0aWMucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uIGVuZCAoKSB7XG4gIGlmICh0aGlzLnBvaW50c18ubGVuZ3RoIDwgNikge1xuICAgIC8vIGF0IGxlYXN0IDIgcG9pbnRzIGFyZSByZXF1aXJlZCAoaS5lLiB0aGVyZSBtdXN0IGJlIGF0IGxlYXN0IDYgZWxlbWVudHNcbiAgICAvLyBpbiB0aGUgYXJyYXkpXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBkZWxheSA9IERhdGUubm93KCkgLSB0aGlzLmRlbGF5XztcbiAgdmFyIGxhc3RJbmRleCA9IHRoaXMucG9pbnRzXy5sZW5ndGggLSAzO1xuICBpZiAodGhpcy5wb2ludHNfW2xhc3RJbmRleCArIDJdIDwgZGVsYXkpIHtcbiAgICAvLyB0aGUgbGFzdCB0cmFja2VkIHBvaW50IGlzIHRvbyBvbGQsIHdoaWNoIG1lYW5zIHRoYXQgdGhlIHVzZXIgc3RvcHBlZFxuICAgIC8vIHBhbm5pbmcgYmVmb3JlIHJlbGVhc2luZyB0aGUgbWFwXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gZ2V0IHRoZSBmaXJzdCBwb2ludCB3aGljaCBzdGlsbCBmYWxscyBpbnRvIHRoZSBkZWxheSB0aW1lXG4gIHZhciBmaXJzdEluZGV4ID0gbGFzdEluZGV4IC0gMztcbiAgd2hpbGUgKGZpcnN0SW5kZXggPiAwICYmIHRoaXMucG9pbnRzX1tmaXJzdEluZGV4ICsgMl0gPiBkZWxheSkge1xuICAgIGZpcnN0SW5kZXggLT0gMztcbiAgfVxuXG4gIHZhciBkdXJhdGlvbiA9IHRoaXMucG9pbnRzX1tsYXN0SW5kZXggKyAyXSAtIHRoaXMucG9pbnRzX1tmaXJzdEluZGV4ICsgMl07XG4gIC8vIHdlIGRvbid0IHdhbnQgYSBkdXJhdGlvbiBvZiAwIChkaXZpZGUgYnkgemVybylcbiAgLy8gd2UgYWxzbyBtYWtlIHN1cmUgdGhlIHVzZXIgcGFubmVkIGZvciBhIGR1cmF0aW9uIG9mIGF0IGxlYXN0IG9uZSBmcmFtZVxuICAvLyAoMS82MHMpIHRvIGNvbXB1dGUgc2FuZSBkaXNwbGFjZW1lbnQgdmFsdWVzXG4gIGlmIChkdXJhdGlvbiA8IDEwMDAgLyA2MCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBkeCA9IHRoaXMucG9pbnRzX1tsYXN0SW5kZXhdIC0gdGhpcy5wb2ludHNfW2ZpcnN0SW5kZXhdO1xuICB2YXIgZHkgPSB0aGlzLnBvaW50c19bbGFzdEluZGV4ICsgMV0gLSB0aGlzLnBvaW50c19bZmlyc3RJbmRleCArIDFdO1xuICB0aGlzLmFuZ2xlXyA9IE1hdGguYXRhbjIoZHksIGR4KTtcbiAgdGhpcy5pbml0aWFsVmVsb2NpdHlfID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KSAvIGR1cmF0aW9uO1xuICByZXR1cm4gdGhpcy5pbml0aWFsVmVsb2NpdHlfID4gdGhpcy5taW5WZWxvY2l0eV87XG59O1xuXG4vKipcbiAqIEByZXR1cm4ge251bWJlcn0gVG90YWwgZGlzdGFuY2UgdHJhdmVsbGVkIChwaXhlbHMpLlxuICovXG5LaW5ldGljLnByb3RvdHlwZS5nZXREaXN0YW5jZSA9IGZ1bmN0aW9uIGdldERpc3RhbmNlICgpIHtcbiAgcmV0dXJuICh0aGlzLm1pblZlbG9jaXR5XyAtIHRoaXMuaW5pdGlhbFZlbG9jaXR5XykgLyB0aGlzLmRlY2F5Xztcbn07XG5cbi8qKlxuICogQHJldHVybiB7bnVtYmVyfSBBbmdsZSBvZiB0aGUga2luZXRpYyBwYW5uaW5nIGFuaW1hdGlvbiAocmFkaWFucykuXG4gKi9cbktpbmV0aWMucHJvdG90eXBlLmdldEFuZ2xlID0gZnVuY3Rpb24gZ2V0QW5nbGUgKCkge1xuICByZXR1cm4gdGhpcy5hbmdsZV87XG59O1xuXG5leHBvcnQgZGVmYXVsdCBLaW5ldGljO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1LaW5ldGljLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9Qcm9wZXJ0eVxuICovXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICBBQ1RJVkU6ICdhY3RpdmUnXG59O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qcm9wZXJ0eS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb25cbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vT2JqZWN0LmpzJztcbmltcG9ydCB7ZWFzZU91dCwgbGluZWFyfSBmcm9tICcuLi9lYXNpbmcuanMnO1xuaW1wb3J0IEludGVyYWN0aW9uUHJvcGVydHkgZnJvbSAnLi9Qcm9wZXJ0eS5qcyc7XG5pbXBvcnQge2NsYW1wfSBmcm9tICcuLi9tYXRoLmpzJztcblxuXG4vKipcbiAqIE9iamVjdCBsaXRlcmFsIHdpdGggY29uZmlnIG9wdGlvbnMgZm9yIGludGVyYWN0aW9ucy5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IEludGVyYWN0aW9uT3B0aW9uc1xuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gaGFuZGxlRXZlbnRcbiAqIE1ldGhvZCBjYWxsZWQgYnkgdGhlIG1hcCB0byBub3RpZnkgdGhlIGludGVyYWN0aW9uIHRoYXQgYSBicm93c2VyIGV2ZW50IHdhc1xuICogZGlzcGF0Y2hlZCB0byB0aGUgbWFwLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyBhIGZhbHN5IHZhbHVlLCBwcm9wYWdhdGlvbiBvZlxuICogdGhlIGV2ZW50IHRvIG90aGVyIGludGVyYWN0aW9ucyBpbiB0aGUgbWFwJ3MgaW50ZXJhY3Rpb25zIGNoYWluIHdpbGwgYmVcbiAqIHByZXZlbnRlZCAodGhpcyBpbmNsdWRlcyBmdW5jdGlvbnMgd2l0aCBubyBleHBsaWNpdCByZXR1cm4pLlxuICovXG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBub3JtYWxseSBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXMgYW5kIG5vdFxuICogaW5zdGFudGlhdGVkIGluIGFwcHMuXG4gKiBVc2VyIGFjdGlvbnMgdGhhdCBjaGFuZ2UgdGhlIHN0YXRlIG9mIHRoZSBtYXAuIFNvbWUgYXJlIHNpbWlsYXIgdG8gY29udHJvbHMsXG4gKiBidXQgYXJlIG5vdCBhc3NvY2lhdGVkIHdpdGggYSBET00gZWxlbWVudC5cbiAqIEZvciBleGFtcGxlLCB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbX5LZXlib2FyZFpvb219IGlzXG4gKiBmdW5jdGlvbmFsbHkgdGhlIHNhbWUgYXMge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1pvb21+Wm9vbX0sIGJ1dCB0cmlnZ2VyZWRcbiAqIGJ5IGEga2V5Ym9hcmQgZXZlbnQgbm90IGEgYnV0dG9uIGVsZW1lbnQgZXZlbnQuXG4gKiBBbHRob3VnaCBpbnRlcmFjdGlvbnMgZG8gbm90IGhhdmUgYSBET00gZWxlbWVudCwgc29tZSBvZiB0aGVtIGRvIHJlbmRlclxuICogdmVjdG9ycyBhbmQgc28gYXJlIHZpc2libGUgb24gdGhlIHNjcmVlbi5cbiAqIEBhcGlcbiAqL1xudmFyIEludGVyYWN0aW9uID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoQmFzZU9iamVjdCkge1xuICBmdW5jdGlvbiBJbnRlcmFjdGlvbihvcHRpb25zKSB7XG4gICAgQmFzZU9iamVjdC5jYWxsKHRoaXMpO1xuXG4gICAgaWYgKG9wdGlvbnMuaGFuZGxlRXZlbnQpIHtcbiAgICAgIHRoaXMuaGFuZGxlRXZlbnQgPSBvcHRpb25zLmhhbmRsZUV2ZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAqL1xuICAgIHRoaXMubWFwXyA9IG51bGw7XG5cbiAgICB0aGlzLnNldEFjdGl2ZSh0cnVlKTtcbiAgfVxuXG4gIGlmICggQmFzZU9iamVjdCApIEludGVyYWN0aW9uLl9fcHJvdG9fXyA9IEJhc2VPYmplY3Q7XG4gIEludGVyYWN0aW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEJhc2VPYmplY3QgJiYgQmFzZU9iamVjdC5wcm90b3R5cGUgKTtcbiAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gSW50ZXJhY3Rpb247XG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoZSBpbnRlcmFjdGlvbiBpcyBjdXJyZW50bHkgYWN0aXZlLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGludGVyYWN0aW9uIGlzIGFjdGl2ZSwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIEludGVyYWN0aW9uLnByb3RvdHlwZS5nZXRBY3RpdmUgPSBmdW5jdGlvbiBnZXRBY3RpdmUgKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge2Jvb2xlYW59ICovICh0aGlzLmdldChJbnRlcmFjdGlvblByb3BlcnR5LkFDVElWRSkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1hcCBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnRlcmFjdGlvbi5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IE1hcC5cbiAgICogQGFwaVxuICAgKi9cbiAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLmdldE1hcCA9IGZ1bmN0aW9uIGdldE1hcCAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwXztcbiAgfTtcblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gaGFuZGxlRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBvciBkZWFjdGl2YXRlIHRoZSBpbnRlcmFjdGlvbi5cbiAgICogQHBhcmFtIHtib29sZWFufSBhY3RpdmUgQWN0aXZlLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBJbnRlcmFjdGlvbi5wcm90b3R5cGUuc2V0QWN0aXZlID0gZnVuY3Rpb24gc2V0QWN0aXZlIChhY3RpdmUpIHtcbiAgICB0aGlzLnNldChJbnRlcmFjdGlvblByb3BlcnR5LkFDVElWRSwgYWN0aXZlKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBpbnRlcmFjdGlvbiBmcm9tIGl0cyBjdXJyZW50IG1hcCBhbmQgYXR0YWNoIGl0IHRvIHRoZSBuZXcgbWFwLlxuICAgKiBTdWJjbGFzc2VzIG1heSBzZXQgdXAgZXZlbnQgaGFuZGxlcnMgdG8gZ2V0IG5vdGlmaWVkIGFib3V0IGNoYW5nZXMgdG9cbiAgICogdGhlIG1hcCBoZXJlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgKi9cbiAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLnNldE1hcCA9IGZ1bmN0aW9uIHNldE1hcCAobWFwKSB7XG4gICAgdGhpcy5tYXBfID0gbWFwO1xuICB9O1xuXG4gIHJldHVybiBJbnRlcmFjdGlvbjtcbn0oQmFzZU9iamVjdCkpO1xuXG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLmRlZmF1bHR9IHZpZXcgVmlldy5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBkZWx0YSBEZWx0YS5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2R1cmF0aW9uIER1cmF0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFuKHZpZXcsIGRlbHRhLCBvcHRfZHVyYXRpb24pIHtcbiAgdmFyIGN1cnJlbnRDZW50ZXIgPSB2aWV3LmdldENlbnRlcigpO1xuICBpZiAoY3VycmVudENlbnRlcikge1xuICAgIHZhciBjZW50ZXIgPSB2aWV3LmNvbnN0cmFpbkNlbnRlcihcbiAgICAgIFtjdXJyZW50Q2VudGVyWzBdICsgZGVsdGFbMF0sIGN1cnJlbnRDZW50ZXJbMV0gKyBkZWx0YVsxXV0pO1xuICAgIGlmIChvcHRfZHVyYXRpb24pIHtcbiAgICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgIGR1cmF0aW9uOiBvcHRfZHVyYXRpb24sXG4gICAgICAgIGVhc2luZzogbGluZWFyLFxuICAgICAgICBjZW50ZXI6IGNlbnRlclxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZpZXcuc2V0Q2VudGVyKGNlbnRlcik7XG4gICAgfVxuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL1ZpZXcuanNcIikuZGVmYXVsdH0gdmlldyBWaWV3LlxuICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPX0gb3B0X2FuY2hvciBBbmNob3IgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2R1cmF0aW9uIER1cmF0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlKHZpZXcsIHJvdGF0aW9uLCBvcHRfYW5jaG9yLCBvcHRfZHVyYXRpb24pIHtcbiAgcm90YXRpb24gPSB2aWV3LmNvbnN0cmFpblJvdGF0aW9uKHJvdGF0aW9uLCAwKTtcbiAgcm90YXRlV2l0aG91dENvbnN0cmFpbnRzKHZpZXcsIHJvdGF0aW9uLCBvcHRfYW5jaG9yLCBvcHRfZHVyYXRpb24pO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLmRlZmF1bHR9IHZpZXcgVmlldy5cbiAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT19IG9wdF9hbmNob3IgQW5jaG9yIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9kdXJhdGlvbiBEdXJhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVdpdGhvdXRDb25zdHJhaW50cyh2aWV3LCByb3RhdGlvbiwgb3B0X2FuY2hvciwgb3B0X2R1cmF0aW9uKSB7XG4gIGlmIChyb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIGN1cnJlbnRSb3RhdGlvbiA9IHZpZXcuZ2V0Um90YXRpb24oKTtcbiAgICB2YXIgY3VycmVudENlbnRlciA9IHZpZXcuZ2V0Q2VudGVyKCk7XG4gICAgaWYgKGN1cnJlbnRSb3RhdGlvbiAhPT0gdW5kZWZpbmVkICYmIGN1cnJlbnRDZW50ZXIgJiYgb3B0X2R1cmF0aW9uID4gMCkge1xuICAgICAgdmlldy5hbmltYXRlKHtcbiAgICAgICAgcm90YXRpb246IHJvdGF0aW9uLFxuICAgICAgICBhbmNob3I6IG9wdF9hbmNob3IsXG4gICAgICAgIGR1cmF0aW9uOiBvcHRfZHVyYXRpb24sXG4gICAgICAgIGVhc2luZzogZWFzZU91dFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZpZXcucm90YXRlKHJvdGF0aW9uLCBvcHRfYW5jaG9yKTtcbiAgICB9XG4gIH1cbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVmlldy5qc1wiKS5kZWZhdWx0fSB2aWV3IFZpZXcuXG4gKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJlc29sdXRpb24gUmVzb2x1dGlvbiB0byBnbyB0by5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPX0gb3B0X2FuY2hvciBBbmNob3IgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2R1cmF0aW9uIER1cmF0aW9uLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZGlyZWN0aW9uIFpvb21pbmcgZGlyZWN0aW9uOyA+IDAgaW5kaWNhdGVzXG4gKiAgICAgem9vbWluZyBvdXQsIGluIHdoaWNoIGNhc2UgdGhlIGNvbnN0cmFpbnRzIHN5c3RlbSB3aWxsIHNlbGVjdFxuICogICAgIHRoZSBsYXJnZXN0IG5lYXJlc3QgcmVzb2x1dGlvbjsgPCAwIGluZGljYXRlcyB6b29taW5nIGluLCBpblxuICogICAgIHdoaWNoIGNhc2UgdGhlIGNvbnN0cmFpbnRzIHN5c3RlbSB3aWxsIHNlbGVjdCB0aGUgc21hbGxlc3RcbiAqICAgICBuZWFyZXN0IHJlc29sdXRpb247ID09IDAgaW5kaWNhdGVzIHRoYXQgdGhlIHpvb21pbmcgZGlyZWN0aW9uXG4gKiAgICAgaXMgdW5rbm93bi9ub3QgcmVsZXZhbnQsIGluIHdoaWNoIGNhc2UgdGhlIGNvbnN0cmFpbnRzIHN5c3RlbVxuICogICAgIHdpbGwgc2VsZWN0IHRoZSBuZWFyZXN0IHJlc29sdXRpb24uIElmIG5vdCBkZWZpbmVkIDAgaXNcbiAqICAgICBhc3N1bWVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gem9vbSh2aWV3LCByZXNvbHV0aW9uLCBvcHRfYW5jaG9yLCBvcHRfZHVyYXRpb24sIG9wdF9kaXJlY3Rpb24pIHtcbiAgcmVzb2x1dGlvbiA9IHZpZXcuY29uc3RyYWluUmVzb2x1dGlvbihyZXNvbHV0aW9uLCAwLCBvcHRfZGlyZWN0aW9uKTtcbiAgem9vbVdpdGhvdXRDb25zdHJhaW50cyh2aWV3LCByZXNvbHV0aW9uLCBvcHRfYW5jaG9yLCBvcHRfZHVyYXRpb24pO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLmRlZmF1bHR9IHZpZXcgVmlldy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBEZWx0YSBmcm9tIHByZXZpb3VzIHpvb20gbGV2ZWwuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT19IG9wdF9hbmNob3IgQW5jaG9yIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9kdXJhdGlvbiBEdXJhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHpvb21CeURlbHRhKHZpZXcsIGRlbHRhLCBvcHRfYW5jaG9yLCBvcHRfZHVyYXRpb24pIHtcbiAgdmFyIGN1cnJlbnRSZXNvbHV0aW9uID0gdmlldy5nZXRSZXNvbHV0aW9uKCk7XG4gIHZhciByZXNvbHV0aW9uID0gdmlldy5jb25zdHJhaW5SZXNvbHV0aW9uKGN1cnJlbnRSZXNvbHV0aW9uLCBkZWx0YSwgMCk7XG5cbiAgaWYgKHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciByZXNvbHV0aW9ucyA9IHZpZXcuZ2V0UmVzb2x1dGlvbnMoKTtcbiAgICByZXNvbHV0aW9uID0gY2xhbXAoXG4gICAgICByZXNvbHV0aW9uLFxuICAgICAgdmlldy5nZXRNaW5SZXNvbHV0aW9uKCkgfHwgcmVzb2x1dGlvbnNbcmVzb2x1dGlvbnMubGVuZ3RoIC0gMV0sXG4gICAgICB2aWV3LmdldE1heFJlc29sdXRpb24oKSB8fCByZXNvbHV0aW9uc1swXSk7XG4gIH1cblxuICAvLyBJZiB3ZSBoYXZlIGEgY29uc3RyYWludCBvbiBjZW50ZXIsIHdlIG5lZWQgdG8gY2hhbmdlIHRoZSBhbmNob3Igc28gdGhhdCB0aGVcbiAgLy8gbmV3IGNlbnRlciBpcyB3aXRoaW4gdGhlIGV4dGVudC4gV2UgZmlyc3QgY2FsY3VsYXRlIHRoZSBuZXcgY2VudGVyLCBhcHBseVxuICAvLyB0aGUgY29uc3RyYWludCB0byBpdCwgYW5kIHRoZW4gY2FsY3VsYXRlIGJhY2sgdGhlIGFuY2hvclxuICBpZiAob3B0X2FuY2hvciAmJiByZXNvbHV0aW9uICE9PSB1bmRlZmluZWQgJiYgcmVzb2x1dGlvbiAhPT0gY3VycmVudFJlc29sdXRpb24pIHtcbiAgICB2YXIgY3VycmVudENlbnRlciA9IHZpZXcuZ2V0Q2VudGVyKCk7XG4gICAgdmFyIGNlbnRlciA9IHZpZXcuY2FsY3VsYXRlQ2VudGVyWm9vbShyZXNvbHV0aW9uLCBvcHRfYW5jaG9yKTtcbiAgICBjZW50ZXIgPSB2aWV3LmNvbnN0cmFpbkNlbnRlcihjZW50ZXIpO1xuXG4gICAgb3B0X2FuY2hvciA9IFtcbiAgICAgIChyZXNvbHV0aW9uICogY3VycmVudENlbnRlclswXSAtIGN1cnJlbnRSZXNvbHV0aW9uICogY2VudGVyWzBdKSAvXG4gICAgICAgICAgKHJlc29sdXRpb24gLSBjdXJyZW50UmVzb2x1dGlvbiksXG4gICAgICAocmVzb2x1dGlvbiAqIGN1cnJlbnRDZW50ZXJbMV0gLSBjdXJyZW50UmVzb2x1dGlvbiAqIGNlbnRlclsxXSkgL1xuICAgICAgICAgIChyZXNvbHV0aW9uIC0gY3VycmVudFJlc29sdXRpb24pXG4gICAgXTtcbiAgfVxuXG4gIHpvb21XaXRob3V0Q29uc3RyYWludHModmlldywgcmVzb2x1dGlvbiwgb3B0X2FuY2hvciwgb3B0X2R1cmF0aW9uKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVmlldy5qc1wiKS5kZWZhdWx0fSB2aWV3IFZpZXcuXG4gKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJlc29sdXRpb24gUmVzb2x1dGlvbiB0byBnbyB0by5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPX0gb3B0X2FuY2hvciBBbmNob3IgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2R1cmF0aW9uIER1cmF0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gem9vbVdpdGhvdXRDb25zdHJhaW50cyh2aWV3LCByZXNvbHV0aW9uLCBvcHRfYW5jaG9yLCBvcHRfZHVyYXRpb24pIHtcbiAgaWYgKHJlc29sdXRpb24pIHtcbiAgICB2YXIgY3VycmVudFJlc29sdXRpb24gPSB2aWV3LmdldFJlc29sdXRpb24oKTtcbiAgICB2YXIgY3VycmVudENlbnRlciA9IHZpZXcuZ2V0Q2VudGVyKCk7XG4gICAgaWYgKGN1cnJlbnRSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQgJiYgY3VycmVudENlbnRlciAmJlxuICAgICAgICByZXNvbHV0aW9uICE9PSBjdXJyZW50UmVzb2x1dGlvbiAmJiBvcHRfZHVyYXRpb24pIHtcbiAgICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgIHJlc29sdXRpb246IHJlc29sdXRpb24sXG4gICAgICAgIGFuY2hvcjogb3B0X2FuY2hvcixcbiAgICAgICAgZHVyYXRpb246IG9wdF9kdXJhdGlvbixcbiAgICAgICAgZWFzaW5nOiBlYXNlT3V0XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKG9wdF9hbmNob3IpIHtcbiAgICAgICAgdmFyIGNlbnRlciA9IHZpZXcuY2FsY3VsYXRlQ2VudGVyWm9vbShyZXNvbHV0aW9uLCBvcHRfYW5jaG9yKTtcbiAgICAgICAgdmlldy5zZXRDZW50ZXIoY2VudGVyKTtcbiAgICAgIH1cbiAgICAgIHZpZXcuc2V0UmVzb2x1dGlvbihyZXNvbHV0aW9uKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgSW50ZXJhY3Rpb247XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUludGVyYWN0aW9uLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9Eb3VibGVDbGlja1pvb21cbiAqL1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudFR5cGUgZnJvbSAnLi4vTWFwQnJvd3NlckV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW50ZXJhY3Rpb24sIHt6b29tQnlEZWx0YX0gZnJvbSAnLi9JbnRlcmFjdGlvbi5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZGVsdGE9MV0gVGhlIHpvb20gZGVsdGEgYXBwbGllZCBvbiBlYWNoIGRvdWJsZSBjbGljay5cbiAqL1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHpvb20gYnkgZG91YmxlLWNsaWNraW5nIG9uIHRoZSBtYXAuXG4gKiBAYXBpXG4gKi9cbnZhciBEb3VibGVDbGlja1pvb20gPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChJbnRlcmFjdGlvbikge1xuICBmdW5jdGlvbiBEb3VibGVDbGlja1pvb20ob3B0X29wdGlvbnMpIHtcbiAgICBJbnRlcmFjdGlvbi5jYWxsKHRoaXMsIHtcbiAgICAgIGhhbmRsZUV2ZW50OiBoYW5kbGVFdmVudFxuICAgIH0pO1xuXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kZWx0YV8gPSBvcHRpb25zLmRlbHRhID8gb3B0aW9ucy5kZWx0YSA6IDE7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuXG4gIH1cblxuICBpZiAoIEludGVyYWN0aW9uICkgRG91YmxlQ2xpY2tab29tLl9fcHJvdG9fXyA9IEludGVyYWN0aW9uO1xuICBEb3VibGVDbGlja1pvb20ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggSW50ZXJhY3Rpb24gJiYgSW50ZXJhY3Rpb24ucHJvdG90eXBlICk7XG4gIERvdWJsZUNsaWNrWm9vbS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBEb3VibGVDbGlja1pvb207XG5cbiAgcmV0dXJuIERvdWJsZUNsaWNrWm9vbTtcbn0oSW50ZXJhY3Rpb24pKTtcblxuXG4vKipcbiAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fSAoaWYgaXQgd2FzIGFcbiAqIGRvdWJsZWNsaWNrKSBhbmQgZXZlbnR1YWxseSB6b29tcyB0aGUgbWFwLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gYGZhbHNlYCB0byBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICogQHRoaXMge0RvdWJsZUNsaWNrWm9vbX1cbiAqL1xuZnVuY3Rpb24gaGFuZGxlRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gIHZhciBzdG9wRXZlbnQgPSBmYWxzZTtcbiAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuREJMQ0xJQ0spIHtcbiAgICB2YXIgYnJvd3NlckV2ZW50ID0gLyoqIEB0eXBlIHtNb3VzZUV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgIHZhciBhbmNob3IgPSBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZTtcbiAgICB2YXIgZGVsdGEgPSBicm93c2VyRXZlbnQuc2hpZnRLZXkgPyAtdGhpcy5kZWx0YV8gOiB0aGlzLmRlbHRhXztcbiAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgem9vbUJ5RGVsdGEodmlldywgZGVsdGEsIGFuY2hvciwgdGhpcy5kdXJhdGlvbl8pO1xuICAgIG1hcEJyb3dzZXJFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHN0b3BFdmVudCA9IHRydWU7XG4gIH1cbiAgcmV0dXJuICFzdG9wRXZlbnQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IERvdWJsZUNsaWNrWm9vbTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RG91YmxlQ2xpY2tab29tLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9ldmVudHMvY29uZGl0aW9uXG4gKi9cbmltcG9ydCBNYXBCcm93c2VyRXZlbnRUeXBlIGZyb20gJy4uL01hcEJyb3dzZXJFdmVudFR5cGUuanMnO1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHtUUlVFLCBGQUxTRX0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7V0VCS0lULCBNQUN9IGZyb20gJy4uL2hhcy5qcyc7XG5cblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGFcbiAqIGB7Ym9vbGVhbn1gLiBJZiB0aGUgY29uZGl0aW9uIGlzIG1ldCwgdHJ1ZSBzaG91bGQgYmUgcmV0dXJuZWQuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKHRoaXM6ID8sIGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gQ29uZGl0aW9uXG4gKi9cblxuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgb25seSB0aGUgYWx0LWtleSBpcyBwcmVzc2VkLCBgZmFsc2VgIG90aGVyd2lzZSAoZS5nLiB3aGVuXG4gKiBhZGRpdGlvbmFsbHkgdGhlIHNoaWZ0LWtleSBpcyBwcmVzc2VkKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG9ubHkgdGhlIGFsdCBrZXkgaXMgcHJlc3NlZC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBhbHRLZXlPbmx5ID0gZnVuY3Rpb24obWFwQnJvd3NlckV2ZW50KSB7XG4gIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgcmV0dXJuIChcbiAgICBvcmlnaW5hbEV2ZW50LmFsdEtleSAmJlxuICAgICAgIShvcmlnaW5hbEV2ZW50Lm1ldGFLZXkgfHwgb3JpZ2luYWxFdmVudC5jdHJsS2V5KSAmJlxuICAgICAgIW9yaWdpbmFsRXZlbnQuc2hpZnRLZXkpO1xufTtcblxuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgb25seSB0aGUgYWx0LWtleSBhbmQgc2hpZnQta2V5IGlzIHByZXNzZWQsIGBmYWxzZWAgb3RoZXJ3aXNlXG4gKiAoZS5nLiB3aGVuIGFkZGl0aW9uYWxseSB0aGUgcGxhdGZvcm0tbW9kaWZpZXIta2V5IGlzIHByZXNzZWQpLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgb25seSB0aGUgYWx0IGFuZCBzaGlmdCBrZXlzIGFyZSBwcmVzc2VkLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIGFsdFNoaWZ0S2V5c09ubHkgPSBmdW5jdGlvbihtYXBCcm93c2VyRXZlbnQpIHtcbiAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudHxUb3VjaEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICByZXR1cm4gKFxuICAgIG9yaWdpbmFsRXZlbnQuYWx0S2V5ICYmXG4gICAgICAhKG9yaWdpbmFsRXZlbnQubWV0YUtleSB8fCBvcmlnaW5hbEV2ZW50LmN0cmxLZXkpICYmXG4gICAgICBvcmlnaW5hbEV2ZW50LnNoaWZ0S2V5KTtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBtYXAgaGFzIHRoZSBmb2N1cy4gVGhpcyBjb25kaXRpb24gcmVxdWlyZXMgYSBtYXAgdGFyZ2V0XG4gKiBlbGVtZW50IHdpdGggYSBgdGFiaW5kZXhgIGF0dHJpYnV0ZSwgZS5nLiBgPGRpdiBpZD1cIm1hcFwiIHRhYmluZGV4PVwiMVwiPmAuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgbWFwIGhhcyB0aGUgZm9jdXMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgZm9jdXMgPSBmdW5jdGlvbihldmVudCkge1xuICByZXR1cm4gZXZlbnQudGFyZ2V0LmdldFRhcmdldEVsZW1lbnQoKSA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm4gYWx3YXlzIHRydWUuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBhbHdheXMgPSBUUlVFO1xuXG5cbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgaXMgYSBgY2xpY2tgIGV2ZW50LCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCBpcyBhIG1hcCBgY2xpY2tgIGV2ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIGNsaWNrID0gZnVuY3Rpb24obWFwQnJvd3NlckV2ZW50KSB7XG4gIHJldHVybiBtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLkNMSUNLO1xufTtcblxuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IGhhcyBhbiBcImFjdGlvblwiLXByb2R1Y2luZyBtb3VzZSBidXR0b24uXG4gKlxuICogQnkgZGVmaW5pdGlvbiwgdGhpcyBpbmNsdWRlcyBsZWZ0LWNsaWNrIG9uIHdpbmRvd3MvbGludXgsIGFuZCBsZWZ0LWNsaWNrXG4gKiB3aXRob3V0IHRoZSBjdHJsIGtleSBvbiBNYWNzLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSByZXN1bHQuXG4gKi9cbmV4cG9ydCB2YXIgbW91c2VBY3Rpb25CdXR0b24gPSBmdW5jdGlvbihtYXBCcm93c2VyRXZlbnQpIHtcbiAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge01vdXNlRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gIHJldHVybiBvcmlnaW5hbEV2ZW50LmJ1dHRvbiA9PSAwICYmXG4gICAgICAhKFdFQktJVCAmJiBNQUMgJiYgb3JpZ2luYWxFdmVudC5jdHJsS2V5KTtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm4gYWx3YXlzIGZhbHNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IEZhbHNlLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIG5ldmVyID0gRkFMU0U7XG5cblxuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBicm93c2VyIGV2ZW50IGlzIGEgYHBvaW50ZXJtb3ZlYCBldmVudCwgYGZhbHNlYFxuICogb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGJyb3dzZXIgZXZlbnQgaXMgYSBgcG9pbnRlcm1vdmVgIGV2ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHBvaW50ZXJNb3ZlID0gZnVuY3Rpb24obWFwQnJvd3NlckV2ZW50KSB7XG4gIHJldHVybiBtYXBCcm93c2VyRXZlbnQudHlwZSA9PSAncG9pbnRlcm1vdmUnO1xufTtcblxuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IGlzIGEgbWFwIGBzaW5nbGVjbGlja2AgZXZlbnQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IGlzIGEgbWFwIGBzaW5nbGVjbGlja2AgZXZlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgc2luZ2xlQ2xpY2sgPSBmdW5jdGlvbihtYXBCcm93c2VyRXZlbnQpIHtcbiAgcmV0dXJuIG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuU0lOR0xFQ0xJQ0s7XG59O1xuXG5cbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgaXMgYSBtYXAgYGRibGNsaWNrYCBldmVudCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgaXMgYSBtYXAgYGRibGNsaWNrYCBldmVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBkb3VibGVDbGljayA9IGZ1bmN0aW9uKG1hcEJyb3dzZXJFdmVudCkge1xuICByZXR1cm4gbWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5EQkxDTElDSztcbn07XG5cblxuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIG5vIG1vZGlmaWVyIGtleSAoYWx0LSwgc2hpZnQtIG9yIHBsYXRmb3JtLW1vZGlmaWVyLWtleSkgaXNcbiAqIHByZXNzZWQuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBvbmx5IGlmIHRoZXJlIG5vIG1vZGlmaWVyIGtleXMgYXJlIHByZXNzZWQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgbm9Nb2RpZmllcktleXMgPSBmdW5jdGlvbihtYXBCcm93c2VyRXZlbnQpIHtcbiAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudHxUb3VjaEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICByZXR1cm4gKFxuICAgICFvcmlnaW5hbEV2ZW50LmFsdEtleSAmJlxuICAgICAgIShvcmlnaW5hbEV2ZW50Lm1ldGFLZXkgfHwgb3JpZ2luYWxFdmVudC5jdHJsS2V5KSAmJlxuICAgICAgIW9yaWdpbmFsRXZlbnQuc2hpZnRLZXkpO1xufTtcblxuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgb25seSB0aGUgcGxhdGZvcm0tbW9kaWZpZXIta2V5ICh0aGUgbWV0YS1rZXkgb24gTWFjLFxuICogY3RybC1rZXkgb3RoZXJ3aXNlKSBpcyBwcmVzc2VkLCBgZmFsc2VgIG90aGVyd2lzZSAoZS5nLiB3aGVuIGFkZGl0aW9uYWxseVxuICogdGhlIHNoaWZ0LWtleSBpcyBwcmVzc2VkKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG9ubHkgdGhlIHBsYXRmb3JtIG1vZGlmaWVyIGtleSBpcyBwcmVzc2VkLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHBsYXRmb3JtTW9kaWZpZXJLZXlPbmx5ID0gZnVuY3Rpb24obWFwQnJvd3NlckV2ZW50KSB7XG4gIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgcmV0dXJuICFvcmlnaW5hbEV2ZW50LmFsdEtleSAmJlxuICAgIChNQUMgPyBvcmlnaW5hbEV2ZW50Lm1ldGFLZXkgOiBvcmlnaW5hbEV2ZW50LmN0cmxLZXkpICYmXG4gICAgIW9yaWdpbmFsRXZlbnQuc2hpZnRLZXk7XG59O1xuXG5cbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiBvbmx5IHRoZSBzaGlmdC1rZXkgaXMgcHJlc3NlZCwgYGZhbHNlYCBvdGhlcndpc2UgKGUuZy4gd2hlblxuICogYWRkaXRpb25hbGx5IHRoZSBhbHQta2V5IGlzIHByZXNzZWQpLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgb25seSB0aGUgc2hpZnQga2V5IGlzIHByZXNzZWQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgc2hpZnRLZXlPbmx5ID0gZnVuY3Rpb24obWFwQnJvd3NlckV2ZW50KSB7XG4gIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgcmV0dXJuIChcbiAgICAhb3JpZ2luYWxFdmVudC5hbHRLZXkgJiZcbiAgICAgICEob3JpZ2luYWxFdmVudC5tZXRhS2V5IHx8IG9yaWdpbmFsRXZlbnQuY3RybEtleSkgJiZcbiAgICAgIG9yaWdpbmFsRXZlbnQuc2hpZnRLZXkpO1xufTtcblxuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIHRhcmdldCBlbGVtZW50IGlzIG5vdCBlZGl0YWJsZSwgaS5lLiBub3QgYSBgPGlucHV0PmAtLFxuICogYDxzZWxlY3Q+YC0gb3IgYDx0ZXh0YXJlYT5gLWVsZW1lbnQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgb25seSBpZiB0aGUgdGFyZ2V0IGVsZW1lbnQgaXMgbm90IGVkaXRhYmxlLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHRhcmdldE5vdEVkaXRhYmxlID0gZnVuY3Rpb24obWFwQnJvd3NlckV2ZW50KSB7XG4gIHZhciB0YXJnZXQgPSBtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudC50YXJnZXQ7XG4gIHZhciB0YWdOYW1lID0gLyoqIEB0eXBlIHtFbGVtZW50fSAqLyAodGFyZ2V0KS50YWdOYW1lO1xuICByZXR1cm4gKFxuICAgIHRhZ05hbWUgIT09ICdJTlBVVCcgJiZcbiAgICAgIHRhZ05hbWUgIT09ICdTRUxFQ1QnICYmXG4gICAgICB0YWdOYW1lICE9PSAnVEVYVEFSRUEnKTtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBldmVudCBvcmlnaW5hdGVzIGZyb20gYSBtb3VzZSBkZXZpY2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgbW91c2UgZGV2aWNlLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIG1vdXNlT25seSA9IGZ1bmN0aW9uKG1hcEJyb3dzZXJFdmVudCkge1xuICB2YXIgcG9pbnRlckV2ZW50ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyUG9pbnRlckV2ZW50XCIpLmRlZmF1bHR9ICovIChtYXBCcm93c2VyRXZlbnQpLnBvaW50ZXJFdmVudDtcbiAgYXNzZXJ0KHBvaW50ZXJFdmVudCAhPT0gdW5kZWZpbmVkLCA1Nik7IC8vIG1hcEJyb3dzZXJFdmVudCBtdXN0IG9yaWdpbmF0ZSBmcm9tIGEgcG9pbnRlciBldmVudFxuICAvLyBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvcG9pbnRlcmV2ZW50cy8jd2lkbC1Qb2ludGVyRXZlbnQtcG9pbnRlclR5cGVcbiAgcmV0dXJuIHBvaW50ZXJFdmVudC5wb2ludGVyVHlwZSA9PSAnbW91c2UnO1xufTtcblxuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIHByaW1hcnkgcG9pbnRlciBpblxuICogY29udGFjdCB3aXRoIHRoZSBzdXJmYWNlIG9yIGlmIHRoZSBsZWZ0IG1vdXNlIGJ1dHRvbiBpcyBwcmVzc2VkLlxuICogU2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL3BvaW50ZXJldmVudHMvI2J1dHRvbi1zdGF0ZXMuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgcHJpbWFyeSBwb2ludGVyLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHByaW1hcnlBY3Rpb24gPSBmdW5jdGlvbihtYXBCcm93c2VyRXZlbnQpIHtcbiAgdmFyIHBvaW50ZXJFdmVudCA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlclBvaW50ZXJFdmVudFwiKS5kZWZhdWx0fSAqLyAobWFwQnJvd3NlckV2ZW50KS5wb2ludGVyRXZlbnQ7XG4gIGFzc2VydChwb2ludGVyRXZlbnQgIT09IHVuZGVmaW5lZCwgNTYpOyAvLyBtYXBCcm93c2VyRXZlbnQgbXVzdCBvcmlnaW5hdGUgZnJvbSBhIHBvaW50ZXIgZXZlbnRcbiAgcmV0dXJuIHBvaW50ZXJFdmVudC5pc1ByaW1hcnkgJiYgcG9pbnRlckV2ZW50LmJ1dHRvbiA9PT0gMDtcbn07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmRpdGlvbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vUG9pbnRlclxuICovXG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50VHlwZSBmcm9tICcuLi9NYXBCcm93c2VyRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbnRlcmFjdGlvbiBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCB7Z2V0VmFsdWVzfSBmcm9tICcuLi9vYmouanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHQpOmJvb2xlYW59IFtoYW5kbGVEb3duRXZlbnRdXG4gKiBGdW5jdGlvbiBoYW5kbGluZyBcImRvd25cIiBldmVudHMuIElmIHRoZSBmdW5jdGlvbiByZXR1cm5zIGB0cnVlYCB0aGVuIGEgZHJhZ1xuICogc2VxdWVuY2UgaXMgc3RhcnRlZC5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwQnJvd3NlclBvaW50ZXJFdmVudC5qc1wiKS5kZWZhdWx0KX0gW2hhbmRsZURyYWdFdmVudF1cbiAqIEZ1bmN0aW9uIGhhbmRsaW5nIFwiZHJhZ1wiIGV2ZW50cy4gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgb24gXCJtb3ZlXCIgZXZlbnRzXG4gKiBkdXJpbmcgYSBkcmFnIHNlcXVlbmNlLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gW2hhbmRsZUV2ZW50XVxuICogTWV0aG9kIGNhbGxlZCBieSB0aGUgbWFwIHRvIG5vdGlmeSB0aGUgaW50ZXJhY3Rpb24gdGhhdCBhIGJyb3dzZXIgZXZlbnQgd2FzXG4gKiBkaXNwYXRjaGVkIHRvIHRoZSBtYXAuIFRoZSBmdW5jdGlvbiBtYXkgcmV0dXJuIGBmYWxzZWAgdG8gcHJldmVudCB0aGVcbiAqIHByb3BhZ2F0aW9uIG9mIHRoZSBldmVudCB0byBvdGhlciBpbnRlcmFjdGlvbnMgaW4gdGhlIG1hcCdzIGludGVyYWN0aW9uc1xuICogY2hhaW4uXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEJyb3dzZXJQb2ludGVyRXZlbnQuanNcIikuZGVmYXVsdCl9IFtoYW5kbGVNb3ZlRXZlbnRdXG4gKiBGdW5jdGlvbiBoYW5kbGluZyBcIm1vdmVcIiBldmVudHMuIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIG9uIFwibW92ZVwiIGV2ZW50cyxcbiAqIGFsc28gZHVyaW5nIGEgZHJhZyBzZXF1ZW5jZSAoc28gZHVyaW5nIGEgZHJhZyBzZXF1ZW5jZSBib3RoIHRoZVxuICogYGhhbmRsZURyYWdFdmVudGAgZnVuY3Rpb24gYW5kIHRoaXMgZnVuY3Rpb24gYXJlIGNhbGxlZCkuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEJyb3dzZXJQb2ludGVyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gW2hhbmRsZVVwRXZlbnRdXG4gKiAgRnVuY3Rpb24gaGFuZGxpbmcgXCJ1cFwiIGV2ZW50cy4gSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgYGZhbHNlYCB0aGVuIHRoZVxuICogY3VycmVudCBkcmFnIHNlcXVlbmNlIGlzIHN0b3BwZWQuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGJvb2xlYW4pOmJvb2xlYW59IFtzdG9wRG93bl1cbiAqIFNob3VsZCB0aGUgZG93biBldmVudCBiZSBwcm9wYWdhdGVkIHRvIG90aGVyIGludGVyYWN0aW9ucywgb3Igc2hvdWxkIGJlXG4gKiBzdG9wcGVkP1xuICovXG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBCYXNlIGNsYXNzIHRoYXQgY2FsbHMgdXNlci1kZWZpbmVkIGZ1bmN0aW9ucyBvbiBgZG93bmAsIGBtb3ZlYCBhbmQgYHVwYFxuICogZXZlbnRzLiBUaGlzIGNsYXNzIGFsc28gbWFuYWdlcyBcImRyYWcgc2VxdWVuY2VzXCIuXG4gKlxuICogV2hlbiB0aGUgYGhhbmRsZURvd25FdmVudGAgdXNlciBmdW5jdGlvbiByZXR1cm5zIGB0cnVlYCBhIGRyYWcgc2VxdWVuY2UgaXNcbiAqIHN0YXJ0ZWQuIER1cmluZyBhIGRyYWcgc2VxdWVuY2UgdGhlIGBoYW5kbGVEcmFnRXZlbnRgIHVzZXIgZnVuY3Rpb24gaXNcbiAqIGNhbGxlZCBvbiBgbW92ZWAgZXZlbnRzLiBUaGUgZHJhZyBzZXF1ZW5jZSBlbmRzIHdoZW4gdGhlIGBoYW5kbGVVcEV2ZW50YFxuICogdXNlciBmdW5jdGlvbiBpcyBjYWxsZWQgYW5kIHJldHVybnMgYGZhbHNlYC5cbiAqIEBhcGlcbiAqL1xudmFyIFBvaW50ZXJJbnRlcmFjdGlvbiA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEludGVyYWN0aW9uKSB7XG4gIGZ1bmN0aW9uIFBvaW50ZXJJbnRlcmFjdGlvbihvcHRfb3B0aW9ucykge1xuXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG5cbiAgICBJbnRlcmFjdGlvbi5jYWxsKC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9JbnRlcmFjdGlvbi5qc1wiKS5JbnRlcmFjdGlvbk9wdGlvbnN9ICovIHRoaXMsIChvcHRpb25zKSk7XG5cbiAgICBpZiAob3B0aW9ucy5oYW5kbGVEb3duRXZlbnQpIHtcbiAgICAgIHRoaXMuaGFuZGxlRG93bkV2ZW50ID0gb3B0aW9ucy5oYW5kbGVEb3duRXZlbnQ7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuaGFuZGxlRHJhZ0V2ZW50KSB7XG4gICAgICB0aGlzLmhhbmRsZURyYWdFdmVudCA9IG9wdGlvbnMuaGFuZGxlRHJhZ0V2ZW50O1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmhhbmRsZU1vdmVFdmVudCkge1xuICAgICAgdGhpcy5oYW5kbGVNb3ZlRXZlbnQgPSBvcHRpb25zLmhhbmRsZU1vdmVFdmVudDtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5oYW5kbGVVcEV2ZW50KSB7XG4gICAgICB0aGlzLmhhbmRsZVVwRXZlbnQgPSBvcHRpb25zLmhhbmRsZVVwRXZlbnQ7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuc3RvcERvd24pIHtcbiAgICAgIHRoaXMuc3RvcERvd24gPSBvcHRpb25zLnN0b3BEb3duO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICB0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vcG9pbnRlci9Qb2ludGVyRXZlbnQuanNcIikuZGVmYXVsdD59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnRyYWNrZWRQb2ludGVyc18gPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9wb2ludGVyL1BvaW50ZXJFdmVudC5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgdGhpcy50YXJnZXRQb2ludGVycyA9IFtdO1xuXG4gIH1cblxuICBpZiAoIEludGVyYWN0aW9uICkgUG9pbnRlckludGVyYWN0aW9uLl9fcHJvdG9fXyA9IEludGVyYWN0aW9uO1xuICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggSW50ZXJhY3Rpb24gJiYgSW50ZXJhY3Rpb24ucHJvdG90eXBlICk7XG4gIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQb2ludGVySW50ZXJhY3Rpb247XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBwb2ludGVyIGRvd24gZXZlbnRzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJQb2ludGVyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIGhhbmRsZURvd25FdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBIYW5kbGUgcG9pbnRlciBkcmFnIGV2ZW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVEcmFnRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge307XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fSBhbmQgbWF5IGNhbGwgaW50b1xuICAgKiBvdGhlciBmdW5jdGlvbnMsIGlmIGV2ZW50IHNlcXVlbmNlcyBsaWtlIGUuZy4gJ2RyYWcnIG9yICdkb3duLXVwJyBldGMuIGFyZVxuICAgKiBkZXRlY3RlZC5cbiAgICogQG92ZXJyaWRlXG4gICAqIEBhcGlcbiAgICovXG4gIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVFdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKCEoLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHR9ICovIChtYXBCcm93c2VyRXZlbnQpLnBvaW50ZXJFdmVudCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHZhciBzdG9wRXZlbnQgPSBmYWxzZTtcbiAgICB0aGlzLnVwZGF0ZVRyYWNrZWRQb2ludGVyc18obWFwQnJvd3NlckV2ZW50KTtcbiAgICBpZiAodGhpcy5oYW5kbGluZ0Rvd25VcFNlcXVlbmNlKSB7XG4gICAgICBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRFJBRykge1xuICAgICAgICB0aGlzLmhhbmRsZURyYWdFdmVudChtYXBCcm93c2VyRXZlbnQpO1xuICAgICAgfSBlbHNlIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCkge1xuICAgICAgICB2YXIgaGFuZGxlZFVwID0gdGhpcy5oYW5kbGVVcEV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgIHRoaXMuaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSA9IGhhbmRsZWRVcCAmJiB0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA+IDA7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJET1dOKSB7XG4gICAgICAgIHZhciBoYW5kbGVkID0gdGhpcy5oYW5kbGVEb3duRXZlbnQobWFwQnJvd3NlckV2ZW50KTtcbiAgICAgICAgaWYgKGhhbmRsZWQpIHtcbiAgICAgICAgICBtYXBCcm93c2VyRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UgPSBoYW5kbGVkO1xuICAgICAgICBzdG9wRXZlbnQgPSB0aGlzLnN0b3BEb3duKGhhbmRsZWQpO1xuICAgICAgfSBlbHNlIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJNT1ZFKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlTW92ZUV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAhc3RvcEV2ZW50O1xuICB9O1xuXG4gIC8qKlxuICAgKiBIYW5kbGUgcG9pbnRlciBtb3ZlIGV2ZW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVNb3ZlRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVNb3ZlRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge307XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBwb2ludGVyIHVwIGV2ZW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gaGFuZGxlVXBFdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIFwiZG93blwiIGV2ZW50cyBzaG91bGQgYmUgcHJvcGFnYXRlZFxuICAgKiB0byBvdGhlciBpbnRlcmFjdGlvbnMgb3Igc2hvdWxkIGJlIHN0b3BwZWQuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaGFuZGxlZCBXYXMgdGhlIGV2ZW50IGhhbmRsZWQgYnkgdGhlIGludGVyYWN0aW9uP1xuICAgKiBAcmV0dXJuIHtib29sZWFufSBTaG91bGQgdGhlIGBkb3duYCBldmVudCBiZSBzdG9wcGVkP1xuICAgKi9cbiAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5zdG9wRG93biA9IGZ1bmN0aW9uIHN0b3BEb3duIChoYW5kbGVkKSB7XG4gICAgcmV0dXJuIGhhbmRsZWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlclBvaW50ZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlLnVwZGF0ZVRyYWNrZWRQb2ludGVyc18gPSBmdW5jdGlvbiB1cGRhdGVUcmFja2VkUG9pbnRlcnNfIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBpZiAoaXNQb2ludGVyRHJhZ2dpbmdFdmVudChtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICB2YXIgZXZlbnQgPSBtYXBCcm93c2VyRXZlbnQucG9pbnRlckV2ZW50O1xuXG4gICAgICB2YXIgaWQgPSBldmVudC5wb2ludGVySWQudG9TdHJpbmcoKTtcbiAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCkge1xuICAgICAgICBkZWxldGUgdGhpcy50cmFja2VkUG9pbnRlcnNfW2lkXTtcbiAgICAgIH0gZWxzZSBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT1cbiAgICAgICAgICBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJET1dOKSB7XG4gICAgICAgIHRoaXMudHJhY2tlZFBvaW50ZXJzX1tpZF0gPSBldmVudDtcbiAgICAgIH0gZWxzZSBpZiAoaWQgaW4gdGhpcy50cmFja2VkUG9pbnRlcnNfKSB7XG4gICAgICAgIC8vIHVwZGF0ZSBvbmx5IHdoZW4gdGhlcmUgd2FzIGEgcG9pbnRlcmRvd24gZXZlbnQgZm9yIHRoaXMgcG9pbnRlclxuICAgICAgICB0aGlzLnRyYWNrZWRQb2ludGVyc19baWRdID0gZXZlbnQ7XG4gICAgICB9XG4gICAgICB0aGlzLnRhcmdldFBvaW50ZXJzID0gZ2V0VmFsdWVzKHRoaXMudHJhY2tlZFBvaW50ZXJzXyk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBQb2ludGVySW50ZXJhY3Rpb247XG59KEludGVyYWN0aW9uKSk7XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4uL3BvaW50ZXIvUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHQ+fSBwb2ludGVyRXZlbnRzIExpc3Qgb2YgZXZlbnRzLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IENlbnRyb2lkIHBpeGVsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2VudHJvaWQocG9pbnRlckV2ZW50cykge1xuICB2YXIgbGVuZ3RoID0gcG9pbnRlckV2ZW50cy5sZW5ndGg7XG4gIHZhciBjbGllbnRYID0gMDtcbiAgdmFyIGNsaWVudFkgPSAwO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgY2xpZW50WCArPSBwb2ludGVyRXZlbnRzW2ldLmNsaWVudFg7XG4gICAgY2xpZW50WSArPSBwb2ludGVyRXZlbnRzW2ldLmNsaWVudFk7XG4gIH1cbiAgcmV0dXJuIFtjbGllbnRYIC8gbGVuZ3RoLCBjbGllbnRZIC8gbGVuZ3RoXTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlclBvaW50ZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBldmVudCBpcyBhIHBvaW50ZXJkb3duLCBwb2ludGVyZHJhZ1xuICogICAgIG9yIHBvaW50ZXJ1cCBldmVudC5cbiAqL1xuZnVuY3Rpb24gaXNQb2ludGVyRHJhZ2dpbmdFdmVudChtYXBCcm93c2VyRXZlbnQpIHtcbiAgdmFyIHR5cGUgPSBtYXBCcm93c2VyRXZlbnQudHlwZTtcbiAgcmV0dXJuIHR5cGUgPT09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRPV04gfHxcbiAgICB0eXBlID09PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJEUkFHIHx8XG4gICAgdHlwZSA9PT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSVVA7XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgUG9pbnRlckludGVyYWN0aW9uO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qb2ludGVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9EcmFnUGFuXG4gKi9cbmltcG9ydCBWaWV3SGludCBmcm9tICcuLi9WaWV3SGludC5qcyc7XG5pbXBvcnQge3NjYWxlIGFzIHNjYWxlQ29vcmRpbmF0ZSwgcm90YXRlIGFzIHJvdGF0ZUNvb3JkaW5hdGUsIGFkZCBhcyBhZGRDb29yZGluYXRlfSBmcm9tICcuLi9jb29yZGluYXRlLmpzJztcbmltcG9ydCB7ZWFzZU91dH0gZnJvbSAnLi4vZWFzaW5nLmpzJztcbmltcG9ydCB7bm9Nb2RpZmllcktleXN9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IHtGQUxTRX0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24sIHtjZW50cm9pZCBhcyBjZW50cm9pZEZyb21Qb2ludGVyc30gZnJvbSAnLi9Qb2ludGVyLmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGEgYm9vbGVhblxuICogdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLlxuICogRGVmYXVsdCBpcyB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb25+bm9Nb2RpZmllcktleXN9LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9LaW5ldGljLmpzXCIpLmRlZmF1bHR9IFtraW5ldGljXSBLaW5ldGljIGluZXJ0aWEgdG8gYXBwbHkgdG8gdGhlIHBhbi5cbiAqL1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHBhbiB0aGUgbWFwIGJ5IGRyYWdnaW5nIHRoZSBtYXAuXG4gKiBAYXBpXG4gKi9cbnZhciBEcmFnUGFuID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoUG9pbnRlckludGVyYWN0aW9uKSB7XG4gIGZ1bmN0aW9uIERyYWdQYW4ob3B0X29wdGlvbnMpIHtcblxuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5jYWxsKHRoaXMsIHtcbiAgICAgIHN0b3BEb3duOiBGQUxTRVxuICAgIH0pO1xuXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9LaW5ldGljLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMua2luZXRpY18gPSBvcHRpb25zLmtpbmV0aWM7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9XG4gICAgICovXG4gICAgdGhpcy5sYXN0Q2VudHJvaWQgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmxhc3RQb2ludGVyc0NvdW50XztcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMucGFubmluZ18gPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBub01vZGlmaWVyS2V5cztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5ub0tpbmV0aWNfID0gZmFsc2U7XG5cbiAgfVxuXG4gIGlmICggUG9pbnRlckludGVyYWN0aW9uICkgRHJhZ1Bhbi5fX3Byb3RvX18gPSBQb2ludGVySW50ZXJhY3Rpb247XG4gIERyYWdQYW4ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUG9pbnRlckludGVyYWN0aW9uICYmIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUgKTtcbiAgRHJhZ1Bhbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBEcmFnUGFuO1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgRHJhZ1Bhbi5wcm90b3R5cGUuaGFuZGxlRHJhZ0V2ZW50ID0gZnVuY3Rpb24gaGFuZGxlRHJhZ0V2ZW50IChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBpZiAoIXRoaXMucGFubmluZ18pIHtcbiAgICAgIHRoaXMucGFubmluZ18gPSB0cnVlO1xuICAgICAgdGhpcy5nZXRNYXAoKS5nZXRWaWV3KCkuc2V0SGludChWaWV3SGludC5JTlRFUkFDVElORywgMSk7XG4gICAgfVxuICAgIHZhciB0YXJnZXRQb2ludGVycyA9IHRoaXMudGFyZ2V0UG9pbnRlcnM7XG4gICAgdmFyIGNlbnRyb2lkID0gY2VudHJvaWRGcm9tUG9pbnRlcnModGFyZ2V0UG9pbnRlcnMpO1xuICAgIGlmICh0YXJnZXRQb2ludGVycy5sZW5ndGggPT0gdGhpcy5sYXN0UG9pbnRlcnNDb3VudF8pIHtcbiAgICAgIGlmICh0aGlzLmtpbmV0aWNfKSB7XG4gICAgICAgIHRoaXMua2luZXRpY18udXBkYXRlKGNlbnRyb2lkWzBdLCBjZW50cm9pZFsxXSk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5sYXN0Q2VudHJvaWQpIHtcbiAgICAgICAgdmFyIGRlbHRhWCA9IHRoaXMubGFzdENlbnRyb2lkWzBdIC0gY2VudHJvaWRbMF07XG4gICAgICAgIHZhciBkZWx0YVkgPSBjZW50cm9pZFsxXSAtIHRoaXMubGFzdENlbnRyb2lkWzFdO1xuICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICB2YXIgY2VudGVyID0gW2RlbHRhWCwgZGVsdGFZXTtcbiAgICAgICAgc2NhbGVDb29yZGluYXRlKGNlbnRlciwgdmlldy5nZXRSZXNvbHV0aW9uKCkpO1xuICAgICAgICByb3RhdGVDb29yZGluYXRlKGNlbnRlciwgdmlldy5nZXRSb3RhdGlvbigpKTtcbiAgICAgICAgYWRkQ29vcmRpbmF0ZShjZW50ZXIsIHZpZXcuZ2V0Q2VudGVyKCkpO1xuICAgICAgICBjZW50ZXIgPSB2aWV3LmNvbnN0cmFpbkNlbnRlcihjZW50ZXIpO1xuICAgICAgICB2aWV3LnNldENlbnRlcihjZW50ZXIpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5raW5ldGljXykge1xuICAgICAgLy8gcmVzZXQgc28gd2UgZG9uJ3Qgb3ZlcmVzdGltYXRlIHRoZSBraW5ldGljIGVuZXJneSBhZnRlclxuICAgICAgLy8gYWZ0ZXIgb25lIGZpbmdlciBkb3duLCB0aW55IGRyYWcsIHNlY29uZCBmaW5nZXIgZG93blxuICAgICAgdGhpcy5raW5ldGljXy5iZWdpbigpO1xuICAgIH1cbiAgICB0aGlzLmxhc3RDZW50cm9pZCA9IGNlbnRyb2lkO1xuICAgIHRoaXMubGFzdFBvaW50ZXJzQ291bnRfID0gdGFyZ2V0UG9pbnRlcnMubGVuZ3RoO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgRHJhZ1Bhbi5wcm90b3R5cGUuaGFuZGxlVXBFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZVVwRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICBpZiAodGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPT09IDApIHtcbiAgICAgIGlmICghdGhpcy5ub0tpbmV0aWNfICYmIHRoaXMua2luZXRpY18gJiYgdGhpcy5raW5ldGljXy5lbmQoKSkge1xuICAgICAgICB2YXIgZGlzdGFuY2UgPSB0aGlzLmtpbmV0aWNfLmdldERpc3RhbmNlKCk7XG4gICAgICAgIHZhciBhbmdsZSA9IHRoaXMua2luZXRpY18uZ2V0QW5nbGUoKTtcbiAgICAgICAgdmFyIGNlbnRlciA9IC8qKiBAdHlwZSB7IWltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gKi8gKHZpZXcuZ2V0Q2VudGVyKCkpO1xuICAgICAgICB2YXIgY2VudGVycHggPSBtYXAuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZShjZW50ZXIpO1xuICAgICAgICB2YXIgZGVzdCA9IG1hcC5nZXRDb29yZGluYXRlRnJvbVBpeGVsKFtcbiAgICAgICAgICBjZW50ZXJweFswXSAtIGRpc3RhbmNlICogTWF0aC5jb3MoYW5nbGUpLFxuICAgICAgICAgIGNlbnRlcnB4WzFdIC0gZGlzdGFuY2UgKiBNYXRoLnNpbihhbmdsZSlcbiAgICAgICAgXSk7XG4gICAgICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgICAgY2VudGVyOiB2aWV3LmNvbnN0cmFpbkNlbnRlcihkZXN0KSxcbiAgICAgICAgICBkdXJhdGlvbjogNTAwLFxuICAgICAgICAgIGVhc2luZzogZWFzZU91dFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnBhbm5pbmdfKSB7XG4gICAgICAgIHRoaXMucGFubmluZ18gPSBmYWxzZTtcbiAgICAgICAgdmlldy5zZXRIaW50KFZpZXdIaW50LklOVEVSQUNUSU5HLCAtMSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmtpbmV0aWNfKSB7XG4gICAgICAgIC8vIHJlc2V0IHNvIHdlIGRvbid0IG92ZXJlc3RpbWF0ZSB0aGUga2luZXRpYyBlbmVyZ3kgYWZ0ZXJcbiAgICAgICAgLy8gYWZ0ZXIgb25lIGZpbmdlciB1cCwgdGlueSBkcmFnLCBzZWNvbmQgZmluZ2VyIHVwXG4gICAgICAgIHRoaXMua2luZXRpY18uYmVnaW4oKTtcbiAgICAgIH1cbiAgICAgIHRoaXMubGFzdENlbnRyb2lkID0gbnVsbDtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIERyYWdQYW4ucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIGhhbmRsZURvd25FdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoID4gMCAmJiB0aGlzLmNvbmRpdGlvbl8obWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICB0aGlzLmxhc3RDZW50cm9pZCA9IG51bGw7XG4gICAgICAvLyBzdG9wIGFueSBjdXJyZW50IGFuaW1hdGlvblxuICAgICAgaWYgKHZpZXcuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgdmlldy5zZXRDZW50ZXIobWFwQnJvd3NlckV2ZW50LmZyYW1lU3RhdGUudmlld1N0YXRlLmNlbnRlcik7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5raW5ldGljXykge1xuICAgICAgICB0aGlzLmtpbmV0aWNfLmJlZ2luKCk7XG4gICAgICB9XG4gICAgICAvLyBObyBraW5ldGljIGFzIHNvb24gYXMgbW9yZSB0aGFuIG9uZSBwb2ludGVyIG9uIHRoZSBzY3JlZW4gaXNcbiAgICAgIC8vIGRldGVjdGVkLiBUaGlzIGlzIHRvIHByZXZlbnQgbmFzdHkgcGFucyBhZnRlciBwaW5jaC5cbiAgICAgIHRoaXMubm9LaW5ldGljXyA9IHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoID4gMTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBEcmFnUGFuO1xufShQb2ludGVySW50ZXJhY3Rpb24pKTtcblxuZXhwb3J0IGRlZmF1bHQgRHJhZ1BhbjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RHJhZ1Bhbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZVxuICovXG5pbXBvcnQge2Rpc2FibGV9IGZyb20gJy4uL3JvdGF0aW9uY29uc3RyYWludC5qcyc7XG5pbXBvcnQgVmlld0hpbnQgZnJvbSAnLi4vVmlld0hpbnQuanMnO1xuaW1wb3J0IHthbHRTaGlmdEtleXNPbmx5LCBtb3VzZU9ubHksIG1vdXNlQWN0aW9uQnV0dG9ufSBmcm9tICcuLi9ldmVudHMvY29uZGl0aW9uLmpzJztcbmltcG9ydCB7RkFMU0V9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQge3JvdGF0ZSwgcm90YXRlV2l0aG91dENvbnN0cmFpbnRzfSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24gZnJvbSAnLi9Qb2ludGVyLmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhblxuICoge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhIGJvb2xlYW5cbiAqIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC5cbiAqIERlZmF1bHQgaXMge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufmFsdFNoaWZ0S2V5c09ubHl9LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0yNTBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byByb3RhdGUgdGhlIG1hcCBieSBjbGlja2luZyBhbmQgZHJhZ2dpbmcgb24gdGhlIG1hcCxcbiAqIG5vcm1hbGx5IGNvbWJpbmVkIHdpdGggYW4ge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufSB0aGF0IGxpbWl0c1xuICogaXQgdG8gd2hlbiB0aGUgYWx0IGFuZCBzaGlmdCBrZXlzIGFyZSBoZWxkIGRvd24uXG4gKlxuICogVGhpcyBpbnRlcmFjdGlvbiBpcyBvbmx5IHN1cHBvcnRlZCBmb3IgbW91c2UgZGV2aWNlcy5cbiAqIEBhcGlcbiAqL1xudmFyIERyYWdSb3RhdGUgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChQb2ludGVySW50ZXJhY3Rpb24pIHtcbiAgZnVuY3Rpb24gRHJhZ1JvdGF0ZShvcHRfb3B0aW9ucykge1xuXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG5cbiAgICBQb2ludGVySW50ZXJhY3Rpb24uY2FsbCh0aGlzLCB7XG4gICAgICBzdG9wRG93bjogRkFMU0VcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBhbHRTaGlmdEtleXNPbmx5O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLmxhc3RBbmdsZV8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuXG4gIH1cblxuICBpZiAoIFBvaW50ZXJJbnRlcmFjdGlvbiApIERyYWdSb3RhdGUuX19wcm90b19fID0gUG9pbnRlckludGVyYWN0aW9uO1xuICBEcmFnUm90YXRlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBvaW50ZXJJbnRlcmFjdGlvbiAmJiBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlICk7XG4gIERyYWdSb3RhdGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRHJhZ1JvdGF0ZTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIERyYWdSb3RhdGUucHJvdG90eXBlLmhhbmRsZURyYWdFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZURyYWdFdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKCFtb3VzZU9ubHkobWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICBpZiAodmlldy5nZXRDb25zdHJhaW50cygpLnJvdGF0aW9uID09PSBkaXNhYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBzaXplID0gbWFwLmdldFNpemUoKTtcbiAgICB2YXIgb2Zmc2V0ID0gbWFwQnJvd3NlckV2ZW50LnBpeGVsO1xuICAgIHZhciB0aGV0YSA9XG4gICAgICAgIE1hdGguYXRhbjIoc2l6ZVsxXSAvIDIgLSBvZmZzZXRbMV0sIG9mZnNldFswXSAtIHNpemVbMF0gLyAyKTtcbiAgICBpZiAodGhpcy5sYXN0QW5nbGVfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciBkZWx0YSA9IHRoZXRhIC0gdGhpcy5sYXN0QW5nbGVfO1xuICAgICAgdmFyIHJvdGF0aW9uID0gdmlldy5nZXRSb3RhdGlvbigpO1xuICAgICAgcm90YXRlV2l0aG91dENvbnN0cmFpbnRzKHZpZXcsIHJvdGF0aW9uIC0gZGVsdGEpO1xuICAgIH1cbiAgICB0aGlzLmxhc3RBbmdsZV8gPSB0aGV0YTtcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgRHJhZ1JvdGF0ZS5wcm90b3R5cGUuaGFuZGxlVXBFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZVVwRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGlmICghbW91c2VPbmx5KG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICB2aWV3LnNldEhpbnQoVmlld0hpbnQuSU5URVJBQ1RJTkcsIC0xKTtcbiAgICB2YXIgcm90YXRpb24gPSB2aWV3LmdldFJvdGF0aW9uKCk7XG4gICAgcm90YXRlKHZpZXcsIHJvdGF0aW9uLCB1bmRlZmluZWQsIHRoaXMuZHVyYXRpb25fKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIERyYWdSb3RhdGUucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIGhhbmRsZURvd25FdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKCFtb3VzZU9ubHkobWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChtb3VzZUFjdGlvbkJ1dHRvbihtYXBCcm93c2VyRXZlbnQpICYmIHRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgIG1hcC5nZXRWaWV3KCkuc2V0SGludChWaWV3SGludC5JTlRFUkFDVElORywgMSk7XG4gICAgICB0aGlzLmxhc3RBbmdsZV8gPSB1bmRlZmluZWQ7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gRHJhZ1JvdGF0ZTtcbn0oUG9pbnRlckludGVyYWN0aW9uKSk7XG5cbmV4cG9ydCBkZWZhdWx0IERyYWdSb3RhdGU7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURyYWdSb3RhdGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9Cb3hcbiAqL1xuXG5pbXBvcnQgRGlzcG9zYWJsZSBmcm9tICcuLi9EaXNwb3NhYmxlLmpzJztcbmltcG9ydCBQb2x5Z29uIGZyb20gJy4uL2dlb20vUG9seWdvbi5qcyc7XG5cbnZhciBSZW5kZXJCb3ggPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChEaXNwb3NhYmxlKSB7XG4gIGZ1bmN0aW9uIFJlbmRlckJveChjbGFzc05hbWUpIHtcbiAgICBEaXNwb3NhYmxlLmNhbGwodGhpcyk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmdlb21ldHJ5XyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7SFRNTERpdkVsZW1lbnR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmVsZW1lbnRfID0gLyoqIEB0eXBlIHtIVE1MRGl2RWxlbWVudH0gKi8gKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTtcbiAgICB0aGlzLmVsZW1lbnRfLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICB0aGlzLmVsZW1lbnRfLmNsYXNzTmFtZSA9ICdvbC1ib3ggJyArIGNsYXNzTmFtZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAqL1xuICAgIHRoaXMubWFwXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgKi9cbiAgICB0aGlzLnN0YXJ0UGl4ZWxfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfVxuICAgICAqL1xuICAgIHRoaXMuZW5kUGl4ZWxfID0gbnVsbDtcblxuICB9XG5cbiAgaWYgKCBEaXNwb3NhYmxlICkgUmVuZGVyQm94Ll9fcHJvdG9fXyA9IERpc3Bvc2FibGU7XG4gIFJlbmRlckJveC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBEaXNwb3NhYmxlICYmIERpc3Bvc2FibGUucHJvdG90eXBlICk7XG4gIFJlbmRlckJveC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBSZW5kZXJCb3g7XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBSZW5kZXJCb3gucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uIGRpc3Bvc2VJbnRlcm5hbCAoKSB7XG4gICAgdGhpcy5zZXRNYXAobnVsbCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBSZW5kZXJCb3gucHJvdG90eXBlLnJlbmRlcl8gPSBmdW5jdGlvbiByZW5kZXJfICgpIHtcbiAgICB2YXIgc3RhcnRQaXhlbCA9IHRoaXMuc3RhcnRQaXhlbF87XG4gICAgdmFyIGVuZFBpeGVsID0gdGhpcy5lbmRQaXhlbF87XG4gICAgdmFyIHB4ID0gJ3B4JztcbiAgICB2YXIgc3R5bGUgPSB0aGlzLmVsZW1lbnRfLnN0eWxlO1xuICAgIHN0eWxlLmxlZnQgPSBNYXRoLm1pbihzdGFydFBpeGVsWzBdLCBlbmRQaXhlbFswXSkgKyBweDtcbiAgICBzdHlsZS50b3AgPSBNYXRoLm1pbihzdGFydFBpeGVsWzFdLCBlbmRQaXhlbFsxXSkgKyBweDtcbiAgICBzdHlsZS53aWR0aCA9IE1hdGguYWJzKGVuZFBpeGVsWzBdIC0gc3RhcnRQaXhlbFswXSkgKyBweDtcbiAgICBzdHlsZS5oZWlnaHQgPSBNYXRoLmFicyhlbmRQaXhlbFsxXSAtIHN0YXJ0UGl4ZWxbMV0pICsgcHg7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAqL1xuICBSZW5kZXJCb3gucHJvdG90eXBlLnNldE1hcCA9IGZ1bmN0aW9uIHNldE1hcCAobWFwKSB7XG4gICAgaWYgKHRoaXMubWFwXykge1xuICAgICAgdGhpcy5tYXBfLmdldE92ZXJsYXlDb250YWluZXIoKS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnRfKTtcbiAgICAgIHZhciBzdHlsZSA9IHRoaXMuZWxlbWVudF8uc3R5bGU7XG4gICAgICBzdHlsZS5sZWZ0ID0gc3R5bGUudG9wID0gc3R5bGUud2lkdGggPSBzdHlsZS5oZWlnaHQgPSAnaW5oZXJpdCc7XG4gICAgfVxuICAgIHRoaXMubWFwXyA9IG1hcDtcbiAgICBpZiAodGhpcy5tYXBfKSB7XG4gICAgICB0aGlzLm1hcF8uZ2V0T3ZlcmxheUNvbnRhaW5lcigpLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudF8pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gc3RhcnRQaXhlbCBTdGFydCBwaXhlbC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gZW5kUGl4ZWwgRW5kIHBpeGVsLlxuICAgKi9cbiAgUmVuZGVyQm94LnByb3RvdHlwZS5zZXRQaXhlbHMgPSBmdW5jdGlvbiBzZXRQaXhlbHMgKHN0YXJ0UGl4ZWwsIGVuZFBpeGVsKSB7XG4gICAgdGhpcy5zdGFydFBpeGVsXyA9IHN0YXJ0UGl4ZWw7XG4gICAgdGhpcy5lbmRQaXhlbF8gPSBlbmRQaXhlbDtcbiAgICB0aGlzLmNyZWF0ZU9yVXBkYXRlR2VvbWV0cnkoKTtcbiAgICB0aGlzLnJlbmRlcl8oKTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBvciB1cGRhdGVzIHRoZSBjYWNoZWQgZ2VvbWV0cnkuXG4gICAqL1xuICBSZW5kZXJCb3gucHJvdG90eXBlLmNyZWF0ZU9yVXBkYXRlR2VvbWV0cnkgPSBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZUdlb21ldHJ5ICgpIHtcbiAgICB2YXIgc3RhcnRQaXhlbCA9IHRoaXMuc3RhcnRQaXhlbF87XG4gICAgdmFyIGVuZFBpeGVsID0gdGhpcy5lbmRQaXhlbF87XG4gICAgdmFyIHBpeGVscyA9IFtcbiAgICAgIHN0YXJ0UGl4ZWwsXG4gICAgICBbc3RhcnRQaXhlbFswXSwgZW5kUGl4ZWxbMV1dLFxuICAgICAgZW5kUGl4ZWwsXG4gICAgICBbZW5kUGl4ZWxbMF0sIHN0YXJ0UGl4ZWxbMV1dXG4gICAgXTtcbiAgICB2YXIgY29vcmRpbmF0ZXMgPSBwaXhlbHMubWFwKHRoaXMubWFwXy5nZXRDb29yZGluYXRlRnJvbVBpeGVsLCB0aGlzLm1hcF8pO1xuICAgIC8vIGNsb3NlIHRoZSBwb2x5Z29uXG4gICAgY29vcmRpbmF0ZXNbNF0gPSBjb29yZGluYXRlc1swXS5zbGljZSgpO1xuICAgIGlmICghdGhpcy5nZW9tZXRyeV8pIHtcbiAgICAgIHRoaXMuZ2VvbWV0cnlfID0gbmV3IFBvbHlnb24oW2Nvb3JkaW5hdGVzXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZ2VvbWV0cnlfLnNldENvb3JkaW5hdGVzKFtjb29yZGluYXRlc10pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9IEdlb21ldHJ5LlxuICAgKi9cbiAgUmVuZGVyQm94LnByb3RvdHlwZS5nZXRHZW9tZXRyeSA9IGZ1bmN0aW9uIGdldEdlb21ldHJ5ICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZW9tZXRyeV87XG4gIH07XG5cbiAgcmV0dXJuIFJlbmRlckJveDtcbn0oRGlzcG9zYWJsZSkpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IFJlbmRlckJveDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Qm94LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9EcmFnQm94XG4gKi9cbi8vIEZJWE1FIGRyYXcgZHJhZyBib3hcbmltcG9ydCBFdmVudCBmcm9tICcuLi9ldmVudHMvRXZlbnQuanMnO1xuaW1wb3J0IHthbHdheXMsIG1vdXNlT25seSwgbW91c2VBY3Rpb25CdXR0b259IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IHtWT0lEfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IFBvaW50ZXJJbnRlcmFjdGlvbiBmcm9tICcuL1BvaW50ZXIuanMnO1xuaW1wb3J0IFJlbmRlckJveCBmcm9tICcuLi9yZW5kZXIvQm94LmpzJztcblxuXG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fSBhbmQgdHdvXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3BpeGVsflBpeGVsfXMgYW5kIHJldHVybnMgYSBge2Jvb2xlYW59YC4gSWYgdGhlIGNvbmRpdGlvbiBpcyBtZXQsXG4gKiB0cnVlIHNob3VsZCBiZSByZXR1cm5lZC5cbiAqIEB0eXBlZGVmIHtmdW5jdGlvbih0aGlzOiA/LCBpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCwgaW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWwsIGltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsKTpib29sZWFufSBFbmRDb25kaXRpb25cbiAqL1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWRyYWdib3gnXSBDU1MgY2xhc3MgbmFtZSBmb3Igc3R5bGluZyB0aGUgYm94LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2NvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0IHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYSBib29sZWFuXG4gKiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuXG4gKiBEZWZhdWx0IGlzIHtAbGluayBvbC9ldmVudHMvY29uZGl0aW9ufmFsd2F5c30uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pbkFyZWE9NjRdIFRoZSBtaW5pbXVtIGFyZWEgb2YgdGhlIGJveCBpbiBwaXhlbCwgdGhpcyB2YWx1ZSBpcyB1c2VkIGJ5IHRoZSBkZWZhdWx0XG4gKiBgYm94RW5kQ29uZGl0aW9uYCBmdW5jdGlvbi5cbiAqIEBwcm9wZXJ0eSB7RW5kQ29uZGl0aW9ufSBbYm94RW5kQ29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCB0d29cbiAqIHtAbGluayBtb2R1bGU6b2wvcGl4ZWx+UGl4ZWx9cyB0byBpbmRpY2F0ZSB3aGV0aGVyIGEgYGJveGVuZGAgZXZlbnQgc2hvdWxkIGJlIGZpcmVkLlxuICogRGVmYXVsdCBpcyBgdHJ1ZWAgaWYgdGhlIGFyZWEgb2YgdGhlIGJveCBpcyBiaWdnZXIgdGhhbiB0aGUgYG1pbkFyZWFgIG9wdGlvbi5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24odGhpczpEcmFnQm94LCBpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCl9IG9uQm94RW5kIENvZGUgdG8gZXhlY3V0ZSBqdXN0XG4gKiBiZWZvcmUgYGJveGVuZGAgaXMgZmlyZWQuXG4gKi9cblxuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbnZhciBEcmFnQm94RXZlbnRUeXBlID0ge1xuICAvKipcbiAgICogVHJpZ2dlcmVkIHVwb24gZHJhZyBib3ggc3RhcnQuXG4gICAqIEBldmVudCBEcmFnQm94RXZlbnQjYm94c3RhcnRcbiAgICogQGFwaVxuICAgKi9cbiAgQk9YU1RBUlQ6ICdib3hzdGFydCcsXG5cbiAgLyoqXG4gICAqIFRyaWdnZXJlZCBvbiBkcmFnIHdoZW4gYm94IGlzIGFjdGl2ZS5cbiAgICogQGV2ZW50IERyYWdCb3hFdmVudCNib3hkcmFnXG4gICAqIEBhcGlcbiAgICovXG4gIEJPWERSQUc6ICdib3hkcmFnJyxcblxuICAvKipcbiAgICogVHJpZ2dlcmVkIHVwb24gZHJhZyBib3ggZW5kLlxuICAgKiBAZXZlbnQgRHJhZ0JveEV2ZW50I2JveGVuZFxuICAgKiBAYXBpXG4gICAqL1xuICBCT1hFTkQ6ICdib3hlbmQnXG59O1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmFnQm94fkRyYWdCb3h9IGluc3RhbmNlcyBhcmUgaW5zdGFuY2VzIG9mXG4gKiB0aGlzIHR5cGUuXG4gKi9cbnZhciBEcmFnQm94RXZlbnQgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChFdmVudCkge1xuICBmdW5jdGlvbiBEcmFnQm94RXZlbnQodHlwZSwgY29vcmRpbmF0ZSwgbWFwQnJvd3NlckV2ZW50KSB7XG4gICAgRXZlbnQuY2FsbCh0aGlzLCB0eXBlKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBjb29yZGluYXRlIG9mIHRoZSBkcmFnIGV2ZW50LlxuICAgICAqIEBjb25zdFxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMuY29vcmRpbmF0ZSA9IGNvb3JkaW5hdGU7XG5cbiAgICAvKipcbiAgICAgKiBAY29uc3RcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMubWFwQnJvd3NlckV2ZW50ID0gbWFwQnJvd3NlckV2ZW50O1xuXG4gIH1cblxuICBpZiAoIEV2ZW50ICkgRHJhZ0JveEV2ZW50Ll9fcHJvdG9fXyA9IEV2ZW50O1xuICBEcmFnQm94RXZlbnQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXZlbnQgJiYgRXZlbnQucHJvdG90eXBlICk7XG4gIERyYWdCb3hFdmVudC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBEcmFnQm94RXZlbnQ7XG5cbiAgcmV0dXJuIERyYWdCb3hFdmVudDtcbn0oRXZlbnQpKTtcblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byBkcmF3IGEgdmVjdG9yIGJveCBieSBjbGlja2luZyBhbmQgZHJhZ2dpbmcgb24gdGhlIG1hcCxcbiAqIG5vcm1hbGx5IGNvbWJpbmVkIHdpdGggYW4ge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufSB0aGF0IGxpbWl0c1xuICogaXQgdG8gd2hlbiB0aGUgc2hpZnQgb3Igb3RoZXIga2V5IGlzIGhlbGQgZG93bi4gVGhpcyBpcyB1c2VkLCBmb3IgZXhhbXBsZSxcbiAqIGZvciB6b29taW5nIHRvIGEgc3BlY2lmaWMgYXJlYSBvZiB0aGUgbWFwXG4gKiAoc2VlIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhZ1pvb21+RHJhZ1pvb219IGFuZFxuICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmFnUm90YXRlQW5kWm9vbX0pLlxuICpcbiAqIFRoaXMgaW50ZXJhY3Rpb24gaXMgb25seSBzdXBwb3J0ZWQgZm9yIG1vdXNlIGRldmljZXMuXG4gKlxuICogQGZpcmVzIERyYWdCb3hFdmVudFxuICogQGFwaVxuICovXG52YXIgRHJhZ0JveCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFBvaW50ZXJJbnRlcmFjdGlvbikge1xuICBmdW5jdGlvbiBEcmFnQm94KG9wdF9vcHRpb25zKSB7XG5cbiAgICBQb2ludGVySW50ZXJhY3Rpb24uY2FsbCh0aGlzKTtcblxuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuXG4gICAgLyoqXG4gICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcmVuZGVyL0JveC5qc1wiKS5kZWZhdWx0fVxuICAgICogQHByaXZhdGVcbiAgICAqL1xuICAgIHRoaXMuYm94XyA9IG5ldyBSZW5kZXJCb3gob3B0aW9ucy5jbGFzc05hbWUgfHwgJ29sLWRyYWdib3gnKTtcblxuICAgIC8qKlxuICAgICogQHR5cGUge251bWJlcn1cbiAgICAqIEBwcml2YXRlXG4gICAgKi9cbiAgICB0aGlzLm1pbkFyZWFfID0gb3B0aW9ucy5taW5BcmVhICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pbkFyZWEgOiA2NDtcblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHRvIGV4ZWN1dGUganVzdCBiZWZvcmUgYG9uYm94ZW5kYCBpcyBmaXJlZFxuICAgICAqIEB0eXBlIHtmdW5jdGlvbih0aGlzOkRyYWdCb3gsIGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMub25Cb3hFbmRfID0gb3B0aW9ucy5vbkJveEVuZCA/IG9wdGlvbnMub25Cb3hFbmQgOiBWT0lEO1xuXG4gICAgLyoqXG4gICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9XG4gICAgKiBAcHJpdmF0ZVxuICAgICovXG4gICAgdGhpcy5zdGFydFBpeGVsXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAqIEBwcml2YXRlXG4gICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259XG4gICAgKi9cbiAgICB0aGlzLmNvbmRpdGlvbl8gPSBvcHRpb25zLmNvbmRpdGlvbiA/IG9wdGlvbnMuY29uZGl0aW9uIDogYWx3YXlzO1xuXG4gICAgLyoqXG4gICAgKiBAcHJpdmF0ZVxuICAgICogQHR5cGUge0VuZENvbmRpdGlvbn1cbiAgICAqL1xuICAgIHRoaXMuYm94RW5kQ29uZGl0aW9uXyA9IG9wdGlvbnMuYm94RW5kQ29uZGl0aW9uID9cbiAgICAgIG9wdGlvbnMuYm94RW5kQ29uZGl0aW9uIDogdGhpcy5kZWZhdWx0Qm94RW5kQ29uZGl0aW9uO1xuICB9XG5cbiAgaWYgKCBQb2ludGVySW50ZXJhY3Rpb24gKSBEcmFnQm94Ll9fcHJvdG9fXyA9IFBvaW50ZXJJbnRlcmFjdGlvbjtcbiAgRHJhZ0JveC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQb2ludGVySW50ZXJhY3Rpb24gJiYgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZSApO1xuICBEcmFnQm94LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IERyYWdCb3g7XG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IGNvbmRpdGlvbiBmb3IgZGV0ZXJtaW5pbmcgd2hldGhlciB0aGUgYm94ZW5kIGV2ZW50XG4gICAqIHNob3VsZCBmaXJlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgVGhlIG9yaWdpbmF0aW5nIE1hcEJyb3dzZXJFdmVudFxuICAgKiAgICAgbGVhZGluZyB0byB0aGUgYm94IGVuZC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gc3RhcnRQaXhlbCBUaGUgc3RhcnRpbmcgcGl4ZWwgb2YgdGhlIGJveC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gZW5kUGl4ZWwgVGhlIGVuZCBwaXhlbCBvZiB0aGUgYm94LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIG9yIG5vdCB0aGUgYm94ZW5kIGNvbmRpdGlvbiBzaG91bGQgYmUgZmlyZWQuXG4gICAqL1xuICBEcmFnQm94LnByb3RvdHlwZS5kZWZhdWx0Qm94RW5kQ29uZGl0aW9uID0gZnVuY3Rpb24gZGVmYXVsdEJveEVuZENvbmRpdGlvbiAobWFwQnJvd3NlckV2ZW50LCBzdGFydFBpeGVsLCBlbmRQaXhlbCkge1xuICAgIHZhciB3aWR0aCA9IGVuZFBpeGVsWzBdIC0gc3RhcnRQaXhlbFswXTtcbiAgICB2YXIgaGVpZ2h0ID0gZW5kUGl4ZWxbMV0gLSBzdGFydFBpeGVsWzFdO1xuICAgIHJldHVybiB3aWR0aCAqIHdpZHRoICsgaGVpZ2h0ICogaGVpZ2h0ID49IHRoaXMubWluQXJlYV87XG4gIH07XG5cbiAgLyoqXG4gICogUmV0dXJucyBnZW9tZXRyeSBvZiBsYXN0IGRyYXduIGJveC5cbiAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdH0gR2VvbWV0cnkuXG4gICogQGFwaVxuICAqL1xuICBEcmFnQm94LnByb3RvdHlwZS5nZXRHZW9tZXRyeSA9IGZ1bmN0aW9uIGdldEdlb21ldHJ5ICgpIHtcbiAgICByZXR1cm4gdGhpcy5ib3hfLmdldEdlb21ldHJ5KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBEcmFnQm94LnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVEcmFnRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGlmICghbW91c2VPbmx5KG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmJveF8uc2V0UGl4ZWxzKHRoaXMuc3RhcnRQaXhlbF8sIG1hcEJyb3dzZXJFdmVudC5waXhlbCk7XG5cbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IERyYWdCb3hFdmVudChEcmFnQm94RXZlbnRUeXBlLkJPWERSQUcsXG4gICAgICBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZSwgbWFwQnJvd3NlckV2ZW50KSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBEcmFnQm94LnByb3RvdHlwZS5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gaGFuZGxlVXBFdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKCFtb3VzZU9ubHkobWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5ib3hfLnNldE1hcChudWxsKTtcblxuICAgIGlmICh0aGlzLmJveEVuZENvbmRpdGlvbl8obWFwQnJvd3NlckV2ZW50LCB0aGlzLnN0YXJ0UGl4ZWxfLCBtYXBCcm93c2VyRXZlbnQucGl4ZWwpKSB7XG4gICAgICB0aGlzLm9uQm94RW5kXyhtYXBCcm93c2VyRXZlbnQpO1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBEcmFnQm94RXZlbnQoRHJhZ0JveEV2ZW50VHlwZS5CT1hFTkQsXG4gICAgICAgIG1hcEJyb3dzZXJFdmVudC5jb29yZGluYXRlLCBtYXBCcm93c2VyRXZlbnQpKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgRHJhZ0JveC5wcm90b3R5cGUuaGFuZGxlRG93bkV2ZW50ID0gZnVuY3Rpb24gaGFuZGxlRG93bkV2ZW50IChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBpZiAoIW1vdXNlT25seShtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKG1vdXNlQWN0aW9uQnV0dG9uKG1hcEJyb3dzZXJFdmVudCkgJiZcbiAgICAgICAgdGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgIHRoaXMuc3RhcnRQaXhlbF8gPSBtYXBCcm93c2VyRXZlbnQucGl4ZWw7XG4gICAgICB0aGlzLmJveF8uc2V0TWFwKG1hcEJyb3dzZXJFdmVudC5tYXApO1xuICAgICAgdGhpcy5ib3hfLnNldFBpeGVscyh0aGlzLnN0YXJ0UGl4ZWxfLCB0aGlzLnN0YXJ0UGl4ZWxfKTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRHJhZ0JveEV2ZW50KERyYWdCb3hFdmVudFR5cGUuQk9YU1RBUlQsXG4gICAgICAgIG1hcEJyb3dzZXJFdmVudC5jb29yZGluYXRlLCBtYXBCcm93c2VyRXZlbnQpKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBEcmFnQm94O1xufShQb2ludGVySW50ZXJhY3Rpb24pKTtcblxuXG5leHBvcnQgZGVmYXVsdCBEcmFnQm94O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1EcmFnQm94LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9EcmFnWm9vbVxuICovXG5pbXBvcnQge2Vhc2VPdXR9IGZyb20gJy4uL2Vhc2luZy5qcyc7XG5pbXBvcnQge3NoaWZ0S2V5T25seX0gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG5pbXBvcnQge2NyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGVzLCBnZXRCb3R0b21MZWZ0LCBnZXRDZW50ZXIsIGdldFRvcFJpZ2h0LCBzY2FsZUZyb21DZW50ZXJ9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgRHJhZ0JveCBmcm9tICcuL0RyYWdCb3guanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWRyYWd6b29tJ10gQ1NTIGNsYXNzIG5hbWUgZm9yIHN0eWxpbmcgdGhlXG4gKiBib3guXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXRcbiAqIHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYm9vbGVhbiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuXG4gKiBEZWZhdWx0IGlzIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn5zaGlmdEtleU9ubHl9LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0yMDBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvdXQ9ZmFsc2VdIFVzZSBpbnRlcmFjdGlvbiBmb3Igem9vbWluZyBvdXQuXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byB6b29tIHRoZSBtYXAgYnkgY2xpY2tpbmcgYW5kIGRyYWdnaW5nIG9uIHRoZSBtYXAsXG4gKiBub3JtYWxseSBjb21iaW5lZCB3aXRoIGFuIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn0gdGhhdCBsaW1pdHNcbiAqIGl0IHRvIHdoZW4gYSBrZXksIHNoaWZ0IGJ5IGRlZmF1bHQsIGlzIGhlbGQgZG93bi5cbiAqXG4gKiBUbyBjaGFuZ2UgdGhlIHN0eWxlIG9mIHRoZSBib3gsIHVzZSBDU1MgYW5kIHRoZSBgLm9sLWRyYWd6b29tYCBzZWxlY3Rvciwgb3JcbiAqIHlvdXIgY3VzdG9tIG9uZSBjb25maWd1cmVkIHdpdGggYGNsYXNzTmFtZWAuXG4gKiBAYXBpXG4gKi9cbnZhciBEcmFnWm9vbSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKERyYWdCb3gpIHtcbiAgZnVuY3Rpb24gRHJhZ1pvb20ob3B0X29wdGlvbnMpIHtcbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcblxuICAgIHZhciBjb25kaXRpb24gPSBvcHRpb25zLmNvbmRpdGlvbiA/IG9wdGlvbnMuY29uZGl0aW9uIDogc2hpZnRLZXlPbmx5O1xuXG4gICAgRHJhZ0JveC5jYWxsKHRoaXMsIHtcbiAgICAgIGNvbmRpdGlvbjogY29uZGl0aW9uLFxuICAgICAgY2xhc3NOYW1lOiBvcHRpb25zLmNsYXNzTmFtZSB8fCAnb2wtZHJhZ3pvb20nLFxuICAgICAgb25Cb3hFbmQ6IG9uQm94RW5kXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLm91dF8gPSBvcHRpb25zLm91dCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5vdXQgOiBmYWxzZTtcbiAgfVxuXG4gIGlmICggRHJhZ0JveCApIERyYWdab29tLl9fcHJvdG9fXyA9IERyYWdCb3g7XG4gIERyYWdab29tLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIERyYWdCb3ggJiYgRHJhZ0JveC5wcm90b3R5cGUgKTtcbiAgRHJhZ1pvb20ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRHJhZ1pvb207XG5cbiAgcmV0dXJuIERyYWdab29tO1xufShEcmFnQm94KSk7XG5cblxuLyoqXG4gKiBAdGhpcyB7RHJhZ1pvb219XG4gKi9cbmZ1bmN0aW9uIG9uQm94RW5kKCkge1xuICB2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgdmFyIHZpZXcgPSAvKiogQHR5cGUgeyFpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLmRlZmF1bHR9ICovIChtYXAuZ2V0VmlldygpKTtcbiAgdmFyIHNpemUgPSAvKiogQHR5cGUgeyFpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9ICovIChtYXAuZ2V0U2l6ZSgpKTtcbiAgdmFyIGV4dGVudCA9IHRoaXMuZ2V0R2VvbWV0cnkoKS5nZXRFeHRlbnQoKTtcblxuICBpZiAodGhpcy5vdXRfKSB7XG4gICAgdmFyIG1hcEV4dGVudCA9IHZpZXcuY2FsY3VsYXRlRXh0ZW50KHNpemUpO1xuICAgIHZhciBib3hQaXhlbEV4dGVudCA9IGNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGVzKFtcbiAgICAgIG1hcC5nZXRQaXhlbEZyb21Db29yZGluYXRlKGdldEJvdHRvbUxlZnQoZXh0ZW50KSksXG4gICAgICBtYXAuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZShnZXRUb3BSaWdodChleHRlbnQpKV0pO1xuICAgIHZhciBmYWN0b3IgPSB2aWV3LmdldFJlc29sdXRpb25Gb3JFeHRlbnQoYm94UGl4ZWxFeHRlbnQsIHNpemUpO1xuXG4gICAgc2NhbGVGcm9tQ2VudGVyKG1hcEV4dGVudCwgMSAvIGZhY3Rvcik7XG4gICAgZXh0ZW50ID0gbWFwRXh0ZW50O1xuICB9XG5cbiAgdmFyIHJlc29sdXRpb24gPSB2aWV3LmNvbnN0cmFpblJlc29sdXRpb24oXG4gICAgdmlldy5nZXRSZXNvbHV0aW9uRm9yRXh0ZW50KGV4dGVudCwgc2l6ZSkpO1xuXG4gIHZhciBjZW50ZXIgPSBnZXRDZW50ZXIoZXh0ZW50KTtcbiAgY2VudGVyID0gdmlldy5jb25zdHJhaW5DZW50ZXIoY2VudGVyKTtcblxuICB2aWV3LmFuaW1hdGUoe1xuICAgIHJlc29sdXRpb246IHJlc29sdXRpb24sXG4gICAgY2VudGVyOiBjZW50ZXIsXG4gICAgZHVyYXRpb246IHRoaXMuZHVyYXRpb25fLFxuICAgIGVhc2luZzogZWFzZU91dFxuICB9KTtcbn1cblxuXG5leHBvcnQgZGVmYXVsdCBEcmFnWm9vbTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RHJhZ1pvb20uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V2ZW50cy9LZXlDb2RlXG4gKi9cblxuLyoqXG4gKiBAZW51bSB7bnVtYmVyfVxuICogQGNvbnN0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgTEVGVDogMzcsXG4gIFVQOiAzOCxcbiAgUklHSFQ6IDM5LFxuICBET1dOOiA0MFxufTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9S2V5Q29kZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRQYW5cbiAqL1xuaW1wb3J0IHtyb3RhdGUgYXMgcm90YXRlQ29vcmRpbmF0ZX0gZnJvbSAnLi4vY29vcmRpbmF0ZS5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IEtleUNvZGUgZnJvbSAnLi4vZXZlbnRzL0tleUNvZGUuanMnO1xuaW1wb3J0IHtub01vZGlmaWVyS2V5cywgdGFyZ2V0Tm90RWRpdGFibGV9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IEludGVyYWN0aW9uLCB7cGFufSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdFxuICogdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhXG4gKiBib29sZWFuIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC4gRGVmYXVsdCBpc1xuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufm5vTW9kaWZpZXJLZXlzfSBhbmRcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn50YXJnZXROb3RFZGl0YWJsZX0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTEwMF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcGl4ZWxEZWx0YT0xMjhdIFRoZSBhbW91bnQgb2YgcGl4ZWxzIHRvIHBhbiBvbiBlYWNoIGtleVxuICogcHJlc3MuXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byBwYW4gdGhlIG1hcCB1c2luZyBrZXlib2FyZCBhcnJvd3MuXG4gKiBOb3RlIHRoYXQsIGFsdGhvdWdoIHRoaXMgaW50ZXJhY3Rpb24gaXMgYnkgZGVmYXVsdCBpbmNsdWRlZCBpbiBtYXBzLFxuICogdGhlIGtleXMgY2FuIG9ubHkgYmUgdXNlZCB3aGVuIGJyb3dzZXIgZm9jdXMgaXMgb24gdGhlIGVsZW1lbnQgdG8gd2hpY2hcbiAqIHRoZSBrZXlib2FyZCBldmVudHMgYXJlIGF0dGFjaGVkLiBCeSBkZWZhdWx0LCB0aGlzIGlzIHRoZSBtYXAgZGl2LFxuICogdGhvdWdoIHlvdSBjYW4gY2hhbmdlIHRoaXMgd2l0aCB0aGUgYGtleWJvYXJkRXZlbnRUYXJnZXRgIGluXG4gKiB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9LiBgZG9jdW1lbnRgIG5ldmVyIGxvc2VzIGZvY3VzIGJ1dCwgZm9yIGFueSBvdGhlclxuICogZWxlbWVudCwgZm9jdXMgd2lsbCBoYXZlIHRvIGJlIG9uLCBhbmQgcmV0dXJuZWQgdG8sIHRoaXMgZWxlbWVudCBpZiB0aGUga2V5c1xuICogYXJlIHRvIGZ1bmN0aW9uLlxuICogU2VlIGFsc28ge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb21+S2V5Ym9hcmRab29tfS5cbiAqIEBhcGlcbiAqL1xudmFyIEtleWJvYXJkUGFuID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoSW50ZXJhY3Rpb24pIHtcbiAgZnVuY3Rpb24gS2V5Ym9hcmRQYW4ob3B0X29wdGlvbnMpIHtcblxuICAgIEludGVyYWN0aW9uLmNhbGwodGhpcywge1xuICAgICAgaGFuZGxlRXZlbnQ6IGhhbmRsZUV2ZW50XG4gICAgfSk7XG5cbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgQnJvd3NlciBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb21iaW5lZCBjb25kaXRpb24gcmVzdWx0LlxuICAgICAqL1xuICAgIHRoaXMuZGVmYXVsdENvbmRpdGlvbl8gPSBmdW5jdGlvbihtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgIHJldHVybiBub01vZGlmaWVyS2V5cyhtYXBCcm93c2VyRXZlbnQpICYmXG4gICAgICAgIHRhcmdldE5vdEVkaXRhYmxlKG1hcEJyb3dzZXJFdmVudCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uICE9PSB1bmRlZmluZWQgP1xuICAgICAgb3B0aW9ucy5jb25kaXRpb24gOiB0aGlzLmRlZmF1bHRDb25kaXRpb25fO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDEwMDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnBpeGVsRGVsdGFfID0gb3B0aW9ucy5waXhlbERlbHRhICE9PSB1bmRlZmluZWQgP1xuICAgICAgb3B0aW9ucy5waXhlbERlbHRhIDogMTI4O1xuXG4gIH1cblxuICBpZiAoIEludGVyYWN0aW9uICkgS2V5Ym9hcmRQYW4uX19wcm90b19fID0gSW50ZXJhY3Rpb247XG4gIEtleWJvYXJkUGFuLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEludGVyYWN0aW9uICYmIEludGVyYWN0aW9uLnByb3RvdHlwZSApO1xuICBLZXlib2FyZFBhbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBLZXlib2FyZFBhbjtcblxuICByZXR1cm4gS2V5Ym9hcmRQYW47XG59KEludGVyYWN0aW9uKSk7XG5cblxuLyoqXG4gKiBIYW5kbGVzIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudCBtYXAgYnJvd3NlciBldmVudH0gaWYgaXQgd2FzIGFcbiAqIGBLZXlFdmVudGAsIGFuZCBkZWNpZGVzIHRoZSBkaXJlY3Rpb24gdG8gcGFuIHRvIChpZiBhbiBhcnJvdyBrZXkgd2FzXG4gKiBwcmVzc2VkKS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAqIEB0aGlzIHtLZXlib2FyZFBhbn1cbiAqL1xuZnVuY3Rpb24gaGFuZGxlRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gIHZhciBzdG9wRXZlbnQgPSBmYWxzZTtcbiAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IEV2ZW50VHlwZS5LRVlET1dOKSB7XG4gICAgdmFyIGtleUV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgIHZhciBrZXlDb2RlID0ga2V5RXZlbnQua2V5Q29kZTtcbiAgICBpZiAodGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkgJiZcbiAgICAgICAgKGtleUNvZGUgPT0gS2V5Q29kZS5ET1dOIHx8XG4gICAgICAgIGtleUNvZGUgPT0gS2V5Q29kZS5MRUZUIHx8XG4gICAgICAgIGtleUNvZGUgPT0gS2V5Q29kZS5SSUdIVCB8fFxuICAgICAgICBrZXlDb2RlID09IEtleUNvZGUuVVApKSB7XG4gICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgIHZhciBtYXBVbml0c0RlbHRhID0gdmlldy5nZXRSZXNvbHV0aW9uKCkgKiB0aGlzLnBpeGVsRGVsdGFfO1xuICAgICAgdmFyIGRlbHRhWCA9IDAsIGRlbHRhWSA9IDA7XG4gICAgICBpZiAoa2V5Q29kZSA9PSBLZXlDb2RlLkRPV04pIHtcbiAgICAgICAgZGVsdGFZID0gLW1hcFVuaXRzRGVsdGE7XG4gICAgICB9IGVsc2UgaWYgKGtleUNvZGUgPT0gS2V5Q29kZS5MRUZUKSB7XG4gICAgICAgIGRlbHRhWCA9IC1tYXBVbml0c0RlbHRhO1xuICAgICAgfSBlbHNlIGlmIChrZXlDb2RlID09IEtleUNvZGUuUklHSFQpIHtcbiAgICAgICAgZGVsdGFYID0gbWFwVW5pdHNEZWx0YTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlbHRhWSA9IG1hcFVuaXRzRGVsdGE7XG4gICAgICB9XG4gICAgICB2YXIgZGVsdGEgPSBbZGVsdGFYLCBkZWx0YVldO1xuICAgICAgcm90YXRlQ29vcmRpbmF0ZShkZWx0YSwgdmlldy5nZXRSb3RhdGlvbigpKTtcbiAgICAgIHBhbih2aWV3LCBkZWx0YSwgdGhpcy5kdXJhdGlvbl8pO1xuICAgICAgbWFwQnJvd3NlckV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBzdG9wRXZlbnQgPSB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gIXN0b3BFdmVudDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgS2V5Ym9hcmRQYW47XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUtleWJvYXJkUGFuLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb21cbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7dGFyZ2V0Tm90RWRpdGFibGV9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IEludGVyYWN0aW9uLCB7em9vbUJ5RGVsdGF9IGZyb20gJy4vSW50ZXJhY3Rpb24uanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0xMDBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXRcbiAqIHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYm9vbGVhbiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuIERlZmF1bHQgaXNcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn50YXJnZXROb3RFZGl0YWJsZX0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2RlbHRhPTFdIFRoZSB6b29tIGxldmVsIGRlbHRhIG9uIGVhY2gga2V5IHByZXNzLlxuICovXG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gem9vbSB0aGUgbWFwIHVzaW5nIGtleWJvYXJkICsgYW5kIC0uXG4gKiBOb3RlIHRoYXQsIGFsdGhvdWdoIHRoaXMgaW50ZXJhY3Rpb24gaXMgYnkgZGVmYXVsdCBpbmNsdWRlZCBpbiBtYXBzLFxuICogdGhlIGtleXMgY2FuIG9ubHkgYmUgdXNlZCB3aGVuIGJyb3dzZXIgZm9jdXMgaXMgb24gdGhlIGVsZW1lbnQgdG8gd2hpY2hcbiAqIHRoZSBrZXlib2FyZCBldmVudHMgYXJlIGF0dGFjaGVkLiBCeSBkZWZhdWx0LCB0aGlzIGlzIHRoZSBtYXAgZGl2LFxuICogdGhvdWdoIHlvdSBjYW4gY2hhbmdlIHRoaXMgd2l0aCB0aGUgYGtleWJvYXJkRXZlbnRUYXJnZXRgIGluXG4gKiB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9LiBgZG9jdW1lbnRgIG5ldmVyIGxvc2VzIGZvY3VzIGJ1dCwgZm9yIGFueSBvdGhlclxuICogZWxlbWVudCwgZm9jdXMgd2lsbCBoYXZlIHRvIGJlIG9uLCBhbmQgcmV0dXJuZWQgdG8sIHRoaXMgZWxlbWVudCBpZiB0aGUga2V5c1xuICogYXJlIHRvIGZ1bmN0aW9uLlxuICogU2VlIGFsc28ge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFBhbn5LZXlib2FyZFBhbn0uXG4gKiBAYXBpXG4gKi9cbnZhciBLZXlib2FyZFpvb20gPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChJbnRlcmFjdGlvbikge1xuICBmdW5jdGlvbiBLZXlib2FyZFpvb20ob3B0X29wdGlvbnMpIHtcblxuICAgIEludGVyYWN0aW9uLmNhbGwodGhpcywge1xuICAgICAgaGFuZGxlRXZlbnQ6IGhhbmRsZUV2ZW50XG4gICAgfSk7XG5cbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiB0YXJnZXROb3RFZGl0YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmRlbHRhXyA9IG9wdGlvbnMuZGVsdGEgPyBvcHRpb25zLmRlbHRhIDogMTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAxMDA7XG5cbiAgfVxuXG4gIGlmICggSW50ZXJhY3Rpb24gKSBLZXlib2FyZFpvb20uX19wcm90b19fID0gSW50ZXJhY3Rpb247XG4gIEtleWJvYXJkWm9vbS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBJbnRlcmFjdGlvbiAmJiBJbnRlcmFjdGlvbi5wcm90b3R5cGUgKTtcbiAgS2V5Ym9hcmRab29tLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEtleWJvYXJkWm9vbTtcblxuICByZXR1cm4gS2V5Ym9hcmRab29tO1xufShJbnRlcmFjdGlvbikpO1xuXG5cbi8qKlxuICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9IGlmIGl0IHdhcyBhXG4gKiBgS2V5RXZlbnRgLCBhbmQgZGVjaWRlcyB3aGV0aGVyIHRvIHpvb20gaW4gb3Igb3V0IChkZXBlbmRpbmcgb24gd2hldGhlciB0aGVcbiAqIGtleSBwcmVzc2VkIHdhcyAnKycgb3IgJy0nKS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAqIEB0aGlzIHtLZXlib2FyZFpvb219XG4gKi9cbmZ1bmN0aW9uIGhhbmRsZUV2ZW50KG1hcEJyb3dzZXJFdmVudCkge1xuICB2YXIgc3RvcEV2ZW50ID0gZmFsc2U7XG4gIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBFdmVudFR5cGUuS0VZRE9XTiB8fFxuICAgICAgbWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gRXZlbnRUeXBlLktFWVBSRVNTKSB7XG4gICAgdmFyIGtleUV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgIHZhciBjaGFyQ29kZSA9IGtleUV2ZW50LmNoYXJDb2RlO1xuICAgIGlmICh0aGlzLmNvbmRpdGlvbl8obWFwQnJvd3NlckV2ZW50KSAmJlxuICAgICAgICAoY2hhckNvZGUgPT0gJysnLmNoYXJDb2RlQXQoMCkgfHwgY2hhckNvZGUgPT0gJy0nLmNoYXJDb2RlQXQoMCkpKSB7XG4gICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgIHZhciBkZWx0YSA9IChjaGFyQ29kZSA9PSAnKycuY2hhckNvZGVBdCgwKSkgPyB0aGlzLmRlbHRhXyA6IC10aGlzLmRlbHRhXztcbiAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgIHpvb21CeURlbHRhKHZpZXcsIGRlbHRhLCB1bmRlZmluZWQsIHRoaXMuZHVyYXRpb25fKTtcbiAgICAgIG1hcEJyb3dzZXJFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgc3RvcEV2ZW50ID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuICFzdG9wRXZlbnQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEtleWJvYXJkWm9vbTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9S2V5Ym9hcmRab29tLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9Nb3VzZVdoZWVsWm9vbVxuICovXG5pbXBvcnQgVmlld0hpbnQgZnJvbSAnLi4vVmlld0hpbnQuanMnO1xuaW1wb3J0IHthbHdheXN9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IHtlYXNlT3V0fSBmcm9tICcuLi9lYXNpbmcuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7REVWSUNFX1BJWEVMX1JBVElPLCBGSVJFRk9YLCBTQUZBUkl9IGZyb20gJy4uL2hhcy5qcyc7XG5pbXBvcnQgSW50ZXJhY3Rpb24sIHt6b29tQnlEZWx0YX0gZnJvbSAnLi9JbnRlcmFjdGlvbi5qcyc7XG5pbXBvcnQge2NsYW1wfSBmcm9tICcuLi9tYXRoLmpzJztcblxuXG4vKipcbiAqIE1heGltdW0gbW91c2Ugd2hlZWwgZGVsdGEuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG52YXIgTUFYX0RFTFRBID0gMTtcblxuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgTW9kZSA9IHtcbiAgVFJBQ0tQQUQ6ICd0cmFja3BhZCcsXG4gIFdIRUVMOiAnd2hlZWwnXG59O1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2NvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0XG4gKiB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGFcbiAqIGJvb2xlYW4gdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLiBEZWZhdWx0IGlzXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb25+YWx3YXlzfS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MjUwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aW1lb3V0PTgwXSBNb3VzZSB3aGVlbCB0aW1lb3V0IGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NvbnN0cmFpblJlc29sdXRpb249ZmFsc2VdIFdoZW4gdXNpbmcgYSB0cmFja3BhZCBvclxuICogbWFnaWMgbW91c2UsIHpvb20gdG8gdGhlIGNsb3Nlc3QgaW50ZWdlciB6b29tIGxldmVsIGFmdGVyIHRoZSBzY3JvbGwgZ2VzdHVyZVxuICogZW5kcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3VzZUFuY2hvcj10cnVlXSBFbmFibGUgem9vbWluZyB1c2luZyB0aGUgbW91c2Unc1xuICogbG9jYXRpb24gYXMgdGhlIGFuY2hvci4gV2hlbiBzZXQgdG8gYGZhbHNlYCwgem9vbWluZyBpbiBhbmQgb3V0IHdpbGwgem9vbSB0b1xuICogdGhlIGNlbnRlciBvZiB0aGUgc2NyZWVuIGluc3RlYWQgb2Ygem9vbWluZyBvbiB0aGUgbW91c2UncyBsb2NhdGlvbi5cbiAqL1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHpvb20gdGhlIG1hcCBieSBzY3JvbGxpbmcgdGhlIG1vdXNlIHdoZWVsLlxuICogQGFwaVxuICovXG52YXIgTW91c2VXaGVlbFpvb20gPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChJbnRlcmFjdGlvbikge1xuICBmdW5jdGlvbiBNb3VzZVdoZWVsWm9vbShvcHRfb3B0aW9ucykge1xuXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG5cbiAgICBJbnRlcmFjdGlvbi5jYWxsKC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9JbnRlcmFjdGlvbi5qc1wiKS5JbnRlcmFjdGlvbk9wdGlvbnN9ICovIHRoaXMsIChvcHRpb25zKSk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kZWx0YV8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDI1MDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnRpbWVvdXRfID0gb3B0aW9ucy50aW1lb3V0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRpbWVvdXQgOiA4MDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy51c2VBbmNob3JfID0gb3B0aW9ucy51c2VBbmNob3IgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudXNlQW5jaG9yIDogdHJ1ZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5jb25zdHJhaW5SZXNvbHV0aW9uXyA9IG9wdGlvbnMuY29uc3RyYWluUmVzb2x1dGlvbiB8fCBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBhbHdheXM7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAqL1xuICAgIHRoaXMubGFzdEFuY2hvcl8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLnN0YXJ0VGltZV8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/fVxuICAgICAqL1xuICAgIHRoaXMudGltZW91dElkXztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge01vZGV8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMubW9kZV8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBUcmFja3BhZCBldmVudHMgc2VwYXJhdGVkIGJ5IHRoaXMgZGVsYXkgd2lsbCBiZSBjb25zaWRlcmVkIHNlcGFyYXRlXG4gICAgICogaW50ZXJhY3Rpb25zLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy50cmFja3BhZEV2ZW50R2FwXyA9IDQwMDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHs/fVxuICAgICAqL1xuICAgIHRoaXMudHJhY2twYWRUaW1lb3V0SWRfO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBkZWx0YSB2YWx1ZXMgcGVyIHpvb20gbGV2ZWxcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy50cmFja3BhZERlbHRhUGVyWm9vbV8gPSAzMDA7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgem9vbSBmYWN0b3IgYnkgd2hpY2ggc2Nyb2xsIHpvb21pbmcgaXMgYWxsb3dlZCB0byBleGNlZWQgdGhlIGxpbWl0cy5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy50cmFja3BhZFpvb21CdWZmZXJfID0gMS41O1xuXG4gIH1cblxuICBpZiAoIEludGVyYWN0aW9uICkgTW91c2VXaGVlbFpvb20uX19wcm90b19fID0gSW50ZXJhY3Rpb247XG4gIE1vdXNlV2hlZWxab29tLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEludGVyYWN0aW9uICYmIEludGVyYWN0aW9uLnByb3RvdHlwZSApO1xuICBNb3VzZVdoZWVsWm9vbS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNb3VzZVdoZWVsWm9vbTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIE1vdXNlV2hlZWxab29tLnByb3RvdHlwZS5kZWNyZW1lbnRJbnRlcmFjdGluZ0hpbnRfID0gZnVuY3Rpb24gZGVjcmVtZW50SW50ZXJhY3RpbmdIaW50XyAoKSB7XG4gICAgdGhpcy50cmFja3BhZFRpbWVvdXRJZF8gPSB1bmRlZmluZWQ7XG4gICAgdmFyIHZpZXcgPSB0aGlzLmdldE1hcCgpLmdldFZpZXcoKTtcbiAgICB2aWV3LnNldEhpbnQoVmlld0hpbnQuSU5URVJBQ1RJTkcsIC0xKTtcbiAgfTtcblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9IChpZiBpdCB3YXMgYSBtb3VzZXdoZWVsLWV2ZW50KSBhbmQgZXZlbnR1YWxseVxuICAgKiB6b29tcyB0aGUgbWFwLlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIE1vdXNlV2hlZWxab29tLnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZUV2ZW50IChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdmFyIHR5cGUgPSBtYXBCcm93c2VyRXZlbnQudHlwZTtcbiAgICBpZiAodHlwZSAhPT0gRXZlbnRUeXBlLldIRUVMICYmIHR5cGUgIT09IEV2ZW50VHlwZS5NT1VTRVdIRUVMKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBtYXBCcm93c2VyRXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgIHZhciB3aGVlbEV2ZW50ID0gLyoqIEB0eXBlIHtXaGVlbEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuXG4gICAgaWYgKHRoaXMudXNlQW5jaG9yXykge1xuICAgICAgdGhpcy5sYXN0QW5jaG9yXyA9IG1hcEJyb3dzZXJFdmVudC5jb29yZGluYXRlO1xuICAgIH1cblxuICAgIC8vIERlbHRhIG5vcm1hbGlzYXRpb24gaW5zcGlyZWQgYnlcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWFwYm94L21hcGJveC1nbC1qcy9ibG9iLzAwMWM3YjkvanMvdWkvaGFuZGxlci9zY3JvbGxfem9vbS5qc1xuICAgIHZhciBkZWx0YTtcbiAgICBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gRXZlbnRUeXBlLldIRUVMKSB7XG4gICAgICBkZWx0YSA9IHdoZWVsRXZlbnQuZGVsdGFZO1xuICAgICAgaWYgKEZJUkVGT1ggJiZcbiAgICAgICAgICB3aGVlbEV2ZW50LmRlbHRhTW9kZSA9PT0gV2hlZWxFdmVudC5ET01fREVMVEFfUElYRUwpIHtcbiAgICAgICAgZGVsdGEgLz0gREVWSUNFX1BJWEVMX1JBVElPO1xuICAgICAgfVxuICAgICAgaWYgKHdoZWVsRXZlbnQuZGVsdGFNb2RlID09PSBXaGVlbEV2ZW50LkRPTV9ERUxUQV9MSU5FKSB7XG4gICAgICAgIGRlbHRhICo9IDQwO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gRXZlbnRUeXBlLk1PVVNFV0hFRUwpIHtcbiAgICAgIGRlbHRhID0gLXdoZWVsRXZlbnQud2hlZWxEZWx0YVk7XG4gICAgICBpZiAoU0FGQVJJKSB7XG4gICAgICAgIGRlbHRhIC89IDM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRlbHRhID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIG5vdyA9IERhdGUubm93KCk7XG5cbiAgICBpZiAodGhpcy5zdGFydFRpbWVfID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuc3RhcnRUaW1lXyA9IG5vdztcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMubW9kZV8gfHwgbm93IC0gdGhpcy5zdGFydFRpbWVfID4gdGhpcy50cmFja3BhZEV2ZW50R2FwXykge1xuICAgICAgdGhpcy5tb2RlXyA9IE1hdGguYWJzKGRlbHRhKSA8IDQgP1xuICAgICAgICBNb2RlLlRSQUNLUEFEIDpcbiAgICAgICAgTW9kZS5XSEVFTDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5tb2RlXyA9PT0gTW9kZS5UUkFDS1BBRCkge1xuICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgaWYgKHRoaXMudHJhY2twYWRUaW1lb3V0SWRfKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRyYWNrcGFkVGltZW91dElkXyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2aWV3LnNldEhpbnQoVmlld0hpbnQuSU5URVJBQ1RJTkcsIDEpO1xuICAgICAgfVxuICAgICAgdGhpcy50cmFja3BhZFRpbWVvdXRJZF8gPSBzZXRUaW1lb3V0KHRoaXMuZGVjcmVtZW50SW50ZXJhY3RpbmdIaW50Xy5iaW5kKHRoaXMpLCB0aGlzLnRyYWNrcGFkRXZlbnRHYXBfKTtcbiAgICAgIHZhciByZXNvbHV0aW9uID0gdmlldy5nZXRSZXNvbHV0aW9uKCkgKiBNYXRoLnBvdygyLCBkZWx0YSAvIHRoaXMudHJhY2twYWREZWx0YVBlclpvb21fKTtcbiAgICAgIHZhciBtaW5SZXNvbHV0aW9uID0gdmlldy5nZXRNaW5SZXNvbHV0aW9uKCk7XG4gICAgICB2YXIgbWF4UmVzb2x1dGlvbiA9IHZpZXcuZ2V0TWF4UmVzb2x1dGlvbigpO1xuICAgICAgdmFyIHJlYm91bmQgPSAwO1xuICAgICAgaWYgKHJlc29sdXRpb24gPCBtaW5SZXNvbHV0aW9uKSB7XG4gICAgICAgIHJlc29sdXRpb24gPSBNYXRoLm1heChyZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uIC8gdGhpcy50cmFja3BhZFpvb21CdWZmZXJfKTtcbiAgICAgICAgcmVib3VuZCA9IDE7XG4gICAgICB9IGVsc2UgaWYgKHJlc29sdXRpb24gPiBtYXhSZXNvbHV0aW9uKSB7XG4gICAgICAgIHJlc29sdXRpb24gPSBNYXRoLm1pbihyZXNvbHV0aW9uLCBtYXhSZXNvbHV0aW9uICogdGhpcy50cmFja3BhZFpvb21CdWZmZXJfKTtcbiAgICAgICAgcmVib3VuZCA9IC0xO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMubGFzdEFuY2hvcl8pIHtcbiAgICAgICAgdmFyIGNlbnRlciA9IHZpZXcuY2FsY3VsYXRlQ2VudGVyWm9vbShyZXNvbHV0aW9uLCB0aGlzLmxhc3RBbmNob3JfKTtcbiAgICAgICAgdmlldy5zZXRDZW50ZXIodmlldy5jb25zdHJhaW5DZW50ZXIoY2VudGVyKSk7XG4gICAgICB9XG4gICAgICB2aWV3LnNldFJlc29sdXRpb24ocmVzb2x1dGlvbik7XG5cbiAgICAgIGlmIChyZWJvdW5kID09PSAwICYmIHRoaXMuY29uc3RyYWluUmVzb2x1dGlvbl8pIHtcbiAgICAgICAgdmlldy5hbmltYXRlKHtcbiAgICAgICAgICByZXNvbHV0aW9uOiB2aWV3LmNvbnN0cmFpblJlc29sdXRpb24ocmVzb2x1dGlvbiwgZGVsdGEgPiAwID8gLTEgOiAxKSxcbiAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgICAgYW5jaG9yOiB0aGlzLmxhc3RBbmNob3JfLFxuICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmR1cmF0aW9uX1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlYm91bmQgPiAwKSB7XG4gICAgICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgICAgcmVzb2x1dGlvbjogbWluUmVzb2x1dGlvbixcbiAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgICAgYW5jaG9yOiB0aGlzLmxhc3RBbmNob3JfLFxuICAgICAgICAgIGR1cmF0aW9uOiA1MDBcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHJlYm91bmQgPCAwKSB7XG4gICAgICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgICAgcmVzb2x1dGlvbjogbWF4UmVzb2x1dGlvbixcbiAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgICAgYW5jaG9yOiB0aGlzLmxhc3RBbmNob3JfLFxuICAgICAgICAgIGR1cmF0aW9uOiA1MDBcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0aGlzLnN0YXJ0VGltZV8gPSBub3c7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdGhpcy5kZWx0YV8gKz0gZGVsdGE7XG5cbiAgICB2YXIgdGltZUxlZnQgPSBNYXRoLm1heCh0aGlzLnRpbWVvdXRfIC0gKG5vdyAtIHRoaXMuc3RhcnRUaW1lXyksIDApO1xuXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dElkXyk7XG4gICAgdGhpcy50aW1lb3V0SWRfID0gc2V0VGltZW91dCh0aGlzLmhhbmRsZVdoZWVsWm9vbV8uYmluZCh0aGlzLCBtYXApLCB0aW1lTGVmdCk7XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAqL1xuICBNb3VzZVdoZWVsWm9vbS5wcm90b3R5cGUuaGFuZGxlV2hlZWxab29tXyA9IGZ1bmN0aW9uIGhhbmRsZVdoZWVsWm9vbV8gKG1hcCkge1xuICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICBpZiAodmlldy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgdmlldy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgfVxuICAgIHZhciBtYXhEZWx0YSA9IE1BWF9ERUxUQTtcbiAgICB2YXIgZGVsdGEgPSBjbGFtcCh0aGlzLmRlbHRhXywgLW1heERlbHRhLCBtYXhEZWx0YSk7XG4gICAgem9vbUJ5RGVsdGEodmlldywgLWRlbHRhLCB0aGlzLmxhc3RBbmNob3JfLCB0aGlzLmR1cmF0aW9uXyk7XG4gICAgdGhpcy5tb2RlXyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmRlbHRhXyA9IDA7XG4gICAgdGhpcy5sYXN0QW5jaG9yXyA9IG51bGw7XG4gICAgdGhpcy5zdGFydFRpbWVfID0gdW5kZWZpbmVkO1xuICAgIHRoaXMudGltZW91dElkXyA9IHVuZGVmaW5lZDtcbiAgfTtcblxuICAvKipcbiAgICogRW5hYmxlIG9yIGRpc2FibGUgdXNpbmcgdGhlIG1vdXNlJ3MgbG9jYXRpb24gYXMgYW4gYW5jaG9yIHdoZW4gem9vbWluZ1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHVzZUFuY2hvciB0cnVlIHRvIHpvb20gdG8gdGhlIG1vdXNlJ3MgbG9jYXRpb24sIGZhbHNlXG4gICAqIHRvIHpvb20gdG8gdGhlIGNlbnRlciBvZiB0aGUgbWFwXG4gICAqIEBhcGlcbiAgICovXG4gIE1vdXNlV2hlZWxab29tLnByb3RvdHlwZS5zZXRNb3VzZUFuY2hvciA9IGZ1bmN0aW9uIHNldE1vdXNlQW5jaG9yICh1c2VBbmNob3IpIHtcbiAgICB0aGlzLnVzZUFuY2hvcl8gPSB1c2VBbmNob3I7XG4gICAgaWYgKCF1c2VBbmNob3IpIHtcbiAgICAgIHRoaXMubGFzdEFuY2hvcl8gPSBudWxsO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gTW91c2VXaGVlbFpvb207XG59KEludGVyYWN0aW9uKSk7XG5cbmV4cG9ydCBkZWZhdWx0IE1vdXNlV2hlZWxab29tO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1Nb3VzZVdoZWVsWm9vbS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vUGluY2hSb3RhdGVcbiAqL1xuaW1wb3J0IFZpZXdIaW50IGZyb20gJy4uL1ZpZXdIaW50LmpzJztcbmltcG9ydCB7RkFMU0V9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQge3JvdGF0ZSwgcm90YXRlV2l0aG91dENvbnN0cmFpbnRzfSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24sIHtjZW50cm9pZCBhcyBjZW50cm9pZEZyb21Qb2ludGVyc30gZnJvbSAnLi9Qb2ludGVyLmpzJztcbmltcG9ydCB7ZGlzYWJsZX0gZnJvbSAnLi4vcm90YXRpb25jb25zdHJhaW50LmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MjUwXSBUaGUgZHVyYXRpb24gb2YgdGhlIGFuaW1hdGlvbiBpblxuICogbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aHJlc2hvbGQ9MC4zXSBNaW5pbWFsIGFuZ2xlIGluIHJhZGlhbnMgdG8gc3RhcnQgYSByb3RhdGlvbi5cbiAqL1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHJvdGF0ZSB0aGUgbWFwIGJ5IHR3aXN0aW5nIHdpdGggdHdvIGZpbmdlcnNcbiAqIG9uIGEgdG91Y2ggc2NyZWVuLlxuICogQGFwaVxuICovXG52YXIgUGluY2hSb3RhdGUgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChQb2ludGVySW50ZXJhY3Rpb24pIHtcbiAgZnVuY3Rpb24gUGluY2hSb3RhdGUob3B0X29wdGlvbnMpIHtcblxuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuXG4gICAgdmFyIHBvaW50ZXJPcHRpb25zID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1BvaW50ZXIuanNcIikuT3B0aW9uc30gKi8gKG9wdGlvbnMpO1xuXG4gICAgaWYgKCFwb2ludGVyT3B0aW9ucy5zdG9wRG93bikge1xuICAgICAgcG9pbnRlck9wdGlvbnMuc3RvcERvd24gPSBGQUxTRTtcbiAgICB9XG5cbiAgICBQb2ludGVySW50ZXJhY3Rpb24uY2FsbCh0aGlzLCBwb2ludGVyT3B0aW9ucyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICovXG4gICAgdGhpcy5hbmNob3JfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy5sYXN0QW5nbGVfID0gdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLnJvdGF0aW5nXyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMucm90YXRpb25EZWx0YV8gPSAwLjA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy50aHJlc2hvbGRfID0gb3B0aW9ucy50aHJlc2hvbGQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudGhyZXNob2xkIDogMC4zO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDI1MDtcblxuICB9XG5cbiAgaWYgKCBQb2ludGVySW50ZXJhY3Rpb24gKSBQaW5jaFJvdGF0ZS5fX3Byb3RvX18gPSBQb2ludGVySW50ZXJhY3Rpb247XG4gIFBpbmNoUm90YXRlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBvaW50ZXJJbnRlcmFjdGlvbiAmJiBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlICk7XG4gIFBpbmNoUm90YXRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBpbmNoUm90YXRlO1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgUGluY2hSb3RhdGUucHJvdG90eXBlLmhhbmRsZURyYWdFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZURyYWdFdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIHJvdGF0aW9uRGVsdGEgPSAwLjA7XG5cbiAgICB2YXIgdG91Y2gwID0gdGhpcy50YXJnZXRQb2ludGVyc1swXTtcbiAgICB2YXIgdG91Y2gxID0gdGhpcy50YXJnZXRQb2ludGVyc1sxXTtcblxuICAgIC8vIGFuZ2xlIGJldHdlZW4gdG91Y2hlc1xuICAgIHZhciBhbmdsZSA9IE1hdGguYXRhbjIoXG4gICAgICB0b3VjaDEuY2xpZW50WSAtIHRvdWNoMC5jbGllbnRZLFxuICAgICAgdG91Y2gxLmNsaWVudFggLSB0b3VjaDAuY2xpZW50WCk7XG5cbiAgICBpZiAodGhpcy5sYXN0QW5nbGVfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciBkZWx0YSA9IGFuZ2xlIC0gdGhpcy5sYXN0QW5nbGVfO1xuICAgICAgdGhpcy5yb3RhdGlvbkRlbHRhXyArPSBkZWx0YTtcbiAgICAgIGlmICghdGhpcy5yb3RhdGluZ18gJiZcbiAgICAgICAgICBNYXRoLmFicyh0aGlzLnJvdGF0aW9uRGVsdGFfKSA+IHRoaXMudGhyZXNob2xkXykge1xuICAgICAgICB0aGlzLnJvdGF0aW5nXyA9IHRydWU7XG4gICAgICB9XG4gICAgICByb3RhdGlvbkRlbHRhID0gZGVsdGE7XG4gICAgfVxuICAgIHRoaXMubGFzdEFuZ2xlXyA9IGFuZ2xlO1xuXG4gICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgIGlmICh2aWV3LmdldENvbnN0cmFpbnRzKCkucm90YXRpb24gPT09IGRpc2FibGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyByb3RhdGUgYW5jaG9yIHBvaW50LlxuICAgIC8vIEZJWE1FOiBzaG91bGQgYmUgdGhlIGludGVyc2VjdGlvbiBwb2ludCBiZXR3ZWVuIHRoZSBsaW5lczpcbiAgICAvLyAgICAgdG91Y2gwLHRvdWNoMSBhbmQgcHJldmlvdXNUb3VjaDAscHJldmlvdXNUb3VjaDFcbiAgICB2YXIgdmlld3BvcnRQb3NpdGlvbiA9IG1hcC5nZXRWaWV3cG9ydCgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHZhciBjZW50cm9pZCA9IGNlbnRyb2lkRnJvbVBvaW50ZXJzKHRoaXMudGFyZ2V0UG9pbnRlcnMpO1xuICAgIGNlbnRyb2lkWzBdIC09IHZpZXdwb3J0UG9zaXRpb24ubGVmdDtcbiAgICBjZW50cm9pZFsxXSAtPSB2aWV3cG9ydFBvc2l0aW9uLnRvcDtcbiAgICB0aGlzLmFuY2hvcl8gPSBtYXAuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbChjZW50cm9pZCk7XG5cbiAgICAvLyByb3RhdGVcbiAgICBpZiAodGhpcy5yb3RhdGluZ18pIHtcbiAgICAgIHZhciByb3RhdGlvbiA9IHZpZXcuZ2V0Um90YXRpb24oKTtcbiAgICAgIG1hcC5yZW5kZXIoKTtcbiAgICAgIHJvdGF0ZVdpdGhvdXRDb25zdHJhaW50cyh2aWV3LCByb3RhdGlvbiArIHJvdGF0aW9uRGVsdGEsIHRoaXMuYW5jaG9yXyk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgUGluY2hSb3RhdGUucHJvdG90eXBlLmhhbmRsZVVwRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVVcEV2ZW50IChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBpZiAodGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPCAyKSB7XG4gICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgIHZpZXcuc2V0SGludChWaWV3SGludC5JTlRFUkFDVElORywgLTEpO1xuICAgICAgaWYgKHRoaXMucm90YXRpbmdfKSB7XG4gICAgICAgIHZhciByb3RhdGlvbiA9IHZpZXcuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgcm90YXRlKHZpZXcsIHJvdGF0aW9uLCB0aGlzLmFuY2hvcl8sIHRoaXMuZHVyYXRpb25fKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgUGluY2hSb3RhdGUucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIGhhbmRsZURvd25FdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoID49IDIpIHtcbiAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgdGhpcy5hbmNob3JfID0gbnVsbDtcbiAgICAgIHRoaXMubGFzdEFuZ2xlXyA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMucm90YXRpbmdfID0gZmFsc2U7XG4gICAgICB0aGlzLnJvdGF0aW9uRGVsdGFfID0gMC4wO1xuICAgICAgaWYgKCF0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UpIHtcbiAgICAgICAgbWFwLmdldFZpZXcoKS5zZXRIaW50KFZpZXdIaW50LklOVEVSQUNUSU5HLCAxKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBQaW5jaFJvdGF0ZTtcbn0oUG9pbnRlckludGVyYWN0aW9uKSk7XG5cbmV4cG9ydCBkZWZhdWx0IFBpbmNoUm90YXRlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1QaW5jaFJvdGF0ZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vUGluY2hab29tXG4gKi9cbmltcG9ydCBWaWV3SGludCBmcm9tICcuLi9WaWV3SGludC5qcyc7XG5pbXBvcnQge0ZBTFNFfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHt6b29tLCB6b29tV2l0aG91dENvbnN0cmFpbnRzfSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24sIHtjZW50cm9pZCBhcyBjZW50cm9pZEZyb21Qb2ludGVyc30gZnJvbSAnLi9Qb2ludGVyLmpzJztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249NDAwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbY29uc3RyYWluUmVzb2x1dGlvbj1mYWxzZV0gWm9vbSB0byB0aGUgY2xvc2VzdCBpbnRlZ2VyXG4gKiB6b29tIGxldmVsIGFmdGVyIHRoZSBwaW5jaCBnZXN0dXJlIGVuZHMuXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byB6b29tIHRoZSBtYXAgYnkgcGluY2hpbmcgd2l0aCB0d28gZmluZ2Vyc1xuICogb24gYSB0b3VjaCBzY3JlZW4uXG4gKiBAYXBpXG4gKi9cbnZhciBQaW5jaFpvb20gPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChQb2ludGVySW50ZXJhY3Rpb24pIHtcbiAgZnVuY3Rpb24gUGluY2hab29tKG9wdF9vcHRpb25zKSB7XG5cbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcblxuICAgIHZhciBwb2ludGVyT3B0aW9ucyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9Qb2ludGVyLmpzXCIpLk9wdGlvbnN9ICovIChvcHRpb25zKTtcblxuICAgIGlmICghcG9pbnRlck9wdGlvbnMuc3RvcERvd24pIHtcbiAgICAgIHBvaW50ZXJPcHRpb25zLnN0b3BEb3duID0gRkFMU0U7XG4gICAgfVxuXG4gICAgUG9pbnRlckludGVyYWN0aW9uLmNhbGwodGhpcywgcG9pbnRlck9wdGlvbnMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmNvbnN0cmFpblJlc29sdXRpb25fID0gb3B0aW9ucy5jb25zdHJhaW5SZXNvbHV0aW9uIHx8IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAqL1xuICAgIHRoaXMuYW5jaG9yXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogNDAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLmxhc3REaXN0YW5jZV8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5sYXN0U2NhbGVEZWx0YV8gPSAxO1xuXG4gIH1cblxuICBpZiAoIFBvaW50ZXJJbnRlcmFjdGlvbiApIFBpbmNoWm9vbS5fX3Byb3RvX18gPSBQb2ludGVySW50ZXJhY3Rpb247XG4gIFBpbmNoWm9vbS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQb2ludGVySW50ZXJhY3Rpb24gJiYgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZSApO1xuICBQaW5jaFpvb20ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUGluY2hab29tO1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgUGluY2hab29tLnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVEcmFnRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBzY2FsZURlbHRhID0gMS4wO1xuXG4gICAgdmFyIHRvdWNoMCA9IHRoaXMudGFyZ2V0UG9pbnRlcnNbMF07XG4gICAgdmFyIHRvdWNoMSA9IHRoaXMudGFyZ2V0UG9pbnRlcnNbMV07XG4gICAgdmFyIGR4ID0gdG91Y2gwLmNsaWVudFggLSB0b3VjaDEuY2xpZW50WDtcbiAgICB2YXIgZHkgPSB0b3VjaDAuY2xpZW50WSAtIHRvdWNoMS5jbGllbnRZO1xuXG4gICAgLy8gZGlzdGFuY2UgYmV0d2VlbiB0b3VjaGVzXG4gICAgdmFyIGRpc3RhbmNlID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcblxuICAgIGlmICh0aGlzLmxhc3REaXN0YW5jZV8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgc2NhbGVEZWx0YSA9IHRoaXMubGFzdERpc3RhbmNlXyAvIGRpc3RhbmNlO1xuICAgIH1cbiAgICB0aGlzLmxhc3REaXN0YW5jZV8gPSBkaXN0YW5jZTtcblxuXG4gICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgIHZhciByZXNvbHV0aW9uID0gdmlldy5nZXRSZXNvbHV0aW9uKCk7XG4gICAgdmFyIG1heFJlc29sdXRpb24gPSB2aWV3LmdldE1heFJlc29sdXRpb24oKTtcbiAgICB2YXIgbWluUmVzb2x1dGlvbiA9IHZpZXcuZ2V0TWluUmVzb2x1dGlvbigpO1xuICAgIHZhciBuZXdSZXNvbHV0aW9uID0gcmVzb2x1dGlvbiAqIHNjYWxlRGVsdGE7XG4gICAgaWYgKG5ld1Jlc29sdXRpb24gPiBtYXhSZXNvbHV0aW9uKSB7XG4gICAgICBzY2FsZURlbHRhID0gbWF4UmVzb2x1dGlvbiAvIHJlc29sdXRpb247XG4gICAgICBuZXdSZXNvbHV0aW9uID0gbWF4UmVzb2x1dGlvbjtcbiAgICB9IGVsc2UgaWYgKG5ld1Jlc29sdXRpb24gPCBtaW5SZXNvbHV0aW9uKSB7XG4gICAgICBzY2FsZURlbHRhID0gbWluUmVzb2x1dGlvbiAvIHJlc29sdXRpb247XG4gICAgICBuZXdSZXNvbHV0aW9uID0gbWluUmVzb2x1dGlvbjtcbiAgICB9XG5cbiAgICBpZiAoc2NhbGVEZWx0YSAhPSAxLjApIHtcbiAgICAgIHRoaXMubGFzdFNjYWxlRGVsdGFfID0gc2NhbGVEZWx0YTtcbiAgICB9XG5cbiAgICAvLyBzY2FsZSBhbmNob3IgcG9pbnQuXG4gICAgdmFyIHZpZXdwb3J0UG9zaXRpb24gPSBtYXAuZ2V0Vmlld3BvcnQoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB2YXIgY2VudHJvaWQgPSBjZW50cm9pZEZyb21Qb2ludGVycyh0aGlzLnRhcmdldFBvaW50ZXJzKTtcbiAgICBjZW50cm9pZFswXSAtPSB2aWV3cG9ydFBvc2l0aW9uLmxlZnQ7XG4gICAgY2VudHJvaWRbMV0gLT0gdmlld3BvcnRQb3NpdGlvbi50b3A7XG4gICAgdGhpcy5hbmNob3JfID0gbWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWwoY2VudHJvaWQpO1xuXG4gICAgLy8gc2NhbGUsIGJ5cGFzcyB0aGUgcmVzb2x1dGlvbiBjb25zdHJhaW50XG4gICAgbWFwLnJlbmRlcigpO1xuICAgIHpvb21XaXRob3V0Q29uc3RyYWludHModmlldywgbmV3UmVzb2x1dGlvbiwgdGhpcy5hbmNob3JfKTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIFBpbmNoWm9vbS5wcm90b3R5cGUuaGFuZGxlVXBFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZVVwRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGlmICh0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA8IDIpIHtcbiAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgdmlldy5zZXRIaW50KFZpZXdIaW50LklOVEVSQUNUSU5HLCAtMSk7XG4gICAgICB2YXIgcmVzb2x1dGlvbiA9IHZpZXcuZ2V0UmVzb2x1dGlvbigpO1xuICAgICAgaWYgKHRoaXMuY29uc3RyYWluUmVzb2x1dGlvbl8gfHxcbiAgICAgICAgICByZXNvbHV0aW9uIDwgdmlldy5nZXRNaW5SZXNvbHV0aW9uKCkgfHxcbiAgICAgICAgICByZXNvbHV0aW9uID4gdmlldy5nZXRNYXhSZXNvbHV0aW9uKCkpIHtcbiAgICAgICAgLy8gWm9vbSB0byBmaW5hbCByZXNvbHV0aW9uLCB3aXRoIGFuIGFuaW1hdGlvbiwgYW5kIHByb3ZpZGUgYVxuICAgICAgICAvLyBkaXJlY3Rpb24gbm90IHRvIHpvb20gb3V0L2luIGlmIHVzZXIgd2FzIHBpbmNoaW5nIGluL291dC5cbiAgICAgICAgLy8gRGlyZWN0aW9uIGlzID4gMCBpZiBwaW5jaGluZyBvdXQsIGFuZCA8IDAgaWYgcGluY2hpbmcgaW4uXG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSB0aGlzLmxhc3RTY2FsZURlbHRhXyAtIDE7XG4gICAgICAgIHpvb20odmlldywgcmVzb2x1dGlvbiwgdGhpcy5hbmNob3JfLCB0aGlzLmR1cmF0aW9uXywgZGlyZWN0aW9uKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgUGluY2hab29tLnByb3RvdHlwZS5oYW5kbGVEb3duRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVEb3duRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGlmICh0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA+PSAyKSB7XG4gICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgIHRoaXMuYW5jaG9yXyA9IG51bGw7XG4gICAgICB0aGlzLmxhc3REaXN0YW5jZV8gPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLmxhc3RTY2FsZURlbHRhXyA9IDE7XG4gICAgICBpZiAoIXRoaXMuaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSkge1xuICAgICAgICBtYXAuZ2V0VmlldygpLnNldEhpbnQoVmlld0hpbnQuSU5URVJBQ1RJTkcsIDEpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFBpbmNoWm9vbTtcbn0oUG9pbnRlckludGVyYWN0aW9uKSk7XG5cbmV4cG9ydCBkZWZhdWx0IFBpbmNoWm9vbTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UGluY2hab29tLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9EcmFnQW5kRHJvcFxuICovXG4vLyBGSVhNRSBzaG91bGQgaGFuZGxlIGFsbCBnZW8tcmVmZXJlbmNlZCBkYXRhLCBub3QganVzdCB2ZWN0b3IgZGF0YVxuXG5pbXBvcnQge1RSVUV9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQge2xpc3RlbiwgdW5saXN0ZW5CeUtleX0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbmltcG9ydCBFdmVudCBmcm9tICcuLi9ldmVudHMvRXZlbnQuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbnRlcmFjdGlvbiBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCB7Z2V0IGFzIGdldFByb2plY3Rpb259IGZyb20gJy4uL3Byb2ouanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtBcnJheTx0eXBlb2YgaW1wb3J0KFwiLi4vZm9ybWF0L0ZlYXR1cmUuanNcIikuZGVmYXVsdD59IFtmb3JtYXRDb25zdHJ1Y3RvcnNdIEZvcm1hdCBjb25zdHJ1Y3RvcnMuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3NvdXJjZS9WZWN0b3IuanNcIikuZGVmYXVsdH0gW3NvdXJjZV0gT3B0aW9uYWwgdmVjdG9yIHNvdXJjZSB3aGVyZSBmZWF0dXJlcyB3aWxsIGJlIGFkZGVkLiAgSWYgYSBzb3VyY2UgaXMgcHJvdmlkZWRcbiAqIGFsbCBleGlzdGluZyBmZWF0dXJlcyB3aWxsIGJlIHJlbW92ZWQgYW5kIG5ldyBmZWF0dXJlcyB3aWxsIGJlIGFkZGVkIHdoZW5cbiAqIHRoZXkgYXJlIGRyb3BwZWQgb24gdGhlIHRhcmdldC4gIElmIHlvdSB3YW50IHRvIGFkZCBmZWF0dXJlcyB0byBhIHZlY3RvclxuICogc291cmNlIHdpdGhvdXQgcmVtb3ZpbmcgdGhlIGV4aXN0aW5nIGZlYXR1cmVzIChhcHBlbmQgb25seSksIGluc3RlYWQgb2ZcbiAqIHByb3ZpZGluZyB0aGUgc291cmNlIG9wdGlvbiBsaXN0ZW4gZm9yIHRoZSBcImFkZGZlYXR1cmVzXCIgZXZlbnQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uXSBUYXJnZXQgcHJvamVjdGlvbi4gQnkgZGVmYXVsdCwgdGhlIG1hcCdzIHZpZXcncyBwcm9qZWN0aW9uIGlzIHVzZWQuXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fSBbdGFyZ2V0XSBUaGUgZWxlbWVudCB0aGF0IGlzIHVzZWQgYXMgdGhlIGRyb3AgdGFyZ2V0LCBkZWZhdWx0IGlzIHRoZSB2aWV3cG9ydCBlbGVtZW50LlxuICovXG5cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG52YXIgRHJhZ0FuZERyb3BFdmVudFR5cGUgPSB7XG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgd2hlbiBmZWF0dXJlcyBhcmUgYWRkZWRcbiAgICogQGV2ZW50IERyYWdBbmREcm9wRXZlbnQjYWRkZmVhdHVyZXNcbiAgICogQGFwaVxuICAgKi9cbiAgQUREX0ZFQVRVUkVTOiAnYWRkZmVhdHVyZXMnXG59O1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmFnQW5kRHJvcH5EcmFnQW5kRHJvcH0gaW5zdGFuY2VzIGFyZSBpbnN0YW5jZXNcbiAqIG9mIHRoaXMgdHlwZS5cbiAqL1xudmFyIERyYWdBbmREcm9wRXZlbnQgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChFdmVudCkge1xuICBmdW5jdGlvbiBEcmFnQW5kRHJvcEV2ZW50KHR5cGUsIGZpbGUsIG9wdF9mZWF0dXJlcywgb3B0X3Byb2plY3Rpb24pIHtcblxuICAgIEV2ZW50LmNhbGwodGhpcywgdHlwZSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZmVhdHVyZXMgcGFyc2VkIGZyb20gZHJvcHBlZCBkYXRhLlxuICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlPnx1bmRlZmluZWR9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMuZmVhdHVyZXMgPSBvcHRfZmVhdHVyZXM7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZHJvcHBlZCBmaWxlLlxuICAgICAqIEB0eXBlIHtGaWxlfVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICB0aGlzLmZpbGUgPSBmaWxlO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGZlYXR1cmUgcHJvamVjdGlvbi5cbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICB0aGlzLnByb2plY3Rpb24gPSBvcHRfcHJvamVjdGlvbjtcblxuICB9XG5cbiAgaWYgKCBFdmVudCApIERyYWdBbmREcm9wRXZlbnQuX19wcm90b19fID0gRXZlbnQ7XG4gIERyYWdBbmREcm9wRXZlbnQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXZlbnQgJiYgRXZlbnQucHJvdG90eXBlICk7XG4gIERyYWdBbmREcm9wRXZlbnQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRHJhZ0FuZERyb3BFdmVudDtcblxuICByZXR1cm4gRHJhZ0FuZERyb3BFdmVudDtcbn0oRXZlbnQpKTtcblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEhhbmRsZXMgaW5wdXQgb2YgdmVjdG9yIGRhdGEgYnkgZHJhZyBhbmQgZHJvcC5cbiAqIEBhcGlcbiAqXG4gKiBAZmlyZXMgRHJhZ0FuZERyb3BFdmVudFxuICovXG52YXIgRHJhZ0FuZERyb3AgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChJbnRlcmFjdGlvbikge1xuICBmdW5jdGlvbiBEcmFnQW5kRHJvcChvcHRfb3B0aW9ucykge1xuXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG5cbiAgICBJbnRlcmFjdGlvbi5jYWxsKHRoaXMsIHtcbiAgICAgIGhhbmRsZUV2ZW50OiBUUlVFXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTx0eXBlb2YgaW1wb3J0KFwiLi4vZm9ybWF0L0ZlYXR1cmUuanNcIikuZGVmYXVsdD59XG4gICAgICovXG4gICAgdGhpcy5mb3JtYXRDb25zdHJ1Y3RvcnNfID0gb3B0aW9ucy5mb3JtYXRDb25zdHJ1Y3RvcnMgP1xuICAgICAgb3B0aW9ucy5mb3JtYXRDb25zdHJ1Y3RvcnMgOiBbXTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fVxuICAgICAqL1xuICAgIHRoaXMucHJvamVjdGlvbl8gPSBvcHRpb25zLnByb2plY3Rpb24gP1xuICAgICAgZ2V0UHJvamVjdGlvbihvcHRpb25zLnByb2plY3Rpb24pIDogbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMuZHJvcExpc3RlbktleXNfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3NvdXJjZS9WZWN0b3IuanNcIikuZGVmYXVsdH1cbiAgICAgKi9cbiAgICB0aGlzLnNvdXJjZV8gPSBvcHRpb25zLnNvdXJjZSB8fCBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICovXG4gICAgdGhpcy50YXJnZXQgPSBvcHRpb25zLnRhcmdldCA/IG9wdGlvbnMudGFyZ2V0IDogbnVsbDtcblxuICB9XG5cbiAgaWYgKCBJbnRlcmFjdGlvbiApIERyYWdBbmREcm9wLl9fcHJvdG9fXyA9IEludGVyYWN0aW9uO1xuICBEcmFnQW5kRHJvcC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBJbnRlcmFjdGlvbiAmJiBJbnRlcmFjdGlvbi5wcm90b3R5cGUgKTtcbiAgRHJhZ0FuZERyb3AucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRHJhZ0FuZERyb3A7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7RmlsZX0gZmlsZSBGaWxlLlxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudCBMb2FkIGV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgRHJhZ0FuZERyb3AucHJvdG90eXBlLmhhbmRsZVJlc3VsdF8gPSBmdW5jdGlvbiBoYW5kbGVSZXN1bHRfIChmaWxlLCBldmVudCkge1xuICAgIHZhciByZXN1bHQgPSBldmVudC50YXJnZXQucmVzdWx0O1xuICAgIHZhciBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgIHZhciBwcm9qZWN0aW9uID0gdGhpcy5wcm9qZWN0aW9uXztcbiAgICBpZiAoIXByb2plY3Rpb24pIHtcbiAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgIHByb2plY3Rpb24gPSB2aWV3LmdldFByb2plY3Rpb24oKTtcbiAgICB9XG5cbiAgICB2YXIgZm9ybWF0Q29uc3RydWN0b3JzID0gdGhpcy5mb3JtYXRDb25zdHJ1Y3RvcnNfO1xuICAgIHZhciBmZWF0dXJlcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGZvcm1hdENvbnN0cnVjdG9ycy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICB2YXIgZm9ybWF0ID0gbmV3IGZvcm1hdENvbnN0cnVjdG9yc1tpXSgpO1xuICAgICAgZmVhdHVyZXMgPSB0aGlzLnRyeVJlYWRGZWF0dXJlc18oZm9ybWF0LCByZXN1bHQsIHtcbiAgICAgICAgZmVhdHVyZVByb2plY3Rpb246IHByb2plY3Rpb25cbiAgICAgIH0pO1xuICAgICAgaWYgKGZlYXR1cmVzICYmIGZlYXR1cmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLnNvdXJjZV8pIHtcbiAgICAgIHRoaXMuc291cmNlXy5jbGVhcigpO1xuICAgICAgdGhpcy5zb3VyY2VfLmFkZEZlYXR1cmVzKGZlYXR1cmVzKTtcbiAgICB9XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KFxuICAgICAgbmV3IERyYWdBbmREcm9wRXZlbnQoXG4gICAgICAgIERyYWdBbmREcm9wRXZlbnRUeXBlLkFERF9GRUFUVVJFUywgZmlsZSxcbiAgICAgICAgZmVhdHVyZXMsIHByb2plY3Rpb24pKTtcbiAgfTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIERyYWdBbmREcm9wLnByb3RvdHlwZS5yZWdpc3Rlckxpc3RlbmVyc18gPSBmdW5jdGlvbiByZWdpc3Rlckxpc3RlbmVyc18gKCkge1xuICAgIHZhciBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgIGlmIChtYXApIHtcbiAgICAgIHZhciBkcm9wQXJlYSA9IHRoaXMudGFyZ2V0ID8gdGhpcy50YXJnZXQgOiBtYXAuZ2V0Vmlld3BvcnQoKTtcbiAgICAgIHRoaXMuZHJvcExpc3RlbktleXNfID0gW1xuICAgICAgICBsaXN0ZW4oZHJvcEFyZWEsIEV2ZW50VHlwZS5EUk9QLCBoYW5kbGVEcm9wLCB0aGlzKSxcbiAgICAgICAgbGlzdGVuKGRyb3BBcmVhLCBFdmVudFR5cGUuRFJBR0VOVEVSLCBoYW5kbGVTdG9wLCB0aGlzKSxcbiAgICAgICAgbGlzdGVuKGRyb3BBcmVhLCBFdmVudFR5cGUuRFJBR09WRVIsIGhhbmRsZVN0b3AsIHRoaXMpLFxuICAgICAgICBsaXN0ZW4oZHJvcEFyZWEsIEV2ZW50VHlwZS5EUk9QLCBoYW5kbGVTdG9wLCB0aGlzKVxuICAgICAgXTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBEcmFnQW5kRHJvcC5wcm90b3R5cGUuc2V0QWN0aXZlID0gZnVuY3Rpb24gc2V0QWN0aXZlIChhY3RpdmUpIHtcbiAgICBJbnRlcmFjdGlvbi5wcm90b3R5cGUuc2V0QWN0aXZlLmNhbGwodGhpcywgYWN0aXZlKTtcbiAgICBpZiAoYWN0aXZlKSB7XG4gICAgICB0aGlzLnJlZ2lzdGVyTGlzdGVuZXJzXygpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnVucmVnaXN0ZXJMaXN0ZW5lcnNfKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgRHJhZ0FuZERyb3AucHJvdG90eXBlLnNldE1hcCA9IGZ1bmN0aW9uIHNldE1hcCAobWFwKSB7XG4gICAgdGhpcy51bnJlZ2lzdGVyTGlzdGVuZXJzXygpO1xuICAgIEludGVyYWN0aW9uLnByb3RvdHlwZS5zZXRNYXAuY2FsbCh0aGlzLCBtYXApO1xuICAgIGlmICh0aGlzLmdldEFjdGl2ZSgpKSB7XG4gICAgICB0aGlzLnJlZ2lzdGVyTGlzdGVuZXJzXygpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9mb3JtYXQvRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmb3JtYXQgRm9ybWF0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUZXh0LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Zvcm1hdC9GZWF0dXJlLmpzXCIpLlJlYWRPcHRpb25zfSBvcHRpb25zIFJlYWQgb3B0aW9ucy5cbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZT59IEZlYXR1cmVzLlxuICAgKi9cbiAgRHJhZ0FuZERyb3AucHJvdG90eXBlLnRyeVJlYWRGZWF0dXJlc18gPSBmdW5jdGlvbiB0cnlSZWFkRmVhdHVyZXNfIChmb3JtYXQsIHRleHQsIG9wdGlvbnMpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGZvcm1hdC5yZWFkRmVhdHVyZXModGV4dCwgb3B0aW9ucyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgRHJhZ0FuZERyb3AucHJvdG90eXBlLnVucmVnaXN0ZXJMaXN0ZW5lcnNfID0gZnVuY3Rpb24gdW5yZWdpc3Rlckxpc3RlbmVyc18gKCkge1xuICAgIGlmICh0aGlzLmRyb3BMaXN0ZW5LZXlzXykge1xuICAgICAgdGhpcy5kcm9wTGlzdGVuS2V5c18uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICAgIHRoaXMuZHJvcExpc3RlbktleXNfID0gbnVsbDtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIERyYWdBbmREcm9wO1xufShJbnRlcmFjdGlvbikpO1xuXG5cbi8qKlxuICogQHBhcmFtIHtEcmFnRXZlbnR9IGV2ZW50IEV2ZW50LlxuICogQHRoaXMge0RyYWdBbmREcm9wfVxuICovXG5mdW5jdGlvbiBoYW5kbGVEcm9wKGV2ZW50KSB7XG4gIHZhciBmaWxlcyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcztcbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gZmlsZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIHZhciBmaWxlID0gZmlsZXMuaXRlbShpKTtcbiAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICByZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuTE9BRCwgdGhpcy5oYW5kbGVSZXN1bHRfLmJpbmQodGhpcywgZmlsZSkpO1xuICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0RyYWdFdmVudH0gZXZlbnQgRXZlbnQuXG4gKi9cbmZ1bmN0aW9uIGhhbmRsZVN0b3AoZXZlbnQpIHtcbiAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIGV2ZW50LmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gJ2NvcHknO1xufVxuXG5cbmV4cG9ydCBkZWZhdWx0IERyYWdBbmREcm9wO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1EcmFnQW5kRHJvcC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZUFuZFpvb21cbiAqL1xuaW1wb3J0IHtkaXNhYmxlfSBmcm9tICcuLi9yb3RhdGlvbmNvbnN0cmFpbnQuanMnO1xuaW1wb3J0IFZpZXdIaW50IGZyb20gJy4uL1ZpZXdIaW50LmpzJztcbmltcG9ydCB7c2hpZnRLZXlPbmx5LCBtb3VzZU9ubHl9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IHtyb3RhdGUsIHJvdGF0ZVdpdGhvdXRDb25zdHJhaW50cywgem9vbSwgem9vbVdpdGhvdXRDb25zdHJhaW50c30gZnJvbSAnLi9JbnRlcmFjdGlvbi5qcyc7XG5pbXBvcnQgUG9pbnRlckludGVyYWN0aW9uIGZyb20gJy4vUG9pbnRlci5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXRcbiAqIHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYm9vbGVhbiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuXG4gKiBEZWZhdWx0IGlzIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn5zaGlmdEtleU9ubHl9LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj00MDBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byB6b29tIGFuZCByb3RhdGUgdGhlIG1hcCBieSBjbGlja2luZyBhbmQgZHJhZ2dpbmdcbiAqIG9uIHRoZSBtYXAuICBCeSBkZWZhdWx0LCB0aGlzIGludGVyYWN0aW9uIGlzIGxpbWl0ZWQgdG8gd2hlbiB0aGUgc2hpZnRcbiAqIGtleSBpcyBoZWxkIGRvd24uXG4gKlxuICogVGhpcyBpbnRlcmFjdGlvbiBpcyBvbmx5IHN1cHBvcnRlZCBmb3IgbW91c2UgZGV2aWNlcy5cbiAqXG4gKiBBbmQgdGhpcyBpbnRlcmFjdGlvbiBpcyBub3QgaW5jbHVkZWQgaW4gdGhlIGRlZmF1bHQgaW50ZXJhY3Rpb25zLlxuICogQGFwaVxuICovXG52YXIgRHJhZ1JvdGF0ZUFuZFpvb20gPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChQb2ludGVySW50ZXJhY3Rpb24pIHtcbiAgZnVuY3Rpb24gRHJhZ1JvdGF0ZUFuZFpvb20ob3B0X29wdGlvbnMpIHtcblxuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuXG4gICAgUG9pbnRlckludGVyYWN0aW9uLmNhbGwoLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1BvaW50ZXIuanNcIikuT3B0aW9uc30gKi8gdGhpcywgKG9wdGlvbnMpKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBzaGlmdEtleU9ubHk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMubGFzdEFuZ2xlXyA9IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy5sYXN0TWFnbml0dWRlXyA9IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmxhc3RTY2FsZURlbHRhXyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogNDAwO1xuXG4gIH1cblxuICBpZiAoIFBvaW50ZXJJbnRlcmFjdGlvbiApIERyYWdSb3RhdGVBbmRab29tLl9fcHJvdG9fXyA9IFBvaW50ZXJJbnRlcmFjdGlvbjtcbiAgRHJhZ1JvdGF0ZUFuZFpvb20ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUG9pbnRlckludGVyYWN0aW9uICYmIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUgKTtcbiAgRHJhZ1JvdGF0ZUFuZFpvb20ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRHJhZ1JvdGF0ZUFuZFpvb207XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBEcmFnUm90YXRlQW5kWm9vbS5wcm90b3R5cGUuaGFuZGxlRHJhZ0V2ZW50ID0gZnVuY3Rpb24gaGFuZGxlRHJhZ0V2ZW50IChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBpZiAoIW1vdXNlT25seShtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgdmFyIHNpemUgPSBtYXAuZ2V0U2l6ZSgpO1xuICAgIHZhciBvZmZzZXQgPSBtYXBCcm93c2VyRXZlbnQucGl4ZWw7XG4gICAgdmFyIGRlbHRhWCA9IG9mZnNldFswXSAtIHNpemVbMF0gLyAyO1xuICAgIHZhciBkZWx0YVkgPSBzaXplWzFdIC8gMiAtIG9mZnNldFsxXTtcbiAgICB2YXIgdGhldGEgPSBNYXRoLmF0YW4yKGRlbHRhWSwgZGVsdGFYKTtcbiAgICB2YXIgbWFnbml0dWRlID0gTWF0aC5zcXJ0KGRlbHRhWCAqIGRlbHRhWCArIGRlbHRhWSAqIGRlbHRhWSk7XG4gICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgIGlmICh2aWV3LmdldENvbnN0cmFpbnRzKCkucm90YXRpb24gIT09IGRpc2FibGUgJiYgdGhpcy5sYXN0QW5nbGVfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciBhbmdsZURlbHRhID0gdGhldGEgLSB0aGlzLmxhc3RBbmdsZV87XG4gICAgICByb3RhdGVXaXRob3V0Q29uc3RyYWludHModmlldywgdmlldy5nZXRSb3RhdGlvbigpIC0gYW5nbGVEZWx0YSk7XG4gICAgfVxuICAgIHRoaXMubGFzdEFuZ2xlXyA9IHRoZXRhO1xuICAgIGlmICh0aGlzLmxhc3RNYWduaXR1ZGVfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5sYXN0TWFnbml0dWRlXyAqICh2aWV3LmdldFJlc29sdXRpb24oKSAvIG1hZ25pdHVkZSk7XG4gICAgICB6b29tV2l0aG91dENvbnN0cmFpbnRzKHZpZXcsIHJlc29sdXRpb24pO1xuICAgIH1cbiAgICBpZiAodGhpcy5sYXN0TWFnbml0dWRlXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmxhc3RTY2FsZURlbHRhXyA9IHRoaXMubGFzdE1hZ25pdHVkZV8gLyBtYWduaXR1ZGU7XG4gICAgfVxuICAgIHRoaXMubGFzdE1hZ25pdHVkZV8gPSBtYWduaXR1ZGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBEcmFnUm90YXRlQW5kWm9vbS5wcm90b3R5cGUuaGFuZGxlVXBFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZVVwRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGlmICghbW91c2VPbmx5KG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICB2aWV3LnNldEhpbnQoVmlld0hpbnQuSU5URVJBQ1RJTkcsIC0xKTtcbiAgICB2YXIgZGlyZWN0aW9uID0gdGhpcy5sYXN0U2NhbGVEZWx0YV8gLSAxO1xuICAgIHJvdGF0ZSh2aWV3LCB2aWV3LmdldFJvdGF0aW9uKCkpO1xuICAgIHpvb20odmlldywgdmlldy5nZXRSZXNvbHV0aW9uKCksIHVuZGVmaW5lZCwgdGhpcy5kdXJhdGlvbl8sIGRpcmVjdGlvbik7XG4gICAgdGhpcy5sYXN0U2NhbGVEZWx0YV8gPSAwO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIERyYWdSb3RhdGVBbmRab29tLnByb3RvdHlwZS5oYW5kbGVEb3duRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVEb3duRXZlbnQgKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGlmICghbW91c2VPbmx5KG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgIG1hcEJyb3dzZXJFdmVudC5tYXAuZ2V0VmlldygpLnNldEhpbnQoVmlld0hpbnQuSU5URVJBQ1RJTkcsIDEpO1xuICAgICAgdGhpcy5sYXN0QW5nbGVfID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5sYXN0TWFnbml0dWRlXyA9IHVuZGVmaW5lZDtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBEcmFnUm90YXRlQW5kWm9vbTtcbn0oUG9pbnRlckludGVyYWN0aW9uKSk7XG5cbmV4cG9ydCBkZWZhdWx0IERyYWdSb3RhdGVBbmRab29tO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1EcmFnUm90YXRlQW5kWm9vbS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9DaXJjbGVcbiAqL1xuaW1wb3J0IHtjcmVhdGVPclVwZGF0ZSwgZm9yRWFjaENvcm5lciwgaW50ZXJzZWN0c30gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSAnLi9HZW9tZXRyeVR5cGUuanMnO1xuaW1wb3J0IFNpbXBsZUdlb21ldHJ5IGZyb20gJy4vU2ltcGxlR2VvbWV0cnkuanMnO1xuaW1wb3J0IHtkZWZsYXRlQ29vcmRpbmF0ZX0gZnJvbSAnLi9mbGF0L2RlZmxhdGUuanMnO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENpcmNsZSBnZW9tZXRyeS5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBDaXJjbGUgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChTaW1wbGVHZW9tZXRyeSkge1xuICBmdW5jdGlvbiBDaXJjbGUoY2VudGVyLCBvcHRfcmFkaXVzLCBvcHRfbGF5b3V0KSB7XG4gICAgU2ltcGxlR2VvbWV0cnkuY2FsbCh0aGlzKTtcbiAgICBpZiAob3B0X2xheW91dCAhPT0gdW5kZWZpbmVkICYmIG9wdF9yYWRpdXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5zZXRGbGF0Q29vcmRpbmF0ZXMob3B0X2xheW91dCwgY2VudGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHJhZGl1cyA9IG9wdF9yYWRpdXMgPyBvcHRfcmFkaXVzIDogMDtcbiAgICAgIHRoaXMuc2V0Q2VudGVyQW5kUmFkaXVzKGNlbnRlciwgcmFkaXVzLCBvcHRfbGF5b3V0KTtcbiAgICB9XG4gIH1cblxuICBpZiAoIFNpbXBsZUdlb21ldHJ5ICkgQ2lyY2xlLl9fcHJvdG9fXyA9IFNpbXBsZUdlb21ldHJ5O1xuICBDaXJjbGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggU2ltcGxlR2VvbWV0cnkgJiYgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlICk7XG4gIENpcmNsZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDaXJjbGU7XG5cbiAgLyoqXG4gICAqIE1ha2UgYSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBnZW9tZXRyeS5cbiAgICogQHJldHVybiB7IUNpcmNsZX0gQ2xvbmUuXG4gICAqIEBvdmVycmlkZVxuICAgKiBAYXBpXG4gICAqL1xuICBDaXJjbGUucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gY2xvbmUgKCkge1xuICAgIHJldHVybiBuZXcgQ2lyY2xlKHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKCksIHVuZGVmaW5lZCwgdGhpcy5sYXlvdXQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2lyY2xlLnByb3RvdHlwZS5jbG9zZXN0UG9pbnRYWSA9IGZ1bmN0aW9uIGNsb3Nlc3RQb2ludFhZICh4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSkge1xuICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmZsYXRDb29yZGluYXRlcztcbiAgICB2YXIgZHggPSB4IC0gZmxhdENvb3JkaW5hdGVzWzBdO1xuICAgIHZhciBkeSA9IHkgLSBmbGF0Q29vcmRpbmF0ZXNbMV07XG4gICAgdmFyIHNxdWFyZWREaXN0YW5jZSA9IGR4ICogZHggKyBkeSAqIGR5O1xuICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPT09IDApIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN0cmlkZTsgKytpKSB7XG4gICAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gZmxhdENvb3JkaW5hdGVzW2ldO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgZGVsdGEgPSB0aGlzLmdldFJhZGl1cygpIC8gTWF0aC5zcXJ0KHNxdWFyZWREaXN0YW5jZSk7XG4gICAgICAgIGNsb3Nlc3RQb2ludFswXSA9IGZsYXRDb29yZGluYXRlc1swXSArIGRlbHRhICogZHg7XG4gICAgICAgIGNsb3Nlc3RQb2ludFsxXSA9IGZsYXRDb29yZGluYXRlc1sxXSArIGRlbHRhICogZHk7XG4gICAgICAgIGZvciAodmFyIGkkMSA9IDI7IGkkMSA8IHRoaXMuc3RyaWRlOyArK2kkMSkge1xuICAgICAgICAgIGNsb3Nlc3RQb2ludFtpJDFdID0gZmxhdENvb3JkaW5hdGVzW2kkMV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSB0aGlzLnN0cmlkZTtcbiAgICAgIHJldHVybiBzcXVhcmVkRGlzdGFuY2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2lyY2xlLnByb3RvdHlwZS5jb250YWluc1hZID0gZnVuY3Rpb24gY29udGFpbnNYWSAoeCwgeSkge1xuICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmZsYXRDb29yZGluYXRlcztcbiAgICB2YXIgZHggPSB4IC0gZmxhdENvb3JkaW5hdGVzWzBdO1xuICAgIHZhciBkeSA9IHkgLSBmbGF0Q29vcmRpbmF0ZXNbMV07XG4gICAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5IDw9IHRoaXMuZ2V0UmFkaXVzU3F1YXJlZF8oKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBjZW50ZXIgb2YgdGhlIGNpcmNsZSBhcyB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZSBjb29yZGluYXRlfS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDZW50ZXIuXG4gICAqIEBhcGlcbiAgICovXG4gIENpcmNsZS5wcm90b3R5cGUuZ2V0Q2VudGVyID0gZnVuY3Rpb24gZ2V0Q2VudGVyICgpIHtcbiAgICByZXR1cm4gdGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoMCwgdGhpcy5zdHJpZGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgQ2lyY2xlLnByb3RvdHlwZS5jb21wdXRlRXh0ZW50ID0gZnVuY3Rpb24gY29tcHV0ZUV4dGVudCAoZXh0ZW50KSB7XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZmxhdENvb3JkaW5hdGVzO1xuICAgIHZhciByYWRpdXMgPSBmbGF0Q29vcmRpbmF0ZXNbdGhpcy5zdHJpZGVdIC0gZmxhdENvb3JkaW5hdGVzWzBdO1xuICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZShcbiAgICAgIGZsYXRDb29yZGluYXRlc1swXSAtIHJhZGl1cywgZmxhdENvb3JkaW5hdGVzWzFdIC0gcmFkaXVzLFxuICAgICAgZmxhdENvb3JkaW5hdGVzWzBdICsgcmFkaXVzLCBmbGF0Q29vcmRpbmF0ZXNbMV0gKyByYWRpdXMsXG4gICAgICBleHRlbnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIHJhZGl1cyBvZiB0aGUgY2lyY2xlLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFJhZGl1cy5cbiAgICogQGFwaVxuICAgKi9cbiAgQ2lyY2xlLnByb3RvdHlwZS5nZXRSYWRpdXMgPSBmdW5jdGlvbiBnZXRSYWRpdXMgKCkge1xuICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy5nZXRSYWRpdXNTcXVhcmVkXygpKTtcbiAgfTtcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybiB7bnVtYmVyfSBSYWRpdXMgc3F1YXJlZC5cbiAgICovXG4gIENpcmNsZS5wcm90b3R5cGUuZ2V0UmFkaXVzU3F1YXJlZF8gPSBmdW5jdGlvbiBnZXRSYWRpdXNTcXVhcmVkXyAoKSB7XG4gICAgdmFyIGR4ID0gdGhpcy5mbGF0Q29vcmRpbmF0ZXNbdGhpcy5zdHJpZGVdIC0gdGhpcy5mbGF0Q29vcmRpbmF0ZXNbMF07XG4gICAgdmFyIGR5ID0gdGhpcy5mbGF0Q29vcmRpbmF0ZXNbdGhpcy5zdHJpZGUgKyAxXSAtIHRoaXMuZmxhdENvb3JkaW5hdGVzWzFdO1xuICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICogQGFwaVxuICAgKi9cbiAgQ2lyY2xlLnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24gZ2V0VHlwZSAoKSB7XG4gICAgcmV0dXJuIEdlb21ldHJ5VHlwZS5DSVJDTEU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqIEBhcGlcbiAgICovXG4gIENpcmNsZS5wcm90b3R5cGUuaW50ZXJzZWN0c0V4dGVudCA9IGZ1bmN0aW9uIGludGVyc2VjdHNFeHRlbnQgKGV4dGVudCkge1xuICAgIHZhciBjaXJjbGVFeHRlbnQgPSB0aGlzLmdldEV4dGVudCgpO1xuICAgIGlmIChpbnRlcnNlY3RzKGV4dGVudCwgY2lyY2xlRXh0ZW50KSkge1xuICAgICAgdmFyIGNlbnRlciA9IHRoaXMuZ2V0Q2VudGVyKCk7XG5cbiAgICAgIGlmIChleHRlbnRbMF0gPD0gY2VudGVyWzBdICYmIGV4dGVudFsyXSA+PSBjZW50ZXJbMF0pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoZXh0ZW50WzFdIDw9IGNlbnRlclsxXSAmJiBleHRlbnRbM10gPj0gY2VudGVyWzFdKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm9yRWFjaENvcm5lcihleHRlbnQsIHRoaXMuaW50ZXJzZWN0c0Nvb3JkaW5hdGUsIHRoaXMpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBjZW50ZXIgb2YgdGhlIGNpcmNsZSBhcyB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZSBjb29yZGluYXRlfS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNlbnRlciBDZW50ZXIuXG4gICAqIEBhcGlcbiAgICovXG4gIENpcmNsZS5wcm90b3R5cGUuc2V0Q2VudGVyID0gZnVuY3Rpb24gc2V0Q2VudGVyIChjZW50ZXIpIHtcbiAgICB2YXIgc3RyaWRlID0gdGhpcy5zdHJpZGU7XG4gICAgdmFyIHJhZGl1cyA9IHRoaXMuZmxhdENvb3JkaW5hdGVzW3N0cmlkZV0gLSB0aGlzLmZsYXRDb29yZGluYXRlc1swXTtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gY2VudGVyLnNsaWNlKCk7XG4gICAgZmxhdENvb3JkaW5hdGVzW3N0cmlkZV0gPSBmbGF0Q29vcmRpbmF0ZXNbMF0gKyByYWRpdXM7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgZmxhdENvb3JkaW5hdGVzW3N0cmlkZSArIGldID0gY2VudGVyW2ldO1xuICAgIH1cbiAgICB0aGlzLnNldEZsYXRDb29yZGluYXRlcyh0aGlzLmxheW91dCwgZmxhdENvb3JkaW5hdGVzKTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBjZW50ZXIgKGFzIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlIGNvb3JkaW5hdGV9KSBhbmQgdGhlIHJhZGl1cyAoYXNcbiAgICogbnVtYmVyKSBvZiB0aGUgY2lyY2xlLlxuICAgKiBAcGFyYW0geyFpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNlbnRlciBDZW50ZXIuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgUmFkaXVzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdD19IG9wdF9sYXlvdXQgTGF5b3V0LlxuICAgKiBAYXBpXG4gICAqL1xuICBDaXJjbGUucHJvdG90eXBlLnNldENlbnRlckFuZFJhZGl1cyA9IGZ1bmN0aW9uIHNldENlbnRlckFuZFJhZGl1cyAoY2VudGVyLCByYWRpdXMsIG9wdF9sYXlvdXQpIHtcbiAgICB0aGlzLnNldExheW91dChvcHRfbGF5b3V0LCBjZW50ZXIsIDApO1xuICAgIGlmICghdGhpcy5mbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgfVxuICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi9cbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5mbGF0Q29vcmRpbmF0ZXM7XG4gICAgdmFyIG9mZnNldCA9IGRlZmxhdGVDb29yZGluYXRlKFxuICAgICAgZmxhdENvb3JkaW5hdGVzLCAwLCBjZW50ZXIsIHRoaXMuc3RyaWRlKTtcbiAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0KytdID0gZmxhdENvb3JkaW5hdGVzWzBdICsgcmFkaXVzO1xuICAgIGZvciAodmFyIGkgPSAxLCBpaSA9IHRoaXMuc3RyaWRlOyBpIDwgaWk7ICsraSkge1xuICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCsrXSA9IGZsYXRDb29yZGluYXRlc1tpXTtcbiAgICB9XG4gICAgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IG9mZnNldDtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIENpcmNsZS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiBnZXRDb29yZGluYXRlcyAoKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBDaXJjbGUucHJvdG90eXBlLnNldENvb3JkaW5hdGVzID0gZnVuY3Rpb24gc2V0Q29vcmRpbmF0ZXMgKGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0KSB7fTtcblxuICAvKipcbiAgICogU2V0IHRoZSByYWRpdXMgb2YgdGhlIGNpcmNsZS4gVGhlIHJhZGl1cyBpcyBpbiB0aGUgdW5pdHMgb2YgdGhlIHByb2plY3Rpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgUmFkaXVzLlxuICAgKiBAYXBpXG4gICAqL1xuICBDaXJjbGUucHJvdG90eXBlLnNldFJhZGl1cyA9IGZ1bmN0aW9uIHNldFJhZGl1cyAocmFkaXVzKSB7XG4gICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXNbdGhpcy5zdHJpZGVdID0gdGhpcy5mbGF0Q29vcmRpbmF0ZXNbMF0gKyByYWRpdXM7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgcmV0dXJuIENpcmNsZTtcbn0oU2ltcGxlR2VvbWV0cnkpKTtcblxuXG4vKipcbiAqIFRyYW5zZm9ybSBlYWNoIGNvb3JkaW5hdGUgb2YgdGhlIGNpcmNsZSBmcm9tIG9uZSBjb29yZGluYXRlIHJlZmVyZW5jZSBzeXN0ZW1cbiAqIHRvIGFub3RoZXIuIFRoZSBnZW9tZXRyeSBpcyBtb2RpZmllZCBpbiBwbGFjZS5cbiAqIElmIHlvdSBkbyBub3Qgd2FudCB0aGUgZ2VvbWV0cnkgbW9kaWZpZWQgaW4gcGxhY2UsIGZpcnN0IGNsb25lKCkgaXQgYW5kXG4gKiB0aGVuIHVzZSB0aGlzIGZ1bmN0aW9uIG9uIHRoZSBjbG9uZS5cbiAqXG4gKiBJbnRlcm5hbGx5IGEgY2lyY2xlIGlzIGN1cnJlbnRseSByZXByZXNlbnRlZCBieSB0d28gcG9pbnRzOiB0aGUgY2VudGVyIG9mXG4gKiB0aGUgY2lyY2xlIGBbY3gsIGN5XWAsIGFuZCB0aGUgcG9pbnQgdG8gdGhlIHJpZ2h0IG9mIHRoZSBjaXJjbGVcbiAqIGBbY3ggKyByLCBjeV1gLiBUaGlzIGB0cmFuc2Zvcm1gIGZ1bmN0aW9uIGp1c3QgdHJhbnNmb3JtcyB0aGVzZSB0d28gcG9pbnRzLlxuICogU28gdGhlIHJlc3VsdGluZyBnZW9tZXRyeSBpcyBhbHNvIGEgY2lyY2xlLCBhbmQgdGhhdCBjaXJjbGUgZG9lcyBub3RcbiAqIGNvcnJlc3BvbmQgdG8gdGhlIHNoYXBlIHRoYXQgd291bGQgYmUgb2J0YWluZWQgYnkgdHJhbnNmb3JtaW5nIGV2ZXJ5IHBvaW50XG4gKiBvZiB0aGUgb3JpZ2luYWwgY2lyY2xlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gc291cmNlIFRoZSBjdXJyZW50IHByb2plY3Rpb24uICBDYW4gYmUgYVxuICogICAgIHN0cmluZyBpZGVudGlmaWVyIG9yIGEge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb25+UHJvamVjdGlvbn0gb2JqZWN0LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBkZXN0aW5hdGlvbiBUaGUgZGVzaXJlZCBwcm9qZWN0aW9uLiAgQ2FuIGJlIGFcbiAqICAgICBzdHJpbmcgaWRlbnRpZmllciBvciBhIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9uflByb2plY3Rpb259IG9iamVjdC5cbiAqIEByZXR1cm4ge0NpcmNsZX0gVGhpcyBnZW9tZXRyeS4gIE5vdGUgdGhhdCBvcmlnaW5hbCBnZW9tZXRyeSBpc1xuICogICAgIG1vZGlmaWVkIGluIHBsYWNlLlxuICogQGZ1bmN0aW9uXG4gKiBAYXBpXG4gKi9cbkNpcmNsZS5wcm90b3R5cGUudHJhbnNmb3JtO1xuZXhwb3J0IGRlZmF1bHQgQ2lyY2xlO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1DaXJjbGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9pbnRlcnBvbGF0ZVxuICovXG5pbXBvcnQge2JpbmFyeVNlYXJjaH0gZnJvbSAnLi4vLi4vYXJyYXkuanMnO1xuaW1wb3J0IHtsZXJwfSBmcm9tICcuLi8uLi9tYXRoLmpzJztcblxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gZnJhY3Rpb24gRnJhY3Rpb24uXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj49fSBvcHRfZGVzdCBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IERlc3RpbmF0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJwb2xhdGVQb2ludChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGZyYWN0aW9uLCBvcHRfZGVzdCkge1xuICB2YXIgcG9pbnRYID0gTmFOO1xuICB2YXIgcG9pbnRZID0gTmFOO1xuICB2YXIgbiA9IChlbmQgLSBvZmZzZXQpIC8gc3RyaWRlO1xuICBpZiAobiA9PT0gMSkge1xuICAgIHBvaW50WCA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgIHBvaW50WSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgfSBlbHNlIGlmIChuID09IDIpIHtcbiAgICBwb2ludFggPSAoMSAtIGZyYWN0aW9uKSAqIGZsYXRDb29yZGluYXRlc1tvZmZzZXRdICtcbiAgICAgICAgZnJhY3Rpb24gKiBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgc3RyaWRlXTtcbiAgICBwb2ludFkgPSAoMSAtIGZyYWN0aW9uKSAqIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXSArXG4gICAgICAgIGZyYWN0aW9uICogZmxhdENvb3JkaW5hdGVzW29mZnNldCArIHN0cmlkZSArIDFdO1xuICB9IGVsc2UgaWYgKG4gIT09IDApIHtcbiAgICB2YXIgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgdmFyIGxlbmd0aCA9IDA7XG4gICAgdmFyIGN1bXVsYXRpdmVMZW5ndGhzID0gWzBdO1xuICAgIGZvciAodmFyIGkgPSBvZmZzZXQgKyBzdHJpZGU7IGkgPCBlbmQ7IGkgKz0gc3RyaWRlKSB7XG4gICAgICB2YXIgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbaV07XG4gICAgICB2YXIgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdO1xuICAgICAgbGVuZ3RoICs9IE1hdGguc3FydCgoeDIgLSB4MSkgKiAoeDIgLSB4MSkgKyAoeTIgLSB5MSkgKiAoeTIgLSB5MSkpO1xuICAgICAgY3VtdWxhdGl2ZUxlbmd0aHMucHVzaChsZW5ndGgpO1xuICAgICAgeDEgPSB4MjtcbiAgICAgIHkxID0geTI7XG4gICAgfVxuICAgIHZhciB0YXJnZXQgPSBmcmFjdGlvbiAqIGxlbmd0aDtcbiAgICB2YXIgaW5kZXggPSBiaW5hcnlTZWFyY2goY3VtdWxhdGl2ZUxlbmd0aHMsIHRhcmdldCk7XG4gICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgdmFyIHQgPSAodGFyZ2V0IC0gY3VtdWxhdGl2ZUxlbmd0aHNbLWluZGV4IC0gMl0pIC9cbiAgICAgICAgICAoY3VtdWxhdGl2ZUxlbmd0aHNbLWluZGV4IC0gMV0gLSBjdW11bGF0aXZlTGVuZ3Roc1staW5kZXggLSAyXSk7XG4gICAgICB2YXIgbyA9IG9mZnNldCArICgtaW5kZXggLSAyKSAqIHN0cmlkZTtcbiAgICAgIHBvaW50WCA9IGxlcnAoXG4gICAgICAgIGZsYXRDb29yZGluYXRlc1tvXSwgZmxhdENvb3JkaW5hdGVzW28gKyBzdHJpZGVdLCB0KTtcbiAgICAgIHBvaW50WSA9IGxlcnAoXG4gICAgICAgIGZsYXRDb29yZGluYXRlc1tvICsgMV0sIGZsYXRDb29yZGluYXRlc1tvICsgc3RyaWRlICsgMV0sIHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwb2ludFggPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgaW5kZXggKiBzdHJpZGVdO1xuICAgICAgcG9pbnRZID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGluZGV4ICogc3RyaWRlICsgMV07XG4gICAgfVxuICB9XG4gIGlmIChvcHRfZGVzdCkge1xuICAgIG9wdF9kZXN0WzBdID0gcG9pbnRYO1xuICAgIG9wdF9kZXN0WzFdID0gcG9pbnRZO1xuICAgIHJldHVybiBvcHRfZGVzdDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gW3BvaW50WCwgcG9pbnRZXTtcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtIE0uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGV4dHJhcG9sYXRlIEV4dHJhcG9sYXRlLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDb29yZGluYXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZVN0cmluZ0Nvb3JkaW5hdGVBdE0oZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBtLCBleHRyYXBvbGF0ZSkge1xuICBpZiAoZW5kID09IG9mZnNldCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHZhciBjb29yZGluYXRlO1xuICBpZiAobSA8IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBzdHJpZGUgLSAxXSkge1xuICAgIGlmIChleHRyYXBvbGF0ZSkge1xuICAgICAgY29vcmRpbmF0ZSA9IGZsYXRDb29yZGluYXRlcy5zbGljZShvZmZzZXQsIG9mZnNldCArIHN0cmlkZSk7XG4gICAgICBjb29yZGluYXRlW3N0cmlkZSAtIDFdID0gbTtcbiAgICAgIHJldHVybiBjb29yZGluYXRlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0gZWxzZSBpZiAoZmxhdENvb3JkaW5hdGVzW2VuZCAtIDFdIDwgbSkge1xuICAgIGlmIChleHRyYXBvbGF0ZSkge1xuICAgICAgY29vcmRpbmF0ZSA9IGZsYXRDb29yZGluYXRlcy5zbGljZShlbmQgLSBzdHJpZGUsIGVuZCk7XG4gICAgICBjb29yZGluYXRlW3N0cmlkZSAtIDFdID0gbTtcbiAgICAgIHJldHVybiBjb29yZGluYXRlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbiAgLy8gRklYTUUgdXNlIE8oMSkgc2VhcmNoXG4gIGlmIChtID09IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBzdHJpZGUgLSAxXSkge1xuICAgIHJldHVybiBmbGF0Q29vcmRpbmF0ZXMuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBzdHJpZGUpO1xuICB9XG4gIHZhciBsbyA9IG9mZnNldCAvIHN0cmlkZTtcbiAgdmFyIGhpID0gZW5kIC8gc3RyaWRlO1xuICB3aGlsZSAobG8gPCBoaSkge1xuICAgIHZhciBtaWQgPSAobG8gKyBoaSkgPj4gMTtcbiAgICBpZiAobSA8IGZsYXRDb29yZGluYXRlc1sobWlkICsgMSkgKiBzdHJpZGUgLSAxXSkge1xuICAgICAgaGkgPSBtaWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvID0gbWlkICsgMTtcbiAgICB9XG4gIH1cbiAgdmFyIG0wID0gZmxhdENvb3JkaW5hdGVzW2xvICogc3RyaWRlIC0gMV07XG4gIGlmIChtID09IG0wKSB7XG4gICAgcmV0dXJuIGZsYXRDb29yZGluYXRlcy5zbGljZSgobG8gLSAxKSAqIHN0cmlkZSwgKGxvIC0gMSkgKiBzdHJpZGUgKyBzdHJpZGUpO1xuICB9XG4gIHZhciBtMSA9IGZsYXRDb29yZGluYXRlc1sobG8gKyAxKSAqIHN0cmlkZSAtIDFdO1xuICB2YXIgdCA9IChtIC0gbTApIC8gKG0xIC0gbTApO1xuICBjb29yZGluYXRlID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyaWRlIC0gMTsgKytpKSB7XG4gICAgY29vcmRpbmF0ZS5wdXNoKGxlcnAoZmxhdENvb3JkaW5hdGVzWyhsbyAtIDEpICogc3RyaWRlICsgaV0sXG4gICAgICBmbGF0Q29vcmRpbmF0ZXNbbG8gKiBzdHJpZGUgKyBpXSwgdCkpO1xuICB9XG4gIGNvb3JkaW5hdGUucHVzaChtKTtcbiAgcmV0dXJuIGNvb3JkaW5hdGU7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IG0gTS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gZXh0cmFwb2xhdGUgRXh0cmFwb2xhdGUuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGludGVycG9sYXRlIEludGVycG9sYXRlLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDb29yZGluYXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZVN0cmluZ3NDb29yZGluYXRlQXRNKFxuICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBtLCBleHRyYXBvbGF0ZSwgaW50ZXJwb2xhdGUpIHtcbiAgaWYgKGludGVycG9sYXRlKSB7XG4gICAgcmV0dXJuIGxpbmVTdHJpbmdDb29yZGluYXRlQXRNKFxuICAgICAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNbZW5kcy5sZW5ndGggLSAxXSwgc3RyaWRlLCBtLCBleHRyYXBvbGF0ZSk7XG4gIH1cbiAgdmFyIGNvb3JkaW5hdGU7XG4gIGlmIChtIDwgZmxhdENvb3JkaW5hdGVzW3N0cmlkZSAtIDFdKSB7XG4gICAgaWYgKGV4dHJhcG9sYXRlKSB7XG4gICAgICBjb29yZGluYXRlID0gZmxhdENvb3JkaW5hdGVzLnNsaWNlKDAsIHN0cmlkZSk7XG4gICAgICBjb29yZGluYXRlW3N0cmlkZSAtIDFdID0gbTtcbiAgICAgIHJldHVybiBjb29yZGluYXRlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbiAgaWYgKGZsYXRDb29yZGluYXRlc1tmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoIC0gMV0gPCBtKSB7XG4gICAgaWYgKGV4dHJhcG9sYXRlKSB7XG4gICAgICBjb29yZGluYXRlID0gZmxhdENvb3JkaW5hdGVzLnNsaWNlKGZsYXRDb29yZGluYXRlcy5sZW5ndGggLSBzdHJpZGUpO1xuICAgICAgY29vcmRpbmF0ZVtzdHJpZGUgLSAxXSA9IG07XG4gICAgICByZXR1cm4gY29vcmRpbmF0ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgIGlmIChvZmZzZXQgPT0gZW5kKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKG0gPCBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgc3RyaWRlIC0gMV0pIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSBpZiAobSA8PSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gMV0pIHtcbiAgICAgIHJldHVybiBsaW5lU3RyaW5nQ29vcmRpbmF0ZUF0TShcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBtLCBmYWxzZSk7XG4gICAgfVxuICAgIG9mZnNldCA9IGVuZDtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJwb2xhdGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vTGluZVN0cmluZ1xuICovXG5pbXBvcnQge2V4dGVuZH0gZnJvbSAnLi4vYXJyYXkuanMnO1xuaW1wb3J0IHtjbG9zZXN0U3F1YXJlZERpc3RhbmNlWFl9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgR2VvbWV0cnlMYXlvdXQgZnJvbSAnLi9HZW9tZXRyeUxheW91dC5qcyc7XG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBTaW1wbGVHZW9tZXRyeSBmcm9tICcuL1NpbXBsZUdlb21ldHJ5LmpzJztcbmltcG9ydCB7YXNzaWduQ2xvc2VzdFBvaW50LCBtYXhTcXVhcmVkRGVsdGF9IGZyb20gJy4vZmxhdC9jbG9zZXN0LmpzJztcbmltcG9ydCB7ZGVmbGF0ZUNvb3JkaW5hdGVzfSBmcm9tICcuL2ZsYXQvZGVmbGF0ZS5qcyc7XG5pbXBvcnQge2luZmxhdGVDb29yZGluYXRlc30gZnJvbSAnLi9mbGF0L2luZmxhdGUuanMnO1xuaW1wb3J0IHtpbnRlcnBvbGF0ZVBvaW50LCBsaW5lU3RyaW5nQ29vcmRpbmF0ZUF0TX0gZnJvbSAnLi9mbGF0L2ludGVycG9sYXRlLmpzJztcbmltcG9ydCB7aW50ZXJzZWN0c0xpbmVTdHJpbmd9IGZyb20gJy4vZmxhdC9pbnRlcnNlY3RzZXh0ZW50LmpzJztcbmltcG9ydCB7bGluZVN0cmluZ0xlbmd0aH0gZnJvbSAnLi9mbGF0L2xlbmd0aC5qcyc7XG5pbXBvcnQge2ZvckVhY2ggYXMgZm9yRWFjaFNlZ21lbnR9IGZyb20gJy4vZmxhdC9zZWdtZW50cy5qcyc7XG5pbXBvcnQge2RvdWdsYXNQZXVja2VyfSBmcm9tICcuL2ZsYXQvc2ltcGxpZnkuanMnO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIExpbmVzdHJpbmcgZ2VvbWV0cnkuXG4gKlxuICogQGFwaVxuICovXG52YXIgTGluZVN0cmluZyA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFNpbXBsZUdlb21ldHJ5KSB7XG4gIGZ1bmN0aW9uIExpbmVTdHJpbmcoY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQpIHtcblxuICAgIFNpbXBsZUdlb21ldHJ5LmNhbGwodGhpcyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICovXG4gICAgdGhpcy5mbGF0TWlkcG9pbnRfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmZsYXRNaWRwb2ludFJldmlzaW9uXyA9IC0xO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubWF4RGVsdGFfID0gLTE7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5tYXhEZWx0YVJldmlzaW9uXyA9IC0xO1xuXG4gICAgaWYgKG9wdF9sYXlvdXQgIT09IHVuZGVmaW5lZCAmJiAhQXJyYXkuaXNBcnJheShjb29yZGluYXRlc1swXSkpIHtcbiAgICAgIHRoaXMuc2V0RmxhdENvb3JkaW5hdGVzKG9wdF9sYXlvdXQsIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGNvb3JkaW5hdGVzKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0Q29vcmRpbmF0ZXMoLyoqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSAqLyAoY29vcmRpbmF0ZXMpLCBvcHRfbGF5b3V0KTtcbiAgICB9XG5cbiAgfVxuXG4gIGlmICggU2ltcGxlR2VvbWV0cnkgKSBMaW5lU3RyaW5nLl9fcHJvdG9fXyA9IFNpbXBsZUdlb21ldHJ5O1xuICBMaW5lU3RyaW5nLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFNpbXBsZUdlb21ldHJ5ICYmIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZSApO1xuICBMaW5lU3RyaW5nLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IExpbmVTdHJpbmc7XG5cbiAgLyoqXG4gICAqIEFwcGVuZCB0aGUgcGFzc2VkIGNvb3JkaW5hdGUgdG8gdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBsaW5lc3RyaW5nLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgKiBAYXBpXG4gICAqL1xuICBMaW5lU3RyaW5nLnByb3RvdHlwZS5hcHBlbmRDb29yZGluYXRlID0gZnVuY3Rpb24gYXBwZW5kQ29vcmRpbmF0ZSAoY29vcmRpbmF0ZSkge1xuICAgIGlmICghdGhpcy5mbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzID0gY29vcmRpbmF0ZS5zbGljZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBleHRlbmQodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIGNvb3JkaW5hdGUpO1xuICAgIH1cbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICAvKipcbiAgICogTWFrZSBhIGNvbXBsZXRlIGNvcHkgb2YgdGhlIGdlb21ldHJ5LlxuICAgKiBAcmV0dXJuIHshTGluZVN0cmluZ30gQ2xvbmUuXG4gICAqIEBvdmVycmlkZVxuICAgKiBAYXBpXG4gICAqL1xuICBMaW5lU3RyaW5nLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uIGNsb25lICgpIHtcbiAgICByZXR1cm4gbmV3IExpbmVTdHJpbmcodGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoKSwgdGhpcy5sYXlvdXQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgTGluZVN0cmluZy5wcm90b3R5cGUuY2xvc2VzdFBvaW50WFkgPSBmdW5jdGlvbiBjbG9zZXN0UG9pbnRYWSAoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICBpZiAobWluU3F1YXJlZERpc3RhbmNlIDwgY2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZKHRoaXMuZ2V0RXh0ZW50KCksIHgsIHkpKSB7XG4gICAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xuICAgIH1cbiAgICBpZiAodGhpcy5tYXhEZWx0YVJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgIHRoaXMubWF4RGVsdGFfID0gTWF0aC5zcXJ0KG1heFNxdWFyZWREZWx0YShcbiAgICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgdGhpcy5zdHJpZGUsIDApKTtcbiAgICAgIHRoaXMubWF4RGVsdGFSZXZpc2lvbl8gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgfVxuICAgIHJldHVybiBhc3NpZ25DbG9zZXN0UG9pbnQoXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCB0aGlzLnN0cmlkZSxcbiAgICAgIHRoaXMubWF4RGVsdGFfLCBmYWxzZSwgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJdGVyYXRlIG92ZXIgZWFjaCBzZWdtZW50LCBjYWxsaW5nIHRoZSBwcm92aWRlZCBjYWxsYmFjay5cbiAgICogSWYgdGhlIGNhbGxiYWNrIHJldHVybnMgYSB0cnV0aHkgdmFsdWUgdGhlIGZ1bmN0aW9uIHJldHVybnMgdGhhdFxuICAgKiB2YWx1ZSBpbW1lZGlhdGVseS4gT3RoZXJ3aXNlIHRoZSBmdW5jdGlvbiByZXR1cm5zIGBmYWxzZWAuXG4gICAqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogUywgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlLCBpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOiBUfSBjYWxsYmFjayBGdW5jdGlvblxuICAgKiAgICAgY2FsbGVkIGZvciBlYWNoIHNlZ21lbnQuXG4gICAqIEByZXR1cm4ge1R8Ym9vbGVhbn0gVmFsdWUuXG4gICAqIEB0ZW1wbGF0ZSBULFNcbiAgICogQGFwaVxuICAgKi9cbiAgTGluZVN0cmluZy5wcm90b3R5cGUuZm9yRWFjaFNlZ21lbnQgPSBmdW5jdGlvbiBmb3JFYWNoU2VnbWVudCQxIChjYWxsYmFjaykge1xuICAgIHJldHVybiBmb3JFYWNoU2VnbWVudCh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCB0aGlzLnN0cmlkZSwgY2FsbGJhY2spO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjb29yZGluYXRlIGF0IGBtYCB1c2luZyBsaW5lYXIgaW50ZXJwb2xhdGlvbiwgb3IgYG51bGxgIGlmIG5vXG4gICAqIHN1Y2ggY29vcmRpbmF0ZSBleGlzdHMuXG4gICAqXG4gICAqIGBvcHRfZXh0cmFwb2xhdGVgIGNvbnRyb2xzIGV4dHJhcG9sYXRpb24gYmV5b25kIHRoZSByYW5nZSBvZiBNcyBpbiB0aGVcbiAgICogTXVsdGlMaW5lU3RyaW5nLiBJZiBgb3B0X2V4dHJhcG9sYXRlYCBpcyBgdHJ1ZWAgdGhlbiBNcyBsZXNzIHRoYW4gdGhlIGZpcnN0XG4gICAqIE0gd2lsbCByZXR1cm4gdGhlIGZpcnN0IGNvb3JkaW5hdGUgYW5kIE1zIGdyZWF0ZXIgdGhhbiB0aGUgbGFzdCBNIHdpbGxcbiAgICogcmV0dXJuIHRoZSBsYXN0IGNvb3JkaW5hdGUuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtIE0uXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9leHRyYXBvbGF0ZSBFeHRyYXBvbGF0ZS4gRGVmYXVsdCBpcyBgZmFsc2VgLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvb3JkaW5hdGUuXG4gICAqIEBhcGlcbiAgICovXG4gIExpbmVTdHJpbmcucHJvdG90eXBlLmdldENvb3JkaW5hdGVBdE0gPSBmdW5jdGlvbiBnZXRDb29yZGluYXRlQXRNIChtLCBvcHRfZXh0cmFwb2xhdGUpIHtcbiAgICBpZiAodGhpcy5sYXlvdXQgIT0gR2VvbWV0cnlMYXlvdXQuWFlNICYmXG4gICAgICAgIHRoaXMubGF5b3V0ICE9IEdlb21ldHJ5TGF5b3V0LlhZWk0pIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB2YXIgZXh0cmFwb2xhdGUgPSBvcHRfZXh0cmFwb2xhdGUgIT09IHVuZGVmaW5lZCA/IG9wdF9leHRyYXBvbGF0ZSA6IGZhbHNlO1xuICAgIHJldHVybiBsaW5lU3RyaW5nQ29vcmRpbmF0ZUF0TSh0aGlzLmZsYXRDb29yZGluYXRlcywgMCxcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgdGhpcy5zdHJpZGUsIG0sIGV4dHJhcG9sYXRlKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBjb29yZGluYXRlcyBvZiB0aGUgbGluZXN0cmluZy5cbiAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gQ29vcmRpbmF0ZXMuXG4gICAqIEBvdmVycmlkZVxuICAgKiBAYXBpXG4gICAqL1xuICBMaW5lU3RyaW5nLnByb3RvdHlwZS5nZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIGdldENvb3JkaW5hdGVzICgpIHtcbiAgICByZXR1cm4gaW5mbGF0ZUNvb3JkaW5hdGVzKFxuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgdGhpcy5zdHJpZGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGNvb3JkaW5hdGUgYXQgdGhlIHByb3ZpZGVkIGZyYWN0aW9uIGFsb25nIHRoZSBsaW5lc3RyaW5nLlxuICAgKiBUaGUgYGZyYWN0aW9uYCBpcyBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDEsIHdoZXJlIDAgaXMgdGhlIHN0YXJ0IG9mIHRoZVxuICAgKiBsaW5lc3RyaW5nIGFuZCAxIGlzIHRoZSBlbmQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBmcmFjdGlvbiBGcmFjdGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU9fSBvcHRfZGVzdCBPcHRpb25hbCBjb29yZGluYXRlIHdob3NlIHZhbHVlcyB3aWxsXG4gICAqICAgICBiZSBtb2RpZmllZC4gSWYgbm90IHByb3ZpZGVkLCBhIG5ldyBjb29yZGluYXRlIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZSBvZiB0aGUgaW50ZXJwb2xhdGVkIHBvaW50LlxuICAgKiBAYXBpXG4gICAqL1xuICBMaW5lU3RyaW5nLnByb3RvdHlwZS5nZXRDb29yZGluYXRlQXQgPSBmdW5jdGlvbiBnZXRDb29yZGluYXRlQXQgKGZyYWN0aW9uLCBvcHRfZGVzdCkge1xuICAgIHJldHVybiBpbnRlcnBvbGF0ZVBvaW50KFxuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgdGhpcy5zdHJpZGUsXG4gICAgICBmcmFjdGlvbiwgb3B0X2Rlc3QpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGxlbmd0aCBvZiB0aGUgbGluZXN0cmluZyBvbiBwcm9qZWN0ZWQgcGxhbmUuXG4gICAqIEByZXR1cm4ge251bWJlcn0gTGVuZ3RoIChvbiBwcm9qZWN0ZWQgcGxhbmUpLlxuICAgKiBAYXBpXG4gICAqL1xuICBMaW5lU3RyaW5nLnByb3RvdHlwZS5nZXRMZW5ndGggPSBmdW5jdGlvbiBnZXRMZW5ndGggKCkge1xuICAgIHJldHVybiBsaW5lU3RyaW5nTGVuZ3RoKFxuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgdGhpcy5zdHJpZGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBGbGF0IG1pZHBvaW50LlxuICAgKi9cbiAgTGluZVN0cmluZy5wcm90b3R5cGUuZ2V0RmxhdE1pZHBvaW50ID0gZnVuY3Rpb24gZ2V0RmxhdE1pZHBvaW50ICgpIHtcbiAgICBpZiAodGhpcy5mbGF0TWlkcG9pbnRSZXZpc2lvbl8gIT0gdGhpcy5nZXRSZXZpc2lvbigpKSB7XG4gICAgICB0aGlzLmZsYXRNaWRwb2ludF8gPSB0aGlzLmdldENvb3JkaW5hdGVBdCgwLjUsIHRoaXMuZmxhdE1pZHBvaW50Xyk7XG4gICAgICB0aGlzLmZsYXRNaWRwb2ludFJldmlzaW9uXyA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZmxhdE1pZHBvaW50XztcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIExpbmVTdHJpbmcucHJvdG90eXBlLmdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsID0gZnVuY3Rpb24gZ2V0U2ltcGxpZmllZEdlb21ldHJ5SW50ZXJuYWwgKHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICB2YXIgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gZG91Z2xhc1BldWNrZXIoXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCB0aGlzLnN0cmlkZSxcbiAgICAgIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIDApO1xuICAgIHJldHVybiBuZXcgTGluZVN0cmluZyhzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBHZW9tZXRyeUxheW91dC5YWSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqIEBhcGlcbiAgICovXG4gIExpbmVTdHJpbmcucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiBnZXRUeXBlICgpIHtcbiAgICByZXR1cm4gR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKiBAYXBpXG4gICAqL1xuICBMaW5lU3RyaW5nLnByb3RvdHlwZS5pbnRlcnNlY3RzRXh0ZW50ID0gZnVuY3Rpb24gaW50ZXJzZWN0c0V4dGVudCAoZXh0ZW50KSB7XG4gICAgcmV0dXJuIGludGVyc2VjdHNMaW5lU3RyaW5nKFxuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgdGhpcy5zdHJpZGUsXG4gICAgICBleHRlbnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBsaW5lc3RyaW5nLlxuICAgKiBAcGFyYW0geyFBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICogQHBhcmFtIHtHZW9tZXRyeUxheW91dD19IG9wdF9sYXlvdXQgTGF5b3V0LlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQGFwaVxuICAgKi9cbiAgTGluZVN0cmluZy5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiBzZXRDb29yZGluYXRlcyAoY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQpIHtcbiAgICB0aGlzLnNldExheW91dChvcHRfbGF5b3V0LCBjb29yZGluYXRlcywgMSk7XG4gICAgaWYgKCF0aGlzLmZsYXRDb29yZGluYXRlcykge1xuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICB9XG4gICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gZGVmbGF0ZUNvb3JkaW5hdGVzKFxuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIGNvb3JkaW5hdGVzLCB0aGlzLnN0cmlkZSk7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgcmV0dXJuIExpbmVTdHJpbmc7XG59KFNpbXBsZUdlb21ldHJ5KSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgTGluZVN0cmluZztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TGluZVN0cmluZy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9NdWx0aUxpbmVTdHJpbmdcbiAqL1xuaW1wb3J0IHtleHRlbmR9IGZyb20gJy4uL2FycmF5LmpzJztcbmltcG9ydCB7Y2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IEdlb21ldHJ5TGF5b3V0IGZyb20gJy4vR2VvbWV0cnlMYXlvdXQuanMnO1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgTGluZVN0cmluZyBmcm9tICcuL0xpbmVTdHJpbmcuanMnO1xuaW1wb3J0IFNpbXBsZUdlb21ldHJ5IGZyb20gJy4vU2ltcGxlR2VvbWV0cnkuanMnO1xuaW1wb3J0IHthc3NpZ25DbG9zZXN0QXJyYXlQb2ludCwgYXJyYXlNYXhTcXVhcmVkRGVsdGF9IGZyb20gJy4vZmxhdC9jbG9zZXN0LmpzJztcbmltcG9ydCB7ZGVmbGF0ZUNvb3JkaW5hdGVzQXJyYXl9IGZyb20gJy4vZmxhdC9kZWZsYXRlLmpzJztcbmltcG9ydCB7aW5mbGF0ZUNvb3JkaW5hdGVzQXJyYXl9IGZyb20gJy4vZmxhdC9pbmZsYXRlLmpzJztcbmltcG9ydCB7aW50ZXJwb2xhdGVQb2ludCwgbGluZVN0cmluZ3NDb29yZGluYXRlQXRNfSBmcm9tICcuL2ZsYXQvaW50ZXJwb2xhdGUuanMnO1xuaW1wb3J0IHtpbnRlcnNlY3RzTGluZVN0cmluZ0FycmF5fSBmcm9tICcuL2ZsYXQvaW50ZXJzZWN0c2V4dGVudC5qcyc7XG5pbXBvcnQge2RvdWdsYXNQZXVja2VyQXJyYXl9IGZyb20gJy4vZmxhdC9zaW1wbGlmeS5qcyc7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogTXVsdGktbGluZXN0cmluZyBnZW9tZXRyeS5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBNdWx0aUxpbmVTdHJpbmcgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChTaW1wbGVHZW9tZXRyeSkge1xuICBmdW5jdGlvbiBNdWx0aUxpbmVTdHJpbmcoY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQsIG9wdF9lbmRzKSB7XG5cbiAgICBTaW1wbGVHZW9tZXRyeS5jYWxsKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmVuZHNfID0gW107XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5tYXhEZWx0YV8gPSAtMTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1heERlbHRhUmV2aXNpb25fID0gLTE7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShjb29yZGluYXRlc1swXSkpIHtcbiAgICAgIHRoaXMuc2V0Q29vcmRpbmF0ZXMoLyoqIEB0eXBlIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gKi8gKGNvb3JkaW5hdGVzKSwgb3B0X2xheW91dCk7XG4gICAgfSBlbHNlIGlmIChvcHRfbGF5b3V0ICE9PSB1bmRlZmluZWQgJiYgb3B0X2VuZHMpIHtcbiAgICAgIHRoaXMuc2V0RmxhdENvb3JkaW5hdGVzKG9wdF9sYXlvdXQsIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGNvb3JkaW5hdGVzKSk7XG4gICAgICB0aGlzLmVuZHNfID0gb3B0X2VuZHM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBsYXlvdXQgPSB0aGlzLmdldExheW91dCgpO1xuICAgICAgdmFyIGxpbmVTdHJpbmdzID0gLyoqIEB0eXBlIHtBcnJheTxMaW5lU3RyaW5nPn0gKi8gKGNvb3JkaW5hdGVzKTtcbiAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgIHZhciBlbmRzID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBsaW5lU3RyaW5ncy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBsaW5lU3RyaW5nID0gbGluZVN0cmluZ3NbaV07XG4gICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgbGF5b3V0ID0gbGluZVN0cmluZy5nZXRMYXlvdXQoKTtcbiAgICAgICAgfVxuICAgICAgICBleHRlbmQoZmxhdENvb3JkaW5hdGVzLCBsaW5lU3RyaW5nLmdldEZsYXRDb29yZGluYXRlcygpKTtcbiAgICAgICAgZW5kcy5wdXNoKGZsYXRDb29yZGluYXRlcy5sZW5ndGgpO1xuICAgICAgfVxuICAgICAgdGhpcy5zZXRGbGF0Q29vcmRpbmF0ZXMobGF5b3V0LCBmbGF0Q29vcmRpbmF0ZXMpO1xuICAgICAgdGhpcy5lbmRzXyA9IGVuZHM7XG4gICAgfVxuXG4gIH1cblxuICBpZiAoIFNpbXBsZUdlb21ldHJ5ICkgTXVsdGlMaW5lU3RyaW5nLl9fcHJvdG9fXyA9IFNpbXBsZUdlb21ldHJ5O1xuICBNdWx0aUxpbmVTdHJpbmcucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggU2ltcGxlR2VvbWV0cnkgJiYgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlICk7XG4gIE11bHRpTGluZVN0cmluZy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNdWx0aUxpbmVTdHJpbmc7XG5cbiAgLyoqXG4gICAqIEFwcGVuZCB0aGUgcGFzc2VkIGxpbmVzdHJpbmcgdG8gdGhlIG11bHRpbGluZXN0cmluZy5cbiAgICogQHBhcmFtIHtMaW5lU3RyaW5nfSBsaW5lU3RyaW5nIExpbmVTdHJpbmcuXG4gICAqIEBhcGlcbiAgICovXG4gIE11bHRpTGluZVN0cmluZy5wcm90b3R5cGUuYXBwZW5kTGluZVN0cmluZyA9IGZ1bmN0aW9uIGFwcGVuZExpbmVTdHJpbmcgKGxpbmVTdHJpbmcpIHtcbiAgICBpZiAoIXRoaXMuZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyA9IGxpbmVTdHJpbmcuZ2V0RmxhdENvb3JkaW5hdGVzKCkuc2xpY2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXh0ZW5kKHRoaXMuZmxhdENvb3JkaW5hdGVzLCBsaW5lU3RyaW5nLmdldEZsYXRDb29yZGluYXRlcygpLnNsaWNlKCkpO1xuICAgIH1cbiAgICB0aGlzLmVuZHNfLnB1c2godGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoKTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICAvKipcbiAgICogTWFrZSBhIGNvbXBsZXRlIGNvcHkgb2YgdGhlIGdlb21ldHJ5LlxuICAgKiBAcmV0dXJuIHshTXVsdGlMaW5lU3RyaW5nfSBDbG9uZS5cbiAgICogQG92ZXJyaWRlXG4gICAqIEBhcGlcbiAgICovXG4gIE11bHRpTGluZVN0cmluZy5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiBjbG9uZSAoKSB7XG4gICAgcmV0dXJuIG5ldyBNdWx0aUxpbmVTdHJpbmcodGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoKSwgdGhpcy5sYXlvdXQsIHRoaXMuZW5kc18uc2xpY2UoKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBNdWx0aUxpbmVTdHJpbmcucHJvdG90eXBlLmNsb3Nlc3RQb2ludFhZID0gZnVuY3Rpb24gY2xvc2VzdFBvaW50WFkgKHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgaWYgKG1pblNxdWFyZWREaXN0YW5jZSA8IGNsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWSh0aGlzLmdldEV4dGVudCgpLCB4LCB5KSkge1xuICAgICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbiAgICB9XG4gICAgaWYgKHRoaXMubWF4RGVsdGFSZXZpc2lvbl8gIT0gdGhpcy5nZXRSZXZpc2lvbigpKSB7XG4gICAgICB0aGlzLm1heERlbHRhXyA9IE1hdGguc3FydChhcnJheU1heFNxdWFyZWREZWx0YShcbiAgICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlLCAwKSk7XG4gICAgICB0aGlzLm1heERlbHRhUmV2aXNpb25fID0gdGhpcy5nZXRSZXZpc2lvbigpO1xuICAgIH1cbiAgICByZXR1cm4gYXNzaWduQ2xvc2VzdEFycmF5UG9pbnQoXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsXG4gICAgICB0aGlzLm1heERlbHRhXywgZmFsc2UsIHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY29vcmRpbmF0ZSBhdCBgbWAgdXNpbmcgbGluZWFyIGludGVycG9sYXRpb24sIG9yIGBudWxsYCBpZiBub1xuICAgKiBzdWNoIGNvb3JkaW5hdGUgZXhpc3RzLlxuICAgKlxuICAgKiBgb3B0X2V4dHJhcG9sYXRlYCBjb250cm9scyBleHRyYXBvbGF0aW9uIGJleW9uZCB0aGUgcmFuZ2Ugb2YgTXMgaW4gdGhlXG4gICAqIE11bHRpTGluZVN0cmluZy4gSWYgYG9wdF9leHRyYXBvbGF0ZWAgaXMgYHRydWVgIHRoZW4gTXMgbGVzcyB0aGFuIHRoZSBmaXJzdFxuICAgKiBNIHdpbGwgcmV0dXJuIHRoZSBmaXJzdCBjb29yZGluYXRlIGFuZCBNcyBncmVhdGVyIHRoYW4gdGhlIGxhc3QgTSB3aWxsXG4gICAqIHJldHVybiB0aGUgbGFzdCBjb29yZGluYXRlLlxuICAgKlxuICAgKiBgb3B0X2ludGVycG9sYXRlYCBjb250cm9scyBpbnRlcnBvbGF0aW9uIGJldHdlZW4gY29uc2VjdXRpdmUgTGluZVN0cmluZ3NcbiAgICogd2l0aGluIHRoZSBNdWx0aUxpbmVTdHJpbmcuIElmIGBvcHRfaW50ZXJwb2xhdGVgIGlzIGB0cnVlYCB0aGUgY29vcmRpbmF0ZXNcbiAgICogd2lsbCBiZSBsaW5lYXJseSBpbnRlcnBvbGF0ZWQgYmV0d2VlbiB0aGUgbGFzdCBjb29yZGluYXRlIG9mIG9uZSBMaW5lU3RyaW5nXG4gICAqIGFuZCB0aGUgZmlyc3QgY29vcmRpbmF0ZSBvZiB0aGUgbmV4dCBMaW5lU3RyaW5nLiAgSWYgYG9wdF9pbnRlcnBvbGF0ZWAgaXNcbiAgICogYGZhbHNlYCB0aGVuIHRoZSBmdW5jdGlvbiB3aWxsIHJldHVybiBgbnVsbGAgZm9yIE1zIGZhbGxpbmcgYmV0d2VlblxuICAgKiBMaW5lU3RyaW5ncy5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IG0gTS5cbiAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2V4dHJhcG9sYXRlIEV4dHJhcG9sYXRlLiBEZWZhdWx0IGlzIGBmYWxzZWAuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbnRlcnBvbGF0ZSBJbnRlcnBvbGF0ZS4gRGVmYXVsdCBpcyBgZmFsc2VgLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvb3JkaW5hdGUuXG4gICAqIEBhcGlcbiAgICovXG4gIE11bHRpTGluZVN0cmluZy5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZUF0TSA9IGZ1bmN0aW9uIGdldENvb3JkaW5hdGVBdE0gKG0sIG9wdF9leHRyYXBvbGF0ZSwgb3B0X2ludGVycG9sYXRlKSB7XG4gICAgaWYgKCh0aGlzLmxheW91dCAhPSBHZW9tZXRyeUxheW91dC5YWU0gJiZcbiAgICAgICAgIHRoaXMubGF5b3V0ICE9IEdlb21ldHJ5TGF5b3V0LlhZWk0pIHx8XG4gICAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHZhciBleHRyYXBvbGF0ZSA9IG9wdF9leHRyYXBvbGF0ZSAhPT0gdW5kZWZpbmVkID8gb3B0X2V4dHJhcG9sYXRlIDogZmFsc2U7XG4gICAgdmFyIGludGVycG9sYXRlID0gb3B0X2ludGVycG9sYXRlICE9PSB1bmRlZmluZWQgPyBvcHRfaW50ZXJwb2xhdGUgOiBmYWxzZTtcbiAgICByZXR1cm4gbGluZVN0cmluZ3NDb29yZGluYXRlQXRNKHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLFxuICAgICAgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsIG0sIGV4dHJhcG9sYXRlLCBpbnRlcnBvbGF0ZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIG11bHRpbGluZXN0cmluZy5cbiAgICogQHJldHVybiB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IENvb3JkaW5hdGVzLlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQGFwaVxuICAgKi9cbiAgTXVsdGlMaW5lU3RyaW5nLnByb3RvdHlwZS5nZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIGdldENvb3JkaW5hdGVzICgpIHtcbiAgICByZXR1cm4gaW5mbGF0ZUNvb3JkaW5hdGVzQXJyYXkoXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBFbmRzLlxuICAgKi9cbiAgTXVsdGlMaW5lU3RyaW5nLnByb3RvdHlwZS5nZXRFbmRzID0gZnVuY3Rpb24gZ2V0RW5kcyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW5kc187XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbGluZXN0cmluZyBhdCB0aGUgc3BlY2lmaWVkIGluZGV4LlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXguXG4gICAqIEByZXR1cm4ge0xpbmVTdHJpbmd9IExpbmVTdHJpbmcuXG4gICAqIEBhcGlcbiAgICovXG4gIE11bHRpTGluZVN0cmluZy5wcm90b3R5cGUuZ2V0TGluZVN0cmluZyA9IGZ1bmN0aW9uIGdldExpbmVTdHJpbmcgKGluZGV4KSB7XG4gICAgaWYgKGluZGV4IDwgMCB8fCB0aGlzLmVuZHNfLmxlbmd0aCA8PSBpbmRleCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBuZXcgTGluZVN0cmluZyh0aGlzLmZsYXRDb29yZGluYXRlcy5zbGljZShcbiAgICAgIGluZGV4ID09PSAwID8gMCA6IHRoaXMuZW5kc19baW5kZXggLSAxXSwgdGhpcy5lbmRzX1tpbmRleF0pLCB0aGlzLmxheW91dCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbGluZXN0cmluZ3Mgb2YgdGhpcyBtdWx0aWxpbmVzdHJpbmcuXG4gICAqIEByZXR1cm4ge0FycmF5PExpbmVTdHJpbmc+fSBMaW5lU3RyaW5ncy5cbiAgICogQGFwaVxuICAgKi9cbiAgTXVsdGlMaW5lU3RyaW5nLnByb3RvdHlwZS5nZXRMaW5lU3RyaW5ncyA9IGZ1bmN0aW9uIGdldExpbmVTdHJpbmdzICgpIHtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5mbGF0Q29vcmRpbmF0ZXM7XG4gICAgdmFyIGVuZHMgPSB0aGlzLmVuZHNfO1xuICAgIHZhciBsYXlvdXQgPSB0aGlzLmxheW91dDtcbiAgICAvKiogQHR5cGUge0FycmF5PExpbmVTdHJpbmc+fSAqL1xuICAgIHZhciBsaW5lU3RyaW5ncyA9IFtdO1xuICAgIHZhciBvZmZzZXQgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICB2YXIgbGluZVN0cmluZyA9IG5ldyBMaW5lU3RyaW5nKGZsYXRDb29yZGluYXRlcy5zbGljZShvZmZzZXQsIGVuZCksIGxheW91dCk7XG4gICAgICBsaW5lU3RyaW5ncy5wdXNoKGxpbmVTdHJpbmcpO1xuICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICByZXR1cm4gbGluZVN0cmluZ3M7XG4gIH07XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEZsYXQgbWlkcG9pbnRzLlxuICAgKi9cbiAgTXVsdGlMaW5lU3RyaW5nLnByb3RvdHlwZS5nZXRGbGF0TWlkcG9pbnRzID0gZnVuY3Rpb24gZ2V0RmxhdE1pZHBvaW50cyAoKSB7XG4gICAgdmFyIG1pZHBvaW50cyA9IFtdO1xuICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmZsYXRDb29yZGluYXRlcztcbiAgICB2YXIgb2Zmc2V0ID0gMDtcbiAgICB2YXIgZW5kcyA9IHRoaXMuZW5kc187XG4gICAgdmFyIHN0cmlkZSA9IHRoaXMuc3RyaWRlO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICB2YXIgbWlkcG9pbnQgPSBpbnRlcnBvbGF0ZVBvaW50KFxuICAgICAgICBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIDAuNSk7XG4gICAgICBleHRlbmQobWlkcG9pbnRzLCBtaWRwb2ludCk7XG4gICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIHJldHVybiBtaWRwb2ludHM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBNdWx0aUxpbmVTdHJpbmcucHJvdG90eXBlLmdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsID0gZnVuY3Rpb24gZ2V0U2ltcGxpZmllZEdlb21ldHJ5SW50ZXJuYWwgKHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICB2YXIgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgIHZhciBzaW1wbGlmaWVkRW5kcyA9IFtdO1xuICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gZG91Z2xhc1BldWNrZXJBcnJheShcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSxcbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIDAsIHNpbXBsaWZpZWRFbmRzKTtcbiAgICByZXR1cm4gbmV3IE11bHRpTGluZVN0cmluZyhzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBHZW9tZXRyeUxheW91dC5YWSwgc2ltcGxpZmllZEVuZHMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKiBAYXBpXG4gICAqL1xuICBNdWx0aUxpbmVTdHJpbmcucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiBnZXRUeXBlICgpIHtcbiAgICByZXR1cm4gR2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKiBAYXBpXG4gICAqL1xuICBNdWx0aUxpbmVTdHJpbmcucHJvdG90eXBlLmludGVyc2VjdHNFeHRlbnQgPSBmdW5jdGlvbiBpbnRlcnNlY3RzRXh0ZW50IChleHRlbnQpIHtcbiAgICByZXR1cm4gaW50ZXJzZWN0c0xpbmVTdHJpbmdBcnJheShcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSwgZXh0ZW50KTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBjb29yZGluYXRlcyBvZiB0aGUgbXVsdGlsaW5lc3RyaW5nLlxuICAgKiBAcGFyYW0geyFBcnJheTxBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAqIEBwYXJhbSB7R2VvbWV0cnlMYXlvdXQ9fSBvcHRfbGF5b3V0IExheW91dC5cbiAgICogQG92ZXJyaWRlXG4gICAqIEBhcGlcbiAgICovXG4gIE11bHRpTGluZVN0cmluZy5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiBzZXRDb29yZGluYXRlcyAoY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQpIHtcbiAgICB0aGlzLnNldExheW91dChvcHRfbGF5b3V0LCBjb29yZGluYXRlcywgMik7XG4gICAgaWYgKCF0aGlzLmZsYXRDb29yZGluYXRlcykge1xuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICB9XG4gICAgdmFyIGVuZHMgPSBkZWZsYXRlQ29vcmRpbmF0ZXNBcnJheShcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCBjb29yZGluYXRlcywgdGhpcy5zdHJpZGUsIHRoaXMuZW5kc18pO1xuICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IGVuZHMubGVuZ3RoID09PSAwID8gMCA6IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICByZXR1cm4gTXVsdGlMaW5lU3RyaW5nO1xufShTaW1wbGVHZW9tZXRyeSkpO1xuXG5cbmV4cG9ydCBkZWZhdWx0IE11bHRpTGluZVN0cmluZztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TXVsdGlMaW5lU3RyaW5nLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL011bHRpUG9pbnRcbiAqL1xuaW1wb3J0IHtleHRlbmR9IGZyb20gJy4uL2FycmF5LmpzJztcbmltcG9ydCB7Y2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZLCBjb250YWluc1hZfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgUG9pbnQgZnJvbSAnLi9Qb2ludC5qcyc7XG5pbXBvcnQgU2ltcGxlR2VvbWV0cnkgZnJvbSAnLi9TaW1wbGVHZW9tZXRyeS5qcyc7XG5pbXBvcnQge2RlZmxhdGVDb29yZGluYXRlc30gZnJvbSAnLi9mbGF0L2RlZmxhdGUuanMnO1xuaW1wb3J0IHtpbmZsYXRlQ29vcmRpbmF0ZXN9IGZyb20gJy4vZmxhdC9pbmZsYXRlLmpzJztcbmltcG9ydCB7c3F1YXJlZERpc3RhbmNlIGFzIHNxdWFyZWREeH0gZnJvbSAnLi4vbWF0aC5qcyc7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogTXVsdGktcG9pbnQgZ2VvbWV0cnkuXG4gKlxuICogQGFwaVxuICovXG52YXIgTXVsdGlQb2ludCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFNpbXBsZUdlb21ldHJ5KSB7XG4gIGZ1bmN0aW9uIE11bHRpUG9pbnQoY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQpIHtcbiAgICBTaW1wbGVHZW9tZXRyeS5jYWxsKHRoaXMpO1xuICAgIGlmIChvcHRfbGF5b3V0ICYmICFBcnJheS5pc0FycmF5KGNvb3JkaW5hdGVzWzBdKSkge1xuICAgICAgdGhpcy5zZXRGbGF0Q29vcmRpbmF0ZXMob3B0X2xheW91dCwgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqLyAoY29vcmRpbmF0ZXMpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRDb29yZGluYXRlcygvKiogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59ICovIChjb29yZGluYXRlcyksIG9wdF9sYXlvdXQpO1xuICAgIH1cbiAgfVxuXG4gIGlmICggU2ltcGxlR2VvbWV0cnkgKSBNdWx0aVBvaW50Ll9fcHJvdG9fXyA9IFNpbXBsZUdlb21ldHJ5O1xuICBNdWx0aVBvaW50LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFNpbXBsZUdlb21ldHJ5ICYmIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZSApO1xuICBNdWx0aVBvaW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE11bHRpUG9pbnQ7XG5cbiAgLyoqXG4gICAqIEFwcGVuZCB0aGUgcGFzc2VkIHBvaW50IHRvIHRoaXMgbXVsdGlwb2ludC5cbiAgICogQHBhcmFtIHtQb2ludH0gcG9pbnQgUG9pbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIE11bHRpUG9pbnQucHJvdG90eXBlLmFwcGVuZFBvaW50ID0gZnVuY3Rpb24gYXBwZW5kUG9pbnQgKHBvaW50KSB7XG4gICAgaWYgKCF0aGlzLmZsYXRDb29yZGluYXRlcykge1xuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBwb2ludC5nZXRGbGF0Q29vcmRpbmF0ZXMoKS5zbGljZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBleHRlbmQodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIHBvaW50LmdldEZsYXRDb29yZGluYXRlcygpKTtcbiAgICB9XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1ha2UgYSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBnZW9tZXRyeS5cbiAgICogQHJldHVybiB7IU11bHRpUG9pbnR9IENsb25lLlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQGFwaVxuICAgKi9cbiAgTXVsdGlQb2ludC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiBjbG9uZSAoKSB7XG4gICAgdmFyIG11bHRpUG9pbnQgPSBuZXcgTXVsdGlQb2ludCh0aGlzLmZsYXRDb29yZGluYXRlcy5zbGljZSgpLCB0aGlzLmxheW91dCk7XG4gICAgcmV0dXJuIG11bHRpUG9pbnQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBNdWx0aVBvaW50LnByb3RvdHlwZS5jbG9zZXN0UG9pbnRYWSA9IGZ1bmN0aW9uIGNsb3Nlc3RQb2ludFhZICh4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSkge1xuICAgIGlmIChtaW5TcXVhcmVkRGlzdGFuY2UgPCBjbG9zZXN0U3F1YXJlZERpc3RhbmNlWFkodGhpcy5nZXRFeHRlbnQoKSwgeCwgeSkpIHtcbiAgICAgIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG4gICAgfVxuICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmZsYXRDb29yZGluYXRlcztcbiAgICB2YXIgc3RyaWRlID0gdGhpcy5zdHJpZGU7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZmxhdENvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGlpOyBpICs9IHN0cmlkZSkge1xuICAgICAgdmFyIHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREeChcbiAgICAgICAgeCwgeSwgZmxhdENvb3JkaW5hdGVzW2ldLCBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdKTtcbiAgICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgbWluU3F1YXJlZERpc3RhbmNlID0gc3F1YXJlZERpc3RhbmNlO1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHN0cmlkZTsgKytqKSB7XG4gICAgICAgICAgY2xvc2VzdFBvaW50W2pdID0gZmxhdENvb3JkaW5hdGVzW2kgKyBqXTtcbiAgICAgICAgfVxuICAgICAgICBjbG9zZXN0UG9pbnQubGVuZ3RoID0gc3RyaWRlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBtdWx0aXBvaW50LlxuICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBDb29yZGluYXRlcy5cbiAgICogQG92ZXJyaWRlXG4gICAqIEBhcGlcbiAgICovXG4gIE11bHRpUG9pbnQucHJvdG90eXBlLmdldENvb3JkaW5hdGVzID0gZnVuY3Rpb24gZ2V0Q29vcmRpbmF0ZXMgKCkge1xuICAgIHJldHVybiBpbmZsYXRlQ29vcmRpbmF0ZXMoXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCB0aGlzLnN0cmlkZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgcG9pbnQgYXQgdGhlIHNwZWNpZmllZCBpbmRleC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4LlxuICAgKiBAcmV0dXJuIHtQb2ludH0gUG9pbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIE11bHRpUG9pbnQucHJvdG90eXBlLmdldFBvaW50ID0gZnVuY3Rpb24gZ2V0UG9pbnQgKGluZGV4KSB7XG4gICAgdmFyIG4gPSAhdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPyAwIDogdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoIC8gdGhpcy5zdHJpZGU7XG4gICAgaWYgKGluZGV4IDwgMCB8fCBuIDw9IGluZGV4KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBQb2ludCh0aGlzLmZsYXRDb29yZGluYXRlcy5zbGljZShcbiAgICAgIGluZGV4ICogdGhpcy5zdHJpZGUsIChpbmRleCArIDEpICogdGhpcy5zdHJpZGUpLCB0aGlzLmxheW91dCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgcG9pbnRzIG9mIHRoaXMgbXVsdGlwb2ludC5cbiAgICogQHJldHVybiB7QXJyYXk8UG9pbnQ+fSBQb2ludHMuXG4gICAqIEBhcGlcbiAgICovXG4gIE11bHRpUG9pbnQucHJvdG90eXBlLmdldFBvaW50cyA9IGZ1bmN0aW9uIGdldFBvaW50cyAoKSB7XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZmxhdENvb3JkaW5hdGVzO1xuICAgIHZhciBsYXlvdXQgPSB0aGlzLmxheW91dDtcbiAgICB2YXIgc3RyaWRlID0gdGhpcy5zdHJpZGU7XG4gICAgLyoqIEB0eXBlIHtBcnJheTxQb2ludD59ICovXG4gICAgdmFyIHBvaW50cyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGZsYXRDb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgaSArPSBzdHJpZGUpIHtcbiAgICAgIHZhciBwb2ludCA9IG5ldyBQb2ludChmbGF0Q29vcmRpbmF0ZXMuc2xpY2UoaSwgaSArIHN0cmlkZSksIGxheW91dCk7XG4gICAgICBwb2ludHMucHVzaChwb2ludCk7XG4gICAgfVxuICAgIHJldHVybiBwb2ludHM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqIEBhcGlcbiAgICovXG4gIE11bHRpUG9pbnQucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiBnZXRUeXBlICgpIHtcbiAgICByZXR1cm4gR2VvbWV0cnlUeXBlLk1VTFRJX1BPSU5UO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKiBAYXBpXG4gICAqL1xuICBNdWx0aVBvaW50LnByb3RvdHlwZS5pbnRlcnNlY3RzRXh0ZW50ID0gZnVuY3Rpb24gaW50ZXJzZWN0c0V4dGVudCAoZXh0ZW50KSB7XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZmxhdENvb3JkaW5hdGVzO1xuICAgIHZhciBzdHJpZGUgPSB0aGlzLnN0cmlkZTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7IGkgKz0gc3RyaWRlKSB7XG4gICAgICB2YXIgeCA9IGZsYXRDb29yZGluYXRlc1tpXTtcbiAgICAgIHZhciB5ID0gZmxhdENvb3JkaW5hdGVzW2kgKyAxXTtcbiAgICAgIGlmIChjb250YWluc1hZKGV4dGVudCwgeCwgeSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBjb29yZGluYXRlcyBvZiB0aGUgbXVsdGlwb2ludC5cbiAgICogQHBhcmFtIHshQXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0PX0gb3B0X2xheW91dCBMYXlvdXQuXG4gICAqIEBvdmVycmlkZVxuICAgKiBAYXBpXG4gICAqL1xuICBNdWx0aVBvaW50LnByb3RvdHlwZS5zZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIHNldENvb3JkaW5hdGVzIChjb29yZGluYXRlcywgb3B0X2xheW91dCkge1xuICAgIHRoaXMuc2V0TGF5b3V0KG9wdF9sYXlvdXQsIGNvb3JkaW5hdGVzLCAxKTtcbiAgICBpZiAoIXRoaXMuZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgIH1cbiAgICB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGggPSBkZWZsYXRlQ29vcmRpbmF0ZXMoXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgY29vcmRpbmF0ZXMsIHRoaXMuc3RyaWRlKTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfTtcblxuICByZXR1cm4gTXVsdGlQb2ludDtcbn0oU2ltcGxlR2VvbWV0cnkpKTtcblxuXG5leHBvcnQgZGVmYXVsdCBNdWx0aVBvaW50O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1NdWx0aVBvaW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL011bHRpUG9seWdvblxuICovXG5pbXBvcnQge2V4dGVuZH0gZnJvbSAnLi4vYXJyYXkuanMnO1xuaW1wb3J0IHtjbG9zZXN0U3F1YXJlZERpc3RhbmNlWFl9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgR2VvbWV0cnlMYXlvdXQgZnJvbSAnLi9HZW9tZXRyeUxheW91dC5qcyc7XG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBNdWx0aVBvaW50IGZyb20gJy4vTXVsdGlQb2ludC5qcyc7XG5pbXBvcnQgUG9seWdvbiBmcm9tICcuL1BvbHlnb24uanMnO1xuaW1wb3J0IFNpbXBsZUdlb21ldHJ5IGZyb20gJy4vU2ltcGxlR2VvbWV0cnkuanMnO1xuaW1wb3J0IHtsaW5lYXJSaW5nc3MgYXMgbGluZWFyUmluZ3NzQXJlYX0gZnJvbSAnLi9mbGF0L2FyZWEuanMnO1xuaW1wb3J0IHtsaW5lYXJSaW5nc3MgYXMgbGluZWFyUmluZ3NzQ2VudGVyfSBmcm9tICcuL2ZsYXQvY2VudGVyLmpzJztcbmltcG9ydCB7YXNzaWduQ2xvc2VzdE11bHRpQXJyYXlQb2ludCwgbXVsdGlBcnJheU1heFNxdWFyZWREZWx0YX0gZnJvbSAnLi9mbGF0L2Nsb3Nlc3QuanMnO1xuaW1wb3J0IHtsaW5lYXJSaW5nc3NDb250YWluc1hZfSBmcm9tICcuL2ZsYXQvY29udGFpbnMuanMnO1xuaW1wb3J0IHtkZWZsYXRlTXVsdGlDb29yZGluYXRlc0FycmF5fSBmcm9tICcuL2ZsYXQvZGVmbGF0ZS5qcyc7XG5pbXBvcnQge2luZmxhdGVNdWx0aUNvb3JkaW5hdGVzQXJyYXl9IGZyb20gJy4vZmxhdC9pbmZsYXRlLmpzJztcbmltcG9ydCB7Z2V0SW50ZXJpb3JQb2ludHNPZk11bHRpQXJyYXl9IGZyb20gJy4vZmxhdC9pbnRlcmlvcnBvaW50LmpzJztcbmltcG9ydCB7aW50ZXJzZWN0c0xpbmVhclJpbmdNdWx0aUFycmF5fSBmcm9tICcuL2ZsYXQvaW50ZXJzZWN0c2V4dGVudC5qcyc7XG5pbXBvcnQge2xpbmVhclJpbmdzQXJlT3JpZW50ZWQsIG9yaWVudExpbmVhclJpbmdzQXJyYXl9IGZyb20gJy4vZmxhdC9vcmllbnQuanMnO1xuaW1wb3J0IHtxdWFudGl6ZU11bHRpQXJyYXl9IGZyb20gJy4vZmxhdC9zaW1wbGlmeS5qcyc7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogTXVsdGktcG9seWdvbiBnZW9tZXRyeS5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBNdWx0aVBvbHlnb24gPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChTaW1wbGVHZW9tZXRyeSkge1xuICBmdW5jdGlvbiBNdWx0aVBvbHlnb24oY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQsIG9wdF9lbmRzcykge1xuXG4gICAgU2ltcGxlR2VvbWV0cnkuY2FsbCh0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtBcnJheTxBcnJheTxudW1iZXI+Pn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZW5kc3NfID0gW107XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5mbGF0SW50ZXJpb3JQb2ludHNSZXZpc2lvbl8gPSAtMTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICovXG4gICAgdGhpcy5mbGF0SW50ZXJpb3JQb2ludHNfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1heERlbHRhXyA9IC0xO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubWF4RGVsdGFSZXZpc2lvbl8gPSAtMTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm9yaWVudGVkUmV2aXNpb25fID0gLTE7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAqL1xuICAgIHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfID0gbnVsbDtcblxuICAgIGlmICghb3B0X2VuZHNzICYmICFBcnJheS5pc0FycmF5KGNvb3JkaW5hdGVzWzBdKSkge1xuICAgICAgdmFyIGxheW91dCA9IHRoaXMuZ2V0TGF5b3V0KCk7XG4gICAgICB2YXIgcG9seWdvbnMgPSAvKiogQHR5cGUge0FycmF5PFBvbHlnb24+fSAqLyAoY29vcmRpbmF0ZXMpO1xuICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgICAgdmFyIGVuZHNzID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBwb2x5Z29ucy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBwb2x5Z29uID0gcG9seWdvbnNbaV07XG4gICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgbGF5b3V0ID0gcG9seWdvbi5nZXRMYXlvdXQoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb2Zmc2V0ID0gZmxhdENvb3JkaW5hdGVzLmxlbmd0aDtcbiAgICAgICAgdmFyIGVuZHMgPSBwb2x5Z29uLmdldEVuZHMoKTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpqID0gZW5kcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgZW5kc1tqXSArPSBvZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgICAgZXh0ZW5kKGZsYXRDb29yZGluYXRlcywgcG9seWdvbi5nZXRGbGF0Q29vcmRpbmF0ZXMoKSk7XG4gICAgICAgIGVuZHNzLnB1c2goZW5kcyk7XG4gICAgICB9XG4gICAgICBvcHRfbGF5b3V0ID0gbGF5b3V0O1xuICAgICAgY29vcmRpbmF0ZXMgPSBmbGF0Q29vcmRpbmF0ZXM7XG4gICAgICBvcHRfZW5kc3MgPSBlbmRzcztcbiAgICB9XG4gICAgaWYgKG9wdF9sYXlvdXQgIT09IHVuZGVmaW5lZCAmJiBvcHRfZW5kc3MpIHtcbiAgICAgIHRoaXMuc2V0RmxhdENvb3JkaW5hdGVzKG9wdF9sYXlvdXQsIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGNvb3JkaW5hdGVzKSk7XG4gICAgICB0aGlzLmVuZHNzXyA9IG9wdF9lbmRzcztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRDb29yZGluYXRlcygvKiogQHR5cGUge0FycmF5PEFycmF5PEFycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+Pn0gKi8gKGNvb3JkaW5hdGVzKSxcbiAgICAgICAgb3B0X2xheW91dCk7XG4gICAgfVxuXG4gIH1cblxuICBpZiAoIFNpbXBsZUdlb21ldHJ5ICkgTXVsdGlQb2x5Z29uLl9fcHJvdG9fXyA9IFNpbXBsZUdlb21ldHJ5O1xuICBNdWx0aVBvbHlnb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggU2ltcGxlR2VvbWV0cnkgJiYgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlICk7XG4gIE11bHRpUG9seWdvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNdWx0aVBvbHlnb247XG5cbiAgLyoqXG4gICAqIEFwcGVuZCB0aGUgcGFzc2VkIHBvbHlnb24gdG8gdGhpcyBtdWx0aXBvbHlnb24uXG4gICAqIEBwYXJhbSB7UG9seWdvbn0gcG9seWdvbiBQb2x5Z29uLlxuICAgKiBAYXBpXG4gICAqL1xuICBNdWx0aVBvbHlnb24ucHJvdG90eXBlLmFwcGVuZFBvbHlnb24gPSBmdW5jdGlvbiBhcHBlbmRQb2x5Z29uIChwb2x5Z29uKSB7XG4gICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICAgIHZhciBlbmRzO1xuICAgIGlmICghdGhpcy5mbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzID0gcG9seWdvbi5nZXRGbGF0Q29vcmRpbmF0ZXMoKS5zbGljZSgpO1xuICAgICAgZW5kcyA9IHBvbHlnb24uZ2V0RW5kcygpLnNsaWNlKCk7XG4gICAgICB0aGlzLmVuZHNzXy5wdXNoKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBvZmZzZXQgPSB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICBleHRlbmQodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIHBvbHlnb24uZ2V0RmxhdENvb3JkaW5hdGVzKCkpO1xuICAgICAgZW5kcyA9IHBvbHlnb24uZ2V0RW5kcygpLnNsaWNlKCk7XG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgZW5kc1tpXSArPSBvZmZzZXQ7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuZW5kc3NfLnB1c2goZW5kcyk7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1ha2UgYSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBnZW9tZXRyeS5cbiAgICogQHJldHVybiB7IU11bHRpUG9seWdvbn0gQ2xvbmUuXG4gICAqIEBvdmVycmlkZVxuICAgKiBAYXBpXG4gICAqL1xuICBNdWx0aVBvbHlnb24ucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gY2xvbmUgKCkge1xuICAgIHZhciBsZW4gPSB0aGlzLmVuZHNzXy5sZW5ndGg7XG4gICAgdmFyIG5ld0VuZHNzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgbmV3RW5kc3NbaV0gPSB0aGlzLmVuZHNzX1tpXS5zbGljZSgpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgTXVsdGlQb2x5Z29uKFxuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoKSwgdGhpcy5sYXlvdXQsIG5ld0VuZHNzKTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIE11bHRpUG9seWdvbi5wcm90b3R5cGUuY2xvc2VzdFBvaW50WFkgPSBmdW5jdGlvbiBjbG9zZXN0UG9pbnRYWSAoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICBpZiAobWluU3F1YXJlZERpc3RhbmNlIDwgY2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZKHRoaXMuZ2V0RXh0ZW50KCksIHgsIHkpKSB7XG4gICAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xuICAgIH1cbiAgICBpZiAodGhpcy5tYXhEZWx0YVJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgIHRoaXMubWF4RGVsdGFfID0gTWF0aC5zcXJ0KG11bHRpQXJyYXlNYXhTcXVhcmVkRGVsdGEoXG4gICAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNzXywgdGhpcy5zdHJpZGUsIDApKTtcbiAgICAgIHRoaXMubWF4RGVsdGFSZXZpc2lvbl8gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgfVxuICAgIHJldHVybiBhc3NpZ25DbG9zZXN0TXVsdGlBcnJheVBvaW50KFxuICAgICAgdGhpcy5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpLCAwLCB0aGlzLmVuZHNzXywgdGhpcy5zdHJpZGUsXG4gICAgICB0aGlzLm1heERlbHRhXywgdHJ1ZSwgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgTXVsdGlQb2x5Z29uLnByb3RvdHlwZS5jb250YWluc1hZID0gZnVuY3Rpb24gY29udGFpbnNYWSAoeCwgeSkge1xuICAgIHJldHVybiBsaW5lYXJSaW5nc3NDb250YWluc1hZKHRoaXMuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKSwgMCwgdGhpcy5lbmRzc18sIHRoaXMuc3RyaWRlLCB4LCB5KTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBhcmVhIG9mIHRoZSBtdWx0aXBvbHlnb24gb24gcHJvamVjdGVkIHBsYW5lLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEgKG9uIHByb2plY3RlZCBwbGFuZSkuXG4gICAqIEBhcGlcbiAgICovXG4gIE11bHRpUG9seWdvbi5wcm90b3R5cGUuZ2V0QXJlYSA9IGZ1bmN0aW9uIGdldEFyZWEgKCkge1xuICAgIHJldHVybiBsaW5lYXJSaW5nc3NBcmVhKHRoaXMuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKSwgMCwgdGhpcy5lbmRzc18sIHRoaXMuc3RyaWRlKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBjb29yZGluYXRlIGFycmF5IGZvciB0aGlzIGdlb21ldHJ5LiAgVGhpcyBhcnJheSBoYXMgdGhlIHN0cnVjdHVyZVxuICAgKiBvZiBhIEdlb0pTT04gY29vcmRpbmF0ZSBhcnJheSBmb3IgbXVsdGktcG9seWdvbnMuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9yaWdodCBPcmllbnQgY29vcmRpbmF0ZXMgYWNjb3JkaW5nIHRvIHRoZSByaWdodC1oYW5kXG4gICAqICAgICBydWxlIChjb3VudGVyLWNsb2Nrd2lzZSBmb3IgZXh0ZXJpb3IgYW5kIGNsb2Nrd2lzZSBmb3IgaW50ZXJpb3IgcmluZ3MpLlxuICAgKiAgICAgSWYgYGZhbHNlYCwgY29vcmRpbmF0ZXMgd2lsbCBiZSBvcmllbnRlZCBhY2NvcmRpbmcgdG8gdGhlIGxlZnQtaGFuZCBydWxlXG4gICAqICAgICAoY2xvY2t3aXNlIGZvciBleHRlcmlvciBhbmQgY291bnRlci1jbG9ja3dpc2UgZm9yIGludGVyaW9yIHJpbmdzKS5cbiAgICogICAgIEJ5IGRlZmF1bHQsIGNvb3JkaW5hdGUgb3JpZW50YXRpb24gd2lsbCBkZXBlbmQgb24gaG93IHRoZSBnZW9tZXRyeSB3YXNcbiAgICogICAgIGNvbnN0cnVjdGVkLlxuICAgKiBAcmV0dXJuIHtBcnJheTxBcnJheTxBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pj59IENvb3JkaW5hdGVzLlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQGFwaVxuICAgKi9cbiAgTXVsdGlQb2x5Z29uLnByb3RvdHlwZS5nZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIGdldENvb3JkaW5hdGVzIChvcHRfcmlnaHQpIHtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzO1xuICAgIGlmIChvcHRfcmlnaHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpLnNsaWNlKCk7XG4gICAgICBvcmllbnRMaW5lYXJSaW5nc0FycmF5KFxuICAgICAgICBmbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZW5kc3NfLCB0aGlzLnN0cmlkZSwgb3B0X3JpZ2h0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5mbGF0Q29vcmRpbmF0ZXM7XG4gICAgfVxuXG4gICAgcmV0dXJuIGluZmxhdGVNdWx0aUNvb3JkaW5hdGVzQXJyYXkoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZW5kc3NfLCB0aGlzLnN0cmlkZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge0FycmF5PEFycmF5PG51bWJlcj4+fSBFbmRzcy5cbiAgICovXG4gIE11bHRpUG9seWdvbi5wcm90b3R5cGUuZ2V0RW5kc3MgPSBmdW5jdGlvbiBnZXRFbmRzcyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW5kc3NfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBGbGF0IGludGVyaW9yIHBvaW50cy5cbiAgICovXG4gIE11bHRpUG9seWdvbi5wcm90b3R5cGUuZ2V0RmxhdEludGVyaW9yUG9pbnRzID0gZnVuY3Rpb24gZ2V0RmxhdEludGVyaW9yUG9pbnRzICgpIHtcbiAgICBpZiAodGhpcy5mbGF0SW50ZXJpb3JQb2ludHNSZXZpc2lvbl8gIT0gdGhpcy5nZXRSZXZpc2lvbigpKSB7XG4gICAgICB2YXIgZmxhdENlbnRlcnMgPSBsaW5lYXJSaW5nc3NDZW50ZXIoXG4gICAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNzXywgdGhpcy5zdHJpZGUpO1xuICAgICAgdGhpcy5mbGF0SW50ZXJpb3JQb2ludHNfID0gZ2V0SW50ZXJpb3JQb2ludHNPZk11bHRpQXJyYXkoXG4gICAgICAgIHRoaXMuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKSwgMCwgdGhpcy5lbmRzc18sIHRoaXMuc3RyaWRlLFxuICAgICAgICBmbGF0Q2VudGVycyk7XG4gICAgICB0aGlzLmZsYXRJbnRlcmlvclBvaW50c1JldmlzaW9uXyA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZmxhdEludGVyaW9yUG9pbnRzXztcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBpbnRlcmlvciBwb2ludHMgYXMge0BsaW5rIG1vZHVsZTpvbC9nZW9tL011bHRpUG9pbnQgbXVsdGlwb2ludH0uXG4gICAqIEByZXR1cm4ge011bHRpUG9pbnR9IEludGVyaW9yIHBvaW50cyBhcyBYWU0gY29vcmRpbmF0ZXMsIHdoZXJlIE0gaXNcbiAgICogdGhlIGxlbmd0aCBvZiB0aGUgaG9yaXpvbnRhbCBpbnRlcnNlY3Rpb24gdGhhdCB0aGUgcG9pbnQgYmVsb25ncyB0by5cbiAgICogQGFwaVxuICAgKi9cbiAgTXVsdGlQb2x5Z29uLnByb3RvdHlwZS5nZXRJbnRlcmlvclBvaW50cyA9IGZ1bmN0aW9uIGdldEludGVyaW9yUG9pbnRzICgpIHtcbiAgICByZXR1cm4gbmV3IE11bHRpUG9pbnQodGhpcy5nZXRGbGF0SW50ZXJpb3JQb2ludHMoKS5zbGljZSgpLCBHZW9tZXRyeUxheW91dC5YWU0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBPcmllbnRlZCBmbGF0IGNvb3JkaW5hdGVzLlxuICAgKi9cbiAgTXVsdGlQb2x5Z29uLnByb3RvdHlwZS5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIGdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzICgpIHtcbiAgICBpZiAodGhpcy5vcmllbnRlZFJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmZsYXRDb29yZGluYXRlcztcbiAgICAgIGlmIChsaW5lYXJSaW5nc0FyZU9yaWVudGVkKFxuICAgICAgICBmbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZW5kc3NfLCB0aGlzLnN0cmlkZSkpIHtcbiAgICAgICAgdGhpcy5vcmllbnRlZEZsYXRDb29yZGluYXRlc18gPSBmbGF0Q29vcmRpbmF0ZXM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXyA9IGZsYXRDb29yZGluYXRlcy5zbGljZSgpO1xuICAgICAgICB0aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXy5sZW5ndGggPVxuICAgICAgICAgICAgb3JpZW50TGluZWFyUmluZ3NBcnJheShcbiAgICAgICAgICAgICAgdGhpcy5vcmllbnRlZEZsYXRDb29yZGluYXRlc18sIDAsIHRoaXMuZW5kc3NfLCB0aGlzLnN0cmlkZSk7XG4gICAgICB9XG4gICAgICB0aGlzLm9yaWVudGVkUmV2aXNpb25fID0gdGhpcy5nZXRSZXZpc2lvbigpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5vcmllbnRlZEZsYXRDb29yZGluYXRlc187XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBNdWx0aVBvbHlnb24ucHJvdG90eXBlLmdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsID0gZnVuY3Rpb24gZ2V0U2ltcGxpZmllZEdlb21ldHJ5SW50ZXJuYWwgKHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICB2YXIgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgIHZhciBzaW1wbGlmaWVkRW5kc3MgPSBbXTtcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IHF1YW50aXplTXVsdGlBcnJheShcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNzXywgdGhpcy5zdHJpZGUsXG4gICAgICBNYXRoLnNxcnQoc3F1YXJlZFRvbGVyYW5jZSksXG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCAwLCBzaW1wbGlmaWVkRW5kc3MpO1xuICAgIHJldHVybiBuZXcgTXVsdGlQb2x5Z29uKHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIEdlb21ldHJ5TGF5b3V0LlhZLCBzaW1wbGlmaWVkRW5kc3MpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIHBvbHlnb24gYXQgdGhlIHNwZWNpZmllZCBpbmRleC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4LlxuICAgKiBAcmV0dXJuIHtQb2x5Z29ufSBQb2x5Z29uLlxuICAgKiBAYXBpXG4gICAqL1xuICBNdWx0aVBvbHlnb24ucHJvdG90eXBlLmdldFBvbHlnb24gPSBmdW5jdGlvbiBnZXRQb2x5Z29uIChpbmRleCkge1xuICAgIGlmIChpbmRleCA8IDAgfHwgdGhpcy5lbmRzc18ubGVuZ3RoIDw9IGluZGV4KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdmFyIG9mZnNldDtcbiAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgIG9mZnNldCA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBwcmV2RW5kcyA9IHRoaXMuZW5kc3NfW2luZGV4IC0gMV07XG4gICAgICBvZmZzZXQgPSBwcmV2RW5kc1twcmV2RW5kcy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgdmFyIGVuZHMgPSB0aGlzLmVuZHNzX1tpbmRleF0uc2xpY2UoKTtcbiAgICB2YXIgZW5kID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICAgIGlmIChvZmZzZXQgIT09IDApIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBlbmRzW2ldIC09IG9mZnNldDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBQb2x5Z29uKHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKG9mZnNldCwgZW5kKSwgdGhpcy5sYXlvdXQsIGVuZHMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIHBvbHlnb25zIG9mIHRoaXMgbXVsdGlwb2x5Z29uLlxuICAgKiBAcmV0dXJuIHtBcnJheTxQb2x5Z29uPn0gUG9seWdvbnMuXG4gICAqIEBhcGlcbiAgICovXG4gIE11bHRpUG9seWdvbi5wcm90b3R5cGUuZ2V0UG9seWdvbnMgPSBmdW5jdGlvbiBnZXRQb2x5Z29ucyAoKSB7XG4gICAgdmFyIGxheW91dCA9IHRoaXMubGF5b3V0O1xuICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmZsYXRDb29yZGluYXRlcztcbiAgICB2YXIgZW5kc3MgPSB0aGlzLmVuZHNzXztcbiAgICB2YXIgcG9seWdvbnMgPSBbXTtcbiAgICB2YXIgb2Zmc2V0ID0gMDtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICB2YXIgZW5kcyA9IGVuZHNzW2ldLnNsaWNlKCk7XG4gICAgICB2YXIgZW5kID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICAgICAgaWYgKG9mZnNldCAhPT0gMCkge1xuICAgICAgICBmb3IgKHZhciBqID0gMCwgamogPSBlbmRzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICBlbmRzW2pdIC09IG9mZnNldDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFyIHBvbHlnb24gPSBuZXcgUG9seWdvbihmbGF0Q29vcmRpbmF0ZXMuc2xpY2Uob2Zmc2V0LCBlbmQpLCBsYXlvdXQsIGVuZHMpO1xuICAgICAgcG9seWdvbnMucHVzaChwb2x5Z29uKTtcbiAgICAgIG9mZnNldCA9IGVuZDtcbiAgICB9XG4gICAgcmV0dXJuIHBvbHlnb25zO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKiBAYXBpXG4gICAqL1xuICBNdWx0aVBvbHlnb24ucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiBnZXRUeXBlICgpIHtcbiAgICByZXR1cm4gR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT047XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqIEBhcGlcbiAgICovXG4gIE11bHRpUG9seWdvbi5wcm90b3R5cGUuaW50ZXJzZWN0c0V4dGVudCA9IGZ1bmN0aW9uIGludGVyc2VjdHNFeHRlbnQgKGV4dGVudCkge1xuICAgIHJldHVybiBpbnRlcnNlY3RzTGluZWFyUmluZ011bHRpQXJyYXkoXG4gICAgICB0aGlzLmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCksIDAsIHRoaXMuZW5kc3NfLCB0aGlzLnN0cmlkZSwgZXh0ZW50KTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSBjb29yZGluYXRlcyBvZiB0aGUgbXVsdGlwb2x5Z29uLlxuICAgKiBAcGFyYW0geyFBcnJheTxBcnJheTxBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pj59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgKiBAcGFyYW0ge0dlb21ldHJ5TGF5b3V0PX0gb3B0X2xheW91dCBMYXlvdXQuXG4gICAqIEBvdmVycmlkZVxuICAgKiBAYXBpXG4gICAqL1xuICBNdWx0aVBvbHlnb24ucHJvdG90eXBlLnNldENvb3JkaW5hdGVzID0gZnVuY3Rpb24gc2V0Q29vcmRpbmF0ZXMgKGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0KSB7XG4gICAgdGhpcy5zZXRMYXlvdXQob3B0X2xheW91dCwgY29vcmRpbmF0ZXMsIDMpO1xuICAgIGlmICghdGhpcy5mbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgfVxuICAgIHZhciBlbmRzcyA9IGRlZmxhdGVNdWx0aUNvb3JkaW5hdGVzQXJyYXkoXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgY29vcmRpbmF0ZXMsIHRoaXMuc3RyaWRlLCB0aGlzLmVuZHNzXyk7XG4gICAgaWYgKGVuZHNzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGxhc3RFbmRzID0gZW5kc3NbZW5kc3MubGVuZ3RoIC0gMV07XG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGggPSBsYXN0RW5kcy5sZW5ndGggPT09IDAgP1xuICAgICAgICAwIDogbGFzdEVuZHNbbGFzdEVuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9O1xuXG4gIHJldHVybiBNdWx0aVBvbHlnb247XG59KFNpbXBsZUdlb21ldHJ5KSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgTXVsdGlQb2x5Z29uO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1NdWx0aVBvbHlnb24uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9jZW50ZXJcbiAqL1xuaW1wb3J0IHtjcmVhdGVFbXB0eSwgY3JlYXRlT3JVcGRhdGVGcm9tRmxhdENvb3JkaW5hdGVzfSBmcm9tICcuLi8uLi9leHRlbnQuanMnO1xuXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEZsYXQgY2VudGVycy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdzcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSkge1xuICB2YXIgZmxhdENlbnRlcnMgPSBbXTtcbiAgdmFyIGV4dGVudCA9IGNyZWF0ZUVtcHR5KCk7XG4gIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgIGV4dGVudCA9IGNyZWF0ZU9yVXBkYXRlRnJvbUZsYXRDb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc1swXSwgc3RyaWRlKTtcbiAgICBmbGF0Q2VudGVycy5wdXNoKChleHRlbnRbMF0gKyBleHRlbnRbMl0pIC8gMiwgKGV4dGVudFsxXSArIGV4dGVudFszXSkgLyAyKTtcbiAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gIH1cbiAgcmV0dXJuIGZsYXRDZW50ZXJzO1xufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jZW50ZXIuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0RyYXdcbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBGZWF0dXJlIGZyb20gJy4uL0ZlYXR1cmUuanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudFR5cGUgZnJvbSAnLi4vTWFwQnJvd3NlckV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlclBvaW50ZXJFdmVudCBmcm9tICcuLi9NYXBCcm93c2VyUG9pbnRlckV2ZW50LmpzJztcbmltcG9ydCB7Z2V0Q2hhbmdlRXZlbnRUeXBlfSBmcm9tICcuLi9PYmplY3QuanMnO1xuaW1wb3J0IHtzcXVhcmVkRGlzdGFuY2UgYXMgc3F1YXJlZENvb3JkaW5hdGVEaXN0YW5jZX0gZnJvbSAnLi4vY29vcmRpbmF0ZS5qcyc7XG5pbXBvcnQge2xpc3Rlbn0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbmltcG9ydCBFdmVudCBmcm9tICcuLi9ldmVudHMvRXZlbnQuanMnO1xuaW1wb3J0IHtub01vZGlmaWVyS2V5cywgYWx3YXlzLCBzaGlmdEtleU9ubHl9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IHtib3VuZGluZ0V4dGVudCwgZ2V0Qm90dG9tTGVmdCwgZ2V0Qm90dG9tUmlnaHQsIGdldFRvcExlZnQsIGdldFRvcFJpZ2h0fSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHtUUlVFLCBGQUxTRX0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCBDaXJjbGUgZnJvbSAnLi4vZ2VvbS9DaXJjbGUuanMnO1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuLi9nZW9tL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgTGluZVN0cmluZyBmcm9tICcuLi9nZW9tL0xpbmVTdHJpbmcuanMnO1xuaW1wb3J0IE11bHRpTGluZVN0cmluZyBmcm9tICcuLi9nZW9tL011bHRpTGluZVN0cmluZy5qcyc7XG5pbXBvcnQgTXVsdGlQb2ludCBmcm9tICcuLi9nZW9tL011bHRpUG9pbnQuanMnO1xuaW1wb3J0IE11bHRpUG9seWdvbiBmcm9tICcuLi9nZW9tL011bHRpUG9seWdvbi5qcyc7XG5pbXBvcnQge1BPSU5URVJfVFlQRX0gZnJvbSAnLi4vcG9pbnRlci9Nb3VzZVNvdXJjZS5qcyc7XG5pbXBvcnQgUG9pbnQgZnJvbSAnLi4vZ2VvbS9Qb2ludC5qcyc7XG5pbXBvcnQgUG9seWdvbiwge2Zyb21DaXJjbGUsIG1ha2VSZWd1bGFyfSBmcm9tICcuLi9nZW9tL1BvbHlnb24uanMnO1xuaW1wb3J0IFBvaW50ZXJJbnRlcmFjdGlvbiBmcm9tICcuL1BvaW50ZXIuanMnO1xuaW1wb3J0IEludGVyYWN0aW9uUHJvcGVydHkgZnJvbSAnLi9Qcm9wZXJ0eS5qcyc7XG5pbXBvcnQgVmVjdG9yTGF5ZXIgZnJvbSAnLi4vbGF5ZXIvVmVjdG9yLmpzJztcbmltcG9ydCBWZWN0b3JTb3VyY2UgZnJvbSAnLi4vc291cmNlL1ZlY3Rvci5qcyc7XG5pbXBvcnQge2NyZWF0ZUVkaXRpbmdTdHlsZX0gZnJvbSAnLi4vc3R5bGUvU3R5bGUuanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtHZW9tZXRyeVR5cGV9IHR5cGUgR2VvbWV0cnkgdHlwZSBvZlxuICogdGhlIGdlb21ldHJpZXMgYmVpbmcgZHJhd24gd2l0aCB0aGlzIGluc3RhbmNlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjbGlja1RvbGVyYW5jZT02XSBUaGUgbWF4aW11bSBkaXN0YW5jZSBpbiBwaXhlbHMgYmV0d2VlblxuICogXCJkb3duXCIgYW5kIFwidXBcIiBmb3IgYSBcInVwXCIgZXZlbnQgdG8gYmUgY29uc2lkZXJlZCBhIFwiY2xpY2tcIiBldmVudCBhbmRcbiAqIGFjdHVhbGx5IGFkZCBhIHBvaW50L3ZlcnRleCB0byB0aGUgZ2VvbWV0cnkgYmVpbmcgZHJhd24uICBUaGUgZGVmYXVsdCBvZiBgNmBcbiAqIHdhcyBjaG9zZW4gZm9yIHRoZSBkcmF3IGludGVyYWN0aW9uIHRvIGJlaGF2ZSBjb3JyZWN0bHkgb24gbW91c2UgYXMgd2VsbCBhc1xuICogb24gdG91Y2ggZGV2aWNlcy5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0PEZlYXR1cmU+fSBbZmVhdHVyZXNdXG4gKiBEZXN0aW5hdGlvbiBjb2xsZWN0aW9uIGZvciB0aGUgZHJhd24gZmVhdHVyZXMuXG4gKiBAcHJvcGVydHkge1ZlY3RvclNvdXJjZX0gW3NvdXJjZV0gRGVzdGluYXRpb24gc291cmNlIGZvclxuICogdGhlIGRyYXduIGZlYXR1cmVzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkcmFnVmVydGV4RGVsYXk9NTAwXSBEZWxheSBpbiBtaWxsaXNlY29uZHMgYWZ0ZXIgcG9pbnRlcmRvd25cbiAqIGJlZm9yZSB0aGUgY3VycmVudCB2ZXJ0ZXggY2FuIGJlIGRyYWdnZWQgdG8gaXRzIGV4YWN0IHBvc2l0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtzbmFwVG9sZXJhbmNlPTEyXSBQaXhlbCBkaXN0YW5jZSBmb3Igc25hcHBpbmcgdG8gdGhlXG4gKiBkcmF3aW5nIGZpbmlzaC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3N0b3BDbGljaz1mYWxzZV0gU3RvcCBjbGljaywgc2luZ2xlY2xpY2ssIGFuZFxuICogZG91YmxlY2xpY2sgZXZlbnRzIGZyb20gZmlyaW5nIGR1cmluZyBkcmF3aW5nLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhQb2ludHNdIFRoZSBudW1iZXIgb2YgcG9pbnRzIHRoYXQgY2FuIGJlIGRyYXduIGJlZm9yZVxuICogYSBwb2x5Z29uIHJpbmcgb3IgbGluZSBzdHJpbmcgaXMgZmluaXNoZWQuIEJ5IGRlZmF1bHQgdGhlcmUgaXMgbm9cbiAqIHJlc3RyaWN0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5Qb2ludHNdIFRoZSBudW1iZXIgb2YgcG9pbnRzIHRoYXQgbXVzdCBiZSBkcmF3blxuICogYmVmb3JlIGEgcG9seWdvbiByaW5nIG9yIGxpbmUgc3RyaW5nIGNhbiBiZSBmaW5pc2hlZC4gRGVmYXVsdCBpcyBgM2AgZm9yXG4gKiBwb2x5Z29uIHJpbmdzIGFuZCBgMmAgZm9yIGxpbmUgc3RyaW5ncy5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtmaW5pc2hDb25kaXRpb25dIEEgZnVuY3Rpb25cbiAqIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhXG4gKiBib29sZWFuIHRvIGluZGljYXRlIHdoZXRoZXIgdGhlIGRyYXdpbmcgY2FuIGJlIGZpbmlzaGVkLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZUxpa2V9IFtzdHlsZV1cbiAqIFN0eWxlIGZvciBza2V0Y2ggZmVhdHVyZXMuXG4gKiBAcHJvcGVydHkge0dlb21ldHJ5RnVuY3Rpb259IFtnZW9tZXRyeUZ1bmN0aW9uXVxuICogRnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbiBhIGdlb21ldHJ5J3MgY29vcmRpbmF0ZXMgYXJlIHVwZGF0ZWQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2dlb21ldHJ5TmFtZV0gR2VvbWV0cnkgbmFtZSB0byB1c2UgZm9yIGZlYXR1cmVzIGNyZWF0ZWRcbiAqIGJ5IHRoZSBkcmF3IGludGVyYWN0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2NvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0XG4gKiB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGFcbiAqIGJvb2xlYW4gdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLlxuICogQnkgZGVmYXVsdCB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb25+bm9Nb2RpZmllcktleXN9LCBpLmUuIGEgY2xpY2ssXG4gKiBhZGRzIGEgdmVydGV4IG9yIGRlYWN0aXZhdGVzIGZyZWVoYW5kIGRyYXdpbmcuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtmcmVlaGFuZD1mYWxzZV0gT3BlcmF0ZSBpbiBmcmVlaGFuZCBtb2RlIGZvciBsaW5lcyxcbiAqIHBvbHlnb25zLCBhbmQgY2lyY2xlcy4gIFRoaXMgbWFrZXMgdGhlIGludGVyYWN0aW9uIGFsd2F5cyBvcGVyYXRlIGluIGZyZWVoYW5kXG4gKiBtb2RlIGFuZCB0YWtlcyBwcmVjZWRlbmNlIG92ZXIgYW55IGBmcmVlaGFuZENvbmRpdGlvbmAgb3B0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2ZyZWVoYW5kQ29uZGl0aW9uXVxuICogQ29uZGl0aW9uIHRoYXQgYWN0aXZhdGVzIGZyZWVoYW5kIGRyYXdpbmcgZm9yIGxpbmVzIGFuZCBwb2x5Z29ucy4gVGhpc1xuICogZnVuY3Rpb24gdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmRcbiAqIHJldHVybnMgYSBib29sZWFuIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC4gVGhlXG4gKiBkZWZhdWx0IGlzIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn5zaGlmdEtleU9ubHl9LCBtZWFuaW5nIHRoYXQgdGhlXG4gKiBTaGlmdCBrZXkgYWN0aXZhdGVzIGZyZWVoYW5kIGRyYXdpbmcuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWD1mYWxzZV0gV3JhcCB0aGUgd29ybGQgaG9yaXpvbnRhbGx5IG9uIHRoZSBza2V0Y2hcbiAqIG92ZXJsYXkuXG4gKi9cblxuXG4vKipcbiAqIENvb3JkaW5hdGUgdHlwZSB3aGVuIGRyYXdpbmcgcG9pbnRzLlxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gUG9pbnRDb29yZFR5cGVcbiAqL1xuXG5cbi8qKlxuICogQ29vcmRpbmF0ZSB0eXBlIHdoZW4gZHJhd2luZyBsaW5lcy5cbiAqIEB0eXBlZGVmIHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBMaW5lQ29vcmRUeXBlXG4gKi9cblxuXG4vKipcbiAqIENvb3JkaW5hdGUgdHlwZSB3aGVuIGRyYXdpbmcgcG9seWdvbnMuXG4gKiBAdHlwZWRlZiB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IFBvbHlDb29yZFR5cGVcbiAqL1xuXG5cbi8qKlxuICogVHlwZXMgdXNlZCBmb3IgZHJhd2luZyBjb29yZGluYXRlcy5cbiAqIEB0eXBlZGVmIHtQb2ludENvb3JkVHlwZXxMaW5lQ29vcmRUeXBlfFBvbHlDb29yZFR5cGV9IFNrZXRjaENvb3JkVHlwZVxuICovXG5cblxuLyoqXG4gKiBGdW5jdGlvbiB0aGF0IHRha2VzIGFuIGFycmF5IG9mIGNvb3JkaW5hdGVzIGFuZCBhbiBvcHRpb25hbCBleGlzdGluZyBnZW9tZXRyeSBhc1xuICogYXJndW1lbnRzLCBhbmQgcmV0dXJucyBhIGdlb21ldHJ5LiBUaGUgb3B0aW9uYWwgZXhpc3RpbmcgZ2VvbWV0cnkgaXMgdGhlXG4gKiBnZW9tZXRyeSB0aGF0IGlzIHJldHVybmVkIHdoZW4gdGhlIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRob3V0IGEgc2Vjb25kXG4gKiBhcmd1bWVudC5cbiAqIEB0eXBlZGVmIHtmdW5jdGlvbighU2tldGNoQ29vcmRUeXBlLCBpbXBvcnQoXCIuLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHQ9KTpcbiAqICAgICBpbXBvcnQoXCIuLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9IEdlb21ldHJ5RnVuY3Rpb25cbiAqL1xuXG5cbi8qKlxuICogRHJhdyBtb2RlLiAgVGhpcyBjb2xsYXBzZXMgbXVsdGktcGFydCBnZW9tZXRyeSB0eXBlcyB3aXRoIHRoZWlyIHNpbmdsZS1wYXJ0XG4gKiBjb3VzaW5zLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xudmFyIE1vZGUgPSB7XG4gIFBPSU5UOiAnUG9pbnQnLFxuICBMSU5FX1NUUklORzogJ0xpbmVTdHJpbmcnLFxuICBQT0xZR09OOiAnUG9seWdvbicsXG4gIENJUkNMRTogJ0NpcmNsZSdcbn07XG5cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG52YXIgRHJhd0V2ZW50VHlwZSA9IHtcbiAgLyoqXG4gICAqIFRyaWdnZXJlZCB1cG9uIGZlYXR1cmUgZHJhdyBzdGFydFxuICAgKiBAZXZlbnQgRHJhd0V2ZW50I2RyYXdzdGFydFxuICAgKiBAYXBpXG4gICAqL1xuICBEUkFXU1RBUlQ6ICdkcmF3c3RhcnQnLFxuICAvKipcbiAgICogVHJpZ2dlcmVkIHVwb24gZmVhdHVyZSBkcmF3IGVuZFxuICAgKiBAZXZlbnQgRHJhd0V2ZW50I2RyYXdlbmRcbiAgICogQGFwaVxuICAgKi9cbiAgRFJBV0VORDogJ2RyYXdlbmQnXG59O1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmF3fkRyYXd9IGluc3RhbmNlcyBhcmVcbiAqIGluc3RhbmNlcyBvZiB0aGlzIHR5cGUuXG4gKi9cbnZhciBEcmF3RXZlbnQgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChFdmVudCkge1xuICBmdW5jdGlvbiBEcmF3RXZlbnQodHlwZSwgZmVhdHVyZSkge1xuXG4gICAgRXZlbnQuY2FsbCh0aGlzLCB0eXBlKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBmZWF0dXJlIGJlaW5nIGRyYXduLlxuICAgICAqIEB0eXBlIHtGZWF0dXJlfVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICB0aGlzLmZlYXR1cmUgPSBmZWF0dXJlO1xuXG4gIH1cblxuICBpZiAoIEV2ZW50ICkgRHJhd0V2ZW50Ll9fcHJvdG9fXyA9IEV2ZW50O1xuICBEcmF3RXZlbnQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXZlbnQgJiYgRXZlbnQucHJvdG90eXBlICk7XG4gIERyYXdFdmVudC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBEcmF3RXZlbnQ7XG5cbiAgcmV0dXJuIERyYXdFdmVudDtcbn0oRXZlbnQpKTtcblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEludGVyYWN0aW9uIGZvciBkcmF3aW5nIGZlYXR1cmUgZ2VvbWV0cmllcy5cbiAqXG4gKiBAZmlyZXMgRHJhd0V2ZW50XG4gKiBAYXBpXG4gKi9cbnZhciBEcmF3ID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoUG9pbnRlckludGVyYWN0aW9uKSB7XG4gIGZ1bmN0aW9uIERyYXcob3B0aW9ucykge1xuXG4gICAgdmFyIHBvaW50ZXJPcHRpb25zID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1BvaW50ZXIuanNcIikuT3B0aW9uc30gKi8gKG9wdGlvbnMpO1xuICAgIGlmICghcG9pbnRlck9wdGlvbnMuc3RvcERvd24pIHtcbiAgICAgIHBvaW50ZXJPcHRpb25zLnN0b3BEb3duID0gRkFMU0U7XG4gICAgfVxuXG4gICAgUG9pbnRlckludGVyYWN0aW9uLmNhbGwodGhpcywgcG9pbnRlck9wdGlvbnMpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnNob3VsZEhhbmRsZV8gPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZG93blB4XyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7P31cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZG93blRpbWVvdXRfO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmxhc3REcmFnVGltZV87XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZnJlZWhhbmRfID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBUYXJnZXQgc291cmNlIGZvciBkcmF3biBmZWF0dXJlcy5cbiAgICAgKiBAdHlwZSB7VmVjdG9yU291cmNlfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5zb3VyY2VfID0gb3B0aW9ucy5zb3VyY2UgPyBvcHRpb25zLnNvdXJjZSA6IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBUYXJnZXQgY29sbGVjdGlvbiBmb3IgZHJhd24gZmVhdHVyZXMuXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuZGVmYXVsdDxGZWF0dXJlPn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZmVhdHVyZXNfID0gb3B0aW9ucy5mZWF0dXJlcyA/IG9wdGlvbnMuZmVhdHVyZXMgOiBudWxsO1xuXG4gICAgLyoqXG4gICAgICogUGl4ZWwgZGlzdGFuY2UgZm9yIHNuYXBwaW5nLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnNuYXBUb2xlcmFuY2VfID0gb3B0aW9ucy5zbmFwVG9sZXJhbmNlID8gb3B0aW9ucy5zbmFwVG9sZXJhbmNlIDogMTI7XG5cbiAgICAvKipcbiAgICAgKiBHZW9tZXRyeSB0eXBlLlxuICAgICAqIEB0eXBlIHtHZW9tZXRyeVR5cGV9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnR5cGVfID0gLyoqIEB0eXBlIHtHZW9tZXRyeVR5cGV9ICovIChvcHRpb25zLnR5cGUpO1xuXG4gICAgLyoqXG4gICAgICogRHJhd2luZyBtb2RlIChkZXJpdmVkIGZyb20gZ2VvbWV0cnkgdHlwZS5cbiAgICAgKiBAdHlwZSB7TW9kZX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMubW9kZV8gPSBnZXRNb2RlKHRoaXMudHlwZV8pO1xuXG4gICAgLyoqXG4gICAgICogU3RvcCBjbGljaywgc2luZ2xlY2xpY2ssIGFuZCBkb3VibGVjbGljayBldmVudHMgZnJvbSBmaXJpbmcgZHVyaW5nIGRyYXdpbmcuXG4gICAgICogRGVmYXVsdCBpcyBgZmFsc2VgLlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5zdG9wQ2xpY2tfID0gISFvcHRpb25zLnN0b3BDbGljaztcblxuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgcG9pbnRzIHRoYXQgbXVzdCBiZSBkcmF3biBiZWZvcmUgYSBwb2x5Z29uIHJpbmcgb3IgbGluZVxuICAgICAqIHN0cmluZyBjYW4gYmUgZmluaXNoZWQuICBUaGUgZGVmYXVsdCBpcyAzIGZvciBwb2x5Z29uIHJpbmdzIGFuZCAyIGZvclxuICAgICAqIGxpbmUgc3RyaW5ncy5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5taW5Qb2ludHNfID0gb3B0aW9ucy5taW5Qb2ludHMgP1xuICAgICAgb3B0aW9ucy5taW5Qb2ludHMgOlxuICAgICAgKHRoaXMubW9kZV8gPT09IE1vZGUuUE9MWUdPTiA/IDMgOiAyKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgcG9pbnRzIHRoYXQgY2FuIGJlIGRyYXduIGJlZm9yZSBhIHBvbHlnb24gcmluZyBvciBsaW5lIHN0cmluZ1xuICAgICAqIGlzIGZpbmlzaGVkLiBUaGUgZGVmYXVsdCBpcyBubyByZXN0cmljdGlvbi5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5tYXhQb2ludHNfID0gb3B0aW9ucy5tYXhQb2ludHMgPyBvcHRpb25zLm1heFBvaW50cyA6IEluZmluaXR5O1xuXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0byBkZWNpZGUgaWYgYSBwb3RlbnRpYWwgZmluaXNoIGNvb3JkaW5hdGUgaXMgcGVybWlzc2libGVcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn1cbiAgICAgKi9cbiAgICB0aGlzLmZpbmlzaENvbmRpdGlvbl8gPSBvcHRpb25zLmZpbmlzaENvbmRpdGlvbiA/IG9wdGlvbnMuZmluaXNoQ29uZGl0aW9uIDogVFJVRTtcblxuICAgIHZhciBnZW9tZXRyeUZ1bmN0aW9uID0gb3B0aW9ucy5nZW9tZXRyeUZ1bmN0aW9uO1xuICAgIGlmICghZ2VvbWV0cnlGdW5jdGlvbikge1xuICAgICAgaWYgKHRoaXMudHlwZV8gPT09IEdlb21ldHJ5VHlwZS5DSVJDTEUpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7IUxpbmVDb29yZFR5cGV9IGNvb3JkaW5hdGVzIFRoZSBjb29yZGluYXRlcy5cbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHQ9fSBvcHRfZ2VvbWV0cnkgT3B0aW9uYWwgZ2VvbWV0cnkuXG4gICAgICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gQSBnZW9tZXRyeS5cbiAgICAgICAgICovXG4gICAgICAgIGdlb21ldHJ5RnVuY3Rpb24gPSBmdW5jdGlvbihjb29yZGluYXRlcywgb3B0X2dlb21ldHJ5KSB7XG4gICAgICAgICAgdmFyIGNpcmNsZSA9IG9wdF9nZW9tZXRyeSA/IC8qKiBAdHlwZSB7Q2lyY2xlfSAqLyAob3B0X2dlb21ldHJ5KSA6XG4gICAgICAgICAgICBuZXcgQ2lyY2xlKFtOYU4sIE5hTl0pO1xuICAgICAgICAgIHZhciBzcXVhcmVkTGVuZ3RoID0gc3F1YXJlZENvb3JkaW5hdGVEaXN0YW5jZShcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzWzBdLCBjb29yZGluYXRlc1sxXSk7XG4gICAgICAgICAgY2lyY2xlLnNldENlbnRlckFuZFJhZGl1cyhjb29yZGluYXRlc1swXSwgTWF0aC5zcXJ0KHNxdWFyZWRMZW5ndGgpKTtcbiAgICAgICAgICByZXR1cm4gY2lyY2xlO1xuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIENvbnN0cnVjdG9yO1xuICAgICAgICB2YXIgbW9kZSA9IHRoaXMubW9kZV87XG4gICAgICAgIGlmIChtb2RlID09PSBNb2RlLlBPSU5UKSB7XG4gICAgICAgICAgQ29uc3RydWN0b3IgPSBQb2ludDtcbiAgICAgICAgfSBlbHNlIGlmIChtb2RlID09PSBNb2RlLkxJTkVfU1RSSU5HKSB7XG4gICAgICAgICAgQ29uc3RydWN0b3IgPSBMaW5lU3RyaW5nO1xuICAgICAgICB9IGVsc2UgaWYgKG1vZGUgPT09IE1vZGUuUE9MWUdPTikge1xuICAgICAgICAgIENvbnN0cnVjdG9yID0gUG9seWdvbjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHshTGluZUNvb3JkVHlwZX0gY29vcmRpbmF0ZXMgVGhlIGNvb3JkaW5hdGVzLlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdD19IG9wdF9nZW9tZXRyeSBPcHRpb25hbCBnZW9tZXRyeS5cbiAgICAgICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBBIGdlb21ldHJ5LlxuICAgICAgICAgKi9cbiAgICAgICAgZ2VvbWV0cnlGdW5jdGlvbiA9IGZ1bmN0aW9uKGNvb3JkaW5hdGVzLCBvcHRfZ2VvbWV0cnkpIHtcbiAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBvcHRfZ2VvbWV0cnk7XG4gICAgICAgICAgaWYgKGdlb21ldHJ5KSB7XG4gICAgICAgICAgICBpZiAobW9kZSA9PT0gTW9kZS5QT0xZR09OKSB7XG4gICAgICAgICAgICAgIGlmIChjb29yZGluYXRlc1swXS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgYSBjbG9zaW5nIGNvb3JkaW5hdGUgdG8gbWF0Y2ggdGhlIGZpcnN0XG4gICAgICAgICAgICAgICAgZ2VvbWV0cnkuc2V0Q29vcmRpbmF0ZXMoW2Nvb3JkaW5hdGVzWzBdLmNvbmNhdChbY29vcmRpbmF0ZXNbMF1bMF1dKV0pO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGdlb21ldHJ5LnNldENvb3JkaW5hdGVzKFtdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZ2VvbWV0cnkuc2V0Q29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnZW9tZXRyeSA9IG5ldyBDb25zdHJ1Y3Rvcihjb29yZGluYXRlcyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBnZW9tZXRyeTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7R2VvbWV0cnlGdW5jdGlvbn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZ2VvbWV0cnlGdW5jdGlvbl8gPSBnZW9tZXRyeUZ1bmN0aW9uO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZHJhZ1ZlcnRleERlbGF5XyA9IG9wdGlvbnMuZHJhZ1ZlcnRleERlbGF5ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmRyYWdWZXJ0ZXhEZWxheSA6IDUwMDtcblxuICAgIC8qKlxuICAgICAqIEZpbmlzaCBjb29yZGluYXRlIGZvciB0aGUgZmVhdHVyZSAoZmlyc3QgcG9pbnQgZm9yIHBvbHlnb25zLCBsYXN0IHBvaW50IGZvclxuICAgICAqIGxpbmVzdHJpbmdzKS5cbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5maW5pc2hDb29yZGluYXRlXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBTa2V0Y2ggZmVhdHVyZS5cbiAgICAgKiBAdHlwZSB7RmVhdHVyZX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuc2tldGNoRmVhdHVyZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogU2tldGNoIHBvaW50LlxuICAgICAqIEB0eXBlIHtGZWF0dXJlfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5za2V0Y2hQb2ludF8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogU2tldGNoIGNvb3JkaW5hdGVzLiBVc2VkIHdoZW4gZHJhd2luZyBhIGxpbmUgb3IgcG9seWdvbi5cbiAgICAgKiBAdHlwZSB7U2tldGNoQ29vcmRUeXBlfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5za2V0Y2hDb29yZHNfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFNrZXRjaCBsaW5lLiBVc2VkIHdoZW4gZHJhd2luZyBwb2x5Z29uLlxuICAgICAqIEB0eXBlIHtGZWF0dXJlfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5za2V0Y2hMaW5lXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBTa2V0Y2ggbGluZSBjb29yZGluYXRlcy4gVXNlZCB3aGVuIGRyYXdpbmcgYSBwb2x5Z29uIG9yIGNpcmNsZS5cbiAgICAgKiBAdHlwZSB7TGluZUNvb3JkVHlwZX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuc2tldGNoTGluZUNvb3Jkc18gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogU3F1YXJlZCB0b2xlcmFuY2UgZm9yIGhhbmRsaW5nIHVwIGV2ZW50cy4gIElmIHRoZSBzcXVhcmVkIGRpc3RhbmNlXG4gICAgICogYmV0d2VlbiBhIGRvd24gYW5kIHVwIGV2ZW50IGlzIGdyZWF0ZXIgdGhhbiB0aGlzIHRvbGVyYW5jZSwgdXAgZXZlbnRzXG4gICAgICogd2lsbCBub3QgYmUgaGFuZGxlZC5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5zcXVhcmVkQ2xpY2tUb2xlcmFuY2VfID0gb3B0aW9ucy5jbGlja1RvbGVyYW5jZSA/XG4gICAgICBvcHRpb25zLmNsaWNrVG9sZXJhbmNlICogb3B0aW9ucy5jbGlja1RvbGVyYW5jZSA6IDM2O1xuXG4gICAgLyoqXG4gICAgICogRHJhdyBvdmVybGF5IHdoZXJlIG91ciBza2V0Y2ggZmVhdHVyZXMgYXJlIGRyYXduLlxuICAgICAqIEB0eXBlIHtWZWN0b3JMYXllcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMub3ZlcmxheV8gPSBuZXcgVmVjdG9yTGF5ZXIoe1xuICAgICAgc291cmNlOiBuZXcgVmVjdG9yU291cmNlKHtcbiAgICAgICAgdXNlU3BhdGlhbEluZGV4OiBmYWxzZSxcbiAgICAgICAgd3JhcFg6IG9wdGlvbnMud3JhcFggPyBvcHRpb25zLndyYXBYIDogZmFsc2VcbiAgICAgIH0pLFxuICAgICAgc3R5bGU6IG9wdGlvbnMuc3R5bGUgPyBvcHRpb25zLnN0eWxlIDpcbiAgICAgICAgZ2V0RGVmYXVsdFN0eWxlRnVuY3Rpb24oKSxcbiAgICAgIHVwZGF0ZVdoaWxlSW50ZXJhY3Rpbmc6IHRydWVcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIE5hbWUgb2YgdGhlIGdlb21ldHJ5IGF0dHJpYnV0ZSBmb3IgbmV3bHkgY3JlYXRlZCBmZWF0dXJlcy5cbiAgICAgKiBAdHlwZSB7c3RyaW5nfHVuZGVmaW5lZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZ2VvbWV0cnlOYW1lXyA9IG9wdGlvbnMuZ2VvbWV0cnlOYW1lO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259XG4gICAgICovXG4gICAgdGhpcy5jb25kaXRpb25fID0gb3B0aW9ucy5jb25kaXRpb24gPyBvcHRpb25zLmNvbmRpdGlvbiA6IG5vTW9kaWZpZXJLZXlzO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259XG4gICAgICovXG4gICAgdGhpcy5mcmVlaGFuZENvbmRpdGlvbl87XG4gICAgaWYgKG9wdGlvbnMuZnJlZWhhbmQpIHtcbiAgICAgIHRoaXMuZnJlZWhhbmRDb25kaXRpb25fID0gYWx3YXlzO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZyZWVoYW5kQ29uZGl0aW9uXyA9IG9wdGlvbnMuZnJlZWhhbmRDb25kaXRpb24gP1xuICAgICAgICBvcHRpb25zLmZyZWVoYW5kQ29uZGl0aW9uIDogc2hpZnRLZXlPbmx5O1xuICAgIH1cblxuICAgIGxpc3Rlbih0aGlzLFxuICAgICAgZ2V0Q2hhbmdlRXZlbnRUeXBlKEludGVyYWN0aW9uUHJvcGVydHkuQUNUSVZFKSxcbiAgICAgIHRoaXMudXBkYXRlU3RhdGVfLCB0aGlzKTtcblxuICB9XG5cbiAgaWYgKCBQb2ludGVySW50ZXJhY3Rpb24gKSBEcmF3Ll9fcHJvdG9fXyA9IFBvaW50ZXJJbnRlcmFjdGlvbjtcbiAgRHJhdy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQb2ludGVySW50ZXJhY3Rpb24gJiYgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZSApO1xuICBEcmF3LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IERyYXc7XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBEcmF3LnByb3RvdHlwZS5zZXRNYXAgPSBmdW5jdGlvbiBzZXRNYXAgKG1hcCkge1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuc2V0TWFwLmNhbGwodGhpcywgbWFwKTtcbiAgICB0aGlzLnVwZGF0ZVN0YXRlXygpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG92ZXJsYXkgbGF5ZXIgdGhhdCB0aGlzIGludGVyYWN0aW9uIHJlbmRlcnMgc2tldGNoIGZlYXR1cmVzIHRvLlxuICAgKiBAcmV0dXJuIHtWZWN0b3JMYXllcn0gT3ZlcmxheSBsYXllci5cbiAgICogQGFwaVxuICAgKi9cbiAgRHJhdy5wcm90b3R5cGUuZ2V0T3ZlcmxheSA9IGZ1bmN0aW9uIGdldE92ZXJsYXkgKCkge1xuICAgIHJldHVybiB0aGlzLm92ZXJsYXlfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudCBtYXAgYnJvd3NlciBldmVudH0gYW5kIG1heSBhY3R1YWxseSBkcmF3IG9yIGZpbmlzaCB0aGUgZHJhd2luZy5cbiAgICogQG92ZXJyaWRlXG4gICAqIEBhcGlcbiAgICovXG4gIERyYXcucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gaGFuZGxlRXZlbnQgKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50Lm9yaWdpbmFsRXZlbnQudHlwZSA9PT0gRXZlbnRUeXBlLkNPTlRFWFRNRU5VKSB7XG4gICAgICAvLyBBdm9pZCBjb250ZXh0IG1lbnUgZm9yIGxvbmcgdGFwcyB3aGVuIGRyYXdpbmcgb24gbW9iaWxlXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgICB0aGlzLmZyZWVoYW5kXyA9IHRoaXMubW9kZV8gIT09IE1vZGUuUE9JTlQgJiYgdGhpcy5mcmVlaGFuZENvbmRpdGlvbl8oZXZlbnQpO1xuICAgIHZhciBtb3ZlID0gZXZlbnQudHlwZSA9PT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSTU9WRTtcbiAgICB2YXIgcGFzcyA9IHRydWU7XG4gICAgaWYgKCF0aGlzLmZyZWVoYW5kXyAmJiB0aGlzLmxhc3REcmFnVGltZV8gJiYgZXZlbnQudHlwZSA9PT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRFJBRykge1xuICAgICAgdmFyIG5vdyA9IERhdGUubm93KCk7XG4gICAgICBpZiAobm93IC0gdGhpcy5sYXN0RHJhZ1RpbWVfID49IHRoaXMuZHJhZ1ZlcnRleERlbGF5Xykge1xuICAgICAgICB0aGlzLmRvd25QeF8gPSBldmVudC5waXhlbDtcbiAgICAgICAgdGhpcy5zaG91bGRIYW5kbGVfID0gIXRoaXMuZnJlZWhhbmRfO1xuICAgICAgICBtb3ZlID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubGFzdERyYWdUaW1lXyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnNob3VsZEhhbmRsZV8gJiYgdGhpcy5kb3duVGltZW91dF8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5kb3duVGltZW91dF8pO1xuICAgICAgICB0aGlzLmRvd25UaW1lb3V0XyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuZnJlZWhhbmRfICYmXG4gICAgICAgIGV2ZW50LnR5cGUgPT09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRSQUcgJiZcbiAgICAgICAgdGhpcy5za2V0Y2hGZWF0dXJlXyAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5hZGRUb0RyYXdpbmdfKGV2ZW50KTtcbiAgICAgIHBhc3MgPSBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuZnJlZWhhbmRfICYmXG4gICAgICAgIGV2ZW50LnR5cGUgPT09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRPV04pIHtcbiAgICAgIHBhc3MgPSBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKG1vdmUpIHtcbiAgICAgIHBhc3MgPSBldmVudC50eXBlID09PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJNT1ZFO1xuICAgICAgaWYgKHBhc3MgJiYgdGhpcy5mcmVlaGFuZF8pIHtcbiAgICAgICAgcGFzcyA9IHRoaXMuaGFuZGxlUG9pbnRlck1vdmVfKGV2ZW50KTtcbiAgICAgIH0gZWxzZSBpZiAoLyoqIEB0eXBlIHtNYXBCcm93c2VyUG9pbnRlckV2ZW50fSAqLyAoZXZlbnQpLnBvaW50ZXJFdmVudC5wb2ludGVyVHlwZSA9PSBQT0lOVEVSX1RZUEUgfHxcbiAgICAgICAgICAoZXZlbnQudHlwZSA9PT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRFJBRyAmJiB0aGlzLmRvd25UaW1lb3V0XyA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgICB0aGlzLmhhbmRsZVBvaW50ZXJNb3ZlXyhldmVudCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChldmVudC50eXBlID09PSBNYXBCcm93c2VyRXZlbnRUeXBlLkRCTENMSUNLKSB7XG4gICAgICBwYXNzID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuaGFuZGxlRXZlbnQuY2FsbCh0aGlzLCBldmVudCkgJiYgcGFzcztcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIERyYXcucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIGhhbmRsZURvd25FdmVudCAoZXZlbnQpIHtcbiAgICB0aGlzLnNob3VsZEhhbmRsZV8gPSAhdGhpcy5mcmVlaGFuZF87XG5cbiAgICBpZiAodGhpcy5mcmVlaGFuZF8pIHtcbiAgICAgIHRoaXMuZG93blB4XyA9IGV2ZW50LnBpeGVsO1xuICAgICAgaWYgKCF0aGlzLmZpbmlzaENvb3JkaW5hdGVfKSB7XG4gICAgICAgIHRoaXMuc3RhcnREcmF3aW5nXyhldmVudCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuY29uZGl0aW9uXyhldmVudCkpIHtcbiAgICAgIHRoaXMubGFzdERyYWdUaW1lXyA9IERhdGUubm93KCk7XG4gICAgICB0aGlzLmRvd25UaW1lb3V0XyA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlUG9pbnRlck1vdmVfKG5ldyBNYXBCcm93c2VyUG9pbnRlckV2ZW50KFxuICAgICAgICAgIE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUk1PVkUsIGV2ZW50Lm1hcCwgZXZlbnQucG9pbnRlckV2ZW50LCBmYWxzZSwgZXZlbnQuZnJhbWVTdGF0ZSkpO1xuICAgICAgfS5iaW5kKHRoaXMpLCB0aGlzLmRyYWdWZXJ0ZXhEZWxheV8pO1xuICAgICAgdGhpcy5kb3duUHhfID0gZXZlbnQucGl4ZWw7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgRHJhdy5wcm90b3R5cGUuaGFuZGxlVXBFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZVVwRXZlbnQgKGV2ZW50KSB7XG4gICAgdmFyIHBhc3MgPSB0cnVlO1xuXG4gICAgaWYgKHRoaXMuZG93blRpbWVvdXRfKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5kb3duVGltZW91dF8pO1xuICAgICAgdGhpcy5kb3duVGltZW91dF8gPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgdGhpcy5oYW5kbGVQb2ludGVyTW92ZV8oZXZlbnQpO1xuXG4gICAgdmFyIGNpcmNsZU1vZGUgPSB0aGlzLm1vZGVfID09PSBNb2RlLkNJUkNMRTtcblxuICAgIGlmICh0aGlzLnNob3VsZEhhbmRsZV8pIHtcbiAgICAgIGlmICghdGhpcy5maW5pc2hDb29yZGluYXRlXykge1xuICAgICAgICB0aGlzLnN0YXJ0RHJhd2luZ18oZXZlbnQpO1xuICAgICAgICBpZiAodGhpcy5tb2RlXyA9PT0gTW9kZS5QT0lOVCkge1xuICAgICAgICAgIHRoaXMuZmluaXNoRHJhd2luZygpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZnJlZWhhbmRfIHx8IGNpcmNsZU1vZGUpIHtcbiAgICAgICAgdGhpcy5maW5pc2hEcmF3aW5nKCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuYXRGaW5pc2hfKGV2ZW50KSkge1xuICAgICAgICBpZiAodGhpcy5maW5pc2hDb25kaXRpb25fKGV2ZW50KSkge1xuICAgICAgICAgIHRoaXMuZmluaXNoRHJhd2luZygpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmFkZFRvRHJhd2luZ18oZXZlbnQpO1xuICAgICAgfVxuICAgICAgcGFzcyA9IGZhbHNlO1xuICAgIH0gZWxzZSBpZiAodGhpcy5mcmVlaGFuZF8pIHtcbiAgICAgIHRoaXMuZmluaXNoQ29vcmRpbmF0ZV8gPSBudWxsO1xuICAgICAgdGhpcy5hYm9ydERyYXdpbmdfKCk7XG4gICAgfVxuICAgIGlmICghcGFzcyAmJiB0aGlzLnN0b3BDbGlja18pIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgICByZXR1cm4gcGFzcztcbiAgfTtcblxuICAvKipcbiAgICogSGFuZGxlIG1vdmUgZXZlbnRzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBBIG1vdmUgZXZlbnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFBhc3MgdGhlIGV2ZW50IHRvIG90aGVyIGludGVyYWN0aW9ucy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIERyYXcucHJvdG90eXBlLmhhbmRsZVBvaW50ZXJNb3ZlXyA9IGZ1bmN0aW9uIGhhbmRsZVBvaW50ZXJNb3ZlXyAoZXZlbnQpIHtcbiAgICBpZiAodGhpcy5kb3duUHhfICYmXG4gICAgICAgICgoIXRoaXMuZnJlZWhhbmRfICYmIHRoaXMuc2hvdWxkSGFuZGxlXykgfHxcbiAgICAgICAgKHRoaXMuZnJlZWhhbmRfICYmICF0aGlzLnNob3VsZEhhbmRsZV8pKSkge1xuICAgICAgdmFyIGRvd25QeCA9IHRoaXMuZG93blB4XztcbiAgICAgIHZhciBjbGlja1B4ID0gZXZlbnQucGl4ZWw7XG4gICAgICB2YXIgZHggPSBkb3duUHhbMF0gLSBjbGlja1B4WzBdO1xuICAgICAgdmFyIGR5ID0gZG93blB4WzFdIC0gY2xpY2tQeFsxXTtcbiAgICAgIHZhciBzcXVhcmVkRGlzdGFuY2UgPSBkeCAqIGR4ICsgZHkgKiBkeTtcbiAgICAgIHRoaXMuc2hvdWxkSGFuZGxlXyA9IHRoaXMuZnJlZWhhbmRfID9cbiAgICAgICAgc3F1YXJlZERpc3RhbmNlID4gdGhpcy5zcXVhcmVkQ2xpY2tUb2xlcmFuY2VfIDpcbiAgICAgICAgc3F1YXJlZERpc3RhbmNlIDw9IHRoaXMuc3F1YXJlZENsaWNrVG9sZXJhbmNlXztcbiAgICAgIGlmICghdGhpcy5zaG91bGRIYW5kbGVfKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmZpbmlzaENvb3JkaW5hdGVfKSB7XG4gICAgICB0aGlzLm1vZGlmeURyYXdpbmdfKGV2ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jcmVhdGVPclVwZGF0ZVNrZXRjaFBvaW50XyhldmVudCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgaWYgYW4gZXZlbnQgaXMgd2l0aGluIHRoZSBzbmFwcGluZyB0b2xlcmFuY2Ugb2YgdGhlIHN0YXJ0IGNvb3JkLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBFdmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGV2ZW50IGlzIHdpdGhpbiB0aGUgc25hcHBpbmcgdG9sZXJhbmNlIG9mIHRoZSBzdGFydC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIERyYXcucHJvdG90eXBlLmF0RmluaXNoXyA9IGZ1bmN0aW9uIGF0RmluaXNoXyAoZXZlbnQpIHtcbiAgICB2YXIgYXQgPSBmYWxzZTtcbiAgICBpZiAodGhpcy5za2V0Y2hGZWF0dXJlXykge1xuICAgICAgdmFyIHBvdGVudGlhbGx5RG9uZSA9IGZhbHNlO1xuICAgICAgdmFyIHBvdGVudGlhbGx5RmluaXNoQ29vcmRpbmF0ZXMgPSBbdGhpcy5maW5pc2hDb29yZGluYXRlX107XG4gICAgICBpZiAodGhpcy5tb2RlXyA9PT0gTW9kZS5MSU5FX1NUUklORykge1xuICAgICAgICBwb3RlbnRpYWxseURvbmUgPSB0aGlzLnNrZXRjaENvb3Jkc18ubGVuZ3RoID4gdGhpcy5taW5Qb2ludHNfO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLm1vZGVfID09PSBNb2RlLlBPTFlHT04pIHtcbiAgICAgICAgdmFyIHNrZXRjaENvb3JkcyA9IC8qKiBAdHlwZSB7UG9seUNvb3JkVHlwZX0gKi8gKHRoaXMuc2tldGNoQ29vcmRzXyk7XG4gICAgICAgIHBvdGVudGlhbGx5RG9uZSA9IHNrZXRjaENvb3Jkc1swXS5sZW5ndGggPiB0aGlzLm1pblBvaW50c187XG4gICAgICAgIHBvdGVudGlhbGx5RmluaXNoQ29vcmRpbmF0ZXMgPSBbc2tldGNoQ29vcmRzWzBdWzBdLCBza2V0Y2hDb29yZHNbMF1bc2tldGNoQ29vcmRzWzBdLmxlbmd0aCAtIDJdXTtcbiAgICAgIH1cbiAgICAgIGlmIChwb3RlbnRpYWxseURvbmUpIHtcbiAgICAgICAgdmFyIG1hcCA9IGV2ZW50Lm1hcDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gcG90ZW50aWFsbHlGaW5pc2hDb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgdmFyIGZpbmlzaENvb3JkaW5hdGUgPSBwb3RlbnRpYWxseUZpbmlzaENvb3JkaW5hdGVzW2ldO1xuICAgICAgICAgIHZhciBmaW5pc2hQaXhlbCA9IG1hcC5nZXRQaXhlbEZyb21Db29yZGluYXRlKGZpbmlzaENvb3JkaW5hdGUpO1xuICAgICAgICAgIHZhciBwaXhlbCA9IGV2ZW50LnBpeGVsO1xuICAgICAgICAgIHZhciBkeCA9IHBpeGVsWzBdIC0gZmluaXNoUGl4ZWxbMF07XG4gICAgICAgICAgdmFyIGR5ID0gcGl4ZWxbMV0gLSBmaW5pc2hQaXhlbFsxXTtcbiAgICAgICAgICB2YXIgc25hcFRvbGVyYW5jZSA9IHRoaXMuZnJlZWhhbmRfID8gMSA6IHRoaXMuc25hcFRvbGVyYW5jZV87XG4gICAgICAgICAgYXQgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpIDw9IHNuYXBUb2xlcmFuY2U7XG4gICAgICAgICAgaWYgKGF0KSB7XG4gICAgICAgICAgICB0aGlzLmZpbmlzaENvb3JkaW5hdGVfID0gZmluaXNoQ29vcmRpbmF0ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IGV2ZW50IEV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgRHJhdy5wcm90b3R5cGUuY3JlYXRlT3JVcGRhdGVTa2V0Y2hQb2ludF8gPSBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZVNrZXRjaFBvaW50XyAoZXZlbnQpIHtcbiAgICB2YXIgY29vcmRpbmF0ZXMgPSBldmVudC5jb29yZGluYXRlLnNsaWNlKCk7XG4gICAgaWYgKCF0aGlzLnNrZXRjaFBvaW50Xykge1xuICAgICAgdGhpcy5za2V0Y2hQb2ludF8gPSBuZXcgRmVhdHVyZShuZXcgUG9pbnQoY29vcmRpbmF0ZXMpKTtcbiAgICAgIHRoaXMudXBkYXRlU2tldGNoRmVhdHVyZXNfKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBza2V0Y2hQb2ludEdlb20gPSAvKiogQHR5cGUge1BvaW50fSAqLyAodGhpcy5za2V0Y2hQb2ludF8uZ2V0R2VvbWV0cnkoKSk7XG4gICAgICBza2V0Y2hQb2ludEdlb20uc2V0Q29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU3RhcnQgdGhlIGRyYXdpbmcuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IGV2ZW50IEV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgRHJhdy5wcm90b3R5cGUuc3RhcnREcmF3aW5nXyA9IGZ1bmN0aW9uIHN0YXJ0RHJhd2luZ18gKGV2ZW50KSB7XG4gICAgdmFyIHN0YXJ0ID0gZXZlbnQuY29vcmRpbmF0ZTtcbiAgICB0aGlzLmZpbmlzaENvb3JkaW5hdGVfID0gc3RhcnQ7XG4gICAgaWYgKHRoaXMubW9kZV8gPT09IE1vZGUuUE9JTlQpIHtcbiAgICAgIHRoaXMuc2tldGNoQ29vcmRzXyA9IHN0YXJ0LnNsaWNlKCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLm1vZGVfID09PSBNb2RlLlBPTFlHT04pIHtcbiAgICAgIHRoaXMuc2tldGNoQ29vcmRzXyA9IFtbc3RhcnQuc2xpY2UoKSwgc3RhcnQuc2xpY2UoKV1dO1xuICAgICAgdGhpcy5za2V0Y2hMaW5lQ29vcmRzXyA9IHRoaXMuc2tldGNoQ29vcmRzX1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5za2V0Y2hDb29yZHNfID0gW3N0YXJ0LnNsaWNlKCksIHN0YXJ0LnNsaWNlKCldO1xuICAgIH1cbiAgICBpZiAodGhpcy5za2V0Y2hMaW5lQ29vcmRzXykge1xuICAgICAgdGhpcy5za2V0Y2hMaW5lXyA9IG5ldyBGZWF0dXJlKFxuICAgICAgICBuZXcgTGluZVN0cmluZyh0aGlzLnNrZXRjaExpbmVDb29yZHNfKSk7XG4gICAgfVxuICAgIHZhciBnZW9tZXRyeSA9IHRoaXMuZ2VvbWV0cnlGdW5jdGlvbl8odGhpcy5za2V0Y2hDb29yZHNfKTtcbiAgICB0aGlzLnNrZXRjaEZlYXR1cmVfID0gbmV3IEZlYXR1cmUoKTtcbiAgICBpZiAodGhpcy5nZW9tZXRyeU5hbWVfKSB7XG4gICAgICB0aGlzLnNrZXRjaEZlYXR1cmVfLnNldEdlb21ldHJ5TmFtZSh0aGlzLmdlb21ldHJ5TmFtZV8pO1xuICAgIH1cbiAgICB0aGlzLnNrZXRjaEZlYXR1cmVfLnNldEdlb21ldHJ5KGdlb21ldHJ5KTtcbiAgICB0aGlzLnVwZGF0ZVNrZXRjaEZlYXR1cmVzXygpO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRHJhd0V2ZW50KERyYXdFdmVudFR5cGUuRFJBV1NUQVJULCB0aGlzLnNrZXRjaEZlYXR1cmVfKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1vZGlmeSB0aGUgZHJhd2luZy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgRXZlbnQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBEcmF3LnByb3RvdHlwZS5tb2RpZnlEcmF3aW5nXyA9IGZ1bmN0aW9uIG1vZGlmeURyYXdpbmdfIChldmVudCkge1xuICAgIHZhciBjb29yZGluYXRlID0gZXZlbnQuY29vcmRpbmF0ZTtcbiAgICB2YXIgZ2VvbWV0cnkgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuc2tldGNoRmVhdHVyZV8uZ2V0R2VvbWV0cnkoKSk7XG4gICAgdmFyIGNvb3JkaW5hdGVzLCBsYXN0O1xuICAgIGlmICh0aGlzLm1vZGVfID09PSBNb2RlLlBPSU5UKSB7XG4gICAgICBsYXN0ID0gdGhpcy5za2V0Y2hDb29yZHNfO1xuICAgIH0gZWxzZSBpZiAodGhpcy5tb2RlXyA9PT0gTW9kZS5QT0xZR09OKSB7XG4gICAgICBjb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7UG9seUNvb3JkVHlwZX0gKi8gKHRoaXMuc2tldGNoQ29vcmRzXylbMF07XG4gICAgICBsYXN0ID0gY29vcmRpbmF0ZXNbY29vcmRpbmF0ZXMubGVuZ3RoIC0gMV07XG4gICAgICBpZiAodGhpcy5hdEZpbmlzaF8oZXZlbnQpKSB7XG4gICAgICAgIC8vIHNuYXAgdG8gZmluaXNoXG4gICAgICAgIGNvb3JkaW5hdGUgPSB0aGlzLmZpbmlzaENvb3JkaW5hdGVfLnNsaWNlKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvb3JkaW5hdGVzID0gdGhpcy5za2V0Y2hDb29yZHNfO1xuICAgICAgbGFzdCA9IGNvb3JkaW5hdGVzW2Nvb3JkaW5hdGVzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICBsYXN0WzBdID0gY29vcmRpbmF0ZVswXTtcbiAgICBsYXN0WzFdID0gY29vcmRpbmF0ZVsxXTtcbiAgICB0aGlzLmdlb21ldHJ5RnVuY3Rpb25fKC8qKiBAdHlwZSB7IUxpbmVDb29yZFR5cGV9ICovICh0aGlzLnNrZXRjaENvb3Jkc18pLCBnZW9tZXRyeSk7XG4gICAgaWYgKHRoaXMuc2tldGNoUG9pbnRfKSB7XG4gICAgICB2YXIgc2tldGNoUG9pbnRHZW9tID0gLyoqIEB0eXBlIHtQb2ludH0gKi8gKHRoaXMuc2tldGNoUG9pbnRfLmdldEdlb21ldHJ5KCkpO1xuICAgICAgc2tldGNoUG9pbnRHZW9tLnNldENvb3JkaW5hdGVzKGNvb3JkaW5hdGUpO1xuICAgIH1cbiAgICAvKiogQHR5cGUge0xpbmVTdHJpbmd9ICovXG4gICAgdmFyIHNrZXRjaExpbmVHZW9tO1xuICAgIGlmIChnZW9tZXRyeS5nZXRUeXBlKCkgPT0gR2VvbWV0cnlUeXBlLlBPTFlHT04gJiZcbiAgICAgICAgdGhpcy5tb2RlXyAhPT0gTW9kZS5QT0xZR09OKSB7XG4gICAgICBpZiAoIXRoaXMuc2tldGNoTGluZV8pIHtcbiAgICAgICAgdGhpcy5za2V0Y2hMaW5lXyA9IG5ldyBGZWF0dXJlKCk7XG4gICAgICB9XG4gICAgICB2YXIgcmluZyA9IC8qKiBAdHlwZSB7UG9seWdvbn0gKi8gKGdlb21ldHJ5KS5nZXRMaW5lYXJSaW5nKDApO1xuICAgICAgc2tldGNoTGluZUdlb20gPSAvKiogQHR5cGUge0xpbmVTdHJpbmd9ICovICh0aGlzLnNrZXRjaExpbmVfLmdldEdlb21ldHJ5KCkpO1xuICAgICAgaWYgKCFza2V0Y2hMaW5lR2VvbSkge1xuICAgICAgICBza2V0Y2hMaW5lR2VvbSA9IG5ldyBMaW5lU3RyaW5nKHJpbmcuZ2V0RmxhdENvb3JkaW5hdGVzKCksIHJpbmcuZ2V0TGF5b3V0KCkpO1xuICAgICAgICB0aGlzLnNrZXRjaExpbmVfLnNldEdlb21ldHJ5KHNrZXRjaExpbmVHZW9tKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNrZXRjaExpbmVHZW9tLnNldEZsYXRDb29yZGluYXRlcyhcbiAgICAgICAgICByaW5nLmdldExheW91dCgpLCByaW5nLmdldEZsYXRDb29yZGluYXRlcygpKTtcbiAgICAgICAgc2tldGNoTGluZUdlb20uY2hhbmdlZCgpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5za2V0Y2hMaW5lQ29vcmRzXykge1xuICAgICAgc2tldGNoTGluZUdlb20gPSAvKiogQHR5cGUge0xpbmVTdHJpbmd9ICovICh0aGlzLnNrZXRjaExpbmVfLmdldEdlb21ldHJ5KCkpO1xuICAgICAgc2tldGNoTGluZUdlb20uc2V0Q29vcmRpbmF0ZXModGhpcy5za2V0Y2hMaW5lQ29vcmRzXyk7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlU2tldGNoRmVhdHVyZXNfKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZCBhIG5ldyBjb29yZGluYXRlIHRvIHRoZSBkcmF3aW5nLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBFdmVudC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIERyYXcucHJvdG90eXBlLmFkZFRvRHJhd2luZ18gPSBmdW5jdGlvbiBhZGRUb0RyYXdpbmdfIChldmVudCkge1xuICAgIHZhciBjb29yZGluYXRlID0gZXZlbnQuY29vcmRpbmF0ZTtcbiAgICB2YXIgZ2VvbWV0cnkgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuc2tldGNoRmVhdHVyZV8uZ2V0R2VvbWV0cnkoKSk7XG4gICAgdmFyIGRvbmU7XG4gICAgdmFyIGNvb3JkaW5hdGVzO1xuICAgIGlmICh0aGlzLm1vZGVfID09PSBNb2RlLkxJTkVfU1RSSU5HKSB7XG4gICAgICB0aGlzLmZpbmlzaENvb3JkaW5hdGVfID0gY29vcmRpbmF0ZS5zbGljZSgpO1xuICAgICAgY29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge0xpbmVDb29yZFR5cGV9ICovICh0aGlzLnNrZXRjaENvb3Jkc18pO1xuICAgICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA+PSB0aGlzLm1heFBvaW50c18pIHtcbiAgICAgICAgaWYgKHRoaXMuZnJlZWhhbmRfKSB7XG4gICAgICAgICAgY29vcmRpbmF0ZXMucG9wKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZG9uZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvb3JkaW5hdGVzLnB1c2goY29vcmRpbmF0ZS5zbGljZSgpKTtcbiAgICAgIHRoaXMuZ2VvbWV0cnlGdW5jdGlvbl8oY29vcmRpbmF0ZXMsIGdlb21ldHJ5KTtcbiAgICB9IGVsc2UgaWYgKHRoaXMubW9kZV8gPT09IE1vZGUuUE9MWUdPTikge1xuICAgICAgY29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge1BvbHlDb29yZFR5cGV9ICovICh0aGlzLnNrZXRjaENvb3Jkc18pWzBdO1xuICAgICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA+PSB0aGlzLm1heFBvaW50c18pIHtcbiAgICAgICAgaWYgKHRoaXMuZnJlZWhhbmRfKSB7XG4gICAgICAgICAgY29vcmRpbmF0ZXMucG9wKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZG9uZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvb3JkaW5hdGVzLnB1c2goY29vcmRpbmF0ZS5zbGljZSgpKTtcbiAgICAgIGlmIChkb25lKSB7XG4gICAgICAgIHRoaXMuZmluaXNoQ29vcmRpbmF0ZV8gPSBjb29yZGluYXRlc1swXTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZ2VvbWV0cnlGdW5jdGlvbl8odGhpcy5za2V0Y2hDb29yZHNfLCBnZW9tZXRyeSk7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlU2tldGNoRmVhdHVyZXNfKCk7XG4gICAgaWYgKGRvbmUpIHtcbiAgICAgIHRoaXMuZmluaXNoRHJhd2luZygpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIGxhc3QgcG9pbnQgb2YgdGhlIGZlYXR1cmUgY3VycmVudGx5IGJlaW5nIGRyYXduLlxuICAgKiBAYXBpXG4gICAqL1xuICBEcmF3LnByb3RvdHlwZS5yZW1vdmVMYXN0UG9pbnQgPSBmdW5jdGlvbiByZW1vdmVMYXN0UG9pbnQgKCkge1xuICAgIGlmICghdGhpcy5za2V0Y2hGZWF0dXJlXykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgZ2VvbWV0cnkgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuc2tldGNoRmVhdHVyZV8uZ2V0R2VvbWV0cnkoKSk7XG4gICAgdmFyIGNvb3JkaW5hdGVzO1xuICAgIC8qKiBAdHlwZSB7TGluZVN0cmluZ30gKi9cbiAgICB2YXIgc2tldGNoTGluZUdlb207XG4gICAgaWYgKHRoaXMubW9kZV8gPT09IE1vZGUuTElORV9TVFJJTkcpIHtcbiAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtMaW5lQ29vcmRUeXBlfSAqLyAodGhpcy5za2V0Y2hDb29yZHNfKTtcbiAgICAgIGNvb3JkaW5hdGVzLnNwbGljZSgtMiwgMSk7XG4gICAgICB0aGlzLmdlb21ldHJ5RnVuY3Rpb25fKGNvb3JkaW5hdGVzLCBnZW9tZXRyeSk7XG4gICAgICBpZiAoY29vcmRpbmF0ZXMubGVuZ3RoID49IDIpIHtcbiAgICAgICAgdGhpcy5maW5pc2hDb29yZGluYXRlXyA9IGNvb3JkaW5hdGVzW2Nvb3JkaW5hdGVzLmxlbmd0aCAtIDJdLnNsaWNlKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLm1vZGVfID09PSBNb2RlLlBPTFlHT04pIHtcbiAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtQb2x5Q29vcmRUeXBlfSAqLyAodGhpcy5za2V0Y2hDb29yZHNfKVswXTtcbiAgICAgIGNvb3JkaW5hdGVzLnNwbGljZSgtMiwgMSk7XG4gICAgICBza2V0Y2hMaW5lR2VvbSA9IC8qKiBAdHlwZSB7TGluZVN0cmluZ30gKi8gKHRoaXMuc2tldGNoTGluZV8uZ2V0R2VvbWV0cnkoKSk7XG4gICAgICBza2V0Y2hMaW5lR2VvbS5zZXRDb29yZGluYXRlcyhjb29yZGluYXRlcyk7XG4gICAgICB0aGlzLmdlb21ldHJ5RnVuY3Rpb25fKHRoaXMuc2tldGNoQ29vcmRzXywgZ2VvbWV0cnkpO1xuICAgIH1cblxuICAgIGlmIChjb29yZGluYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuZmluaXNoQ29vcmRpbmF0ZV8gPSBudWxsO1xuICAgIH1cblxuICAgIHRoaXMudXBkYXRlU2tldGNoRmVhdHVyZXNfKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN0b3AgZHJhd2luZyBhbmQgYWRkIHRoZSBza2V0Y2ggZmVhdHVyZSB0byB0aGUgdGFyZ2V0IGxheWVyLlxuICAgKiBUaGUge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmF3fkRyYXdFdmVudFR5cGUuRFJBV0VORH0gZXZlbnQgaXNcbiAgICogZGlzcGF0Y2hlZCBiZWZvcmUgaW5zZXJ0aW5nIHRoZSBmZWF0dXJlLlxuICAgKiBAYXBpXG4gICAqL1xuICBEcmF3LnByb3RvdHlwZS5maW5pc2hEcmF3aW5nID0gZnVuY3Rpb24gZmluaXNoRHJhd2luZyAoKSB7XG4gICAgdmFyIHNrZXRjaEZlYXR1cmUgPSB0aGlzLmFib3J0RHJhd2luZ18oKTtcbiAgICBpZiAoIXNrZXRjaEZlYXR1cmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGNvb3JkaW5hdGVzID0gdGhpcy5za2V0Y2hDb29yZHNfO1xuICAgIHZhciBnZW9tZXRyeSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSAqLyAoc2tldGNoRmVhdHVyZS5nZXRHZW9tZXRyeSgpKTtcbiAgICBpZiAodGhpcy5tb2RlXyA9PT0gTW9kZS5MSU5FX1NUUklORykge1xuICAgICAgLy8gcmVtb3ZlIHRoZSByZWR1bmRhbnQgbGFzdCBwb2ludFxuICAgICAgY29vcmRpbmF0ZXMucG9wKCk7XG4gICAgICB0aGlzLmdlb21ldHJ5RnVuY3Rpb25fKGNvb3JkaW5hdGVzLCBnZW9tZXRyeSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLm1vZGVfID09PSBNb2RlLlBPTFlHT04pIHtcbiAgICAgIC8vIHJlbW92ZSB0aGUgcmVkdW5kYW50IGxhc3QgcG9pbnQgaW4gcmluZ1xuICAgICAgLyoqIEB0eXBlIHtQb2x5Q29vcmRUeXBlfSAqLyAoY29vcmRpbmF0ZXMpWzBdLnBvcCgpO1xuICAgICAgdGhpcy5nZW9tZXRyeUZ1bmN0aW9uXyhjb29yZGluYXRlcywgZ2VvbWV0cnkpO1xuICAgICAgY29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRDb29yZGluYXRlcygpO1xuICAgIH1cblxuICAgIC8vIGNhc3QgbXVsdGktcGFydCBnZW9tZXRyaWVzXG4gICAgaWYgKHRoaXMudHlwZV8gPT09IEdlb21ldHJ5VHlwZS5NVUxUSV9QT0lOVCkge1xuICAgICAgc2tldGNoRmVhdHVyZS5zZXRHZW9tZXRyeShuZXcgTXVsdGlQb2ludChbLyoqIEB0eXBlIHtQb2ludENvb3JkVHlwZX0gKi8oY29vcmRpbmF0ZXMpXSkpO1xuICAgIH0gZWxzZSBpZiAodGhpcy50eXBlXyA9PT0gR2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HKSB7XG4gICAgICBza2V0Y2hGZWF0dXJlLnNldEdlb21ldHJ5KG5ldyBNdWx0aUxpbmVTdHJpbmcoWy8qKiBAdHlwZSB7TGluZUNvb3JkVHlwZX0gKi8oY29vcmRpbmF0ZXMpXSkpO1xuICAgIH0gZWxzZSBpZiAodGhpcy50eXBlXyA9PT0gR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT04pIHtcbiAgICAgIHNrZXRjaEZlYXR1cmUuc2V0R2VvbWV0cnkobmV3IE11bHRpUG9seWdvbihbLyoqIEB0eXBlIHtQb2x5Q29vcmRUeXBlfSAqLyhjb29yZGluYXRlcyldKSk7XG4gICAgfVxuXG4gICAgLy8gRmlyc3QgZGlzcGF0Y2ggZXZlbnQgdG8gYWxsb3cgZnVsbCBzZXQgdXAgb2YgZmVhdHVyZVxuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRHJhd0V2ZW50KERyYXdFdmVudFR5cGUuRFJBV0VORCwgc2tldGNoRmVhdHVyZSkpO1xuXG4gICAgLy8gVGhlbiBpbnNlcnQgZmVhdHVyZVxuICAgIGlmICh0aGlzLmZlYXR1cmVzXykge1xuICAgICAgdGhpcy5mZWF0dXJlc18ucHVzaChza2V0Y2hGZWF0dXJlKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc291cmNlXykge1xuICAgICAgdGhpcy5zb3VyY2VfLmFkZEZlYXR1cmUoc2tldGNoRmVhdHVyZSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTdG9wIGRyYXdpbmcgd2l0aG91dCBhZGRpbmcgdGhlIHNrZXRjaCBmZWF0dXJlIHRvIHRoZSB0YXJnZXQgbGF5ZXIuXG4gICAqIEByZXR1cm4ge0ZlYXR1cmV9IFRoZSBza2V0Y2ggZmVhdHVyZSAob3IgbnVsbCBpZiBub25lKS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIERyYXcucHJvdG90eXBlLmFib3J0RHJhd2luZ18gPSBmdW5jdGlvbiBhYm9ydERyYXdpbmdfICgpIHtcbiAgICB0aGlzLmZpbmlzaENvb3JkaW5hdGVfID0gbnVsbDtcbiAgICB2YXIgc2tldGNoRmVhdHVyZSA9IHRoaXMuc2tldGNoRmVhdHVyZV87XG4gICAgaWYgKHNrZXRjaEZlYXR1cmUpIHtcbiAgICAgIHRoaXMuc2tldGNoRmVhdHVyZV8gPSBudWxsO1xuICAgICAgdGhpcy5za2V0Y2hQb2ludF8gPSBudWxsO1xuICAgICAgdGhpcy5za2V0Y2hMaW5lXyA9IG51bGw7XG4gICAgICAvKiogQHR5cGUge1ZlY3RvclNvdXJjZX0gKi8gKHRoaXMub3ZlcmxheV8uZ2V0U291cmNlKCkpLmNsZWFyKHRydWUpO1xuICAgIH1cbiAgICByZXR1cm4gc2tldGNoRmVhdHVyZTtcbiAgfTtcblxuICAvKipcbiAgICogRXh0ZW5kIGFuIGV4aXN0aW5nIGdlb21ldHJ5IGJ5IGFkZGluZyBhZGRpdGlvbmFsIHBvaW50cy4gVGhpcyBvbmx5IHdvcmtzXG4gICAqIG9uIGZlYXR1cmVzIHdpdGggYExpbmVTdHJpbmdgIGdlb21ldHJpZXMsIHdoZXJlIHRoZSBpbnRlcmFjdGlvbiB3aWxsXG4gICAqIGV4dGVuZCBsaW5lcyBieSBhZGRpbmcgcG9pbnRzIHRvIHRoZSBlbmQgb2YgdGhlIGNvb3JkaW5hdGVzIGFycmF5LlxuICAgKiBAcGFyYW0geyFGZWF0dXJlfSBmZWF0dXJlIEZlYXR1cmUgdG8gYmUgZXh0ZW5kZWQuXG4gICAqIEBhcGlcbiAgICovXG4gIERyYXcucHJvdG90eXBlLmV4dGVuZCA9IGZ1bmN0aW9uIGV4dGVuZCAoZmVhdHVyZSkge1xuICAgIHZhciBnZW9tZXRyeSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcbiAgICB2YXIgbGluZVN0cmluZyA9IC8qKiBAdHlwZSB7TGluZVN0cmluZ30gKi8gKGdlb21ldHJ5KTtcbiAgICB0aGlzLnNrZXRjaEZlYXR1cmVfID0gZmVhdHVyZTtcbiAgICB0aGlzLnNrZXRjaENvb3Jkc18gPSBsaW5lU3RyaW5nLmdldENvb3JkaW5hdGVzKCk7XG4gICAgdmFyIGxhc3QgPSB0aGlzLnNrZXRjaENvb3Jkc19bdGhpcy5za2V0Y2hDb29yZHNfLmxlbmd0aCAtIDFdO1xuICAgIHRoaXMuZmluaXNoQ29vcmRpbmF0ZV8gPSBsYXN0LnNsaWNlKCk7XG4gICAgdGhpcy5za2V0Y2hDb29yZHNfLnB1c2gobGFzdC5zbGljZSgpKTtcbiAgICB0aGlzLnVwZGF0ZVNrZXRjaEZlYXR1cmVzXygpO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRHJhd0V2ZW50KERyYXdFdmVudFR5cGUuRFJBV1NUQVJULCB0aGlzLnNrZXRjaEZlYXR1cmVfKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlZHJhdyB0aGUgc2tldGNoIGZlYXR1cmVzLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgRHJhdy5wcm90b3R5cGUudXBkYXRlU2tldGNoRmVhdHVyZXNfID0gZnVuY3Rpb24gdXBkYXRlU2tldGNoRmVhdHVyZXNfICgpIHtcbiAgICB2YXIgc2tldGNoRmVhdHVyZXMgPSBbXTtcbiAgICBpZiAodGhpcy5za2V0Y2hGZWF0dXJlXykge1xuICAgICAgc2tldGNoRmVhdHVyZXMucHVzaCh0aGlzLnNrZXRjaEZlYXR1cmVfKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc2tldGNoTGluZV8pIHtcbiAgICAgIHNrZXRjaEZlYXR1cmVzLnB1c2godGhpcy5za2V0Y2hMaW5lXyk7XG4gICAgfVxuICAgIGlmICh0aGlzLnNrZXRjaFBvaW50Xykge1xuICAgICAgc2tldGNoRmVhdHVyZXMucHVzaCh0aGlzLnNrZXRjaFBvaW50Xyk7XG4gICAgfVxuICAgIHZhciBvdmVybGF5U291cmNlID0gLyoqIEB0eXBlIHtWZWN0b3JTb3VyY2V9ICovICh0aGlzLm92ZXJsYXlfLmdldFNvdXJjZSgpKTtcbiAgICBvdmVybGF5U291cmNlLmNsZWFyKHRydWUpO1xuICAgIG92ZXJsYXlTb3VyY2UuYWRkRmVhdHVyZXMoc2tldGNoRmVhdHVyZXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgRHJhdy5wcm90b3R5cGUudXBkYXRlU3RhdGVfID0gZnVuY3Rpb24gdXBkYXRlU3RhdGVfICgpIHtcbiAgICB2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICB2YXIgYWN0aXZlID0gdGhpcy5nZXRBY3RpdmUoKTtcbiAgICBpZiAoIW1hcCB8fCAhYWN0aXZlKSB7XG4gICAgICB0aGlzLmFib3J0RHJhd2luZ18oKTtcbiAgICB9XG4gICAgdGhpcy5vdmVybGF5Xy5zZXRNYXAoYWN0aXZlID8gbWFwIDogbnVsbCk7XG4gIH07XG5cbiAgcmV0dXJuIERyYXc7XG59KFBvaW50ZXJJbnRlcmFjdGlvbikpO1xuXG5cbi8qKlxuICogQHJldHVybiB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVGdW5jdGlvbn0gU3R5bGVzLlxuICovXG5mdW5jdGlvbiBnZXREZWZhdWx0U3R5bGVGdW5jdGlvbigpIHtcbiAgdmFyIHN0eWxlcyA9IGNyZWF0ZUVkaXRpbmdTdHlsZSgpO1xuICByZXR1cm4gZnVuY3Rpb24oZmVhdHVyZSwgcmVzb2x1dGlvbikge1xuICAgIHJldHVybiBzdHlsZXNbZmVhdHVyZS5nZXRHZW9tZXRyeSgpLmdldFR5cGUoKV07XG4gIH07XG59XG5cblxuLyoqXG4gKiBDcmVhdGUgYSBgZ2VvbWV0cnlGdW5jdGlvbmAgZm9yIGB0eXBlOiAnQ2lyY2xlJ2AgdGhhdCB3aWxsIGNyZWF0ZSBhIHJlZ3VsYXJcbiAqIHBvbHlnb24gd2l0aCBhIHVzZXIgc3BlY2lmaWVkIG51bWJlciBvZiBzaWRlcyBhbmQgc3RhcnQgYW5nbGUgaW5zdGVhZCBvZiBhblxuICogYGltcG9ydChcIi4uL2dlb20vQ2lyY2xlLmpzXCIpLkNpcmNsZWAgZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9zaWRlcyBOdW1iZXIgb2Ygc2lkZXMgb2YgdGhlIHJlZ3VsYXIgcG9seWdvbi4gRGVmYXVsdCBpc1xuICogICAgIDMyLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfYW5nbGUgQW5nbGUgb2YgdGhlIGZpcnN0IHBvaW50IGluIHJhZGlhbnMuIDAgbWVhbnMgRWFzdC5cbiAqICAgICBEZWZhdWx0IGlzIHRoZSBhbmdsZSBkZWZpbmVkIGJ5IHRoZSBoZWFkaW5nIGZyb20gdGhlIGNlbnRlciBvZiB0aGVcbiAqICAgICByZWd1bGFyIHBvbHlnb24gdG8gdGhlIGN1cnJlbnQgcG9pbnRlciBwb3NpdGlvbi5cbiAqIEByZXR1cm4ge0dlb21ldHJ5RnVuY3Rpb259IEZ1bmN0aW9uIHRoYXQgZHJhd3MgYVxuICogICAgIHBvbHlnb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSZWd1bGFyUG9seWdvbihvcHRfc2lkZXMsIG9wdF9hbmdsZSkge1xuICByZXR1cm4gZnVuY3Rpb24oY29vcmRpbmF0ZXMsIG9wdF9nZW9tZXRyeSkge1xuICAgIHZhciBjZW50ZXIgPSAvKiogQHR5cGUge0xpbmVDb29yZFR5cGV9ICovIChjb29yZGluYXRlcylbMF07XG4gICAgdmFyIGVuZCA9IC8qKiBAdHlwZSB7TGluZUNvb3JkVHlwZX0gKi8gKGNvb3JkaW5hdGVzKVsxXTtcbiAgICB2YXIgcmFkaXVzID0gTWF0aC5zcXJ0KFxuICAgICAgc3F1YXJlZENvb3JkaW5hdGVEaXN0YW5jZShjZW50ZXIsIGVuZCkpO1xuICAgIHZhciBnZW9tZXRyeSA9IG9wdF9nZW9tZXRyeSA/IC8qKiBAdHlwZSB7UG9seWdvbn0gKi8gKG9wdF9nZW9tZXRyeSkgOlxuICAgICAgZnJvbUNpcmNsZShuZXcgQ2lyY2xlKGNlbnRlciksIG9wdF9zaWRlcyk7XG4gICAgdmFyIGFuZ2xlID0gb3B0X2FuZ2xlO1xuICAgIGlmICghb3B0X2FuZ2xlKSB7XG4gICAgICB2YXIgeCA9IGVuZFswXSAtIGNlbnRlclswXTtcbiAgICAgIHZhciB5ID0gZW5kWzFdIC0gY2VudGVyWzFdO1xuICAgICAgYW5nbGUgPSBNYXRoLmF0YW4oeSAvIHgpIC0gKHggPCAwID8gTWF0aC5QSSA6IDApO1xuICAgIH1cbiAgICBtYWtlUmVndWxhcihnZW9tZXRyeSwgY2VudGVyLCByYWRpdXMsIGFuZ2xlKTtcbiAgICByZXR1cm4gZ2VvbWV0cnk7XG4gIH07XG59XG5cblxuLyoqXG4gKiBDcmVhdGUgYSBgZ2VvbWV0cnlGdW5jdGlvbmAgdGhhdCB3aWxsIGNyZWF0ZSBhIGJveC1zaGFwZWQgcG9seWdvbiAoYWxpZ25lZFxuICogd2l0aCB0aGUgY29vcmRpbmF0ZSBzeXN0ZW0gYXhlcykuICBVc2UgdGhpcyB3aXRoIHRoZSBkcmF3IGludGVyYWN0aW9uIGFuZFxuICogYHR5cGU6ICdDaXJjbGUnYCB0byByZXR1cm4gYSBib3ggaW5zdGVhZCBvZiBhIGNpcmNsZSBnZW9tZXRyeS5cbiAqIEByZXR1cm4ge0dlb21ldHJ5RnVuY3Rpb259IEZ1bmN0aW9uIHRoYXQgZHJhd3MgYSBib3gtc2hhcGVkIHBvbHlnb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVCb3goKSB7XG4gIHJldHVybiAoXG4gICAgZnVuY3Rpb24oY29vcmRpbmF0ZXMsIG9wdF9nZW9tZXRyeSkge1xuICAgICAgdmFyIGV4dGVudCA9IGJvdW5kaW5nRXh0ZW50KC8qKiBAdHlwZSB7TGluZUNvb3JkVHlwZX0gKi8gKGNvb3JkaW5hdGVzKSk7XG4gICAgICB2YXIgYm94Q29vcmRpbmF0ZXMgPSBbW1xuICAgICAgICBnZXRCb3R0b21MZWZ0KGV4dGVudCksXG4gICAgICAgIGdldEJvdHRvbVJpZ2h0KGV4dGVudCksXG4gICAgICAgIGdldFRvcFJpZ2h0KGV4dGVudCksXG4gICAgICAgIGdldFRvcExlZnQoZXh0ZW50KSxcbiAgICAgICAgZ2V0Qm90dG9tTGVmdChleHRlbnQpXG4gICAgICBdXTtcbiAgICAgIHZhciBnZW9tZXRyeSA9IG9wdF9nZW9tZXRyeTtcbiAgICAgIGlmIChnZW9tZXRyeSkge1xuICAgICAgICBnZW9tZXRyeS5zZXRDb29yZGluYXRlcyhib3hDb29yZGluYXRlcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnZW9tZXRyeSA9IG5ldyBQb2x5Z29uKGJveENvb3JkaW5hdGVzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBnZW9tZXRyeTtcbiAgICB9XG4gICk7XG59XG5cblxuLyoqXG4gKiBHZXQgdGhlIGRyYXdpbmcgbW9kZS4gIFRoZSBtb2RlIGZvciBtdWx0LXBhcnQgZ2VvbWV0cmllcyBpcyB0aGUgc2FtZSBhcyBmb3JcbiAqIHRoZWlyIHNpbmdsZS1wYXJ0IGNvdXNpbnMuXG4gKiBAcGFyYW0ge0dlb21ldHJ5VHlwZX0gdHlwZSBHZW9tZXRyeSB0eXBlLlxuICogQHJldHVybiB7TW9kZX0gRHJhd2luZyBtb2RlLlxuICovXG5mdW5jdGlvbiBnZXRNb2RlKHR5cGUpIHtcbiAgdmFyIG1vZGU7XG4gIGlmICh0eXBlID09PSBHZW9tZXRyeVR5cGUuUE9JTlQgfHxcbiAgICAgIHR5cGUgPT09IEdlb21ldHJ5VHlwZS5NVUxUSV9QT0lOVCkge1xuICAgIG1vZGUgPSBNb2RlLlBPSU5UO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IEdlb21ldHJ5VHlwZS5MSU5FX1NUUklORyB8fFxuICAgICAgdHlwZSA9PT0gR2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HKSB7XG4gICAgbW9kZSA9IE1vZGUuTElORV9TVFJJTkc7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gR2VvbWV0cnlUeXBlLlBPTFlHT04gfHxcbiAgICAgIHR5cGUgPT09IEdlb21ldHJ5VHlwZS5NVUxUSV9QT0xZR09OKSB7XG4gICAgbW9kZSA9IE1vZGUuUE9MWUdPTjtcbiAgfSBlbHNlIGlmICh0eXBlID09PSBHZW9tZXRyeVR5cGUuQ0lSQ0xFKSB7XG4gICAgbW9kZSA9IE1vZGUuQ0lSQ0xFO1xuICB9XG4gIHJldHVybiAoXG4gICAgLyoqIEB0eXBlIHshTW9kZX0gKi8gKG1vZGUpXG4gICk7XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgRHJhdztcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RHJhdy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vRXh0ZW50XG4gKi9cbmltcG9ydCBGZWF0dXJlIGZyb20gJy4uL0ZlYXR1cmUuanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudFR5cGUgZnJvbSAnLi4vTWFwQnJvd3NlckV2ZW50VHlwZS5qcyc7XG5pbXBvcnQge3NxdWFyZWREaXN0YW5jZVRvU2VnbWVudCwgY2xvc2VzdE9uU2VnbWVudCwgZGlzdGFuY2UgYXMgY29vcmRpbmF0ZURpc3RhbmNlLCBzcXVhcmVkRGlzdGFuY2UgYXMgc3F1YXJlZENvb3JkaW5hdGVEaXN0YW5jZX0gZnJvbSAnLi4vY29vcmRpbmF0ZS5qcyc7XG5pbXBvcnQgRXZlbnQgZnJvbSAnLi4vZXZlbnRzL0V2ZW50LmpzJztcbmltcG9ydCB7Ym91bmRpbmdFeHRlbnQsIGdldEFyZWF9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4uL2dlb20vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBQb2ludCBmcm9tICcuLi9nZW9tL1BvaW50LmpzJztcbmltcG9ydCB7ZnJvbUV4dGVudCBhcyBwb2x5Z29uRnJvbUV4dGVudH0gZnJvbSAnLi4vZ2VvbS9Qb2x5Z29uLmpzJztcbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24gZnJvbSAnLi9Qb2ludGVyLmpzJztcbmltcG9ydCBWZWN0b3JMYXllciBmcm9tICcuLi9sYXllci9WZWN0b3IuanMnO1xuaW1wb3J0IFZlY3RvclNvdXJjZSBmcm9tICcuLi9zb3VyY2UvVmVjdG9yLmpzJztcbmltcG9ydCB7Y3JlYXRlRWRpdGluZ1N0eWxlfSBmcm9tICcuLi9zdHlsZS9TdHlsZS5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIEluaXRpYWwgZXh0ZW50LiBEZWZhdWx0cyB0byBub1xuICogaW5pdGlhbCBleHRlbnQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLlN0eWxlTGlrZX0gW2JveFN0eWxlXVxuICogU3R5bGUgZm9yIHRoZSBkcmF3biBleHRlbnQgYm94LiBEZWZhdWx0cyB0b1xuICoge0BsaW5rIG1vZHVsZTpvbC9zdHlsZS9TdHlsZX5jcmVhdGVFZGl0aW5nKClbJ1BvbHlnb24nXX1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcGl4ZWxUb2xlcmFuY2U9MTBdIFBpeGVsIHRvbGVyYW5jZSBmb3IgY29uc2lkZXJpbmcgdGhlXG4gKiBwb2ludGVyIGNsb3NlIGVub3VnaCB0byBhIHNlZ21lbnQgb3IgdmVydGV4IGZvciBlZGl0aW5nLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZUxpa2V9IFtwb2ludGVyU3R5bGVdXG4gKiBTdHlsZSBmb3IgdGhlIGN1cnNvciB1c2VkIHRvIGRyYXcgdGhlIGV4dGVudC4gRGVmYXVsdHMgdG9cbiAqIHtAbGluayBtb2R1bGU6b2wvc3R5bGUvU3R5bGV+Y3JlYXRlRWRpdGluZygpWydQb2ludCddfVxuICogQHByb3BlcnR5IHtib29sZWFufSBbd3JhcFg9ZmFsc2VdIFdyYXAgdGhlIGRyYXduIGV4dGVudCBhY3Jvc3MgbXVsdGlwbGUgbWFwc1xuICogaW4gdGhlIFggZGlyZWN0aW9uPyBPbmx5IGFmZmVjdHMgdmlzdWFscywgbm90IGZ1bmN0aW9uYWxpdHkuXG4gKi9cblxuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbnZhciBFeHRlbnRFdmVudFR5cGUgPSB7XG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIGV4dGVudCBpcyBjaGFuZ2VkXG4gICAqIEBldmVudCBFeHRlbnRFdmVudFR5cGUjZXh0ZW50Y2hhbmdlZFxuICAgKiBAYXBpXG4gICAqL1xuICBFWFRFTlRDSEFOR0VEOiAnZXh0ZW50Y2hhbmdlZCdcbn07XG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBFdmVudHMgZW1pdHRlZCBieSB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0V4dGVudH5FeHRlbnRJbnRlcmFjdGlvbn0gaW5zdGFuY2VzIGFyZVxuICogaW5zdGFuY2VzIG9mIHRoaXMgdHlwZS5cbiAqL1xudmFyIEV4dGVudEludGVyYWN0aW9uRXZlbnQgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChFdmVudCkge1xuICBmdW5jdGlvbiBFeHRlbnRJbnRlcmFjdGlvbkV2ZW50KGV4dGVudCkge1xuICAgIEV2ZW50LmNhbGwodGhpcywgRXh0ZW50RXZlbnRUeXBlLkVYVEVOVENIQU5HRUQpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgZXh0ZW50LlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICB0aGlzLmV4dGVudCA9IGV4dGVudDtcbiAgfVxuXG4gIGlmICggRXZlbnQgKSBFeHRlbnRJbnRlcmFjdGlvbkV2ZW50Ll9fcHJvdG9fXyA9IEV2ZW50O1xuICBFeHRlbnRJbnRlcmFjdGlvbkV2ZW50LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEV2ZW50ICYmIEV2ZW50LnByb3RvdHlwZSApO1xuICBFeHRlbnRJbnRlcmFjdGlvbkV2ZW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEV4dGVudEludGVyYWN0aW9uRXZlbnQ7XG5cbiAgcmV0dXJuIEV4dGVudEludGVyYWN0aW9uRXZlbnQ7XG59KEV2ZW50KSk7XG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gZHJhdyBhIHZlY3RvciBib3ggYnkgY2xpY2tpbmcgYW5kIGRyYWdnaW5nIG9uIHRoZSBtYXAuXG4gKiBPbmNlIGRyYXduLCB0aGUgdmVjdG9yIGJveCBjYW4gYmUgbW9kaWZpZWQgYnkgZHJhZ2dpbmcgaXRzIHZlcnRpY2VzIG9yIGVkZ2VzLlxuICogVGhpcyBpbnRlcmFjdGlvbiBpcyBvbmx5IHN1cHBvcnRlZCBmb3IgbW91c2UgZGV2aWNlcy5cbiAqXG4gKiBAZmlyZXMgRXZlbnRcbiAqIEBhcGlcbiAqL1xudmFyIEV4dGVudEludGVyYWN0aW9uID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoUG9pbnRlckludGVyYWN0aW9uKSB7XG4gIGZ1bmN0aW9uIEV4dGVudEludGVyYWN0aW9uKG9wdF9vcHRpb25zKSB7XG5cbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuXG4gICAgUG9pbnRlckludGVyYWN0aW9uLmNhbGwoLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1BvaW50ZXIuanNcIikuT3B0aW9uc30gKi8gdGhpcywgKG9wdGlvbnMpKTtcblxuICAgIC8qKlxuICAgICAqIEV4dGVudCBvZiB0aGUgZHJhd24gYm94XG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmV4dGVudF8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogSGFuZGxlciBmb3IgcG9pbnRlciBtb3ZlIGV2ZW50c1xuICAgICAqIEB0eXBlIHtmdW5jdGlvbiAoaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogaW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudHxudWxsfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5wb2ludGVySGFuZGxlcl8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogUGl4ZWwgdGhyZXNob2xkIHRvIHNuYXAgdG8gZXh0ZW50XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucGl4ZWxUb2xlcmFuY2VfID0gb3B0aW9ucy5waXhlbFRvbGVyYW5jZSAhPT0gdW5kZWZpbmVkID9cbiAgICAgIG9wdGlvbnMucGl4ZWxUb2xlcmFuY2UgOiAxMDtcblxuICAgIC8qKlxuICAgICAqIElzIHRoZSBwb2ludGVyIHNuYXBwZWQgdG8gYW4gZXh0ZW50IHZlcnRleFxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5zbmFwcGVkVG9WZXJ0ZXhfID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBGZWF0dXJlIGZvciBkaXNwbGF5aW5nIHRoZSB2aXNpYmxlIGV4dGVudFxuICAgICAqIEB0eXBlIHtGZWF0dXJlfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5leHRlbnRGZWF0dXJlXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBGZWF0dXJlIGZvciBkaXNwbGF5aW5nIHRoZSB2aXNpYmxlIHBvaW50ZXJcbiAgICAgKiBAdHlwZSB7RmVhdHVyZX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMudmVydGV4RmVhdHVyZV8gPSBudWxsO1xuXG4gICAgaWYgKCFvcHRfb3B0aW9ucykge1xuICAgICAgb3B0X29wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMYXllciBmb3IgdGhlIGV4dGVudEZlYXR1cmVcbiAgICAgKiBAdHlwZSB7VmVjdG9yTGF5ZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmV4dGVudE92ZXJsYXlfID0gbmV3IFZlY3RvckxheWVyKHtcbiAgICAgIHNvdXJjZTogbmV3IFZlY3RvclNvdXJjZSh7XG4gICAgICAgIHVzZVNwYXRpYWxJbmRleDogZmFsc2UsXG4gICAgICAgIHdyYXBYOiAhIW9wdF9vcHRpb25zLndyYXBYXG4gICAgICB9KSxcbiAgICAgIHN0eWxlOiBvcHRfb3B0aW9ucy5ib3hTdHlsZSA/IG9wdF9vcHRpb25zLmJveFN0eWxlIDogZ2V0RGVmYXVsdEV4dGVudFN0eWxlRnVuY3Rpb24oKSxcbiAgICAgIHVwZGF0ZVdoaWxlQW5pbWF0aW5nOiB0cnVlLFxuICAgICAgdXBkYXRlV2hpbGVJbnRlcmFjdGluZzogdHJ1ZVxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogTGF5ZXIgZm9yIHRoZSB2ZXJ0ZXhGZWF0dXJlXG4gICAgICogQHR5cGUge1ZlY3RvckxheWVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy52ZXJ0ZXhPdmVybGF5XyA9IG5ldyBWZWN0b3JMYXllcih7XG4gICAgICBzb3VyY2U6IG5ldyBWZWN0b3JTb3VyY2Uoe1xuICAgICAgICB1c2VTcGF0aWFsSW5kZXg6IGZhbHNlLFxuICAgICAgICB3cmFwWDogISFvcHRfb3B0aW9ucy53cmFwWFxuICAgICAgfSksXG4gICAgICBzdHlsZTogb3B0X29wdGlvbnMucG9pbnRlclN0eWxlID8gb3B0X29wdGlvbnMucG9pbnRlclN0eWxlIDogZ2V0RGVmYXVsdFBvaW50ZXJTdHlsZUZ1bmN0aW9uKCksXG4gICAgICB1cGRhdGVXaGlsZUFuaW1hdGluZzogdHJ1ZSxcbiAgICAgIHVwZGF0ZVdoaWxlSW50ZXJhY3Rpbmc6IHRydWVcbiAgICB9KTtcblxuICAgIGlmIChvcHRfb3B0aW9ucy5leHRlbnQpIHtcbiAgICAgIHRoaXMuc2V0RXh0ZW50KG9wdF9vcHRpb25zLmV4dGVudCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKCBQb2ludGVySW50ZXJhY3Rpb24gKSBFeHRlbnRJbnRlcmFjdGlvbi5fX3Byb3RvX18gPSBQb2ludGVySW50ZXJhY3Rpb247XG4gIEV4dGVudEludGVyYWN0aW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIFBvaW50ZXJJbnRlcmFjdGlvbiAmJiBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlICk7XG4gIEV4dGVudEludGVyYWN0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEV4dGVudEludGVyYWN0aW9uO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBjdXJzb3IgbG9jYXRpb25cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIG1hcFxuICAgKiBAcmV0dXJucyB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfG51bGx9IHNuYXBwZWQgdmVydGV4IG9uIGV4dGVudFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgRXh0ZW50SW50ZXJhY3Rpb24ucHJvdG90eXBlLnNuYXBUb1ZlcnRleF8gPSBmdW5jdGlvbiBzbmFwVG9WZXJ0ZXhfIChwaXhlbCwgbWFwKSB7XG4gICAgdmFyIHBpeGVsQ29vcmRpbmF0ZSA9IG1hcC5nZXRDb29yZGluYXRlRnJvbVBpeGVsKHBpeGVsKTtcbiAgICB2YXIgc29ydEJ5RGlzdGFuY2UgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgICByZXR1cm4gc3F1YXJlZERpc3RhbmNlVG9TZWdtZW50KHBpeGVsQ29vcmRpbmF0ZSwgYSkgLVxuICAgICAgICAgIHNxdWFyZWREaXN0YW5jZVRvU2VnbWVudChwaXhlbENvb3JkaW5hdGUsIGIpO1xuICAgIH07XG4gICAgdmFyIGV4dGVudCA9IHRoaXMuZ2V0RXh0ZW50KCk7XG4gICAgaWYgKGV4dGVudCkge1xuICAgICAgLy9jb252ZXJ0IGV4dGVudHMgdG8gbGluZSBzZWdtZW50cyBhbmQgZmluZCB0aGUgc2VnbWVudCBjbG9zZXN0IHRvIHBpeGVsQ29vcmRpbmF0ZVxuICAgICAgdmFyIHNlZ21lbnRzID0gZ2V0U2VnbWVudHMoZXh0ZW50KTtcbiAgICAgIHNlZ21lbnRzLnNvcnQoc29ydEJ5RGlzdGFuY2UpO1xuICAgICAgdmFyIGNsb3Nlc3RTZWdtZW50ID0gc2VnbWVudHNbMF07XG5cbiAgICAgIHZhciB2ZXJ0ZXggPSAoY2xvc2VzdE9uU2VnbWVudChwaXhlbENvb3JkaW5hdGUsXG4gICAgICAgIGNsb3Nlc3RTZWdtZW50KSk7XG4gICAgICB2YXIgdmVydGV4UGl4ZWwgPSBtYXAuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZSh2ZXJ0ZXgpO1xuXG4gICAgICAvL2lmIHRoZSBkaXN0YW5jZSBpcyB3aXRoaW4gdG9sZXJhbmNlLCBzbmFwIHRvIHRoZSBzZWdtZW50XG4gICAgICBpZiAoY29vcmRpbmF0ZURpc3RhbmNlKHBpeGVsLCB2ZXJ0ZXhQaXhlbCkgPD0gdGhpcy5waXhlbFRvbGVyYW5jZV8pIHtcbiAgICAgICAgLy90ZXN0IGlmIHdlIHNob3VsZCBmdXJ0aGVyIHNuYXAgdG8gYSB2ZXJ0ZXhcbiAgICAgICAgdmFyIHBpeGVsMSA9IG1hcC5nZXRQaXhlbEZyb21Db29yZGluYXRlKGNsb3Nlc3RTZWdtZW50WzBdKTtcbiAgICAgICAgdmFyIHBpeGVsMiA9IG1hcC5nZXRQaXhlbEZyb21Db29yZGluYXRlKGNsb3Nlc3RTZWdtZW50WzFdKTtcbiAgICAgICAgdmFyIHNxdWFyZWREaXN0MSA9IHNxdWFyZWRDb29yZGluYXRlRGlzdGFuY2UodmVydGV4UGl4ZWwsIHBpeGVsMSk7XG4gICAgICAgIHZhciBzcXVhcmVkRGlzdDIgPSBzcXVhcmVkQ29vcmRpbmF0ZURpc3RhbmNlKHZlcnRleFBpeGVsLCBwaXhlbDIpO1xuICAgICAgICB2YXIgZGlzdCA9IE1hdGguc3FydChNYXRoLm1pbihzcXVhcmVkRGlzdDEsIHNxdWFyZWREaXN0MikpO1xuICAgICAgICB0aGlzLnNuYXBwZWRUb1ZlcnRleF8gPSBkaXN0IDw9IHRoaXMucGl4ZWxUb2xlcmFuY2VfO1xuICAgICAgICBpZiAodGhpcy5zbmFwcGVkVG9WZXJ0ZXhfKSB7XG4gICAgICAgICAgdmVydGV4ID0gc3F1YXJlZERpc3QxID4gc3F1YXJlZERpc3QyID9cbiAgICAgICAgICAgIGNsb3Nlc3RTZWdtZW50WzFdIDogY2xvc2VzdFNlZ21lbnRbMF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZlcnRleDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBwb2ludGVyIG1vdmUgZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIEV4dGVudEludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVQb2ludGVyTW92ZV8gPSBmdW5jdGlvbiBoYW5kbGVQb2ludGVyTW92ZV8gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBwaXhlbCA9IG1hcEJyb3dzZXJFdmVudC5waXhlbDtcbiAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcblxuICAgIHZhciB2ZXJ0ZXggPSB0aGlzLnNuYXBUb1ZlcnRleF8ocGl4ZWwsIG1hcCk7XG4gICAgaWYgKCF2ZXJ0ZXgpIHtcbiAgICAgIHZlcnRleCA9IG1hcC5nZXRDb29yZGluYXRlRnJvbVBpeGVsKHBpeGVsKTtcbiAgICB9XG4gICAgdGhpcy5jcmVhdGVPclVwZGF0ZVBvaW50ZXJGZWF0dXJlXyh2ZXJ0ZXgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBleHRlbnRcbiAgICogQHJldHVybnMge0ZlYXR1cmV9IGV4dGVudCBhcyBmZWF0cnVlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBFeHRlbnRJbnRlcmFjdGlvbi5wcm90b3R5cGUuY3JlYXRlT3JVcGRhdGVFeHRlbnRGZWF0dXJlXyA9IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlRXh0ZW50RmVhdHVyZV8gKGV4dGVudCkge1xuICAgIHZhciBleHRlbnRGZWF0dXJlID0gdGhpcy5leHRlbnRGZWF0dXJlXztcblxuICAgIGlmICghZXh0ZW50RmVhdHVyZSkge1xuICAgICAgaWYgKCFleHRlbnQpIHtcbiAgICAgICAgZXh0ZW50RmVhdHVyZSA9IG5ldyBGZWF0dXJlKHt9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGV4dGVudEZlYXR1cmUgPSBuZXcgRmVhdHVyZShwb2x5Z29uRnJvbUV4dGVudChleHRlbnQpKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZXh0ZW50RmVhdHVyZV8gPSBleHRlbnRGZWF0dXJlO1xuICAgICAgLyoqIEB0eXBlIHtWZWN0b3JTb3VyY2V9ICovICh0aGlzLmV4dGVudE92ZXJsYXlfLmdldFNvdXJjZSgpKS5hZGRGZWF0dXJlKGV4dGVudEZlYXR1cmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIWV4dGVudCkge1xuICAgICAgICBleHRlbnRGZWF0dXJlLnNldEdlb21ldHJ5KHVuZGVmaW5lZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBleHRlbnRGZWF0dXJlLnNldEdlb21ldHJ5KHBvbHlnb25Gcm9tRXh0ZW50KGV4dGVudCkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZXh0ZW50RmVhdHVyZTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHZlcnRleCBsb2NhdGlvbiBvZiBmZWF0dXJlXG4gICAqIEByZXR1cm5zIHtGZWF0dXJlfSB2ZXJ0ZXggYXMgZmVhdHVyZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgRXh0ZW50SW50ZXJhY3Rpb24ucHJvdG90eXBlLmNyZWF0ZU9yVXBkYXRlUG9pbnRlckZlYXR1cmVfID0gZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVQb2ludGVyRmVhdHVyZV8gKHZlcnRleCkge1xuICAgIHZhciB2ZXJ0ZXhGZWF0dXJlID0gdGhpcy52ZXJ0ZXhGZWF0dXJlXztcbiAgICBpZiAoIXZlcnRleEZlYXR1cmUpIHtcbiAgICAgIHZlcnRleEZlYXR1cmUgPSBuZXcgRmVhdHVyZShuZXcgUG9pbnQodmVydGV4KSk7XG4gICAgICB0aGlzLnZlcnRleEZlYXR1cmVfID0gdmVydGV4RmVhdHVyZTtcbiAgICAgIC8qKiBAdHlwZSB7VmVjdG9yU291cmNlfSAqLyAodGhpcy52ZXJ0ZXhPdmVybGF5Xy5nZXRTb3VyY2UoKSkuYWRkRmVhdHVyZSh2ZXJ0ZXhGZWF0dXJlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGdlb21ldHJ5ID0gLyoqIEB0eXBlIHtQb2ludH0gKi8gKHZlcnRleEZlYXR1cmUuZ2V0R2VvbWV0cnkoKSk7XG4gICAgICBnZW9tZXRyeS5zZXRDb29yZGluYXRlcyh2ZXJ0ZXgpO1xuICAgIH1cbiAgICByZXR1cm4gdmVydGV4RmVhdHVyZTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIEV4dGVudEludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZUV2ZW50IChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBpZiAoISgvKiogQHR5cGUge2ltcG9ydChcIi4uL01hcEJyb3dzZXJQb2ludGVyRXZlbnQuanNcIikuZGVmYXVsdH0gKi8gKG1hcEJyb3dzZXJFdmVudCkucG9pbnRlckV2ZW50KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vZGlzcGxheSBwb2ludGVyIChpZiBub3QgZHJhZ2dpbmcpXG4gICAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUk1PVkUgJiYgIXRoaXMuaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSkge1xuICAgICAgdGhpcy5oYW5kbGVQb2ludGVyTW92ZV8obWFwQnJvd3NlckV2ZW50KTtcbiAgICB9XG4gICAgLy9jYWxsIHBvaW50ZXIgdG8gZGV0ZXJtaW5lIHVwL2Rvd24vZHJhZ1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuaGFuZGxlRXZlbnQuY2FsbCh0aGlzLCBtYXBCcm93c2VyRXZlbnQpO1xuICAgIC8vcmV0dXJuIGZhbHNlIHRvIHN0b3AgcHJvcGFnYXRpb25cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBFeHRlbnRJbnRlcmFjdGlvbi5wcm90b3R5cGUuaGFuZGxlRG93bkV2ZW50ID0gZnVuY3Rpb24gaGFuZGxlRG93bkV2ZW50IChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB2YXIgcGl4ZWwgPSBtYXBCcm93c2VyRXZlbnQucGl4ZWw7XG4gICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG5cbiAgICB2YXIgZXh0ZW50ID0gdGhpcy5nZXRFeHRlbnQoKTtcbiAgICB2YXIgdmVydGV4ID0gdGhpcy5zbmFwVG9WZXJ0ZXhfKHBpeGVsLCBtYXApO1xuXG4gICAgLy9maW5kIHRoZSBleHRlbnQgY29ybmVyIG9wcG9zaXRlIHRoZSBwYXNzZWQgY29ybmVyXG4gICAgdmFyIGdldE9wcG9zaW5nUG9pbnQgPSBmdW5jdGlvbihwb2ludCkge1xuICAgICAgdmFyIHhfID0gbnVsbDtcbiAgICAgIHZhciB5XyA9IG51bGw7XG4gICAgICBpZiAocG9pbnRbMF0gPT0gZXh0ZW50WzBdKSB7XG4gICAgICAgIHhfID0gZXh0ZW50WzJdO1xuICAgICAgfSBlbHNlIGlmIChwb2ludFswXSA9PSBleHRlbnRbMl0pIHtcbiAgICAgICAgeF8gPSBleHRlbnRbMF07XG4gICAgICB9XG4gICAgICBpZiAocG9pbnRbMV0gPT0gZXh0ZW50WzFdKSB7XG4gICAgICAgIHlfID0gZXh0ZW50WzNdO1xuICAgICAgfSBlbHNlIGlmIChwb2ludFsxXSA9PSBleHRlbnRbM10pIHtcbiAgICAgICAgeV8gPSBleHRlbnRbMV07XG4gICAgICB9XG4gICAgICBpZiAoeF8gIT09IG51bGwgJiYgeV8gIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIFt4XywgeV9dO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICBpZiAodmVydGV4ICYmIGV4dGVudCkge1xuICAgICAgdmFyIHggPSAodmVydGV4WzBdID09IGV4dGVudFswXSB8fCB2ZXJ0ZXhbMF0gPT0gZXh0ZW50WzJdKSA/IHZlcnRleFswXSA6IG51bGw7XG4gICAgICB2YXIgeSA9ICh2ZXJ0ZXhbMV0gPT0gZXh0ZW50WzFdIHx8IHZlcnRleFsxXSA9PSBleHRlbnRbM10pID8gdmVydGV4WzFdIDogbnVsbDtcblxuICAgICAgLy9zbmFwIHRvIHBvaW50XG4gICAgICBpZiAoeCAhPT0gbnVsbCAmJiB5ICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMucG9pbnRlckhhbmRsZXJfID0gZ2V0UG9pbnRIYW5kbGVyKGdldE9wcG9zaW5nUG9pbnQodmVydGV4KSk7XG4gICAgICAvL3NuYXAgdG8gZWRnZVxuICAgICAgfSBlbHNlIGlmICh4ICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMucG9pbnRlckhhbmRsZXJfID0gZ2V0RWRnZUhhbmRsZXIoXG4gICAgICAgICAgZ2V0T3Bwb3NpbmdQb2ludChbeCwgZXh0ZW50WzFdXSksXG4gICAgICAgICAgZ2V0T3Bwb3NpbmdQb2ludChbeCwgZXh0ZW50WzNdXSlcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAoeSAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLnBvaW50ZXJIYW5kbGVyXyA9IGdldEVkZ2VIYW5kbGVyKFxuICAgICAgICAgIGdldE9wcG9zaW5nUG9pbnQoW2V4dGVudFswXSwgeV0pLFxuICAgICAgICAgIGdldE9wcG9zaW5nUG9pbnQoW2V4dGVudFsyXSwgeV0pXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgLy9ubyBzbmFwIC0gbmV3IGJib3hcbiAgICB9IGVsc2Uge1xuICAgICAgdmVydGV4ID0gbWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWwocGl4ZWwpO1xuICAgICAgdGhpcy5zZXRFeHRlbnQoW3ZlcnRleFswXSwgdmVydGV4WzFdLCB2ZXJ0ZXhbMF0sIHZlcnRleFsxXV0pO1xuICAgICAgdGhpcy5wb2ludGVySGFuZGxlcl8gPSBnZXRQb2ludEhhbmRsZXIodmVydGV4KTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7IC8vZXZlbnQgaGFuZGxlZDsgc3RhcnQgZG93bnVwIHNlcXVlbmNlXG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBFeHRlbnRJbnRlcmFjdGlvbi5wcm90b3R5cGUuaGFuZGxlRHJhZ0V2ZW50ID0gZnVuY3Rpb24gaGFuZGxlRHJhZ0V2ZW50IChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBpZiAodGhpcy5wb2ludGVySGFuZGxlcl8pIHtcbiAgICAgIHZhciBwaXhlbENvb3JkaW5hdGUgPSBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZTtcbiAgICAgIHRoaXMuc2V0RXh0ZW50KHRoaXMucG9pbnRlckhhbmRsZXJfKHBpeGVsQ29vcmRpbmF0ZSkpO1xuICAgICAgdGhpcy5jcmVhdGVPclVwZGF0ZVBvaW50ZXJGZWF0dXJlXyhwaXhlbENvb3JkaW5hdGUpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIEV4dGVudEludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gaGFuZGxlVXBFdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdGhpcy5wb2ludGVySGFuZGxlcl8gPSBudWxsO1xuICAgIC8vSWYgYmJveCBpcyB6ZXJvIGFyZWEsIHNldCB0byBudWxsO1xuICAgIHZhciBleHRlbnQgPSB0aGlzLmdldEV4dGVudCgpO1xuICAgIGlmICghZXh0ZW50IHx8IGdldEFyZWEoZXh0ZW50KSA9PT0gMCkge1xuICAgICAgdGhpcy5zZXRFeHRlbnQobnVsbCk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTsgLy9TdG9wIGhhbmRsaW5nIGRvd251cCBzZXF1ZW5jZVxuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgRXh0ZW50SW50ZXJhY3Rpb24ucHJvdG90eXBlLnNldE1hcCA9IGZ1bmN0aW9uIHNldE1hcCAobWFwKSB7XG4gICAgdGhpcy5leHRlbnRPdmVybGF5Xy5zZXRNYXAobWFwKTtcbiAgICB0aGlzLnZlcnRleE92ZXJsYXlfLnNldE1hcChtYXApO1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuc2V0TWFwLmNhbGwodGhpcywgbWFwKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY3VycmVudCBkcmF3biBleHRlbnQgaW4gdGhlIHZpZXcgcHJvamVjdGlvblxuICAgKlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBEcmF3biBleHRlbnQgaW4gdGhlIHZpZXcgcHJvamVjdGlvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgRXh0ZW50SW50ZXJhY3Rpb24ucHJvdG90eXBlLmdldEV4dGVudCA9IGZ1bmN0aW9uIGdldEV4dGVudCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZXh0ZW50XztcbiAgfTtcblxuICAvKipcbiAgICogTWFudWFsbHkgc2V0cyB0aGUgZHJhd24gZXh0ZW50LCB1c2luZyB0aGUgdmlldyBwcm9qZWN0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnRcbiAgICogQGFwaVxuICAgKi9cbiAgRXh0ZW50SW50ZXJhY3Rpb24ucHJvdG90eXBlLnNldEV4dGVudCA9IGZ1bmN0aW9uIHNldEV4dGVudCAoZXh0ZW50KSB7XG4gICAgLy9OdWxsIGV4dGVudCBtZWFucyBubyBiYm94XG4gICAgdGhpcy5leHRlbnRfID0gZXh0ZW50ID8gZXh0ZW50IDogbnVsbDtcbiAgICB0aGlzLmNyZWF0ZU9yVXBkYXRlRXh0ZW50RmVhdHVyZV8oZXh0ZW50KTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV4dGVudEludGVyYWN0aW9uRXZlbnQodGhpcy5leHRlbnRfKSk7XG4gIH07XG5cbiAgcmV0dXJuIEV4dGVudEludGVyYWN0aW9uO1xufShQb2ludGVySW50ZXJhY3Rpb24pKTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkZWZhdWx0IHN0eWxlIGZvciB0aGUgZHJhd24gYmJveFxuICpcbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLlN0eWxlRnVuY3Rpb259IERlZmF1bHQgRXh0ZW50IHN0eWxlXG4gKi9cbmZ1bmN0aW9uIGdldERlZmF1bHRFeHRlbnRTdHlsZUZ1bmN0aW9uKCkge1xuICB2YXIgc3R5bGUgPSBjcmVhdGVFZGl0aW5nU3R5bGUoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uKGZlYXR1cmUsIHJlc29sdXRpb24pIHtcbiAgICByZXR1cm4gc3R5bGVbR2VvbWV0cnlUeXBlLlBPTFlHT05dO1xuICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGRlZmF1bHQgc3R5bGUgZm9yIHRoZSBwb2ludGVyXG4gKlxuICogQHJldHVybiB7aW1wb3J0KFwiLi4vc3R5bGUvU3R5bGUuanNcIikuU3R5bGVGdW5jdGlvbn0gRGVmYXVsdCBwb2ludGVyIHN0eWxlXG4gKi9cbmZ1bmN0aW9uIGdldERlZmF1bHRQb2ludGVyU3R5bGVGdW5jdGlvbigpIHtcbiAgdmFyIHN0eWxlID0gY3JlYXRlRWRpdGluZ1N0eWxlKCk7XG4gIHJldHVybiBmdW5jdGlvbihmZWF0dXJlLCByZXNvbHV0aW9uKSB7XG4gICAgcmV0dXJuIHN0eWxlW0dlb21ldHJ5VHlwZS5QT0lOVF07XG4gIH07XG59XG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGZpeGVkUG9pbnQgY29ybmVyIHRoYXQgd2lsbCBiZSB1bmNoYW5nZWQgaW4gdGhlIG5ldyBleHRlbnRcbiAqIEByZXR1cm5zIHtmdW5jdGlvbiAoaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogaW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXZlbnQgaGFuZGxlclxuICovXG5mdW5jdGlvbiBnZXRQb2ludEhhbmRsZXIoZml4ZWRQb2ludCkge1xuICByZXR1cm4gZnVuY3Rpb24ocG9pbnQpIHtcbiAgICByZXR1cm4gYm91bmRpbmdFeHRlbnQoW2ZpeGVkUG9pbnQsIHBvaW50XSk7XG4gIH07XG59XG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGZpeGVkUDEgZmlyc3QgY29ybmVyIHRoYXQgd2lsbCBiZSB1bmNoYW5nZWQgaW4gdGhlIG5ldyBleHRlbnRcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBmaXhlZFAyIHNlY29uZCBjb3JuZXIgdGhhdCB3aWxsIGJlIHVuY2hhbmdlZCBpbiB0aGUgbmV3IGV4dGVudFxuICogQHJldHVybnMge2Z1bmN0aW9uIChpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOiBpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fG51bGx9IGV2ZW50IGhhbmRsZXJcbiAqL1xuZnVuY3Rpb24gZ2V0RWRnZUhhbmRsZXIoZml4ZWRQMSwgZml4ZWRQMikge1xuICBpZiAoZml4ZWRQMVswXSA9PSBmaXhlZFAyWzBdKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHBvaW50KSB7XG4gICAgICByZXR1cm4gYm91bmRpbmdFeHRlbnQoW2ZpeGVkUDEsIFtwb2ludFswXSwgZml4ZWRQMlsxXV1dKTtcbiAgICB9O1xuICB9IGVsc2UgaWYgKGZpeGVkUDFbMV0gPT0gZml4ZWRQMlsxXSkge1xuICAgIHJldHVybiBmdW5jdGlvbihwb2ludCkge1xuICAgICAgcmV0dXJuIGJvdW5kaW5nRXh0ZW50KFtmaXhlZFAxLCBbZml4ZWRQMlswXSwgcG9pbnRbMV1dXSk7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IGV4dGVudFxuICogQHJldHVybnMge0FycmF5PEFycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSBleHRlbnQgbGluZSBzZWdtZW50c1xuICovXG5mdW5jdGlvbiBnZXRTZWdtZW50cyhleHRlbnQpIHtcbiAgcmV0dXJuIFtcbiAgICBbW2V4dGVudFswXSwgZXh0ZW50WzFdXSwgW2V4dGVudFswXSwgZXh0ZW50WzNdXV0sXG4gICAgW1tleHRlbnRbMF0sIGV4dGVudFszXV0sIFtleHRlbnRbMl0sIGV4dGVudFszXV1dLFxuICAgIFtbZXh0ZW50WzJdLCBleHRlbnRbM11dLCBbZXh0ZW50WzJdLCBleHRlbnRbMV1dXSxcbiAgICBbW2V4dGVudFsyXSwgZXh0ZW50WzFdXSwgW2V4dGVudFswXSwgZXh0ZW50WzFdXV1cbiAgXTtcbn1cblxuXG5leHBvcnQgZGVmYXVsdCBFeHRlbnRJbnRlcmFjdGlvbjtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXh0ZW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9Nb2RpZnlcbiAqL1xuaW1wb3J0IHtnZXRVaWR9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IENvbGxlY3Rpb24gZnJvbSAnLi4vQ29sbGVjdGlvbi5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbkV2ZW50VHlwZSBmcm9tICcuLi9Db2xsZWN0aW9uRXZlbnRUeXBlLmpzJztcbmltcG9ydCBGZWF0dXJlIGZyb20gJy4uL0ZlYXR1cmUuanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudFR5cGUgZnJvbSAnLi4vTWFwQnJvd3NlckV2ZW50VHlwZS5qcyc7XG5pbXBvcnQge2VxdWFsc30gZnJvbSAnLi4vYXJyYXkuanMnO1xuaW1wb3J0IHtlcXVhbHMgYXMgY29vcmRpbmF0ZXNFcXVhbCwgZGlzdGFuY2UgYXMgY29vcmRpbmF0ZURpc3RhbmNlLCBzcXVhcmVkRGlzdGFuY2UgYXMgc3F1YXJlZENvb3JkaW5hdGVEaXN0YW5jZSwgc3F1YXJlZERpc3RhbmNlVG9TZWdtZW50LCBjbG9zZXN0T25TZWdtZW50fSBmcm9tICcuLi9jb29yZGluYXRlLmpzJztcbmltcG9ydCB7bGlzdGVuLCB1bmxpc3Rlbn0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbmltcG9ydCBFdmVudCBmcm9tICcuLi9ldmVudHMvRXZlbnQuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7YWx3YXlzLCBwcmltYXJ5QWN0aW9uLCBhbHRLZXlPbmx5LCBzaW5nbGVDbGlja30gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG5pbXBvcnQge2JvdW5kaW5nRXh0ZW50LCBidWZmZXIsIGNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGV9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4uL2dlb20vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBQb2ludCBmcm9tICcuLi9nZW9tL1BvaW50LmpzJztcbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24gZnJvbSAnLi9Qb2ludGVyLmpzJztcbmltcG9ydCBWZWN0b3JMYXllciBmcm9tICcuLi9sYXllci9WZWN0b3IuanMnO1xuaW1wb3J0IFZlY3RvclNvdXJjZSBmcm9tICcuLi9zb3VyY2UvVmVjdG9yLmpzJztcbmltcG9ydCBWZWN0b3JFdmVudFR5cGUgZnJvbSAnLi4vc291cmNlL1ZlY3RvckV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgUkJ1c2ggZnJvbSAnLi4vc3RydWN0cy9SQnVzaC5qcyc7XG5pbXBvcnQge2NyZWF0ZUVkaXRpbmdTdHlsZX0gZnJvbSAnLi4vc3R5bGUvU3R5bGUuanMnO1xuXG5cbi8qKlxuICogVGhlIHNlZ21lbnQgaW5kZXggYXNzaWduZWQgdG8gYSBjaXJjbGUncyBjZW50ZXIgd2hlblxuICogYnJlYWtpbmcgdXAgYSBjaXJjbGUgaW50byBNb2RpZnlTZWdtZW50RGF0YVR5cGUgc2VnbWVudHMuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG52YXIgQ0lSQ0xFX0NFTlRFUl9JTkRFWCA9IDA7XG5cbi8qKlxuICogVGhlIHNlZ21lbnQgaW5kZXggYXNzaWduZWQgdG8gYSBjaXJjbGUncyBjaXJjdW1mZXJlbmNlIHdoZW5cbiAqIGJyZWFraW5nIHVwIGEgY2lyY2xlIGludG8gTW9kaWZ5U2VnbWVudERhdGFUeXBlIHNlZ21lbnRzLlxuICogQHR5cGUge251bWJlcn1cbiAqL1xudmFyIENJUkNMRV9DSVJDVU1GRVJFTkNFX0lOREVYID0gMTtcblxuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbnZhciBNb2RpZnlFdmVudFR5cGUgPSB7XG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgdXBvbiBmZWF0dXJlIG1vZGlmaWNhdGlvbiBzdGFydFxuICAgKiBAZXZlbnQgTW9kaWZ5RXZlbnQjbW9kaWZ5c3RhcnRcbiAgICogQGFwaVxuICAgKi9cbiAgTU9ESUZZU1RBUlQ6ICdtb2RpZnlzdGFydCcsXG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgdXBvbiBmZWF0dXJlIG1vZGlmaWNhdGlvbiBlbmRcbiAgICogQGV2ZW50IE1vZGlmeUV2ZW50I21vZGlmeWVuZFxuICAgKiBAYXBpXG4gICAqL1xuICBNT0RJRllFTkQ6ICdtb2RpZnllbmQnXG59O1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gU2VnbWVudERhdGFcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gW2RlcHRoXVxuICogQHByb3BlcnR5IHtGZWF0dXJlfSBmZWF0dXJlXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnlcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbaW5kZXhdXG4gKiBAcHJvcGVydHkge0FycmF5PGltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQ+fSBzZWdtZW50XG4gKiBAcHJvcGVydHkge0FycmF5PFNlZ21lbnREYXRhPn0gW2ZlYXR1cmVTZWdtZW50c11cbiAqL1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2NvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0XG4gKiB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGFcbiAqIGJvb2xlYW4gdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHdpbGwgYmUgY29uc2lkZXJlZCB0byBhZGQgb3IgbW92ZSBhXG4gKiB2ZXJ0ZXggdG8gdGhlIHNrZXRjaC4gRGVmYXVsdCBpc1xuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufnByaW1hcnlBY3Rpb259LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2RlbGV0ZUNvbmRpdGlvbl0gQSBmdW5jdGlvblxuICogdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGFcbiAqIGJvb2xlYW4gdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLiBCeSBkZWZhdWx0LFxuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufnNpbmdsZUNsaWNrfSB3aXRoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb25+YWx0S2V5T25seX0gcmVzdWx0cyBpbiBhIHZlcnRleCBkZWxldGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtpbnNlcnRWZXJ0ZXhDb25kaXRpb25dIEFcbiAqIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmRcbiAqIHJldHVybnMgYSBib29sZWFuIHRvIGluZGljYXRlIHdoZXRoZXIgYSBuZXcgdmVydGV4IGNhbiBiZSBhZGRlZCB0byB0aGUgc2tldGNoXG4gKiBmZWF0dXJlcy4gRGVmYXVsdCBpcyB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb25+YWx3YXlzfS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcGl4ZWxUb2xlcmFuY2U9MTBdIFBpeGVsIHRvbGVyYW5jZSBmb3IgY29uc2lkZXJpbmcgdGhlXG4gKiBwb2ludGVyIGNsb3NlIGVub3VnaCB0byBhIHNlZ21lbnQgb3IgdmVydGV4IGZvciBlZGl0aW5nLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZUxpa2V9IFtzdHlsZV1cbiAqIFN0eWxlIHVzZWQgZm9yIHRoZSBmZWF0dXJlcyBiZWluZyBtb2RpZmllZC4gQnkgZGVmYXVsdCB0aGUgZGVmYXVsdCBlZGl0XG4gKiBzdHlsZSBpcyB1c2VkIChzZWUge0BsaW5rIG1vZHVsZTpvbC9zdHlsZX0pLlxuICogQHByb3BlcnR5IHtWZWN0b3JTb3VyY2V9IFtzb3VyY2VdIFRoZSB2ZWN0b3Igc291cmNlIHdpdGhcbiAqIGZlYXR1cmVzIHRvIG1vZGlmeS4gIElmIGEgdmVjdG9yIHNvdXJjZSBpcyBub3QgcHJvdmlkZWQsIGEgZmVhdHVyZSBjb2xsZWN0aW9uXG4gKiBtdXN0IGJlIHByb3ZpZGVkIHdpdGggdGhlIGZlYXR1cmVzIG9wdGlvbi5cbiAqIEBwcm9wZXJ0eSB7Q29sbGVjdGlvbjxGZWF0dXJlPn0gW2ZlYXR1cmVzXVxuICogVGhlIGZlYXR1cmVzIHRoZSBpbnRlcmFjdGlvbiB3b3JrcyBvbi4gIElmIGEgZmVhdHVyZSBjb2xsZWN0aW9uIGlzIG5vdFxuICogcHJvdmlkZWQsIGEgdmVjdG9yIHNvdXJjZSBtdXN0IGJlIHByb3ZpZGVkIHdpdGggdGhlIHNvdXJjZSBvcHRpb24uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWD1mYWxzZV0gV3JhcCB0aGUgd29ybGQgaG9yaXpvbnRhbGx5IG9uIHRoZSBza2V0Y2hcbiAqIG92ZXJsYXkuXG4gKi9cblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGJ5IHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vTW9kaWZ5fk1vZGlmeX0gaW5zdGFuY2VzIGFyZVxuICogaW5zdGFuY2VzIG9mIHRoaXMgdHlwZS5cbiAqL1xuZXhwb3J0IHZhciBNb2RpZnlFdmVudCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEV2ZW50KSB7XG4gIGZ1bmN0aW9uIE1vZGlmeUV2ZW50KHR5cGUsIGZlYXR1cmVzLCBtYXBCcm93c2VyUG9pbnRlckV2ZW50KSB7XG4gICAgRXZlbnQuY2FsbCh0aGlzLCB0eXBlKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBmZWF0dXJlcyBiZWluZyBtb2RpZmllZC5cbiAgICAgKiBAdHlwZSB7Q29sbGVjdGlvbjxGZWF0dXJlPn1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5mZWF0dXJlcyA9IGZlYXR1cmVzO1xuXG4gICAgLyoqXG4gICAgICogQXNzb2NpYXRlZCB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH0uXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICB0aGlzLm1hcEJyb3dzZXJFdmVudCA9IG1hcEJyb3dzZXJQb2ludGVyRXZlbnQ7XG5cbiAgfVxuXG4gIGlmICggRXZlbnQgKSBNb2RpZnlFdmVudC5fX3Byb3RvX18gPSBFdmVudDtcbiAgTW9kaWZ5RXZlbnQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggRXZlbnQgJiYgRXZlbnQucHJvdG90eXBlICk7XG4gIE1vZGlmeUV2ZW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE1vZGlmeUV2ZW50O1xuXG4gIHJldHVybiBNb2RpZnlFdmVudDtcbn0oRXZlbnQpKTtcblxuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEludGVyYWN0aW9uIGZvciBtb2RpZnlpbmcgZmVhdHVyZSBnZW9tZXRyaWVzLiAgVG8gbW9kaWZ5IGZlYXR1cmVzIHRoYXQgaGF2ZVxuICogYmVlbiBhZGRlZCB0byBhbiBleGlzdGluZyBzb3VyY2UsIGNvbnN0cnVjdCB0aGUgbW9kaWZ5IGludGVyYWN0aW9uIHdpdGggdGhlXG4gKiBgc291cmNlYCBvcHRpb24uICBJZiB5b3Ugd2FudCB0byBtb2RpZnkgZmVhdHVyZXMgaW4gYSBjb2xsZWN0aW9uIChmb3IgZXhhbXBsZSxcbiAqIHRoZSBjb2xsZWN0aW9uIHVzZWQgYnkgYSBzZWxlY3QgaW50ZXJhY3Rpb24pLCBjb25zdHJ1Y3QgdGhlIGludGVyYWN0aW9uIHdpdGhcbiAqIHRoZSBgZmVhdHVyZXNgIG9wdGlvbi4gIFRoZSBpbnRlcmFjdGlvbiBtdXN0IGJlIGNvbnN0cnVjdGVkIHdpdGggZWl0aGVyIGFcbiAqIGBzb3VyY2VgIG9yIGBmZWF0dXJlc2Agb3B0aW9uLlxuICpcbiAqIEJ5IGRlZmF1bHQsIHRoZSBpbnRlcmFjdGlvbiB3aWxsIGFsbG93IGRlbGV0aW9uIG9mIHZlcnRpY2VzIHdoZW4gdGhlIGBhbHRgXG4gKiBrZXkgaXMgcHJlc3NlZC4gIFRvIGNvbmZpZ3VyZSB0aGUgaW50ZXJhY3Rpb24gd2l0aCBhIGRpZmZlcmVudCBjb25kaXRpb25cbiAqIGZvciBkZWxldGlvbiwgdXNlIHRoZSBgZGVsZXRlQ29uZGl0aW9uYCBvcHRpb24uXG4gKiBAZmlyZXMgTW9kaWZ5RXZlbnRcbiAqIEBhcGlcbiAqL1xudmFyIE1vZGlmeSA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFBvaW50ZXJJbnRlcmFjdGlvbikge1xuICBmdW5jdGlvbiBNb2RpZnkob3B0aW9ucykge1xuXG4gICAgUG9pbnRlckludGVyYWN0aW9uLmNhbGwoLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1BvaW50ZXIuanNcIikuT3B0aW9uc30gKi8gdGhpcywgKG9wdGlvbnMpKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBwcmltYXJ5QWN0aW9uO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgQnJvd3NlciBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb21iaW5lZCBjb25kaXRpb24gcmVzdWx0LlxuICAgICAqL1xuICAgIHRoaXMuZGVmYXVsdERlbGV0ZUNvbmRpdGlvbl8gPSBmdW5jdGlvbihtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgIHJldHVybiBhbHRLZXlPbmx5KG1hcEJyb3dzZXJFdmVudCkgJiYgc2luZ2xlQ2xpY2sobWFwQnJvd3NlckV2ZW50KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5kZWxldGVDb25kaXRpb25fID0gb3B0aW9ucy5kZWxldGVDb25kaXRpb24gP1xuICAgICAgb3B0aW9ucy5kZWxldGVDb25kaXRpb24gOiB0aGlzLmRlZmF1bHREZWxldGVDb25kaXRpb25fO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5pbnNlcnRWZXJ0ZXhDb25kaXRpb25fID0gb3B0aW9ucy5pbnNlcnRWZXJ0ZXhDb25kaXRpb24gP1xuICAgICAgb3B0aW9ucy5pbnNlcnRWZXJ0ZXhDb25kaXRpb24gOiBhbHdheXM7XG5cbiAgICAvKipcbiAgICAgKiBFZGl0aW5nIHZlcnRleC5cbiAgICAgKiBAdHlwZSB7RmVhdHVyZX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMudmVydGV4RmVhdHVyZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogU2VnbWVudHMgaW50ZXJzZWN0aW5nIHtAbGluayB0aGlzLnZlcnRleEZlYXR1cmVffSBieSBzZWdtZW50IHVpZC5cbiAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgYm9vbGVhbj59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnZlcnRleFNlZ21lbnRzXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmxhc3RQaXhlbF8gPSBbMCwgMF07XG5cbiAgICAvKipcbiAgICAgKiBUcmFja3MgaWYgdGhlIG5leHQgYHNpbmdsZWNsaWNrYCBldmVudCBzaG91bGQgYmUgaWdub3JlZCB0byBwcmV2ZW50XG4gICAgICogYWNjaWRlbnRhbCBkZWxldGlvbiByaWdodCBhZnRlciB2ZXJ0ZXggY3JlYXRpb24uXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmlnbm9yZU5leHRTaW5nbGVDbGlja18gPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5tb2RpZmllZF8gPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIFNlZ21lbnQgUlRyZWUgZm9yIGVhY2ggbGF5ZXJcbiAgICAgKiBAdHlwZSB7UkJ1c2g8U2VnbWVudERhdGE+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5yQnVzaF8gPSBuZXcgUkJ1c2goKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnBpeGVsVG9sZXJhbmNlXyA9IG9wdGlvbnMucGl4ZWxUb2xlcmFuY2UgIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRpb25zLnBpeGVsVG9sZXJhbmNlIDogMTA7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuc25hcHBlZFRvVmVydGV4XyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogSW5kaWNhdGUgd2hldGhlciB0aGUgaW50ZXJhY3Rpb24gaXMgY3VycmVudGx5IGNoYW5naW5nIGEgZmVhdHVyZSdzXG4gICAgICogY29vcmRpbmF0ZXMuXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmNoYW5naW5nRmVhdHVyZV8gPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtBcnJheX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZHJhZ1NlZ21lbnRzXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogRHJhdyBvdmVybGF5IHdoZXJlIHNrZXRjaCBmZWF0dXJlcyBhcmUgZHJhd24uXG4gICAgICogQHR5cGUge1ZlY3RvckxheWVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5vdmVybGF5XyA9IG5ldyBWZWN0b3JMYXllcih7XG4gICAgICBzb3VyY2U6IG5ldyBWZWN0b3JTb3VyY2Uoe1xuICAgICAgICB1c2VTcGF0aWFsSW5kZXg6IGZhbHNlLFxuICAgICAgICB3cmFwWDogISFvcHRpb25zLndyYXBYXG4gICAgICB9KSxcbiAgICAgIHN0eWxlOiBvcHRpb25zLnN0eWxlID8gb3B0aW9ucy5zdHlsZSA6XG4gICAgICAgIGdldERlZmF1bHRTdHlsZUZ1bmN0aW9uKCksXG4gICAgICB1cGRhdGVXaGlsZUFuaW1hdGluZzogdHJ1ZSxcbiAgICAgIHVwZGF0ZVdoaWxlSW50ZXJhY3Rpbmc6IHRydWVcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBjb25zdFxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBmdW5jdGlvbihGZWF0dXJlLCBpbXBvcnQoXCIuLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHQpPn1cbiAgICAgKi9cbiAgICB0aGlzLlNFR01FTlRfV1JJVEVSU18gPSB7XG4gICAgICAnUG9pbnQnOiB0aGlzLndyaXRlUG9pbnRHZW9tZXRyeV8sXG4gICAgICAnTGluZVN0cmluZyc6IHRoaXMud3JpdGVMaW5lU3RyaW5nR2VvbWV0cnlfLFxuICAgICAgJ0xpbmVhclJpbmcnOiB0aGlzLndyaXRlTGluZVN0cmluZ0dlb21ldHJ5XyxcbiAgICAgICdQb2x5Z29uJzogdGhpcy53cml0ZVBvbHlnb25HZW9tZXRyeV8sXG4gICAgICAnTXVsdGlQb2ludCc6IHRoaXMud3JpdGVNdWx0aVBvaW50R2VvbWV0cnlfLFxuICAgICAgJ011bHRpTGluZVN0cmluZyc6IHRoaXMud3JpdGVNdWx0aUxpbmVTdHJpbmdHZW9tZXRyeV8sXG4gICAgICAnTXVsdGlQb2x5Z29uJzogdGhpcy53cml0ZU11bHRpUG9seWdvbkdlb21ldHJ5XyxcbiAgICAgICdDaXJjbGUnOiB0aGlzLndyaXRlQ2lyY2xlR2VvbWV0cnlfLFxuICAgICAgJ0dlb21ldHJ5Q29sbGVjdGlvbic6IHRoaXMud3JpdGVHZW9tZXRyeUNvbGxlY3Rpb25HZW9tZXRyeV9cbiAgICB9O1xuXG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7VmVjdG9yU291cmNlfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5zb3VyY2VfID0gbnVsbDtcblxuICAgIHZhciBmZWF0dXJlcztcbiAgICBpZiAob3B0aW9ucy5zb3VyY2UpIHtcbiAgICAgIHRoaXMuc291cmNlXyA9IG9wdGlvbnMuc291cmNlO1xuICAgICAgZmVhdHVyZXMgPSBuZXcgQ29sbGVjdGlvbih0aGlzLnNvdXJjZV8uZ2V0RmVhdHVyZXMoKSk7XG4gICAgICBsaXN0ZW4odGhpcy5zb3VyY2VfLCBWZWN0b3JFdmVudFR5cGUuQURERkVBVFVSRSxcbiAgICAgICAgdGhpcy5oYW5kbGVTb3VyY2VBZGRfLCB0aGlzKTtcbiAgICAgIGxpc3Rlbih0aGlzLnNvdXJjZV8sIFZlY3RvckV2ZW50VHlwZS5SRU1PVkVGRUFUVVJFLFxuICAgICAgICB0aGlzLmhhbmRsZVNvdXJjZVJlbW92ZV8sIHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmZWF0dXJlcyA9IG9wdGlvbnMuZmVhdHVyZXM7XG4gICAgfVxuICAgIGlmICghZmVhdHVyZXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIG1vZGlmeSBpbnRlcmFjdGlvbiByZXF1aXJlcyBmZWF0dXJlcyBvciBhIHNvdXJjZScpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtDb2xsZWN0aW9uPEZlYXR1cmU+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5mZWF0dXJlc18gPSBmZWF0dXJlcztcblxuICAgIHRoaXMuZmVhdHVyZXNfLmZvckVhY2godGhpcy5hZGRGZWF0dXJlXy5iaW5kKHRoaXMpKTtcbiAgICBsaXN0ZW4odGhpcy5mZWF0dXJlc18sIENvbGxlY3Rpb25FdmVudFR5cGUuQURELFxuICAgICAgdGhpcy5oYW5kbGVGZWF0dXJlQWRkXywgdGhpcyk7XG4gICAgbGlzdGVuKHRoaXMuZmVhdHVyZXNfLCBDb2xsZWN0aW9uRXZlbnRUeXBlLlJFTU9WRSxcbiAgICAgIHRoaXMuaGFuZGxlRmVhdHVyZVJlbW92ZV8sIHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL01hcEJyb3dzZXJQb2ludGVyRXZlbnQuanNcIikuZGVmYXVsdH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMubGFzdFBvaW50ZXJFdmVudF8gPSBudWxsO1xuXG4gIH1cblxuICBpZiAoIFBvaW50ZXJJbnRlcmFjdGlvbiApIE1vZGlmeS5fX3Byb3RvX18gPSBQb2ludGVySW50ZXJhY3Rpb247XG4gIE1vZGlmeS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQb2ludGVySW50ZXJhY3Rpb24gJiYgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZSApO1xuICBNb2RpZnkucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTW9kaWZ5O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0ZlYXR1cmV9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIE1vZGlmeS5wcm90b3R5cGUuYWRkRmVhdHVyZV8gPSBmdW5jdGlvbiBhZGRGZWF0dXJlXyAoZmVhdHVyZSkge1xuICAgIHZhciBnZW9tZXRyeSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcbiAgICBpZiAoZ2VvbWV0cnkgJiYgZ2VvbWV0cnkuZ2V0VHlwZSgpIGluIHRoaXMuU0VHTUVOVF9XUklURVJTXykge1xuICAgICAgdGhpcy5TRUdNRU5UX1dSSVRFUlNfW2dlb21ldHJ5LmdldFR5cGUoKV0uY2FsbCh0aGlzLCBmZWF0dXJlLCBnZW9tZXRyeSk7XG4gICAgfVxuICAgIHZhciBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgIGlmIChtYXAgJiYgbWFwLmlzUmVuZGVyZWQoKSAmJiB0aGlzLmdldEFjdGl2ZSgpKSB7XG4gICAgICB0aGlzLmhhbmRsZVBvaW50ZXJBdFBpeGVsXyh0aGlzLmxhc3RQaXhlbF8sIG1hcCk7XG4gICAgfVxuICAgIGxpc3RlbihmZWF0dXJlLCBFdmVudFR5cGUuQ0hBTkdFLFxuICAgICAgdGhpcy5oYW5kbGVGZWF0dXJlQ2hhbmdlXywgdGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlclBvaW50ZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBldnQgTWFwIGJyb3dzZXIgZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIE1vZGlmeS5wcm90b3R5cGUud2lsbE1vZGlmeUZlYXR1cmVzXyA9IGZ1bmN0aW9uIHdpbGxNb2RpZnlGZWF0dXJlc18gKGV2dCkge1xuICAgIGlmICghdGhpcy5tb2RpZmllZF8pIHtcbiAgICAgIHRoaXMubW9kaWZpZWRfID0gdHJ1ZTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgTW9kaWZ5RXZlbnQoXG4gICAgICAgIE1vZGlmeUV2ZW50VHlwZS5NT0RJRllTVEFSVCwgdGhpcy5mZWF0dXJlc18sIGV2dCkpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtGZWF0dXJlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBNb2RpZnkucHJvdG90eXBlLnJlbW92ZUZlYXR1cmVfID0gZnVuY3Rpb24gcmVtb3ZlRmVhdHVyZV8gKGZlYXR1cmUpIHtcbiAgICB0aGlzLnJlbW92ZUZlYXR1cmVTZWdtZW50RGF0YV8oZmVhdHVyZSk7XG4gICAgLy8gUmVtb3ZlIHRoZSB2ZXJ0ZXggZmVhdHVyZSBpZiB0aGUgY29sbGVjdGlvbiBvZiBjYW5kaXRhdGUgZmVhdHVyZXNcbiAgICAvLyBpcyBlbXB0eS5cbiAgICBpZiAodGhpcy52ZXJ0ZXhGZWF0dXJlXyAmJiB0aGlzLmZlYXR1cmVzXy5nZXRMZW5ndGgoKSA9PT0gMCkge1xuICAgICAgLyoqIEB0eXBlIHtWZWN0b3JTb3VyY2V9ICovICh0aGlzLm92ZXJsYXlfLmdldFNvdXJjZSgpKS5yZW1vdmVGZWF0dXJlKHRoaXMudmVydGV4RmVhdHVyZV8pO1xuICAgICAgdGhpcy52ZXJ0ZXhGZWF0dXJlXyA9IG51bGw7XG4gICAgfVxuICAgIHVubGlzdGVuKGZlYXR1cmUsIEV2ZW50VHlwZS5DSEFOR0UsXG4gICAgICB0aGlzLmhhbmRsZUZlYXR1cmVDaGFuZ2VfLCB0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtGZWF0dXJlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBNb2RpZnkucHJvdG90eXBlLnJlbW92ZUZlYXR1cmVTZWdtZW50RGF0YV8gPSBmdW5jdGlvbiByZW1vdmVGZWF0dXJlU2VnbWVudERhdGFfIChmZWF0dXJlKSB7XG4gICAgdmFyIHJCdXNoID0gdGhpcy5yQnVzaF87XG4gICAgdmFyIC8qKiBAdHlwZSB7QXJyYXk8U2VnbWVudERhdGE+fSAqLyBub2Rlc1RvUmVtb3ZlID0gW107XG4gICAgckJ1c2guZm9yRWFjaChcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtTZWdtZW50RGF0YX0gbm9kZSBSVHJlZSBub2RlLlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIGlmIChmZWF0dXJlID09PSBub2RlLmZlYXR1cmUpIHtcbiAgICAgICAgICBub2Rlc1RvUmVtb3ZlLnB1c2gobm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIGZvciAodmFyIGkgPSBub2Rlc1RvUmVtb3ZlLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICByQnVzaC5yZW1vdmUobm9kZXNUb1JlbW92ZVtpXSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgTW9kaWZ5LnByb3RvdHlwZS5zZXRBY3RpdmUgPSBmdW5jdGlvbiBzZXRBY3RpdmUgKGFjdGl2ZSkge1xuICAgIGlmICh0aGlzLnZlcnRleEZlYXR1cmVfICYmICFhY3RpdmUpIHtcbiAgICAgIC8qKiBAdHlwZSB7VmVjdG9yU291cmNlfSAqLyAodGhpcy5vdmVybGF5Xy5nZXRTb3VyY2UoKSkucmVtb3ZlRmVhdHVyZSh0aGlzLnZlcnRleEZlYXR1cmVfKTtcbiAgICAgIHRoaXMudmVydGV4RmVhdHVyZV8gPSBudWxsO1xuICAgIH1cbiAgICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlLnNldEFjdGl2ZS5jYWxsKHRoaXMsIGFjdGl2ZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBNb2RpZnkucHJvdG90eXBlLnNldE1hcCA9IGZ1bmN0aW9uIHNldE1hcCAobWFwKSB7XG4gICAgdGhpcy5vdmVybGF5Xy5zZXRNYXAobWFwKTtcbiAgICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlLnNldE1hcC5jYWxsKHRoaXMsIG1hcCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgb3ZlcmxheSBsYXllciB0aGF0IHRoaXMgaW50ZXJhY3Rpb24gcmVuZGVycyBza2V0Y2ggZmVhdHVyZXMgdG8uXG4gICAqIEByZXR1cm4ge1ZlY3RvckxheWVyfSBPdmVybGF5IGxheWVyLlxuICAgKiBAYXBpXG4gICAqL1xuICBNb2RpZnkucHJvdG90eXBlLmdldE92ZXJsYXkgPSBmdW5jdGlvbiBnZXRPdmVybGF5ICgpIHtcbiAgICByZXR1cm4gdGhpcy5vdmVybGF5XztcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zb3VyY2UvVmVjdG9yLmpzXCIpLlZlY3RvclNvdXJjZUV2ZW50fSBldmVudCBFdmVudC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIE1vZGlmeS5wcm90b3R5cGUuaGFuZGxlU291cmNlQWRkXyA9IGZ1bmN0aW9uIGhhbmRsZVNvdXJjZUFkZF8gKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmZlYXR1cmUpIHtcbiAgICAgIHRoaXMuZmVhdHVyZXNfLnB1c2goZXZlbnQuZmVhdHVyZSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3NvdXJjZS9WZWN0b3IuanNcIikuVmVjdG9yU291cmNlRXZlbnR9IGV2ZW50IEV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgTW9kaWZ5LnByb3RvdHlwZS5oYW5kbGVTb3VyY2VSZW1vdmVfID0gZnVuY3Rpb24gaGFuZGxlU291cmNlUmVtb3ZlXyAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQuZmVhdHVyZSkge1xuICAgICAgdGhpcy5mZWF0dXJlc18ucmVtb3ZlKGV2ZW50LmZlYXR1cmUpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZ0IEV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgTW9kaWZ5LnByb3RvdHlwZS5oYW5kbGVGZWF0dXJlQWRkXyA9IGZ1bmN0aW9uIGhhbmRsZUZlYXR1cmVBZGRfIChldnQpIHtcbiAgICB0aGlzLmFkZEZlYXR1cmVfKC8qKiBAdHlwZSB7RmVhdHVyZX0gKi8gKGV2dC5lbGVtZW50KSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHR9IGV2dCBFdmVudC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIE1vZGlmeS5wcm90b3R5cGUuaGFuZGxlRmVhdHVyZUNoYW5nZV8gPSBmdW5jdGlvbiBoYW5kbGVGZWF0dXJlQ2hhbmdlXyAoZXZ0KSB7XG4gICAgaWYgKCF0aGlzLmNoYW5naW5nRmVhdHVyZV8pIHtcbiAgICAgIHZhciBmZWF0dXJlID0gLyoqIEB0eXBlIHtGZWF0dXJlfSAqLyAoZXZ0LnRhcmdldCk7XG4gICAgICB0aGlzLnJlbW92ZUZlYXR1cmVfKGZlYXR1cmUpO1xuICAgICAgdGhpcy5hZGRGZWF0dXJlXyhmZWF0dXJlKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGV2dCBFdmVudC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIE1vZGlmeS5wcm90b3R5cGUuaGFuZGxlRmVhdHVyZVJlbW92ZV8gPSBmdW5jdGlvbiBoYW5kbGVGZWF0dXJlUmVtb3ZlXyAoZXZ0KSB7XG4gICAgdmFyIGZlYXR1cmUgPSAvKiogQHR5cGUge0ZlYXR1cmV9ICovIChldnQuZWxlbWVudCk7XG4gICAgdGhpcy5yZW1vdmVGZWF0dXJlXyhmZWF0dXJlKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtGZWF0dXJlfSBmZWF0dXJlIEZlYXR1cmVcbiAgICogQHBhcmFtIHtQb2ludH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBNb2RpZnkucHJvdG90eXBlLndyaXRlUG9pbnRHZW9tZXRyeV8gPSBmdW5jdGlvbiB3cml0ZVBvaW50R2VvbWV0cnlfIChmZWF0dXJlLCBnZW9tZXRyeSkge1xuICAgIHZhciBjb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldENvb3JkaW5hdGVzKCk7XG4gICAgdmFyIHNlZ21lbnREYXRhID0gLyoqIEB0eXBlIHtTZWdtZW50RGF0YX0gKi8gKHtcbiAgICAgIGZlYXR1cmU6IGZlYXR1cmUsXG4gICAgICBnZW9tZXRyeTogZ2VvbWV0cnksXG4gICAgICBzZWdtZW50OiBbY29vcmRpbmF0ZXMsIGNvb3JkaW5hdGVzXVxuICAgIH0pO1xuICAgIHRoaXMuckJ1c2hfLmluc2VydChnZW9tZXRyeS5nZXRFeHRlbnQoKSwgc2VnbWVudERhdGEpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0ZlYXR1cmV9IGZlYXR1cmUgRmVhdHVyZVxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vTXVsdGlQb2ludC5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIE1vZGlmeS5wcm90b3R5cGUud3JpdGVNdWx0aVBvaW50R2VvbWV0cnlfID0gZnVuY3Rpb24gd3JpdGVNdWx0aVBvaW50R2VvbWV0cnlfIChmZWF0dXJlLCBnZW9tZXRyeSkge1xuICAgIHZhciBwb2ludHMgPSBnZW9tZXRyeS5nZXRDb29yZGluYXRlcygpO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHBvaW50cy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICB2YXIgY29vcmRpbmF0ZXMgPSBwb2ludHNbaV07XG4gICAgICB2YXIgc2VnbWVudERhdGEgPSAvKiogQHR5cGUge1NlZ21lbnREYXRhfSAqLyAoe1xuICAgICAgICBmZWF0dXJlOiBmZWF0dXJlLFxuICAgICAgICBnZW9tZXRyeTogZ2VvbWV0cnksXG4gICAgICAgIGRlcHRoOiBbaV0sXG4gICAgICAgIGluZGV4OiBpLFxuICAgICAgICBzZWdtZW50OiBbY29vcmRpbmF0ZXMsIGNvb3JkaW5hdGVzXVxuICAgICAgfSk7XG4gICAgICB0aGlzLnJCdXNoXy5pbnNlcnQoZ2VvbWV0cnkuZ2V0RXh0ZW50KCksIHNlZ21lbnREYXRhKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7RmVhdHVyZX0gZmVhdHVyZSBGZWF0dXJlXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9MaW5lU3RyaW5nLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgTW9kaWZ5LnByb3RvdHlwZS53cml0ZUxpbmVTdHJpbmdHZW9tZXRyeV8gPSBmdW5jdGlvbiB3cml0ZUxpbmVTdHJpbmdHZW9tZXRyeV8gKGZlYXR1cmUsIGdlb21ldHJ5KSB7XG4gICAgdmFyIGNvb3JkaW5hdGVzID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGggLSAxOyBpIDwgaWk7ICsraSkge1xuICAgICAgdmFyIHNlZ21lbnQgPSBjb29yZGluYXRlcy5zbGljZShpLCBpICsgMik7XG4gICAgICB2YXIgc2VnbWVudERhdGEgPSAvKiogQHR5cGUge1NlZ21lbnREYXRhfSAqLyAoe1xuICAgICAgICBmZWF0dXJlOiBmZWF0dXJlLFxuICAgICAgICBnZW9tZXRyeTogZ2VvbWV0cnksXG4gICAgICAgIGluZGV4OiBpLFxuICAgICAgICBzZWdtZW50OiBzZWdtZW50XG4gICAgICB9KTtcbiAgICAgIHRoaXMuckJ1c2hfLmluc2VydChib3VuZGluZ0V4dGVudChzZWdtZW50KSwgc2VnbWVudERhdGEpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtGZWF0dXJlfSBmZWF0dXJlIEZlYXR1cmVcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL011bHRpTGluZVN0cmluZy5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIE1vZGlmeS5wcm90b3R5cGUud3JpdGVNdWx0aUxpbmVTdHJpbmdHZW9tZXRyeV8gPSBmdW5jdGlvbiB3cml0ZU11bHRpTGluZVN0cmluZ0dlb21ldHJ5XyAoZmVhdHVyZSwgZ2VvbWV0cnkpIHtcbiAgICB2YXIgbGluZXMgPSBnZW9tZXRyeS5nZXRDb29yZGluYXRlcygpO1xuICAgIGZvciAodmFyIGogPSAwLCBqaiA9IGxpbmVzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgIHZhciBjb29yZGluYXRlcyA9IGxpbmVzW2pdO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoIC0gMTsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIHNlZ21lbnQgPSBjb29yZGluYXRlcy5zbGljZShpLCBpICsgMik7XG4gICAgICAgIHZhciBzZWdtZW50RGF0YSA9IC8qKiBAdHlwZSB7U2VnbWVudERhdGF9ICovICh7XG4gICAgICAgICAgZmVhdHVyZTogZmVhdHVyZSxcbiAgICAgICAgICBnZW9tZXRyeTogZ2VvbWV0cnksXG4gICAgICAgICAgZGVwdGg6IFtqXSxcbiAgICAgICAgICBpbmRleDogaSxcbiAgICAgICAgICBzZWdtZW50OiBzZWdtZW50XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJCdXNoXy5pbnNlcnQoYm91bmRpbmdFeHRlbnQoc2VnbWVudCksIHNlZ21lbnREYXRhKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7RmVhdHVyZX0gZmVhdHVyZSBGZWF0dXJlXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgTW9kaWZ5LnByb3RvdHlwZS53cml0ZVBvbHlnb25HZW9tZXRyeV8gPSBmdW5jdGlvbiB3cml0ZVBvbHlnb25HZW9tZXRyeV8gKGZlYXR1cmUsIGdlb21ldHJ5KSB7XG4gICAgdmFyIHJpbmdzID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICBmb3IgKHZhciBqID0gMCwgamogPSByaW5ncy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICB2YXIgY29vcmRpbmF0ZXMgPSByaW5nc1tqXTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aCAtIDE7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBzZWdtZW50ID0gY29vcmRpbmF0ZXMuc2xpY2UoaSwgaSArIDIpO1xuICAgICAgICB2YXIgc2VnbWVudERhdGEgPSAvKiogQHR5cGUge1NlZ21lbnREYXRhfSAqLyAoe1xuICAgICAgICAgIGZlYXR1cmU6IGZlYXR1cmUsXG4gICAgICAgICAgZ2VvbWV0cnk6IGdlb21ldHJ5LFxuICAgICAgICAgIGRlcHRoOiBbal0sXG4gICAgICAgICAgaW5kZXg6IGksXG4gICAgICAgICAgc2VnbWVudDogc2VnbWVudFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5yQnVzaF8uaW5zZXJ0KGJvdW5kaW5nRXh0ZW50KHNlZ21lbnQpLCBzZWdtZW50RGF0YSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0ZlYXR1cmV9IGZlYXR1cmUgRmVhdHVyZVxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vTXVsdGlQb2x5Z29uLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgTW9kaWZ5LnByb3RvdHlwZS53cml0ZU11bHRpUG9seWdvbkdlb21ldHJ5XyA9IGZ1bmN0aW9uIHdyaXRlTXVsdGlQb2x5Z29uR2VvbWV0cnlfIChmZWF0dXJlLCBnZW9tZXRyeSkge1xuICAgIHZhciBwb2x5Z29ucyA9IGdlb21ldHJ5LmdldENvb3JkaW5hdGVzKCk7XG4gICAgZm9yICh2YXIgayA9IDAsIGtrID0gcG9seWdvbnMubGVuZ3RoOyBrIDwga2s7ICsraykge1xuICAgICAgdmFyIHJpbmdzID0gcG9seWdvbnNba107XG4gICAgICBmb3IgKHZhciBqID0gMCwgamogPSByaW5ncy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgIHZhciBjb29yZGluYXRlcyA9IHJpbmdzW2pdO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGggLSAxOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgIHZhciBzZWdtZW50ID0gY29vcmRpbmF0ZXMuc2xpY2UoaSwgaSArIDIpO1xuICAgICAgICAgIHZhciBzZWdtZW50RGF0YSA9IC8qKiBAdHlwZSB7U2VnbWVudERhdGF9ICovICh7XG4gICAgICAgICAgICBmZWF0dXJlOiBmZWF0dXJlLFxuICAgICAgICAgICAgZ2VvbWV0cnk6IGdlb21ldHJ5LFxuICAgICAgICAgICAgZGVwdGg6IFtqLCBrXSxcbiAgICAgICAgICAgIGluZGV4OiBpLFxuICAgICAgICAgICAgc2VnbWVudDogc2VnbWVudFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMuckJ1c2hfLmluc2VydChib3VuZGluZ0V4dGVudChzZWdtZW50KSwgc2VnbWVudERhdGEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBXZSBjb252ZXJ0IGEgY2lyY2xlIGludG8gdHdvIHNlZ21lbnRzLiAgVGhlIHNlZ21lbnQgYXQgaW5kZXhcbiAgICoge0BsaW5rIENJUkNMRV9DRU5URVJfSU5ERVh9IGlzIHRoZVxuICAgKiBjaXJjbGUncyBjZW50ZXIgKGEgcG9pbnQpLiAgVGhlIHNlZ21lbnQgYXQgaW5kZXhcbiAgICoge0BsaW5rIENJUkNMRV9DSVJDVU1GRVJFTkNFX0lOREVYfSBpc1xuICAgKiB0aGUgY2lyY3VtZmVyZW5jZSwgYW5kIGlzIG5vdCBhIGxpbmUgc2VnbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtGZWF0dXJlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9DaXJjbGUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBNb2RpZnkucHJvdG90eXBlLndyaXRlQ2lyY2xlR2VvbWV0cnlfID0gZnVuY3Rpb24gd3JpdGVDaXJjbGVHZW9tZXRyeV8gKGZlYXR1cmUsIGdlb21ldHJ5KSB7XG4gICAgdmFyIGNvb3JkaW5hdGVzID0gZ2VvbWV0cnkuZ2V0Q2VudGVyKCk7XG4gICAgdmFyIGNlbnRlclNlZ21lbnREYXRhID0gLyoqIEB0eXBlIHtTZWdtZW50RGF0YX0gKi8gKHtcbiAgICAgIGZlYXR1cmU6IGZlYXR1cmUsXG4gICAgICBnZW9tZXRyeTogZ2VvbWV0cnksXG4gICAgICBpbmRleDogQ0lSQ0xFX0NFTlRFUl9JTkRFWCxcbiAgICAgIHNlZ21lbnQ6IFtjb29yZGluYXRlcywgY29vcmRpbmF0ZXNdXG4gICAgfSk7XG4gICAgdmFyIGNpcmN1bWZlcmVuY2VTZWdtZW50RGF0YSA9IC8qKiBAdHlwZSB7U2VnbWVudERhdGF9ICovICh7XG4gICAgICBmZWF0dXJlOiBmZWF0dXJlLFxuICAgICAgZ2VvbWV0cnk6IGdlb21ldHJ5LFxuICAgICAgaW5kZXg6IENJUkNMRV9DSVJDVU1GRVJFTkNFX0lOREVYLFxuICAgICAgc2VnbWVudDogW2Nvb3JkaW5hdGVzLCBjb29yZGluYXRlc11cbiAgICB9KTtcbiAgICB2YXIgZmVhdHVyZVNlZ21lbnRzID0gW2NlbnRlclNlZ21lbnREYXRhLCBjaXJjdW1mZXJlbmNlU2VnbWVudERhdGFdO1xuICAgIGNlbnRlclNlZ21lbnREYXRhLmZlYXR1cmVTZWdtZW50cyA9IGNpcmN1bWZlcmVuY2VTZWdtZW50RGF0YS5mZWF0dXJlU2VnbWVudHMgPSBmZWF0dXJlU2VnbWVudHM7XG4gICAgdGhpcy5yQnVzaF8uaW5zZXJ0KGNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGUoY29vcmRpbmF0ZXMpLCBjZW50ZXJTZWdtZW50RGF0YSk7XG4gICAgdGhpcy5yQnVzaF8uaW5zZXJ0KGdlb21ldHJ5LmdldEV4dGVudCgpLCBjaXJjdW1mZXJlbmNlU2VnbWVudERhdGEpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0ZlYXR1cmV9IGZlYXR1cmUgRmVhdHVyZVxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vR2VvbWV0cnlDb2xsZWN0aW9uLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgTW9kaWZ5LnByb3RvdHlwZS53cml0ZUdlb21ldHJ5Q29sbGVjdGlvbkdlb21ldHJ5XyA9IGZ1bmN0aW9uIHdyaXRlR2VvbWV0cnlDb2xsZWN0aW9uR2VvbWV0cnlfIChmZWF0dXJlLCBnZW9tZXRyeSkge1xuICAgIHZhciBnZW9tZXRyaWVzID0gZ2VvbWV0cnkuZ2V0R2VvbWV0cmllc0FycmF5KCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBnZW9tZXRyaWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICB0aGlzLlNFR01FTlRfV1JJVEVSU19bZ2VvbWV0cmllc1tpXS5nZXRUeXBlKCldLmNhbGwodGhpcywgZmVhdHVyZSwgZ2VvbWV0cmllc1tpXSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAqIEByZXR1cm4ge0ZlYXR1cmV9IFZlcnRleCBmZWF0dXJlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgTW9kaWZ5LnByb3RvdHlwZS5jcmVhdGVPclVwZGF0ZVZlcnRleEZlYXR1cmVfID0gZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVWZXJ0ZXhGZWF0dXJlXyAoY29vcmRpbmF0ZXMpIHtcbiAgICB2YXIgdmVydGV4RmVhdHVyZSA9IHRoaXMudmVydGV4RmVhdHVyZV87XG4gICAgaWYgKCF2ZXJ0ZXhGZWF0dXJlKSB7XG4gICAgICB2ZXJ0ZXhGZWF0dXJlID0gbmV3IEZlYXR1cmUobmV3IFBvaW50KGNvb3JkaW5hdGVzKSk7XG4gICAgICB0aGlzLnZlcnRleEZlYXR1cmVfID0gdmVydGV4RmVhdHVyZTtcbiAgICAgIC8qKiBAdHlwZSB7VmVjdG9yU291cmNlfSAqLyAodGhpcy5vdmVybGF5Xy5nZXRTb3VyY2UoKSkuYWRkRmVhdHVyZSh2ZXJ0ZXhGZWF0dXJlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGdlb21ldHJ5ID0gLyoqIEB0eXBlIHtQb2ludH0gKi8gKHZlcnRleEZlYXR1cmUuZ2V0R2VvbWV0cnkoKSk7XG4gICAgICBnZW9tZXRyeS5zZXRDb29yZGluYXRlcyhjb29yZGluYXRlcyk7XG4gICAgfVxuICAgIHJldHVybiB2ZXJ0ZXhGZWF0dXJlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudCBtYXAgYnJvd3NlciBldmVudH0gYW5kIG1heSBtb2RpZnkgdGhlIGdlb21ldHJ5LlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIE1vZGlmeS5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVFdmVudCAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKCEoLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyUG9pbnRlckV2ZW50LmpzXCIpLmRlZmF1bHR9ICovIChtYXBCcm93c2VyRXZlbnQpLnBvaW50ZXJFdmVudCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB0aGlzLmxhc3RQb2ludGVyRXZlbnRfID0gbWFwQnJvd3NlckV2ZW50O1xuXG4gICAgdmFyIGhhbmRsZWQ7XG4gICAgaWYgKCFtYXBCcm93c2VyRXZlbnQubWFwLmdldFZpZXcoKS5nZXRJbnRlcmFjdGluZygpICYmXG4gICAgICAgIG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUk1PVkUgJiZcbiAgICAgICAgIXRoaXMuaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSkge1xuICAgICAgdGhpcy5oYW5kbGVQb2ludGVyTW92ZV8obWFwQnJvd3NlckV2ZW50KTtcbiAgICB9XG4gICAgaWYgKHRoaXMudmVydGV4RmVhdHVyZV8gJiYgdGhpcy5kZWxldGVDb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSAhPSBNYXBCcm93c2VyRXZlbnRUeXBlLlNJTkdMRUNMSUNLIHx8ICF0aGlzLmlnbm9yZU5leHRTaW5nbGVDbGlja18pIHtcbiAgICAgICAgaGFuZGxlZCA9IHRoaXMucmVtb3ZlUG9pbnQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGhhbmRsZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlNJTkdMRUNMSUNLKSB7XG4gICAgICB0aGlzLmlnbm9yZU5leHRTaW5nbGVDbGlja18gPSBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVFdmVudC5jYWxsKHRoaXMsIG1hcEJyb3dzZXJFdmVudCkgJiYgIWhhbmRsZWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBNb2RpZnkucHJvdG90eXBlLmhhbmRsZURyYWdFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZURyYWdFdmVudCAoZXZ0KSB7XG4gICAgdGhpcy5pZ25vcmVOZXh0U2luZ2xlQ2xpY2tfID0gZmFsc2U7XG4gICAgdGhpcy53aWxsTW9kaWZ5RmVhdHVyZXNfKGV2dCk7XG5cbiAgICB2YXIgdmVydGV4ID0gZXZ0LmNvb3JkaW5hdGU7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5kcmFnU2VnbWVudHNfLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIHZhciBkcmFnU2VnbWVudCA9IHRoaXMuZHJhZ1NlZ21lbnRzX1tpXTtcbiAgICAgIHZhciBzZWdtZW50RGF0YSA9IGRyYWdTZWdtZW50WzBdO1xuICAgICAgdmFyIGRlcHRoID0gc2VnbWVudERhdGEuZGVwdGg7XG4gICAgICB2YXIgZ2VvbWV0cnkgPSBzZWdtZW50RGF0YS5nZW9tZXRyeTtcbiAgICAgIHZhciBjb29yZGluYXRlcyA9ICh2b2lkIDApO1xuICAgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50RGF0YS5zZWdtZW50O1xuICAgICAgdmFyIGluZGV4ID0gZHJhZ1NlZ21lbnRbMV07XG5cbiAgICAgIHdoaWxlICh2ZXJ0ZXgubGVuZ3RoIDwgZ2VvbWV0cnkuZ2V0U3RyaWRlKCkpIHtcbiAgICAgICAgdmVydGV4LnB1c2goc2VnbWVudFtpbmRleF1bdmVydGV4Lmxlbmd0aF0pO1xuICAgICAgfVxuXG4gICAgICBzd2l0Y2ggKGdlb21ldHJ5LmdldFR5cGUoKSkge1xuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5QT0lOVDpcbiAgICAgICAgICBjb29yZGluYXRlcyA9IHZlcnRleDtcbiAgICAgICAgICBzZWdtZW50WzBdID0gc2VnbWVudFsxXSA9IHZlcnRleDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfUE9JTlQ6XG4gICAgICAgICAgY29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgICAgIGNvb3JkaW5hdGVzW3NlZ21lbnREYXRhLmluZGV4XSA9IHZlcnRleDtcbiAgICAgICAgICBzZWdtZW50WzBdID0gc2VnbWVudFsxXSA9IHZlcnRleDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTElORV9TVFJJTkc6XG4gICAgICAgICAgY29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgICAgIGNvb3JkaW5hdGVzW3NlZ21lbnREYXRhLmluZGV4ICsgaW5kZXhdID0gdmVydGV4O1xuICAgICAgICAgIHNlZ21lbnRbaW5kZXhdID0gdmVydGV4O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5NVUxUSV9MSU5FX1NUUklORzpcbiAgICAgICAgICBjb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldENvb3JkaW5hdGVzKCk7XG4gICAgICAgICAgY29vcmRpbmF0ZXNbZGVwdGhbMF1dW3NlZ21lbnREYXRhLmluZGV4ICsgaW5kZXhdID0gdmVydGV4O1xuICAgICAgICAgIHNlZ21lbnRbaW5kZXhdID0gdmVydGV4O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5QT0xZR09OOlxuICAgICAgICAgIGNvb3JkaW5hdGVzID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgICBjb29yZGluYXRlc1tkZXB0aFswXV1bc2VnbWVudERhdGEuaW5kZXggKyBpbmRleF0gPSB2ZXJ0ZXg7XG4gICAgICAgICAgc2VnbWVudFtpbmRleF0gPSB2ZXJ0ZXg7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT046XG4gICAgICAgICAgY29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgICAgIGNvb3JkaW5hdGVzW2RlcHRoWzFdXVtkZXB0aFswXV1bc2VnbWVudERhdGEuaW5kZXggKyBpbmRleF0gPSB2ZXJ0ZXg7XG4gICAgICAgICAgc2VnbWVudFtpbmRleF0gPSB2ZXJ0ZXg7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkNJUkNMRTpcbiAgICAgICAgICBzZWdtZW50WzBdID0gc2VnbWVudFsxXSA9IHZlcnRleDtcbiAgICAgICAgICBpZiAoc2VnbWVudERhdGEuaW5kZXggPT09IENJUkNMRV9DRU5URVJfSU5ERVgpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdpbmdGZWF0dXJlXyA9IHRydWU7XG4gICAgICAgICAgICBnZW9tZXRyeS5zZXRDZW50ZXIodmVydGV4KTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdpbmdGZWF0dXJlXyA9IGZhbHNlO1xuICAgICAgICAgIH0gZWxzZSB7IC8vIFdlJ3JlIGRyYWdnaW5nIHRoZSBjaXJjbGUncyBjaXJjdW1mZXJlbmNlOlxuICAgICAgICAgICAgdGhpcy5jaGFuZ2luZ0ZlYXR1cmVfID0gdHJ1ZTtcbiAgICAgICAgICAgIGdlb21ldHJ5LnNldFJhZGl1cyhjb29yZGluYXRlRGlzdGFuY2UoZ2VvbWV0cnkuZ2V0Q2VudGVyKCksIHZlcnRleCkpO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2luZ0ZlYXR1cmVfID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIC8vIHBhc3NcbiAgICAgIH1cblxuICAgICAgaWYgKGNvb3JkaW5hdGVzKSB7XG4gICAgICAgIHRoaXMuc2V0R2VvbWV0cnlDb29yZGluYXRlc18oZ2VvbWV0cnksIGNvb3JkaW5hdGVzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5jcmVhdGVPclVwZGF0ZVZlcnRleEZlYXR1cmVfKHZlcnRleCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBNb2RpZnkucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIGhhbmRsZURvd25FdmVudCAoZXZ0KSB7XG4gICAgaWYgKCF0aGlzLmNvbmRpdGlvbl8oZXZ0KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLmhhbmRsZVBvaW50ZXJBdFBpeGVsXyhldnQucGl4ZWwsIGV2dC5tYXApO1xuICAgIHZhciBwaXhlbENvb3JkaW5hdGUgPSBldnQubWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWwoZXZ0LnBpeGVsKTtcbiAgICB0aGlzLmRyYWdTZWdtZW50c18ubGVuZ3RoID0gMDtcbiAgICB0aGlzLm1vZGlmaWVkXyA9IGZhbHNlO1xuICAgIHZhciB2ZXJ0ZXhGZWF0dXJlID0gdGhpcy52ZXJ0ZXhGZWF0dXJlXztcbiAgICBpZiAodmVydGV4RmVhdHVyZSkge1xuICAgICAgdmFyIGluc2VydFZlcnRpY2VzID0gW107XG4gICAgICB2YXIgZ2VvbWV0cnkgPSAvKiogQHR5cGUge1BvaW50fSAqLyAodmVydGV4RmVhdHVyZS5nZXRHZW9tZXRyeSgpKTtcbiAgICAgIHZhciB2ZXJ0ZXggPSBnZW9tZXRyeS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgdmFyIHZlcnRleEV4dGVudCA9IGJvdW5kaW5nRXh0ZW50KFt2ZXJ0ZXhdKTtcbiAgICAgIHZhciBzZWdtZW50RGF0YU1hdGNoZXMgPSB0aGlzLnJCdXNoXy5nZXRJbkV4dGVudCh2ZXJ0ZXhFeHRlbnQpO1xuICAgICAgdmFyIGNvbXBvbmVudFNlZ21lbnRzID0ge307XG4gICAgICBzZWdtZW50RGF0YU1hdGNoZXMuc29ydChjb21wYXJlSW5kZXhlcyk7XG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBzZWdtZW50RGF0YU1hdGNoZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgc2VnbWVudERhdGFNYXRjaCA9IHNlZ21lbnREYXRhTWF0Y2hlc1tpXTtcbiAgICAgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50RGF0YU1hdGNoLnNlZ21lbnQ7XG4gICAgICAgIHZhciB1aWQgPSBnZXRVaWQoc2VnbWVudERhdGFNYXRjaC5mZWF0dXJlKTtcbiAgICAgICAgdmFyIGRlcHRoID0gc2VnbWVudERhdGFNYXRjaC5kZXB0aDtcbiAgICAgICAgaWYgKGRlcHRoKSB7XG4gICAgICAgICAgdWlkICs9ICctJyArIGRlcHRoLmpvaW4oJy0nKTsgLy8gc2VwYXJhdGUgZmVhdHVyZSBjb21wb25lbnRzXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjb21wb25lbnRTZWdtZW50c1t1aWRdKSB7XG4gICAgICAgICAgY29tcG9uZW50U2VnbWVudHNbdWlkXSA9IG5ldyBBcnJheSgyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VnbWVudERhdGFNYXRjaC5nZW9tZXRyeS5nZXRUeXBlKCkgPT09IEdlb21ldHJ5VHlwZS5DSVJDTEUgJiZcbiAgICAgICAgc2VnbWVudERhdGFNYXRjaC5pbmRleCA9PT0gQ0lSQ0xFX0NJUkNVTUZFUkVOQ0VfSU5ERVgpIHtcblxuICAgICAgICAgIHZhciBjbG9zZXN0VmVydGV4ID0gY2xvc2VzdE9uU2VnbWVudERhdGEocGl4ZWxDb29yZGluYXRlLCBzZWdtZW50RGF0YU1hdGNoKTtcbiAgICAgICAgICBpZiAoY29vcmRpbmF0ZXNFcXVhbChjbG9zZXN0VmVydGV4LCB2ZXJ0ZXgpICYmICFjb21wb25lbnRTZWdtZW50c1t1aWRdWzBdKSB7XG4gICAgICAgICAgICB0aGlzLmRyYWdTZWdtZW50c18ucHVzaChbc2VnbWVudERhdGFNYXRjaCwgMF0pO1xuICAgICAgICAgICAgY29tcG9uZW50U2VnbWVudHNbdWlkXVswXSA9IHNlZ21lbnREYXRhTWF0Y2g7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGNvb3JkaW5hdGVzRXF1YWwoc2VnbWVudFswXSwgdmVydGV4KSAmJlxuICAgICAgICAgICAgIWNvbXBvbmVudFNlZ21lbnRzW3VpZF1bMF0pIHtcbiAgICAgICAgICB0aGlzLmRyYWdTZWdtZW50c18ucHVzaChbc2VnbWVudERhdGFNYXRjaCwgMF0pO1xuICAgICAgICAgIGNvbXBvbmVudFNlZ21lbnRzW3VpZF1bMF0gPSBzZWdtZW50RGF0YU1hdGNoO1xuICAgICAgICB9IGVsc2UgaWYgKGNvb3JkaW5hdGVzRXF1YWwoc2VnbWVudFsxXSwgdmVydGV4KSAmJlxuICAgICAgICAgICAgIWNvbXBvbmVudFNlZ21lbnRzW3VpZF1bMV0pIHtcblxuICAgICAgICAgIC8vIHByZXZlbnQgZHJhZ2dpbmcgY2xvc2VkIGxpbmVzdHJpbmdzIGJ5IHRoZSBjb25uZWN0aW5nIG5vZGVcbiAgICAgICAgICBpZiAoKHNlZ21lbnREYXRhTWF0Y2guZ2VvbWV0cnkuZ2V0VHlwZSgpID09PVxuICAgICAgICAgICAgICBHZW9tZXRyeVR5cGUuTElORV9TVFJJTkcgfHxcbiAgICAgICAgICAgICAgc2VnbWVudERhdGFNYXRjaC5nZW9tZXRyeS5nZXRUeXBlKCkgPT09XG4gICAgICAgICAgICAgIEdlb21ldHJ5VHlwZS5NVUxUSV9MSU5FX1NUUklORykgJiZcbiAgICAgICAgICAgICAgY29tcG9uZW50U2VnbWVudHNbdWlkXVswXSAmJlxuICAgICAgICAgICAgICBjb21wb25lbnRTZWdtZW50c1t1aWRdWzBdLmluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLmRyYWdTZWdtZW50c18ucHVzaChbc2VnbWVudERhdGFNYXRjaCwgMV0pO1xuICAgICAgICAgIGNvbXBvbmVudFNlZ21lbnRzW3VpZF1bMV0gPSBzZWdtZW50RGF0YU1hdGNoO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaW5zZXJ0VmVydGV4Q29uZGl0aW9uXyhldnQpICYmIGdldFVpZChzZWdtZW50KSBpbiB0aGlzLnZlcnRleFNlZ21lbnRzXyAmJlxuICAgICAgICAgICAgKCFjb21wb25lbnRTZWdtZW50c1t1aWRdWzBdICYmICFjb21wb25lbnRTZWdtZW50c1t1aWRdWzFdKSkge1xuICAgICAgICAgIGluc2VydFZlcnRpY2VzLnB1c2goW3NlZ21lbnREYXRhTWF0Y2gsIHZlcnRleF0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaW5zZXJ0VmVydGljZXMubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMud2lsbE1vZGlmeUZlYXR1cmVzXyhldnQpO1xuICAgICAgfVxuICAgICAgZm9yICh2YXIgaiA9IGluc2VydFZlcnRpY2VzLmxlbmd0aCAtIDE7IGogPj0gMDsgLS1qKSB7XG4gICAgICAgIHRoaXMuaW5zZXJ0VmVydGV4Xy5hcHBseSh0aGlzLCBpbnNlcnRWZXJ0aWNlc1tqXSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAhIXRoaXMudmVydGV4RmVhdHVyZV87XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBNb2RpZnkucHJvdG90eXBlLmhhbmRsZVVwRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVVcEV2ZW50IChldnQpIHtcbiAgICBmb3IgKHZhciBpID0gdGhpcy5kcmFnU2VnbWVudHNfLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICB2YXIgc2VnbWVudERhdGEgPSB0aGlzLmRyYWdTZWdtZW50c19baV1bMF07XG4gICAgICB2YXIgZ2VvbWV0cnkgPSBzZWdtZW50RGF0YS5nZW9tZXRyeTtcbiAgICAgIGlmIChnZW9tZXRyeS5nZXRUeXBlKCkgPT09IEdlb21ldHJ5VHlwZS5DSVJDTEUpIHtcbiAgICAgICAgLy8gVXBkYXRlIGEgY2lyY2xlIG9iamVjdCBpbiB0aGUgUiogYnVzaDpcbiAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gZ2VvbWV0cnkuZ2V0Q2VudGVyKCk7XG4gICAgICAgIHZhciBjZW50ZXJTZWdtZW50RGF0YSA9IHNlZ21lbnREYXRhLmZlYXR1cmVTZWdtZW50c1swXTtcbiAgICAgICAgdmFyIGNpcmN1bWZlcmVuY2VTZWdtZW50RGF0YSA9IHNlZ21lbnREYXRhLmZlYXR1cmVTZWdtZW50c1sxXTtcbiAgICAgICAgY2VudGVyU2VnbWVudERhdGEuc2VnbWVudFswXSA9IGNlbnRlclNlZ21lbnREYXRhLnNlZ21lbnRbMV0gPSBjb29yZGluYXRlcztcbiAgICAgICAgY2lyY3VtZmVyZW5jZVNlZ21lbnREYXRhLnNlZ21lbnRbMF0gPSBjaXJjdW1mZXJlbmNlU2VnbWVudERhdGEuc2VnbWVudFsxXSA9IGNvb3JkaW5hdGVzO1xuICAgICAgICB0aGlzLnJCdXNoXy51cGRhdGUoY3JlYXRlT3JVcGRhdGVGcm9tQ29vcmRpbmF0ZShjb29yZGluYXRlcyksIGNlbnRlclNlZ21lbnREYXRhKTtcbiAgICAgICAgdGhpcy5yQnVzaF8udXBkYXRlKGdlb21ldHJ5LmdldEV4dGVudCgpLCBjaXJjdW1mZXJlbmNlU2VnbWVudERhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yQnVzaF8udXBkYXRlKGJvdW5kaW5nRXh0ZW50KHNlZ21lbnREYXRhLnNlZ21lbnQpLCBzZWdtZW50RGF0YSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLm1vZGlmaWVkXykge1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBNb2RpZnlFdmVudChNb2RpZnlFdmVudFR5cGUuTU9ESUZZRU5ELCB0aGlzLmZlYXR1cmVzXywgZXZ0KSk7XG4gICAgICB0aGlzLm1vZGlmaWVkXyA9IGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IGV2dCBFdmVudC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIE1vZGlmeS5wcm90b3R5cGUuaGFuZGxlUG9pbnRlck1vdmVfID0gZnVuY3Rpb24gaGFuZGxlUG9pbnRlck1vdmVfIChldnQpIHtcbiAgICB0aGlzLmxhc3RQaXhlbF8gPSBldnQucGl4ZWw7XG4gICAgdGhpcy5oYW5kbGVQb2ludGVyQXRQaXhlbF8oZXZ0LnBpeGVsLCBldnQubWFwKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWxcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIE1vZGlmeS5wcm90b3R5cGUuaGFuZGxlUG9pbnRlckF0UGl4ZWxfID0gZnVuY3Rpb24gaGFuZGxlUG9pbnRlckF0UGl4ZWxfIChwaXhlbCwgbWFwKSB7XG4gICAgdmFyIHBpeGVsQ29vcmRpbmF0ZSA9IG1hcC5nZXRDb29yZGluYXRlRnJvbVBpeGVsKHBpeGVsKTtcbiAgICB2YXIgc29ydEJ5RGlzdGFuY2UgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgICByZXR1cm4gcG9pbnREaXN0YW5jZVRvU2VnbWVudERhdGFTcXVhcmVkKHBpeGVsQ29vcmRpbmF0ZSwgYSkgLVxuICAgICAgICAgIHBvaW50RGlzdGFuY2VUb1NlZ21lbnREYXRhU3F1YXJlZChwaXhlbENvb3JkaW5hdGUsIGIpO1xuICAgIH07XG5cbiAgICB2YXIgYm94ID0gYnVmZmVyKGNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGUocGl4ZWxDb29yZGluYXRlKSxcbiAgICAgIG1hcC5nZXRWaWV3KCkuZ2V0UmVzb2x1dGlvbigpICogdGhpcy5waXhlbFRvbGVyYW5jZV8pO1xuXG4gICAgdmFyIHJCdXNoID0gdGhpcy5yQnVzaF87XG4gICAgdmFyIG5vZGVzID0gckJ1c2guZ2V0SW5FeHRlbnQoYm94KTtcbiAgICBpZiAobm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgbm9kZXMuc29ydChzb3J0QnlEaXN0YW5jZSk7XG4gICAgICB2YXIgbm9kZSA9IG5vZGVzWzBdO1xuICAgICAgdmFyIGNsb3Nlc3RTZWdtZW50ID0gbm9kZS5zZWdtZW50O1xuICAgICAgdmFyIHZlcnRleCA9IGNsb3Nlc3RPblNlZ21lbnREYXRhKHBpeGVsQ29vcmRpbmF0ZSwgbm9kZSk7XG4gICAgICB2YXIgdmVydGV4UGl4ZWwgPSBtYXAuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZSh2ZXJ0ZXgpO1xuICAgICAgdmFyIGRpc3QgPSBjb29yZGluYXRlRGlzdGFuY2UocGl4ZWwsIHZlcnRleFBpeGVsKTtcbiAgICAgIGlmIChkaXN0IDw9IHRoaXMucGl4ZWxUb2xlcmFuY2VfKSB7XG4gICAgICAgIC8qKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgYm9vbGVhbj59ICovXG4gICAgICAgIHZhciB2ZXJ0ZXhTZWdtZW50cyA9IHt9O1xuXG4gICAgICAgIGlmIChub2RlLmdlb21ldHJ5LmdldFR5cGUoKSA9PT0gR2VvbWV0cnlUeXBlLkNJUkNMRSAmJlxuICAgICAgICBub2RlLmluZGV4ID09PSBDSVJDTEVfQ0lSQ1VNRkVSRU5DRV9JTkRFWCkge1xuXG4gICAgICAgICAgdGhpcy5zbmFwcGVkVG9WZXJ0ZXhfID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmNyZWF0ZU9yVXBkYXRlVmVydGV4RmVhdHVyZV8odmVydGV4KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgcGl4ZWwxID0gbWFwLmdldFBpeGVsRnJvbUNvb3JkaW5hdGUoY2xvc2VzdFNlZ21lbnRbMF0pO1xuICAgICAgICAgIHZhciBwaXhlbDIgPSBtYXAuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZShjbG9zZXN0U2VnbWVudFsxXSk7XG4gICAgICAgICAgdmFyIHNxdWFyZWREaXN0MSA9IHNxdWFyZWRDb29yZGluYXRlRGlzdGFuY2UodmVydGV4UGl4ZWwsIHBpeGVsMSk7XG4gICAgICAgICAgdmFyIHNxdWFyZWREaXN0MiA9IHNxdWFyZWRDb29yZGluYXRlRGlzdGFuY2UodmVydGV4UGl4ZWwsIHBpeGVsMik7XG4gICAgICAgICAgZGlzdCA9IE1hdGguc3FydChNYXRoLm1pbihzcXVhcmVkRGlzdDEsIHNxdWFyZWREaXN0MikpO1xuICAgICAgICAgIHRoaXMuc25hcHBlZFRvVmVydGV4XyA9IGRpc3QgPD0gdGhpcy5waXhlbFRvbGVyYW5jZV87XG4gICAgICAgICAgaWYgKHRoaXMuc25hcHBlZFRvVmVydGV4Xykge1xuICAgICAgICAgICAgdmVydGV4ID0gc3F1YXJlZERpc3QxID4gc3F1YXJlZERpc3QyID8gY2xvc2VzdFNlZ21lbnRbMV0gOiBjbG9zZXN0U2VnbWVudFswXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5jcmVhdGVPclVwZGF0ZVZlcnRleEZlYXR1cmVfKHZlcnRleCk7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDEsIGlpID0gbm9kZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIHNlZ21lbnQgPSBub2Rlc1tpXS5zZWdtZW50O1xuICAgICAgICAgICAgaWYgKChjb29yZGluYXRlc0VxdWFsKGNsb3Nlc3RTZWdtZW50WzBdLCBzZWdtZW50WzBdKSAmJlxuICAgICAgICAgICAgICAgIGNvb3JkaW5hdGVzRXF1YWwoY2xvc2VzdFNlZ21lbnRbMV0sIHNlZ21lbnRbMV0pIHx8XG4gICAgICAgICAgICAgICAgKGNvb3JkaW5hdGVzRXF1YWwoY2xvc2VzdFNlZ21lbnRbMF0sIHNlZ21lbnRbMV0pICYmXG4gICAgICAgICAgICAgICAgY29vcmRpbmF0ZXNFcXVhbChjbG9zZXN0U2VnbWVudFsxXSwgc2VnbWVudFswXSkpKSkge1xuICAgICAgICAgICAgICB2ZXJ0ZXhTZWdtZW50c1tnZXRVaWQoc2VnbWVudCldID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZlcnRleFNlZ21lbnRzW2dldFVpZChjbG9zZXN0U2VnbWVudCldID0gdHJ1ZTtcbiAgICAgICAgdGhpcy52ZXJ0ZXhTZWdtZW50c18gPSB2ZXJ0ZXhTZWdtZW50cztcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy52ZXJ0ZXhGZWF0dXJlXykge1xuICAgICAgLyoqIEB0eXBlIHtWZWN0b3JTb3VyY2V9ICovICh0aGlzLm92ZXJsYXlfLmdldFNvdXJjZSgpKS5yZW1vdmVGZWF0dXJlKHRoaXMudmVydGV4RmVhdHVyZV8pO1xuICAgICAgdGhpcy52ZXJ0ZXhGZWF0dXJlXyA9IG51bGw7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1NlZ21lbnREYXRhfSBzZWdtZW50RGF0YSBTZWdtZW50IGRhdGEuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSB2ZXJ0ZXggVmVydGV4LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgTW9kaWZ5LnByb3RvdHlwZS5pbnNlcnRWZXJ0ZXhfID0gZnVuY3Rpb24gaW5zZXJ0VmVydGV4XyAoc2VnbWVudERhdGEsIHZlcnRleCkge1xuICAgIHZhciBzZWdtZW50ID0gc2VnbWVudERhdGEuc2VnbWVudDtcbiAgICB2YXIgZmVhdHVyZSA9IHNlZ21lbnREYXRhLmZlYXR1cmU7XG4gICAgdmFyIGdlb21ldHJ5ID0gc2VnbWVudERhdGEuZ2VvbWV0cnk7XG4gICAgdmFyIGRlcHRoID0gc2VnbWVudERhdGEuZGVwdGg7XG4gICAgdmFyIGluZGV4ID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChzZWdtZW50RGF0YS5pbmRleCk7XG4gICAgdmFyIGNvb3JkaW5hdGVzO1xuXG4gICAgd2hpbGUgKHZlcnRleC5sZW5ndGggPCBnZW9tZXRyeS5nZXRTdHJpZGUoKSkge1xuICAgICAgdmVydGV4LnB1c2goMCk7XG4gICAgfVxuXG4gICAgc3dpdGNoIChnZW9tZXRyeS5nZXRUeXBlKCkpIHtcbiAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HOlxuICAgICAgICBjb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldENvb3JkaW5hdGVzKCk7XG4gICAgICAgIGNvb3JkaW5hdGVzW2RlcHRoWzBdXS5zcGxpY2UoaW5kZXggKyAxLCAwLCB2ZXJ0ZXgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLlBPTFlHT046XG4gICAgICAgIGNvb3JkaW5hdGVzID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgY29vcmRpbmF0ZXNbZGVwdGhbMF1dLnNwbGljZShpbmRleCArIDEsIDAsIHZlcnRleCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfUE9MWUdPTjpcbiAgICAgICAgY29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgICBjb29yZGluYXRlc1tkZXB0aFsxXV1bZGVwdGhbMF1dLnNwbGljZShpbmRleCArIDEsIDAsIHZlcnRleCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTElORV9TVFJJTkc6XG4gICAgICAgIGNvb3JkaW5hdGVzID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgY29vcmRpbmF0ZXMuc3BsaWNlKGluZGV4ICsgMSwgMCwgdmVydGV4KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zZXRHZW9tZXRyeUNvb3JkaW5hdGVzXyhnZW9tZXRyeSwgY29vcmRpbmF0ZXMpO1xuICAgIHZhciByVHJlZSA9IHRoaXMuckJ1c2hfO1xuICAgIHJUcmVlLnJlbW92ZShzZWdtZW50RGF0YSk7XG4gICAgdGhpcy51cGRhdGVTZWdtZW50SW5kaWNlc18oZ2VvbWV0cnksIGluZGV4LCBkZXB0aCwgMSk7XG4gICAgdmFyIG5ld1NlZ21lbnREYXRhID0gLyoqIEB0eXBlIHtTZWdtZW50RGF0YX0gKi8gKHtcbiAgICAgIHNlZ21lbnQ6IFtzZWdtZW50WzBdLCB2ZXJ0ZXhdLFxuICAgICAgZmVhdHVyZTogZmVhdHVyZSxcbiAgICAgIGdlb21ldHJ5OiBnZW9tZXRyeSxcbiAgICAgIGRlcHRoOiBkZXB0aCxcbiAgICAgIGluZGV4OiBpbmRleFxuICAgIH0pO1xuICAgIHJUcmVlLmluc2VydChib3VuZGluZ0V4dGVudChuZXdTZWdtZW50RGF0YS5zZWdtZW50KSxcbiAgICAgIG5ld1NlZ21lbnREYXRhKTtcbiAgICB0aGlzLmRyYWdTZWdtZW50c18ucHVzaChbbmV3U2VnbWVudERhdGEsIDFdKTtcblxuICAgIHZhciBuZXdTZWdtZW50RGF0YTIgPSAvKiogQHR5cGUge1NlZ21lbnREYXRhfSAqLyAoe1xuICAgICAgc2VnbWVudDogW3ZlcnRleCwgc2VnbWVudFsxXV0sXG4gICAgICBmZWF0dXJlOiBmZWF0dXJlLFxuICAgICAgZ2VvbWV0cnk6IGdlb21ldHJ5LFxuICAgICAgZGVwdGg6IGRlcHRoLFxuICAgICAgaW5kZXg6IGluZGV4ICsgMVxuICAgIH0pO1xuICAgIHJUcmVlLmluc2VydChib3VuZGluZ0V4dGVudChuZXdTZWdtZW50RGF0YTIuc2VnbWVudCksIG5ld1NlZ21lbnREYXRhMik7XG4gICAgdGhpcy5kcmFnU2VnbWVudHNfLnB1c2goW25ld1NlZ21lbnREYXRhMiwgMF0pO1xuICAgIHRoaXMuaWdub3JlTmV4dFNpbmdsZUNsaWNrXyA9IHRydWU7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgdGhlIHZlcnRleCBjdXJyZW50bHkgYmVpbmcgcG9pbnRlZC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSB3aGVuIGEgdmVydGV4IHdhcyByZW1vdmVkLlxuICAgKiBAYXBpXG4gICAqL1xuICBNb2RpZnkucHJvdG90eXBlLnJlbW92ZVBvaW50ID0gZnVuY3Rpb24gcmVtb3ZlUG9pbnQgKCkge1xuICAgIGlmICh0aGlzLmxhc3RQb2ludGVyRXZlbnRfICYmIHRoaXMubGFzdFBvaW50ZXJFdmVudF8udHlwZSAhPSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJEUkFHKSB7XG4gICAgICB2YXIgZXZ0ID0gdGhpcy5sYXN0UG9pbnRlckV2ZW50XztcbiAgICAgIHRoaXMud2lsbE1vZGlmeUZlYXR1cmVzXyhldnQpO1xuICAgICAgdGhpcy5yZW1vdmVWZXJ0ZXhfKCk7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE1vZGlmeUV2ZW50KE1vZGlmeUV2ZW50VHlwZS5NT0RJRllFTkQsIHRoaXMuZmVhdHVyZXNfLCBldnQpKTtcbiAgICAgIHRoaXMubW9kaWZpZWRfID0gZmFsc2U7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgdmVydGV4IGZyb20gYWxsIG1hdGNoaW5nIGZlYXR1cmVzLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIHdoZW4gYSB2ZXJ0ZXggd2FzIHJlbW92ZWQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBNb2RpZnkucHJvdG90eXBlLnJlbW92ZVZlcnRleF8gPSBmdW5jdGlvbiByZW1vdmVWZXJ0ZXhfICgpIHtcbiAgICB2YXIgZHJhZ1NlZ21lbnRzID0gdGhpcy5kcmFnU2VnbWVudHNfO1xuICAgIHZhciBzZWdtZW50c0J5RmVhdHVyZSA9IHt9O1xuICAgIHZhciBkZWxldGVkID0gZmFsc2U7XG4gICAgdmFyIGNvbXBvbmVudCwgY29vcmRpbmF0ZXMsIGRyYWdTZWdtZW50LCBnZW9tZXRyeSwgaSwgaW5kZXgsIGxlZnQ7XG4gICAgdmFyIG5ld0luZGV4LCByaWdodCwgc2VnbWVudERhdGEsIHVpZDtcbiAgICBmb3IgKGkgPSBkcmFnU2VnbWVudHMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgIGRyYWdTZWdtZW50ID0gZHJhZ1NlZ21lbnRzW2ldO1xuICAgICAgc2VnbWVudERhdGEgPSBkcmFnU2VnbWVudFswXTtcbiAgICAgIHVpZCA9IGdldFVpZChzZWdtZW50RGF0YS5mZWF0dXJlKTtcbiAgICAgIGlmIChzZWdtZW50RGF0YS5kZXB0aCkge1xuICAgICAgICAvLyBzZXBhcmF0ZSBmZWF0dXJlIGNvbXBvbmVudHNcbiAgICAgICAgdWlkICs9ICctJyArIHNlZ21lbnREYXRhLmRlcHRoLmpvaW4oJy0nKTtcbiAgICAgIH1cbiAgICAgIGlmICghKHVpZCBpbiBzZWdtZW50c0J5RmVhdHVyZSkpIHtcbiAgICAgICAgc2VnbWVudHNCeUZlYXR1cmVbdWlkXSA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKGRyYWdTZWdtZW50WzFdID09PSAwKSB7XG4gICAgICAgIHNlZ21lbnRzQnlGZWF0dXJlW3VpZF0ucmlnaHQgPSBzZWdtZW50RGF0YTtcbiAgICAgICAgc2VnbWVudHNCeUZlYXR1cmVbdWlkXS5pbmRleCA9IHNlZ21lbnREYXRhLmluZGV4O1xuICAgICAgfSBlbHNlIGlmIChkcmFnU2VnbWVudFsxXSA9PSAxKSB7XG4gICAgICAgIHNlZ21lbnRzQnlGZWF0dXJlW3VpZF0ubGVmdCA9IHNlZ21lbnREYXRhO1xuICAgICAgICBzZWdtZW50c0J5RmVhdHVyZVt1aWRdLmluZGV4ID0gc2VnbWVudERhdGEuaW5kZXggKyAxO1xuICAgICAgfVxuXG4gICAgfVxuICAgIGZvciAodWlkIGluIHNlZ21lbnRzQnlGZWF0dXJlKSB7XG4gICAgICByaWdodCA9IHNlZ21lbnRzQnlGZWF0dXJlW3VpZF0ucmlnaHQ7XG4gICAgICBsZWZ0ID0gc2VnbWVudHNCeUZlYXR1cmVbdWlkXS5sZWZ0O1xuICAgICAgaW5kZXggPSBzZWdtZW50c0J5RmVhdHVyZVt1aWRdLmluZGV4O1xuICAgICAgbmV3SW5kZXggPSBpbmRleCAtIDE7XG4gICAgICBpZiAobGVmdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNlZ21lbnREYXRhID0gbGVmdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlZ21lbnREYXRhID0gcmlnaHQ7XG4gICAgICB9XG4gICAgICBpZiAobmV3SW5kZXggPCAwKSB7XG4gICAgICAgIG5ld0luZGV4ID0gMDtcbiAgICAgIH1cbiAgICAgIGdlb21ldHJ5ID0gc2VnbWVudERhdGEuZ2VvbWV0cnk7XG4gICAgICBjb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldENvb3JkaW5hdGVzKCk7XG4gICAgICBjb21wb25lbnQgPSBjb29yZGluYXRlcztcbiAgICAgIGRlbGV0ZWQgPSBmYWxzZTtcbiAgICAgIHN3aXRjaCAoZ2VvbWV0cnkuZ2V0VHlwZSgpKSB7XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HOlxuICAgICAgICAgIGlmIChjb29yZGluYXRlc1tzZWdtZW50RGF0YS5kZXB0aFswXV0ubGVuZ3RoID4gMikge1xuICAgICAgICAgICAgY29vcmRpbmF0ZXNbc2VnbWVudERhdGEuZGVwdGhbMF1dLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICBkZWxldGVkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HOlxuICAgICAgICAgIGlmIChjb29yZGluYXRlcy5sZW5ndGggPiAyKSB7XG4gICAgICAgICAgICBjb29yZGluYXRlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgZGVsZXRlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5NVUxUSV9QT0xZR09OOlxuICAgICAgICAgIGNvbXBvbmVudCA9IGNvbXBvbmVudFtzZWdtZW50RGF0YS5kZXB0aFsxXV07XG4gICAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5QT0xZR09OOlxuICAgICAgICAgIGNvbXBvbmVudCA9IGNvbXBvbmVudFtzZWdtZW50RGF0YS5kZXB0aFswXV07XG4gICAgICAgICAgaWYgKGNvbXBvbmVudC5sZW5ndGggPiA0KSB7XG4gICAgICAgICAgICBpZiAoaW5kZXggPT0gY29tcG9uZW50Lmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgaW5kZXggPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tcG9uZW50LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICBkZWxldGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgICAvLyBjbG9zZSB0aGUgcmluZyBhZ2FpblxuICAgICAgICAgICAgICBjb21wb25lbnQucG9wKCk7XG4gICAgICAgICAgICAgIGNvbXBvbmVudC5wdXNoKGNvbXBvbmVudFswXSk7XG4gICAgICAgICAgICAgIG5ld0luZGV4ID0gY29tcG9uZW50Lmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIC8vIHBhc3NcbiAgICAgIH1cblxuICAgICAgaWYgKGRlbGV0ZWQpIHtcbiAgICAgICAgdGhpcy5zZXRHZW9tZXRyeUNvb3JkaW5hdGVzXyhnZW9tZXRyeSwgY29vcmRpbmF0ZXMpO1xuICAgICAgICB2YXIgc2VnbWVudHMgPSBbXTtcbiAgICAgICAgaWYgKGxlZnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMuckJ1c2hfLnJlbW92ZShsZWZ0KTtcbiAgICAgICAgICBzZWdtZW50cy5wdXNoKGxlZnQuc2VnbWVudFswXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJpZ2h0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aGlzLnJCdXNoXy5yZW1vdmUocmlnaHQpO1xuICAgICAgICAgIHNlZ21lbnRzLnB1c2gocmlnaHQuc2VnbWVudFsxXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlZnQgIT09IHVuZGVmaW5lZCAmJiByaWdodCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdmFyIG5ld1NlZ21lbnREYXRhID0gLyoqIEB0eXBlIHtTZWdtZW50RGF0YX0gKi8gKHtcbiAgICAgICAgICAgIGRlcHRoOiBzZWdtZW50RGF0YS5kZXB0aCxcbiAgICAgICAgICAgIGZlYXR1cmU6IHNlZ21lbnREYXRhLmZlYXR1cmUsXG4gICAgICAgICAgICBnZW9tZXRyeTogc2VnbWVudERhdGEuZ2VvbWV0cnksXG4gICAgICAgICAgICBpbmRleDogbmV3SW5kZXgsXG4gICAgICAgICAgICBzZWdtZW50OiBzZWdtZW50c1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMuckJ1c2hfLmluc2VydChib3VuZGluZ0V4dGVudChuZXdTZWdtZW50RGF0YS5zZWdtZW50KSxcbiAgICAgICAgICAgIG5ld1NlZ21lbnREYXRhKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZVNlZ21lbnRJbmRpY2VzXyhnZW9tZXRyeSwgaW5kZXgsIHNlZ21lbnREYXRhLmRlcHRoLCAtMSk7XG4gICAgICAgIGlmICh0aGlzLnZlcnRleEZlYXR1cmVfKSB7XG4gICAgICAgICAgLyoqIEB0eXBlIHtWZWN0b3JTb3VyY2V9ICovICh0aGlzLm92ZXJsYXlfLmdldFNvdXJjZSgpKS5yZW1vdmVGZWF0dXJlKHRoaXMudmVydGV4RmVhdHVyZV8pO1xuICAgICAgICAgIHRoaXMudmVydGV4RmVhdHVyZV8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGRyYWdTZWdtZW50cy5sZW5ndGggPSAwO1xuICAgICAgfVxuXG4gICAgfVxuICAgIHJldHVybiBkZWxldGVkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gICAqIEBwYXJhbSB7QXJyYXl9IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgTW9kaWZ5LnByb3RvdHlwZS5zZXRHZW9tZXRyeUNvb3JkaW5hdGVzXyA9IGZ1bmN0aW9uIHNldEdlb21ldHJ5Q29vcmRpbmF0ZXNfIChnZW9tZXRyeSwgY29vcmRpbmF0ZXMpIHtcbiAgICB0aGlzLmNoYW5naW5nRmVhdHVyZV8gPSB0cnVlO1xuICAgIGdlb21ldHJ5LnNldENvb3JkaW5hdGVzKGNvb3JkaW5hdGVzKTtcbiAgICB0aGlzLmNoYW5naW5nRmVhdHVyZV8gPSBmYWxzZTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXguXG4gICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPnx1bmRlZmluZWR9IGRlcHRoIERlcHRoLlxuICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgRGVsdGEgKDEgb3IgLTEpLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgTW9kaWZ5LnByb3RvdHlwZS51cGRhdGVTZWdtZW50SW5kaWNlc18gPSBmdW5jdGlvbiB1cGRhdGVTZWdtZW50SW5kaWNlc18gKGdlb21ldHJ5LCBpbmRleCwgZGVwdGgsIGRlbHRhKSB7XG4gICAgdGhpcy5yQnVzaF8uZm9yRWFjaEluRXh0ZW50KGdlb21ldHJ5LmdldEV4dGVudCgpLCBmdW5jdGlvbihzZWdtZW50RGF0YU1hdGNoKSB7XG4gICAgICBpZiAoc2VnbWVudERhdGFNYXRjaC5nZW9tZXRyeSA9PT0gZ2VvbWV0cnkgJiZcbiAgICAgICAgICAoZGVwdGggPT09IHVuZGVmaW5lZCB8fCBzZWdtZW50RGF0YU1hdGNoLmRlcHRoID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICBlcXVhbHMoc2VnbWVudERhdGFNYXRjaC5kZXB0aCwgZGVwdGgpKSAmJlxuICAgICAgICAgIHNlZ21lbnREYXRhTWF0Y2guaW5kZXggPiBpbmRleCkge1xuICAgICAgICBzZWdtZW50RGF0YU1hdGNoLmluZGV4ICs9IGRlbHRhO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBNb2RpZnk7XG59KFBvaW50ZXJJbnRlcmFjdGlvbikpO1xuXG5cbi8qKlxuICogQHBhcmFtIHtTZWdtZW50RGF0YX0gYSBUaGUgZmlyc3Qgc2VnbWVudCBkYXRhLlxuICogQHBhcmFtIHtTZWdtZW50RGF0YX0gYiBUaGUgc2Vjb25kIHNlZ21lbnQgZGF0YS5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGRpZmZlcmVuY2UgaW4gaW5kZXhlcy5cbiAqL1xuZnVuY3Rpb24gY29tcGFyZUluZGV4ZXMoYSwgYikge1xuICByZXR1cm4gYS5pbmRleCAtIGIuaW5kZXg7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkaXN0YW5jZSBmcm9tIGEgcG9pbnQgdG8gYSBsaW5lIHNlZ21lbnQuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHBvaW50Q29vcmRpbmF0ZXMgVGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBwb2ludCBmcm9tXG4gKiAgICAgICAgd2hpY2ggdG8gY2FsY3VsYXRlIHRoZSBkaXN0YW5jZS5cbiAqIEBwYXJhbSB7U2VnbWVudERhdGF9IHNlZ21lbnREYXRhIFRoZSBvYmplY3QgZGVzY3JpYmluZyB0aGUgbGluZVxuICogICAgICAgIHNlZ21lbnQgd2UgYXJlIGNhbGN1bGF0aW5nIHRoZSBkaXN0YW5jZSB0by5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIHNxdWFyZSBvZiB0aGUgZGlzdGFuY2UgYmV0d2VlbiBhIHBvaW50IGFuZCBhIGxpbmUgc2VnbWVudC5cbiAqL1xuZnVuY3Rpb24gcG9pbnREaXN0YW5jZVRvU2VnbWVudERhdGFTcXVhcmVkKHBvaW50Q29vcmRpbmF0ZXMsIHNlZ21lbnREYXRhKSB7XG4gIHZhciBnZW9tZXRyeSA9IHNlZ21lbnREYXRhLmdlb21ldHJ5O1xuXG4gIGlmIChnZW9tZXRyeS5nZXRUeXBlKCkgPT09IEdlb21ldHJ5VHlwZS5DSVJDTEUpIHtcbiAgICB2YXIgY2lyY2xlR2VvbWV0cnkgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL2dlb20vQ2lyY2xlLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSk7XG5cbiAgICBpZiAoc2VnbWVudERhdGEuaW5kZXggPT09IENJUkNMRV9DSVJDVU1GRVJFTkNFX0lOREVYKSB7XG4gICAgICB2YXIgZGlzdGFuY2VUb0NlbnRlclNxdWFyZWQgPVxuICAgICAgICAgICAgc3F1YXJlZENvb3JkaW5hdGVEaXN0YW5jZShjaXJjbGVHZW9tZXRyeS5nZXRDZW50ZXIoKSwgcG9pbnRDb29yZGluYXRlcyk7XG4gICAgICB2YXIgZGlzdGFuY2VUb0NpcmN1bWZlcmVuY2UgPVxuICAgICAgICAgICAgTWF0aC5zcXJ0KGRpc3RhbmNlVG9DZW50ZXJTcXVhcmVkKSAtIGNpcmNsZUdlb21ldHJ5LmdldFJhZGl1cygpO1xuICAgICAgcmV0dXJuIGRpc3RhbmNlVG9DaXJjdW1mZXJlbmNlICogZGlzdGFuY2VUb0NpcmN1bWZlcmVuY2U7XG4gICAgfVxuICB9XG4gIHJldHVybiBzcXVhcmVkRGlzdGFuY2VUb1NlZ21lbnQocG9pbnRDb29yZGluYXRlcywgc2VnbWVudERhdGEuc2VnbWVudCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgcG9pbnQgY2xvc2VzdCB0byBhIGdpdmVuIGxpbmUgc2VnbWVudC5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gcG9pbnRDb29yZGluYXRlcyBUaGUgcG9pbnQgdG8gd2hpY2ggYSBjbG9zZXN0IHBvaW50XG4gKiAgICAgICAgc2hvdWxkIGJlIGZvdW5kLlxuICogQHBhcmFtIHtTZWdtZW50RGF0YX0gc2VnbWVudERhdGEgVGhlIG9iamVjdCBkZXNjcmliaW5nIHRoZSBsaW5lXG4gKiAgICAgICAgc2VnbWVudCB3aGljaCBzaG91bGQgY29udGFpbiB0aGUgY2xvc2VzdCBwb2ludC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVGhlIHBvaW50IGNsb3Nlc3QgdG8gdGhlIHNwZWNpZmllZCBsaW5lIHNlZ21lbnQuXG4gKi9cbmZ1bmN0aW9uIGNsb3Nlc3RPblNlZ21lbnREYXRhKHBvaW50Q29vcmRpbmF0ZXMsIHNlZ21lbnREYXRhKSB7XG4gIHZhciBnZW9tZXRyeSA9IHNlZ21lbnREYXRhLmdlb21ldHJ5O1xuXG4gIGlmIChnZW9tZXRyeS5nZXRUeXBlKCkgPT09IEdlb21ldHJ5VHlwZS5DSVJDTEUgJiZcbiAgc2VnbWVudERhdGEuaW5kZXggPT09IENJUkNMRV9DSVJDVU1GRVJFTkNFX0lOREVYKSB7XG4gICAgcmV0dXJuIGdlb21ldHJ5LmdldENsb3Nlc3RQb2ludChwb2ludENvb3JkaW5hdGVzKTtcbiAgfVxuICByZXR1cm4gY2xvc2VzdE9uU2VnbWVudChwb2ludENvb3JkaW5hdGVzLCBzZWdtZW50RGF0YS5zZWdtZW50KTtcbn1cblxuXG4vKipcbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLlN0eWxlRnVuY3Rpb259IFN0eWxlcy5cbiAqL1xuZnVuY3Rpb24gZ2V0RGVmYXVsdFN0eWxlRnVuY3Rpb24oKSB7XG4gIHZhciBzdHlsZSA9IGNyZWF0ZUVkaXRpbmdTdHlsZSgpO1xuICByZXR1cm4gZnVuY3Rpb24oZmVhdHVyZSwgcmVzb2x1dGlvbikge1xuICAgIHJldHVybiBzdHlsZVtHZW9tZXRyeVR5cGUuUE9JTlRdO1xuICB9O1xufVxuXG5cbmV4cG9ydCBkZWZhdWx0IE1vZGlmeTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TW9kaWZ5LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9TZWxlY3RcbiAqL1xuaW1wb3J0IHtnZXRVaWR9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IENvbGxlY3Rpb25FdmVudFR5cGUgZnJvbSAnLi4vQ29sbGVjdGlvbkV2ZW50VHlwZS5qcyc7XG5pbXBvcnQge2V4dGVuZCwgaW5jbHVkZXN9IGZyb20gJy4uL2FycmF5LmpzJztcbmltcG9ydCB7bGlzdGVufSBmcm9tICcuLi9ldmVudHMuanMnO1xuaW1wb3J0IEV2ZW50IGZyb20gJy4uL2V2ZW50cy9FdmVudC5qcyc7XG5pbXBvcnQge3NpbmdsZUNsaWNrLCBuZXZlciwgc2hpZnRLZXlPbmx5LCBwb2ludGVyTW92ZX0gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG5pbXBvcnQge1RSVUV9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4uL2dlb20vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBJbnRlcmFjdGlvbiBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCBWZWN0b3JMYXllciBmcm9tICcuLi9sYXllci9WZWN0b3IuanMnO1xuaW1wb3J0IHtjbGVhcn0gZnJvbSAnLi4vb2JqLmpzJztcbmltcG9ydCBWZWN0b3JTb3VyY2UgZnJvbSAnLi4vc291cmNlL1ZlY3Rvci5qcyc7XG5pbXBvcnQge2NyZWF0ZUVkaXRpbmdTdHlsZX0gZnJvbSAnLi4vc3R5bGUvU3R5bGUuanMnO1xuXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xudmFyIFNlbGVjdEV2ZW50VHlwZSA9IHtcbiAgLyoqXG4gICAqIFRyaWdnZXJlZCB3aGVuIGZlYXR1cmUocykgaGFzIGJlZW4gKGRlKXNlbGVjdGVkLlxuICAgKiBAZXZlbnQgU2VsZWN0RXZlbnQjc2VsZWN0XG4gICAqIEBhcGlcbiAgICovXG4gIFNFTEVDVDogJ3NlbGVjdCdcbn07XG5cblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9GZWF0dXJlfSBvclxuICoge0BsaW5rIG1vZHVsZTpvbC9yZW5kZXIvRmVhdHVyZX0gYW5kIGFuXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyfSBhbmQgcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGZlYXR1cmUgbWF5IGJlXG4gKiBzZWxlY3RlZCBvciBgZmFsc2VgIG90aGVyd2lzZS5cbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlLCBpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0KTpib29sZWFufSBGaWx0ZXJGdW5jdGlvblxuICovXG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbYWRkQ29uZGl0aW9uXSBBIGZ1bmN0aW9uXG4gKiB0aGF0IHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYm9vbGVhbiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuXG4gKiBCeSBkZWZhdWx0LCB0aGlzIGlzIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn5uZXZlcn0uIFVzZSB0aGlzIGlmIHlvdVxuICogd2FudCB0byB1c2UgZGlmZmVyZW50IGV2ZW50cyBmb3IgYWRkIGFuZCByZW1vdmUgaW5zdGVhZCBvZiBgdG9nZ2xlYC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdFxuICogdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhXG4gKiBib29sZWFuIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC4gVGhpcyBpcyB0aGUgZXZlbnRcbiAqIGZvciB0aGUgc2VsZWN0ZWQgZmVhdHVyZXMgYXMgYSB3aG9sZS4gQnkgZGVmYXVsdCwgdGhpcyBpc1xuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufnNpbmdsZUNsaWNrfS4gQ2xpY2tpbmcgb24gYSBmZWF0dXJlIHNlbGVjdHMgdGhhdFxuICogZmVhdHVyZSBhbmQgcmVtb3ZlcyBhbnkgdGhhdCB3ZXJlIGluIHRoZSBzZWxlY3Rpb24uIENsaWNraW5nIG91dHNpZGUgYW55XG4gKiBmZWF0dXJlIHJlbW92ZXMgYWxsIGZyb20gdGhlIHNlbGVjdGlvbi5cbiAqIFNlZSBgdG9nZ2xlYCwgYGFkZGAsIGByZW1vdmVgIG9wdGlvbnMgZm9yIGFkZGluZy9yZW1vdmluZyBleHRyYSBmZWF0dXJlcyB0by9cbiAqIGZyb20gdGhlIHNlbGVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdD58ZnVuY3Rpb24oaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59IFtsYXllcnNdXG4gKiBBIGxpc3Qgb2YgbGF5ZXJzIGZyb20gd2hpY2ggZmVhdHVyZXMgc2hvdWxkIGJlIHNlbGVjdGVkLiBBbHRlcm5hdGl2ZWx5LCBhXG4gKiBmaWx0ZXIgZnVuY3Rpb24gY2FuIGJlIHByb3ZpZGVkLiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2ggbGF5ZXJcbiAqIGluIHRoZSBtYXAgYW5kIHNob3VsZCByZXR1cm4gYHRydWVgIGZvciBsYXllcnMgdGhhdCB5b3Ugd2FudCB0byBiZVxuICogc2VsZWN0YWJsZS4gSWYgdGhlIG9wdGlvbiBpcyBhYnNlbnQsIGFsbCB2aXNpYmxlIGxheWVycyB3aWxsIGJlIGNvbnNpZGVyZWRcbiAqIHNlbGVjdGFibGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3N0eWxlL1N0eWxlLmpzXCIpLlN0eWxlTGlrZX0gW3N0eWxlXVxuICogU3R5bGUgZm9yIHRoZSBzZWxlY3RlZCBmZWF0dXJlcy4gQnkgZGVmYXVsdCB0aGUgZGVmYXVsdCBlZGl0IHN0eWxlIGlzIHVzZWRcbiAqIChzZWUge0BsaW5rIG1vZHVsZTpvbC9zdHlsZX0pLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW3JlbW92ZUNvbmRpdGlvbl0gQSBmdW5jdGlvblxuICogdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGFcbiAqIGJvb2xlYW4gdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLlxuICogQnkgZGVmYXVsdCwgdGhpcyBpcyB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb25+bmV2ZXJ9LiBVc2UgdGhpcyBpZiB5b3VcbiAqIHdhbnQgdG8gdXNlIGRpZmZlcmVudCBldmVudHMgZm9yIGFkZCBhbmQgcmVtb3ZlIGluc3RlYWQgb2YgYHRvZ2dsZWAuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbdG9nZ2xlQ29uZGl0aW9uXSBBIGZ1bmN0aW9uXG4gKiB0aGF0IHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYm9vbGVhbiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuIFRoaXMgaXMgaW4gYWRkaXRpb25cbiAqIHRvIHRoZSBgY29uZGl0aW9uYCBldmVudC4gQnkgZGVmYXVsdCxcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn5zaGlmdEtleU9ubHl9LCBpLmUuIHByZXNzaW5nIGBzaGlmdGAgYXNcbiAqIHdlbGwgYXMgdGhlIGBjb25kaXRpb25gIGV2ZW50LCBhZGRzIHRoYXQgZmVhdHVyZSB0byB0aGUgY3VycmVudCBzZWxlY3Rpb24gaWZcbiAqIGl0IGlzIG5vdCBjdXJyZW50bHkgc2VsZWN0ZWQsIGFuZCByZW1vdmVzIGl0IGlmIGl0IGlzLiBTZWUgYGFkZGAgYW5kIGByZW1vdmVgXG4gKiBpZiB5b3Ugd2FudCB0byB1c2UgZGlmZmVyZW50IGV2ZW50cyBpbnN0ZWFkIG9mIGEgdG9nZ2xlLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbbXVsdGk9ZmFsc2VdIEEgYm9vbGVhbiB0aGF0IGRldGVybWluZXMgaWYgdGhlIGRlZmF1bHRcbiAqIGJlaGF2aW91ciBzaG91bGQgc2VsZWN0IG9ubHkgc2luZ2xlIGZlYXR1cmVzIG9yIGFsbCAob3ZlcmxhcHBpbmcpIGZlYXR1cmVzIGF0XG4gKiB0aGUgY2xpY2tlZCBtYXAgcG9zaXRpb24uIFRoZSBkZWZhdWx0IG9mIGBmYWxzZWAgbWVhbnMgc2luZ2xlIHNlbGVjdC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0PGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdD59IFtmZWF0dXJlc11cbiAqIENvbGxlY3Rpb24gd2hlcmUgdGhlIGludGVyYWN0aW9uIHdpbGwgcGxhY2Ugc2VsZWN0ZWQgZmVhdHVyZXMuIE9wdGlvbmFsLiBJZlxuICogbm90IHNldCB0aGUgaW50ZXJhY3Rpb24gd2lsbCBjcmVhdGUgYSBjb2xsZWN0aW9uLiBJbiBhbnkgY2FzZSB0aGUgY29sbGVjdGlvblxuICogdXNlZCBieSB0aGUgaW50ZXJhY3Rpb24gaXMgcmV0dXJuZWQgYnlcbiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vU2VsZWN0flNlbGVjdCNnZXRGZWF0dXJlc30uXG4gKiBAcHJvcGVydHkge0ZpbHRlckZ1bmN0aW9ufSBbZmlsdGVyXSBBIGZ1bmN0aW9uXG4gKiB0aGF0IHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvRmVhdHVyZX0gYW5kIGFuXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyfSBhbmQgcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGZlYXR1cmUgbWF5IGJlXG4gKiBzZWxlY3RlZCBvciBgZmFsc2VgIG90aGVyd2lzZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3dyYXBYPXRydWVdIFdyYXAgdGhlIHdvcmxkIGhvcml6b250YWxseSBvbiB0aGUgc2VsZWN0aW9uXG4gKiBvdmVybGF5LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtoaXRUb2xlcmFuY2U9MF0gSGl0LWRldGVjdGlvbiB0b2xlcmFuY2UuIFBpeGVscyBpbnNpZGVcbiAqIHRoZSByYWRpdXMgYXJvdW5kIHRoZSBnaXZlbiBwb3NpdGlvbiB3aWxsIGJlIGNoZWNrZWQgZm9yIGZlYXR1cmVzLiBUaGlzIG9ubHlcbiAqIHdvcmtzIGZvciB0aGUgY2FudmFzIHJlbmRlcmVyIGFuZCBub3QgZm9yIFdlYkdMLlxuICovXG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBFdmVudHMgZW1pdHRlZCBieSB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL1NlbGVjdH5TZWxlY3R9IGluc3RhbmNlcyBhcmUgaW5zdGFuY2VzIG9mXG4gKiB0aGlzIHR5cGUuXG4gKi9cbnZhciBTZWxlY3RFdmVudCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKEV2ZW50KSB7XG4gIGZ1bmN0aW9uIFNlbGVjdEV2ZW50KHR5cGUsIHNlbGVjdGVkLCBkZXNlbGVjdGVkLCBtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBFdmVudC5jYWxsKHRoaXMsIHR5cGUpO1xuXG4gICAgLyoqXG4gICAgICogU2VsZWN0ZWQgZmVhdHVyZXMgYXJyYXkuXG4gICAgICogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdD59XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMuc2VsZWN0ZWQgPSBzZWxlY3RlZDtcblxuICAgIC8qKlxuICAgICAqIERlc2VsZWN0ZWQgZmVhdHVyZXMgYXJyYXkuXG4gICAgICogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdD59XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMuZGVzZWxlY3RlZCA9IGRlc2VsZWN0ZWQ7XG5cbiAgICAvKipcbiAgICAgKiBBc3NvY2lhdGVkIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fS5cbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMubWFwQnJvd3NlckV2ZW50ID0gbWFwQnJvd3NlckV2ZW50O1xuXG4gIH1cblxuICBpZiAoIEV2ZW50ICkgU2VsZWN0RXZlbnQuX19wcm90b19fID0gRXZlbnQ7XG4gIFNlbGVjdEV2ZW50LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEV2ZW50ICYmIEV2ZW50LnByb3RvdHlwZSApO1xuICBTZWxlY3RFdmVudC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTZWxlY3RFdmVudDtcblxuICByZXR1cm4gU2VsZWN0RXZlbnQ7XG59KEV2ZW50KSk7XG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBJbnRlcmFjdGlvbiBmb3Igc2VsZWN0aW5nIHZlY3RvciBmZWF0dXJlcy4gQnkgZGVmYXVsdCwgc2VsZWN0ZWQgZmVhdHVyZXMgYXJlXG4gKiBzdHlsZWQgZGlmZmVyZW50bHksIHNvIHRoaXMgaW50ZXJhY3Rpb24gY2FuIGJlIHVzZWQgZm9yIHZpc3VhbCBoaWdobGlnaHRpbmcsXG4gKiBhcyB3ZWxsIGFzIHNlbGVjdGluZyBmZWF0dXJlcyBmb3Igb3RoZXIgYWN0aW9ucywgc3VjaCBhcyBtb2RpZmljYXRpb24gb3JcbiAqIG91dHB1dC4gVGhlcmUgYXJlIHRocmVlIHdheXMgb2YgY29udHJvbGxpbmcgd2hpY2ggZmVhdHVyZXMgYXJlIHNlbGVjdGVkOlxuICogdXNpbmcgdGhlIGJyb3dzZXIgZXZlbnQgYXMgZGVmaW5lZCBieSB0aGUgYGNvbmRpdGlvbmAgYW5kIG9wdGlvbmFsbHkgdGhlXG4gKiBgdG9nZ2xlYCwgYGFkZGAvYHJlbW92ZWAsIGFuZCBgbXVsdGlgIG9wdGlvbnM7IGEgYGxheWVyc2AgZmlsdGVyOyBhbmQgYVxuICogZnVydGhlciBmZWF0dXJlIGZpbHRlciB1c2luZyB0aGUgYGZpbHRlcmAgb3B0aW9uLlxuICpcbiAqIFNlbGVjdGVkIGZlYXR1cmVzIGFyZSBhZGRlZCB0byBhbiBpbnRlcm5hbCB1bm1hbmFnZWQgbGF5ZXIuXG4gKlxuICogQGZpcmVzIFNlbGVjdEV2ZW50XG4gKiBAYXBpXG4gKi9cbnZhciBTZWxlY3QgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChJbnRlcmFjdGlvbikge1xuICBmdW5jdGlvbiBTZWxlY3Qob3B0X29wdGlvbnMpIHtcblxuICAgIEludGVyYWN0aW9uLmNhbGwodGhpcywge1xuICAgICAgaGFuZGxlRXZlbnQ6IGhhbmRsZUV2ZW50XG4gICAgfSk7XG5cbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBzaW5nbGVDbGljaztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuYWRkQ29uZGl0aW9uXyA9IG9wdGlvbnMuYWRkQ29uZGl0aW9uID8gb3B0aW9ucy5hZGRDb25kaXRpb24gOiBuZXZlcjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMucmVtb3ZlQ29uZGl0aW9uXyA9IG9wdGlvbnMucmVtb3ZlQ29uZGl0aW9uID8gb3B0aW9ucy5yZW1vdmVDb25kaXRpb24gOiBuZXZlcjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMudG9nZ2xlQ29uZGl0aW9uXyA9IG9wdGlvbnMudG9nZ2xlQ29uZGl0aW9uID8gb3B0aW9ucy50b2dnbGVDb25kaXRpb24gOiBzaGlmdEtleU9ubHk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMubXVsdGlfID0gb3B0aW9ucy5tdWx0aSA/IG9wdGlvbnMubXVsdGkgOiBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0ZpbHRlckZ1bmN0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuZmlsdGVyXyA9IG9wdGlvbnMuZmlsdGVyID8gb3B0aW9ucy5maWx0ZXIgOiBUUlVFO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuaGl0VG9sZXJhbmNlXyA9IG9wdGlvbnMuaGl0VG9sZXJhbmNlID8gb3B0aW9ucy5oaXRUb2xlcmFuY2UgOiAwO1xuXG4gICAgdmFyIGZlYXR1cmVPdmVybGF5ID0gbmV3IFZlY3RvckxheWVyKHtcbiAgICAgIHNvdXJjZTogbmV3IFZlY3RvclNvdXJjZSh7XG4gICAgICAgIHVzZVNwYXRpYWxJbmRleDogZmFsc2UsXG4gICAgICAgIGZlYXR1cmVzOiBvcHRpb25zLmZlYXR1cmVzLFxuICAgICAgICB3cmFwWDogb3B0aW9ucy53cmFwWFxuICAgICAgfSksXG4gICAgICBzdHlsZTogb3B0aW9ucy5zdHlsZSA/IG9wdGlvbnMuc3R5bGUgOlxuICAgICAgICBnZXREZWZhdWx0U3R5bGVGdW5jdGlvbigpLFxuICAgICAgdXBkYXRlV2hpbGVBbmltYXRpbmc6IHRydWUsXG4gICAgICB1cGRhdGVXaGlsZUludGVyYWN0aW5nOiB0cnVlXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtWZWN0b3JMYXllcn1cbiAgICAgKi9cbiAgICB0aGlzLmZlYXR1cmVPdmVybGF5XyA9IGZlYXR1cmVPdmVybGF5O1xuXG4gICAgLyoqIEB0eXBlIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gKi9cbiAgICB2YXIgbGF5ZXJGaWx0ZXI7XG4gICAgaWYgKG9wdGlvbnMubGF5ZXJzKSB7XG4gICAgICBpZiAodHlwZW9mIG9wdGlvbnMubGF5ZXJzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGxheWVyRmlsdGVyID0gb3B0aW9ucy5sYXllcnM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgbGF5ZXJzID0gb3B0aW9ucy5sYXllcnM7XG4gICAgICAgIGxheWVyRmlsdGVyID0gZnVuY3Rpb24obGF5ZXIpIHtcbiAgICAgICAgICByZXR1cm4gaW5jbHVkZXMobGF5ZXJzLCBsYXllcik7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxheWVyRmlsdGVyID0gVFJVRTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmxheWVyRmlsdGVyXyA9IGxheWVyRmlsdGVyO1xuXG4gICAgLyoqXG4gICAgICogQW4gYXNzb2NpYXRpb24gYmV0d2VlbiBzZWxlY3RlZCBmZWF0dXJlIChrZXkpXG4gICAgICogYW5kIGxheWVyICh2YWx1ZSlcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgKi9cbiAgICB0aGlzLmZlYXR1cmVMYXllckFzc29jaWF0aW9uXyA9IHt9O1xuXG4gICAgdmFyIGZlYXR1cmVzID0gdGhpcy5nZXRGZWF0dXJlcygpO1xuICAgIGxpc3RlbihmZWF0dXJlcywgQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsXG4gICAgICB0aGlzLmFkZEZlYXR1cmVfLCB0aGlzKTtcbiAgICBsaXN0ZW4oZmVhdHVyZXMsIENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLFxuICAgICAgdGhpcy5yZW1vdmVGZWF0dXJlXywgdGhpcyk7XG4gIH1cblxuICBpZiAoIEludGVyYWN0aW9uICkgU2VsZWN0Ll9fcHJvdG9fXyA9IEludGVyYWN0aW9uO1xuICBTZWxlY3QucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggSW50ZXJhY3Rpb24gJiYgSW50ZXJhY3Rpb24ucHJvdG90eXBlICk7XG4gIFNlbGVjdC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTZWxlY3Q7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IGxheWVyIExheWVyLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgU2VsZWN0LnByb3RvdHlwZS5hZGRGZWF0dXJlTGF5ZXJBc3NvY2lhdGlvbl8gPSBmdW5jdGlvbiBhZGRGZWF0dXJlTGF5ZXJBc3NvY2lhdGlvbl8gKGZlYXR1cmUsIGxheWVyKSB7XG4gICAgdGhpcy5mZWF0dXJlTGF5ZXJBc3NvY2lhdGlvbl9bZ2V0VWlkKGZlYXR1cmUpXSA9IGxheWVyO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHNlbGVjdGVkIGZlYXR1cmVzLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0Pn0gRmVhdHVyZXMgY29sbGVjdGlvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgU2VsZWN0LnByb3RvdHlwZS5nZXRGZWF0dXJlcyA9IGZ1bmN0aW9uIGdldEZlYXR1cmVzICgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtWZWN0b3JTb3VyY2V9ICovICh0aGlzLmZlYXR1cmVPdmVybGF5Xy5nZXRTb3VyY2UoKSkuZ2V0RmVhdHVyZXNDb2xsZWN0aW9uKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIEhpdC1kZXRlY3Rpb24gdG9sZXJhbmNlLlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBIaXQgdG9sZXJhbmNlIGluIHBpeGVscy5cbiAgICogQGFwaVxuICAgKi9cbiAgU2VsZWN0LnByb3RvdHlwZS5nZXRIaXRUb2xlcmFuY2UgPSBmdW5jdGlvbiBnZXRIaXRUb2xlcmFuY2UgKCkge1xuICAgIHJldHVybiB0aGlzLmhpdFRvbGVyYW5jZV87XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGFzc29jaWF0ZWQge0BsaW5rIG1vZHVsZTpvbC9sYXllci9WZWN0b3J+VmVjdG9yIHZlY3RvcmxheWVyfSBvZlxuICAgKiB0aGUgKGxhc3QpIHNlbGVjdGVkIGZlYXR1cmUuIE5vdGUgdGhhdCB0aGlzIHdpbGwgbm90IHdvcmsgd2l0aCBhbnlcbiAgICogcHJvZ3JhbW1hdGljIG1ldGhvZCBsaWtlIHB1c2hpbmcgZmVhdHVyZXMgdG9cbiAgICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9TZWxlY3R+U2VsZWN0I2dldEZlYXR1cmVzIGNvbGxlY3Rpb259LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZVxuICAgKiBAcmV0dXJuIHtWZWN0b3JMYXllcn0gTGF5ZXIuXG4gICAqIEBhcGlcbiAgICovXG4gIFNlbGVjdC5wcm90b3R5cGUuZ2V0TGF5ZXIgPSBmdW5jdGlvbiBnZXRMYXllciAoZmVhdHVyZSkge1xuICAgIHJldHVybiAoXG4gICAgICAvKiogQHR5cGUge1ZlY3RvckxheWVyfSAqLyAodGhpcy5mZWF0dXJlTGF5ZXJBc3NvY2lhdGlvbl9bZ2V0VWlkKGZlYXR1cmUpXSlcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG92ZXJsYXkgbGF5ZXIgdGhhdCB0aGlzIGludGVyYWN0aW9uIHJlbmRlcnMgc2VsZWN0ZWQgZmVhdHVyZXMgdG8uXG4gICAqIEByZXR1cm4ge1ZlY3RvckxheWVyfSBPdmVybGF5IGxheWVyLlxuICAgKiBAYXBpXG4gICAqL1xuICBTZWxlY3QucHJvdG90eXBlLmdldE92ZXJsYXkgPSBmdW5jdGlvbiBnZXRPdmVybGF5ICgpIHtcbiAgICByZXR1cm4gdGhpcy5mZWF0dXJlT3ZlcmxheV87XG4gIH07XG5cbiAgLyoqXG4gICAqIEhpdC1kZXRlY3Rpb24gdG9sZXJhbmNlLiBQaXhlbHMgaW5zaWRlIHRoZSByYWRpdXMgYXJvdW5kIHRoZSBnaXZlbiBwb3NpdGlvblxuICAgKiB3aWxsIGJlIGNoZWNrZWQgZm9yIGZlYXR1cmVzLiBUaGlzIG9ubHkgd29ya3MgZm9yIHRoZSBjYW52YXMgcmVuZGVyZXIgYW5kXG4gICAqIG5vdCBmb3IgV2ViR0wuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAqIEBhcGlcbiAgICovXG4gIFNlbGVjdC5wcm90b3R5cGUuc2V0SGl0VG9sZXJhbmNlID0gZnVuY3Rpb24gc2V0SGl0VG9sZXJhbmNlIChoaXRUb2xlcmFuY2UpIHtcbiAgICB0aGlzLmhpdFRvbGVyYW5jZV8gPSBoaXRUb2xlcmFuY2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgaW50ZXJhY3Rpb24gZnJvbSBpdHMgY3VycmVudCBtYXAsIGlmIGFueSwgIGFuZCBhdHRhY2ggaXQgdG8gYSBuZXdcbiAgICogbWFwLCBpZiBhbnkuIFBhc3MgYG51bGxgIHRvIGp1c3QgcmVtb3ZlIHRoZSBpbnRlcmFjdGlvbiBmcm9tIHRoZSBjdXJyZW50IG1hcC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICogQG92ZXJyaWRlXG4gICAqIEBhcGlcbiAgICovXG4gIFNlbGVjdC5wcm90b3R5cGUuc2V0TWFwID0gZnVuY3Rpb24gc2V0TWFwIChtYXApIHtcbiAgICB2YXIgY3VycmVudE1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgdmFyIHNlbGVjdGVkRmVhdHVyZXMgPSB0aGlzLmdldEZlYXR1cmVzKCk7XG4gICAgaWYgKGN1cnJlbnRNYXApIHtcbiAgICAgIHNlbGVjdGVkRmVhdHVyZXMuZm9yRWFjaChjdXJyZW50TWFwLnVuc2tpcEZlYXR1cmUuYmluZChjdXJyZW50TWFwKSk7XG4gICAgfVxuICAgIEludGVyYWN0aW9uLnByb3RvdHlwZS5zZXRNYXAuY2FsbCh0aGlzLCBtYXApO1xuICAgIHRoaXMuZmVhdHVyZU92ZXJsYXlfLnNldE1hcChtYXApO1xuICAgIGlmIChtYXApIHtcbiAgICAgIHNlbGVjdGVkRmVhdHVyZXMuZm9yRWFjaChtYXAuc2tpcEZlYXR1cmUuYmluZChtYXApKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGV2dCBFdmVudC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIFNlbGVjdC5wcm90b3R5cGUuYWRkRmVhdHVyZV8gPSBmdW5jdGlvbiBhZGRGZWF0dXJlXyAoZXZ0KSB7XG4gICAgdmFyIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgaWYgKG1hcCkge1xuICAgICAgbWFwLnNraXBGZWF0dXJlKC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSAqLyAoZXZ0LmVsZW1lbnQpKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGV2dCBFdmVudC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIFNlbGVjdC5wcm90b3R5cGUucmVtb3ZlRmVhdHVyZV8gPSBmdW5jdGlvbiByZW1vdmVGZWF0dXJlXyAoZXZ0KSB7XG4gICAgdmFyIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgaWYgKG1hcCkge1xuICAgICAgbWFwLnVuc2tpcEZlYXR1cmUoLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9ICovIChldnQuZWxlbWVudCkpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBTZWxlY3QucHJvdG90eXBlLnJlbW92ZUZlYXR1cmVMYXllckFzc29jaWF0aW9uXyA9IGZ1bmN0aW9uIHJlbW92ZUZlYXR1cmVMYXllckFzc29jaWF0aW9uXyAoZmVhdHVyZSkge1xuICAgIGRlbGV0ZSB0aGlzLmZlYXR1cmVMYXllckFzc29jaWF0aW9uX1tnZXRVaWQoZmVhdHVyZSldO1xuICB9O1xuXG4gIHJldHVybiBTZWxlY3Q7XG59KEludGVyYWN0aW9uKSk7XG5cblxuLyoqXG4gKiBIYW5kbGVzIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudCBtYXAgYnJvd3NlciBldmVudH0gYW5kIG1heSBjaGFuZ2UgdGhlXG4gKiBzZWxlY3RlZCBzdGF0ZSBvZiBmZWF0dXJlcy5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAqIEB0aGlzIHtTZWxlY3R9XG4gKi9cbmZ1bmN0aW9uIGhhbmRsZUV2ZW50KG1hcEJyb3dzZXJFdmVudCkge1xuICBpZiAoIXRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgdmFyIGFkZCA9IHRoaXMuYWRkQ29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpO1xuICB2YXIgcmVtb3ZlID0gdGhpcy5yZW1vdmVDb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCk7XG4gIHZhciB0b2dnbGUgPSB0aGlzLnRvZ2dsZUNvbmRpdGlvbl8obWFwQnJvd3NlckV2ZW50KTtcbiAgdmFyIHNldCA9ICFhZGQgJiYgIXJlbW92ZSAmJiAhdG9nZ2xlO1xuICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgdmFyIGZlYXR1cmVzID0gdGhpcy5nZXRGZWF0dXJlcygpO1xuICB2YXIgZGVzZWxlY3RlZCA9IFtdO1xuICB2YXIgc2VsZWN0ZWQgPSBbXTtcbiAgaWYgKHNldCkge1xuICAgIC8vIFJlcGxhY2UgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBmZWF0dXJlKHMpIHdpdGggdGhlIGZlYXR1cmUocykgYXQgdGhlXG4gICAgLy8gcGl4ZWwsIG9yIGNsZWFyIHRoZSBzZWxlY3RlZCBmZWF0dXJlKHMpIGlmIHRoZXJlIGlzIG5vIGZlYXR1cmUgYXRcbiAgICAvLyB0aGUgcGl4ZWwuXG4gICAgY2xlYXIodGhpcy5mZWF0dXJlTGF5ZXJBc3NvY2lhdGlvbl8pO1xuICAgIG1hcC5mb3JFYWNoRmVhdHVyZUF0UGl4ZWwobWFwQnJvd3NlckV2ZW50LnBpeGVsLFxuICAgICAgKFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gbGF5ZXIgTGF5ZXIuXG4gICAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW58dW5kZWZpbmVkfSBDb250aW51ZSB0byBpdGVyYXRlIG92ZXIgdGhlIGZlYXR1cmVzLlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24oZmVhdHVyZSwgbGF5ZXIpIHtcbiAgICAgICAgICBpZiAodGhpcy5maWx0ZXJfKGZlYXR1cmUsIGxheWVyKSkge1xuICAgICAgICAgICAgc2VsZWN0ZWQucHVzaChmZWF0dXJlKTtcbiAgICAgICAgICAgIHRoaXMuYWRkRmVhdHVyZUxheWVyQXNzb2NpYXRpb25fKGZlYXR1cmUsIGxheWVyKTtcbiAgICAgICAgICAgIHJldHVybiAhdGhpcy5tdWx0aV87XG4gICAgICAgICAgfVxuICAgICAgICB9KS5iaW5kKHRoaXMpLCB7XG4gICAgICAgIGxheWVyRmlsdGVyOiB0aGlzLmxheWVyRmlsdGVyXyxcbiAgICAgICAgaGl0VG9sZXJhbmNlOiB0aGlzLmhpdFRvbGVyYW5jZV9cbiAgICAgIH0pO1xuICAgIGZvciAodmFyIGkgPSBmZWF0dXJlcy5nZXRMZW5ndGgoKSAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICB2YXIgZmVhdHVyZSA9IGZlYXR1cmVzLml0ZW0oaSk7XG4gICAgICB2YXIgaW5kZXggPSBzZWxlY3RlZC5pbmRleE9mKGZlYXR1cmUpO1xuICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgLy8gZmVhdHVyZSBpcyBhbHJlYWR5IHNlbGVjdGVkXG4gICAgICAgIHNlbGVjdGVkLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmZWF0dXJlcy5yZW1vdmUoZmVhdHVyZSk7XG4gICAgICAgIGRlc2VsZWN0ZWQucHVzaChmZWF0dXJlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHNlbGVjdGVkLmxlbmd0aCAhPT0gMCkge1xuICAgICAgZmVhdHVyZXMuZXh0ZW5kKHNlbGVjdGVkKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gTW9kaWZ5IHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgZmVhdHVyZShzKS5cbiAgICBtYXAuZm9yRWFjaEZlYXR1cmVBdFBpeGVsKG1hcEJyb3dzZXJFdmVudC5waXhlbCxcbiAgICAgIChcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IGxheWVyIExheWVyLlxuICAgICAgICAgKiBAcmV0dXJuIHtib29sZWFufHVuZGVmaW5lZH0gQ29udGludWUgdG8gaXRlcmF0ZSBvdmVyIHRoZSBmZWF0dXJlcy5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uKGZlYXR1cmUsIGxheWVyKSB7XG4gICAgICAgICAgaWYgKHRoaXMuZmlsdGVyXyhmZWF0dXJlLCBsYXllcikpIHtcbiAgICAgICAgICAgIGlmICgoYWRkIHx8IHRvZ2dsZSkgJiYgIWluY2x1ZGVzKGZlYXR1cmVzLmdldEFycmF5KCksIGZlYXR1cmUpKSB7XG4gICAgICAgICAgICAgIHNlbGVjdGVkLnB1c2goZmVhdHVyZSk7XG4gICAgICAgICAgICAgIHRoaXMuYWRkRmVhdHVyZUxheWVyQXNzb2NpYXRpb25fKGZlYXR1cmUsIGxheWVyKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKHJlbW92ZSB8fCB0b2dnbGUpICYmIGluY2x1ZGVzKGZlYXR1cmVzLmdldEFycmF5KCksIGZlYXR1cmUpKSB7XG4gICAgICAgICAgICAgIGRlc2VsZWN0ZWQucHVzaChmZWF0dXJlKTtcbiAgICAgICAgICAgICAgdGhpcy5yZW1vdmVGZWF0dXJlTGF5ZXJBc3NvY2lhdGlvbl8oZmVhdHVyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gIXRoaXMubXVsdGlfO1xuICAgICAgICAgIH1cbiAgICAgICAgfSkuYmluZCh0aGlzKSwge1xuICAgICAgICBsYXllckZpbHRlcjogdGhpcy5sYXllckZpbHRlcl8sXG4gICAgICAgIGhpdFRvbGVyYW5jZTogdGhpcy5oaXRUb2xlcmFuY2VfXG4gICAgICB9KTtcbiAgICBmb3IgKHZhciBqID0gZGVzZWxlY3RlZC5sZW5ndGggLSAxOyBqID49IDA7IC0taikge1xuICAgICAgZmVhdHVyZXMucmVtb3ZlKGRlc2VsZWN0ZWRbal0pO1xuICAgIH1cbiAgICBmZWF0dXJlcy5leHRlbmQoc2VsZWN0ZWQpO1xuICB9XG4gIGlmIChzZWxlY3RlZC5sZW5ndGggPiAwIHx8IGRlc2VsZWN0ZWQubGVuZ3RoID4gMCkge1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcbiAgICAgIG5ldyBTZWxlY3RFdmVudChTZWxlY3RFdmVudFR5cGUuU0VMRUNULFxuICAgICAgICBzZWxlY3RlZCwgZGVzZWxlY3RlZCwgbWFwQnJvd3NlckV2ZW50KSk7XG4gIH1cbiAgcmV0dXJuIHBvaW50ZXJNb3ZlKG1hcEJyb3dzZXJFdmVudCk7XG59XG5cblxuLyoqXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zdHlsZS9TdHlsZS5qc1wiKS5TdHlsZUZ1bmN0aW9ufSBTdHlsZXMuXG4gKi9cbmZ1bmN0aW9uIGdldERlZmF1bHRTdHlsZUZ1bmN0aW9uKCkge1xuICB2YXIgc3R5bGVzID0gY3JlYXRlRWRpdGluZ1N0eWxlKCk7XG4gIGV4dGVuZChzdHlsZXNbR2VvbWV0cnlUeXBlLlBPTFlHT05dLCBzdHlsZXNbR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HXSk7XG4gIGV4dGVuZChzdHlsZXNbR2VvbWV0cnlUeXBlLkdFT01FVFJZX0NPTExFQ1RJT05dLCBzdHlsZXNbR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HXSk7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKGZlYXR1cmUsIHJlc29sdXRpb24pIHtcbiAgICBpZiAoIWZlYXR1cmUuZ2V0R2VvbWV0cnkoKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBzdHlsZXNbZmVhdHVyZS5nZXRHZW9tZXRyeSgpLmdldFR5cGUoKV07XG4gIH07XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgU2VsZWN0O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1TZWxlY3QuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL1NuYXBcbiAqL1xuaW1wb3J0IHtnZXRVaWR9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IENvbGxlY3Rpb25FdmVudFR5cGUgZnJvbSAnLi4vQ29sbGVjdGlvbkV2ZW50VHlwZS5qcyc7XG5pbXBvcnQge2Rpc3RhbmNlIGFzIGNvb3JkaW5hdGVEaXN0YW5jZSwgc3F1YXJlZERpc3RhbmNlIGFzIHNxdWFyZWRDb29yZGluYXRlRGlzdGFuY2UsIGNsb3Nlc3RPbkNpcmNsZSwgY2xvc2VzdE9uU2VnbWVudCwgc3F1YXJlZERpc3RhbmNlVG9TZWdtZW50fSBmcm9tICcuLi9jb29yZGluYXRlLmpzJztcbmltcG9ydCB7bGlzdGVuLCB1bmxpc3RlbkJ5S2V5fSBmcm9tICcuLi9ldmVudHMuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7Ym91bmRpbmdFeHRlbnQsIGNyZWF0ZUVtcHR5fSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHtUUlVFLCBGQUxTRX0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSAnLi4vZ2VvbS9HZW9tZXRyeVR5cGUuanMnO1xuaW1wb3J0IHtmcm9tQ2lyY2xlfSBmcm9tICcuLi9nZW9tL1BvbHlnb24uanMnO1xuaW1wb3J0IFBvaW50ZXJJbnRlcmFjdGlvbiBmcm9tICcuL1BvaW50ZXIuanMnO1xuaW1wb3J0IHtnZXRWYWx1ZXN9IGZyb20gJy4uL29iai5qcyc7XG5pbXBvcnQgVmVjdG9yRXZlbnRUeXBlIGZyb20gJy4uL3NvdXJjZS9WZWN0b3JFdmVudFR5cGUuanMnO1xuaW1wb3J0IFJCdXNoIGZyb20gJy4uL3N0cnVjdHMvUkJ1c2guanMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gUmVzdWx0XG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHNuYXBwZWRcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfG51bGx9IHZlcnRleFxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbHxudWxsfSB2ZXJ0ZXhQaXhlbFxuICovXG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTZWdtZW50RGF0YVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmVcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gc2VnbWVudFxuICovXG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ+fSBbZmVhdHVyZXNdIFNuYXAgdG8gdGhlc2UgZmVhdHVyZXMuIEVpdGhlciB0aGlzIG9wdGlvbiBvciBzb3VyY2Ugc2hvdWxkIGJlIHByb3ZpZGVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbZWRnZT10cnVlXSBTbmFwIHRvIGVkZ2VzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdmVydGV4PXRydWVdIFNuYXAgdG8gdmVydGljZXMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3BpeGVsVG9sZXJhbmNlPTEwXSBQaXhlbCB0b2xlcmFuY2UgZm9yIGNvbnNpZGVyaW5nIHRoZSBwb2ludGVyIGNsb3NlIGVub3VnaCB0byBhIHNlZ21lbnQgb3JcbiAqIHZlcnRleCBmb3Igc25hcHBpbmcuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3NvdXJjZS9WZWN0b3IuanNcIikuZGVmYXVsdH0gW3NvdXJjZV0gU25hcCB0byBmZWF0dXJlcyBmcm9tIHRoaXMgc291cmNlLiBFaXRoZXIgdGhpcyBvcHRpb24gb3IgZmVhdHVyZXMgc2hvdWxkIGJlIHByb3ZpZGVkXG4gKi9cblxuXG4vKipcbiAqIEBwYXJhbSAge2ltcG9ydChcIi4uL3NvdXJjZS9WZWN0b3IuanNcIikuVmVjdG9yU291cmNlRXZlbnR8aW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGV2dCBFdmVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gRmVhdHVyZS5cbiAqL1xuZnVuY3Rpb24gZ2V0RmVhdHVyZUZyb21FdmVudChldnQpIHtcbiAgaWYgKC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vc291cmNlL1ZlY3Rvci5qc1wiKS5WZWN0b3JTb3VyY2VFdmVudH0gKi8gKGV2dCkuZmVhdHVyZSkge1xuICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4uL3NvdXJjZS9WZWN0b3IuanNcIikuVmVjdG9yU291cmNlRXZlbnR9ICovIChldnQpLmZlYXR1cmU7XG4gIH0gZWxzZSBpZiAoLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gKi8gKGV2dCkuZWxlbWVudCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gKi8gKC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9ICovIChldnQpLmVsZW1lbnQpO1xuICB9XG5cbn1cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBIYW5kbGVzIHNuYXBwaW5nIG9mIHZlY3RvciBmZWF0dXJlcyB3aGlsZSBtb2RpZnlpbmcgb3IgZHJhd2luZyB0aGVtLiAgVGhlXG4gKiBmZWF0dXJlcyBjYW4gY29tZSBmcm9tIGEge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVmVjdG9yfSBvciB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb25+Q29sbGVjdGlvbn1cbiAqIEFueSBpbnRlcmFjdGlvbiBvYmplY3QgdGhhdCBhbGxvd3MgdGhlIHVzZXIgdG8gaW50ZXJhY3RcbiAqIHdpdGggdGhlIGZlYXR1cmVzIHVzaW5nIHRoZSBtb3VzZSBjYW4gYmVuZWZpdCBmcm9tIHRoZSBzbmFwcGluZywgYXMgbG9uZ1xuICogYXMgaXQgaXMgYWRkZWQgYmVmb3JlLlxuICpcbiAqIFRoZSBzbmFwIGludGVyYWN0aW9uIG1vZGlmaWVzIG1hcCBicm93c2VyIGV2ZW50IGBjb29yZGluYXRlYCBhbmQgYHBpeGVsYFxuICogcHJvcGVydGllcyB0byBmb3JjZSB0aGUgc25hcCB0byBvY2N1ciB0byBhbnkgaW50ZXJhY3Rpb24gdGhhdCB0aGVtLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICAgIGltcG9ydCBTbmFwIGZyb20gJ29sL2ludGVyYWN0aW9uL1NuYXAnO1xuICpcbiAqICAgICB2YXIgc25hcCA9IG5ldyBTbmFwKHtcbiAqICAgICAgIHNvdXJjZTogc291cmNlXG4gKiAgICAgfSk7XG4gKlxuICogQGFwaVxuICovXG52YXIgU25hcCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFBvaW50ZXJJbnRlcmFjdGlvbikge1xuICBmdW5jdGlvbiBTbmFwKG9wdF9vcHRpb25zKSB7XG5cbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcblxuICAgIHZhciBwb2ludGVyT3B0aW9ucyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9Qb2ludGVyLmpzXCIpLk9wdGlvbnN9ICovIChvcHRpb25zKTtcblxuICAgIGlmICghcG9pbnRlck9wdGlvbnMuaGFuZGxlRG93bkV2ZW50KSB7XG4gICAgICBwb2ludGVyT3B0aW9ucy5oYW5kbGVEb3duRXZlbnQgPSBUUlVFO1xuICAgIH1cblxuICAgIGlmICghcG9pbnRlck9wdGlvbnMuc3RvcERvd24pIHtcbiAgICAgIHBvaW50ZXJPcHRpb25zLnN0b3BEb3duID0gRkFMU0U7XG4gICAgfVxuXG4gICAgUG9pbnRlckludGVyYWN0aW9uLmNhbGwodGhpcywgcG9pbnRlck9wdGlvbnMpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3NvdXJjZS9WZWN0b3IuanNcIikuZGVmYXVsdH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuc291cmNlXyA9IG9wdGlvbnMuc291cmNlID8gb3B0aW9ucy5zb3VyY2UgOiBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLnZlcnRleF8gPSBvcHRpb25zLnZlcnRleCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy52ZXJ0ZXggOiB0cnVlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmVkZ2VfID0gb3B0aW9ucy5lZGdlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmVkZ2UgOiB0cnVlO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5mZWF0dXJlc18gPSBvcHRpb25zLmZlYXR1cmVzID8gb3B0aW9ucy5mZWF0dXJlcyA6IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmZlYXR1cmVzTGlzdGVuZXJLZXlzXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5mZWF0dXJlQ2hhbmdlTGlzdGVuZXJLZXlzXyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogRXh0ZW50cyBhcmUgcHJlc2VydmVkIHNvIGluZGV4ZWQgc2VnbWVudCBjYW4gYmUgcXVpY2tseSByZW1vdmVkXG4gICAgICogd2hlbiBpdHMgZmVhdHVyZSBnZW9tZXRyeSBjaGFuZ2VzXG4gICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQ+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5pbmRleGVkRmVhdHVyZXNFeHRlbnRzXyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogSWYgYSBmZWF0dXJlIGdlb21ldHJ5IGNoYW5nZXMgd2hpbGUgYSBwb2ludGVyIGRyYWd8bW92ZSBldmVudCBvY2N1cnMsIHRoZVxuICAgICAqIGZlYXR1cmUgZG9lc24ndCBnZXQgdXBkYXRlZCByaWdodCBhd2F5LiAgSXQgd2lsbCBiZSBhdCB0aGUgbmV4dCAncG9pbnRlcnVwJ1xuICAgICAqIGV2ZW50IGZpcmVkLlxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucGVuZGluZ0ZlYXR1cmVzXyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogVXNlZCBmb3IgZGlzdGFuY2Ugc29ydGluZyBpbiBzb3J0QnlEaXN0YW5jZV9cbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5waXhlbENvb3JkaW5hdGVfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnBpeGVsVG9sZXJhbmNlXyA9IG9wdGlvbnMucGl4ZWxUb2xlcmFuY2UgIT09IHVuZGVmaW5lZCA/XG4gICAgICBvcHRpb25zLnBpeGVsVG9sZXJhbmNlIDogMTA7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7ZnVuY3Rpb24oU2VnbWVudERhdGEsIFNlZ21lbnREYXRhKTogbnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5zb3J0QnlEaXN0YW5jZV8gPSBzb3J0QnlEaXN0YW5jZS5iaW5kKHRoaXMpO1xuXG5cbiAgICAvKipcbiAgICAqIFNlZ21lbnQgUlRyZWUgZm9yIGVhY2ggbGF5ZXJcbiAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9zdHJ1Y3RzL1JCdXNoLmpzXCIpLmRlZmF1bHQ8U2VnbWVudERhdGE+fVxuICAgICogQHByaXZhdGVcbiAgICAqL1xuICAgIHRoaXMuckJ1c2hfID0gbmV3IFJCdXNoKCk7XG5cblxuICAgIC8qKlxuICAgICogQGNvbnN0XG4gICAgKiBAcHJpdmF0ZVxuICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIGZ1bmN0aW9uKGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdCwgaW1wb3J0KFwiLi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0KT59XG4gICAgKi9cbiAgICB0aGlzLlNFR01FTlRfV1JJVEVSU18gPSB7XG4gICAgICAnUG9pbnQnOiB0aGlzLndyaXRlUG9pbnRHZW9tZXRyeV8sXG4gICAgICAnTGluZVN0cmluZyc6IHRoaXMud3JpdGVMaW5lU3RyaW5nR2VvbWV0cnlfLFxuICAgICAgJ0xpbmVhclJpbmcnOiB0aGlzLndyaXRlTGluZVN0cmluZ0dlb21ldHJ5XyxcbiAgICAgICdQb2x5Z29uJzogdGhpcy53cml0ZVBvbHlnb25HZW9tZXRyeV8sXG4gICAgICAnTXVsdGlQb2ludCc6IHRoaXMud3JpdGVNdWx0aVBvaW50R2VvbWV0cnlfLFxuICAgICAgJ011bHRpTGluZVN0cmluZyc6IHRoaXMud3JpdGVNdWx0aUxpbmVTdHJpbmdHZW9tZXRyeV8sXG4gICAgICAnTXVsdGlQb2x5Z29uJzogdGhpcy53cml0ZU11bHRpUG9seWdvbkdlb21ldHJ5XyxcbiAgICAgICdHZW9tZXRyeUNvbGxlY3Rpb24nOiB0aGlzLndyaXRlR2VvbWV0cnlDb2xsZWN0aW9uR2VvbWV0cnlfLFxuICAgICAgJ0NpcmNsZSc6IHRoaXMud3JpdGVDaXJjbGVHZW9tZXRyeV9cbiAgICB9O1xuICB9XG5cbiAgaWYgKCBQb2ludGVySW50ZXJhY3Rpb24gKSBTbmFwLl9fcHJvdG9fXyA9IFBvaW50ZXJJbnRlcmFjdGlvbjtcbiAgU25hcC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBQb2ludGVySW50ZXJhY3Rpb24gJiYgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZSApO1xuICBTbmFwLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFNuYXA7XG5cbiAgLyoqXG4gICAqIEFkZCBhIGZlYXR1cmUgdG8gdGhlIGNvbGxlY3Rpb24gb2YgZmVhdHVyZXMgdGhhdCB3ZSBtYXkgc25hcCB0by5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2xpc3RlbiBXaGV0aGVyIHRvIGxpc3RlbiB0byB0aGUgZmVhdHVyZSBjaGFuZ2Ugb3Igbm90XG4gICAqICAgICBEZWZhdWx0cyB0byBgdHJ1ZWAuXG4gICAqIEBhcGlcbiAgICovXG4gIFNuYXAucHJvdG90eXBlLmFkZEZlYXR1cmUgPSBmdW5jdGlvbiBhZGRGZWF0dXJlIChmZWF0dXJlLCBvcHRfbGlzdGVuKSB7XG4gICAgdmFyIHJlZ2lzdGVyID0gb3B0X2xpc3RlbiAhPT0gdW5kZWZpbmVkID8gb3B0X2xpc3RlbiA6IHRydWU7XG4gICAgdmFyIGZlYXR1cmVfdWlkID0gZ2V0VWlkKGZlYXR1cmUpO1xuICAgIHZhciBnZW9tZXRyeSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcbiAgICBpZiAoZ2VvbWV0cnkpIHtcbiAgICAgIHZhciBzZWdtZW50V3JpdGVyID0gdGhpcy5TRUdNRU5UX1dSSVRFUlNfW2dlb21ldHJ5LmdldFR5cGUoKV07XG4gICAgICBpZiAoc2VnbWVudFdyaXRlcikge1xuICAgICAgICB0aGlzLmluZGV4ZWRGZWF0dXJlc0V4dGVudHNfW2ZlYXR1cmVfdWlkXSA9IGdlb21ldHJ5LmdldEV4dGVudChjcmVhdGVFbXB0eSgpKTtcbiAgICAgICAgc2VnbWVudFdyaXRlci5jYWxsKHRoaXMsIGZlYXR1cmUsIGdlb21ldHJ5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocmVnaXN0ZXIpIHtcbiAgICAgIHRoaXMuZmVhdHVyZUNoYW5nZUxpc3RlbmVyS2V5c19bZmVhdHVyZV91aWRdID0gbGlzdGVuKFxuICAgICAgICBmZWF0dXJlLFxuICAgICAgICBFdmVudFR5cGUuQ0hBTkdFLFxuICAgICAgICB0aGlzLmhhbmRsZUZlYXR1cmVDaGFuZ2VfLCB0aGlzKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBTbmFwLnByb3RvdHlwZS5mb3JFYWNoRmVhdHVyZUFkZF8gPSBmdW5jdGlvbiBmb3JFYWNoRmVhdHVyZUFkZF8gKGZlYXR1cmUpIHtcbiAgICB0aGlzLmFkZEZlYXR1cmUoZmVhdHVyZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBTbmFwLnByb3RvdHlwZS5mb3JFYWNoRmVhdHVyZVJlbW92ZV8gPSBmdW5jdGlvbiBmb3JFYWNoRmVhdHVyZVJlbW92ZV8gKGZlYXR1cmUpIHtcbiAgICB0aGlzLnJlbW92ZUZlYXR1cmUoZmVhdHVyZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ+fEFycmF5PGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdD59IEZlYXR1cmVzLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgU25hcC5wcm90b3R5cGUuZ2V0RmVhdHVyZXNfID0gZnVuY3Rpb24gZ2V0RmVhdHVyZXNfICgpIHtcbiAgICB2YXIgZmVhdHVyZXM7XG4gICAgaWYgKHRoaXMuZmVhdHVyZXNfKSB7XG4gICAgICBmZWF0dXJlcyA9IHRoaXMuZmVhdHVyZXNfO1xuICAgIH0gZWxzZSBpZiAodGhpcy5zb3VyY2VfKSB7XG4gICAgICBmZWF0dXJlcyA9IHRoaXMuc291cmNlXy5nZXRGZWF0dXJlcygpO1xuICAgIH1cbiAgICByZXR1cm4gZmVhdHVyZXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBTbmFwLnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZUV2ZW50IChldnQpIHtcbiAgICB2YXIgcmVzdWx0ID0gdGhpcy5zbmFwVG8oZXZ0LnBpeGVsLCBldnQuY29vcmRpbmF0ZSwgZXZ0Lm1hcCk7XG4gICAgaWYgKHJlc3VsdC5zbmFwcGVkKSB7XG4gICAgICBldnQuY29vcmRpbmF0ZSA9IHJlc3VsdC52ZXJ0ZXguc2xpY2UoMCwgMik7XG4gICAgICBldnQucGl4ZWwgPSByZXN1bHQudmVydGV4UGl4ZWw7XG4gICAgfVxuICAgIHJldHVybiBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlLmhhbmRsZUV2ZW50LmNhbGwodGhpcywgZXZ0KTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zb3VyY2UvVmVjdG9yLmpzXCIpLlZlY3RvclNvdXJjZUV2ZW50fGltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBldnQgRXZlbnQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBTbmFwLnByb3RvdHlwZS5oYW5kbGVGZWF0dXJlQWRkXyA9IGZ1bmN0aW9uIGhhbmRsZUZlYXR1cmVBZGRfIChldnQpIHtcbiAgICB2YXIgZmVhdHVyZSA9IGdldEZlYXR1cmVGcm9tRXZlbnQoZXZ0KTtcbiAgICB0aGlzLmFkZEZlYXR1cmUoZmVhdHVyZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc291cmNlL1ZlY3Rvci5qc1wiKS5WZWN0b3JTb3VyY2VFdmVudHxpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZ0IEV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgU25hcC5wcm90b3R5cGUuaGFuZGxlRmVhdHVyZVJlbW92ZV8gPSBmdW5jdGlvbiBoYW5kbGVGZWF0dXJlUmVtb3ZlXyAoZXZ0KSB7XG4gICAgdmFyIGZlYXR1cmUgPSBnZXRGZWF0dXJlRnJvbUV2ZW50KGV2dCk7XG4gICAgdGhpcy5yZW1vdmVGZWF0dXJlKGZlYXR1cmUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0fSBldnQgRXZlbnQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBTbmFwLnByb3RvdHlwZS5oYW5kbGVGZWF0dXJlQ2hhbmdlXyA9IGZ1bmN0aW9uIGhhbmRsZUZlYXR1cmVDaGFuZ2VfIChldnQpIHtcbiAgICB2YXIgZmVhdHVyZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSAqLyAoZXZ0LnRhcmdldCk7XG4gICAgaWYgKHRoaXMuaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSkge1xuICAgICAgdmFyIHVpZCA9IGdldFVpZChmZWF0dXJlKTtcbiAgICAgIGlmICghKHVpZCBpbiB0aGlzLnBlbmRpbmdGZWF0dXJlc18pKSB7XG4gICAgICAgIHRoaXMucGVuZGluZ0ZlYXR1cmVzX1t1aWRdID0gZmVhdHVyZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy51cGRhdGVGZWF0dXJlXyhmZWF0dXJlKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBTbmFwLnByb3RvdHlwZS5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gaGFuZGxlVXBFdmVudCAoZXZ0KSB7XG4gICAgdmFyIGZlYXR1cmVzVG9VcGRhdGUgPSBnZXRWYWx1ZXModGhpcy5wZW5kaW5nRmVhdHVyZXNfKTtcbiAgICBpZiAoZmVhdHVyZXNUb1VwZGF0ZS5sZW5ndGgpIHtcbiAgICAgIGZlYXR1cmVzVG9VcGRhdGUuZm9yRWFjaCh0aGlzLnVwZGF0ZUZlYXR1cmVfLmJpbmQodGhpcykpO1xuICAgICAgdGhpcy5wZW5kaW5nRmVhdHVyZXNfID0ge307XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIGEgZmVhdHVyZSBmcm9tIHRoZSBjb2xsZWN0aW9uIG9mIGZlYXR1cmVzIHRoYXQgd2UgbWF5IHNuYXAgdG8uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmVcbiAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3VubGlzdGVuIFdoZXRoZXIgdG8gdW5saXN0ZW4gdG8gdGhlIGZlYXR1cmUgY2hhbmdlXG4gICAqICAgICBvciBub3QuIERlZmF1bHRzIHRvIGB0cnVlYC5cbiAgICogQGFwaVxuICAgKi9cbiAgU25hcC5wcm90b3R5cGUucmVtb3ZlRmVhdHVyZSA9IGZ1bmN0aW9uIHJlbW92ZUZlYXR1cmUgKGZlYXR1cmUsIG9wdF91bmxpc3Rlbikge1xuICAgIHZhciB1bnJlZ2lzdGVyID0gb3B0X3VubGlzdGVuICE9PSB1bmRlZmluZWQgPyBvcHRfdW5saXN0ZW4gOiB0cnVlO1xuICAgIHZhciBmZWF0dXJlX3VpZCA9IGdldFVpZChmZWF0dXJlKTtcbiAgICB2YXIgZXh0ZW50ID0gdGhpcy5pbmRleGVkRmVhdHVyZXNFeHRlbnRzX1tmZWF0dXJlX3VpZF07XG4gICAgaWYgKGV4dGVudCkge1xuICAgICAgdmFyIHJCdXNoID0gdGhpcy5yQnVzaF87XG4gICAgICB2YXIgbm9kZXNUb1JlbW92ZSA9IFtdO1xuICAgICAgckJ1c2guZm9yRWFjaEluRXh0ZW50KGV4dGVudCwgZnVuY3Rpb24obm9kZSkge1xuICAgICAgICBpZiAoZmVhdHVyZSA9PT0gbm9kZS5mZWF0dXJlKSB7XG4gICAgICAgICAgbm9kZXNUb1JlbW92ZS5wdXNoKG5vZGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGZvciAodmFyIGkgPSBub2Rlc1RvUmVtb3ZlLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHJCdXNoLnJlbW92ZShub2Rlc1RvUmVtb3ZlW2ldKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodW5yZWdpc3Rlcikge1xuICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLmZlYXR1cmVDaGFuZ2VMaXN0ZW5lcktleXNfW2ZlYXR1cmVfdWlkXSk7XG4gICAgICBkZWxldGUgdGhpcy5mZWF0dXJlQ2hhbmdlTGlzdGVuZXJLZXlzX1tmZWF0dXJlX3VpZF07XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgU25hcC5wcm90b3R5cGUuc2V0TWFwID0gZnVuY3Rpb24gc2V0TWFwIChtYXApIHtcbiAgICB2YXIgY3VycmVudE1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgdmFyIGtleXMgPSB0aGlzLmZlYXR1cmVzTGlzdGVuZXJLZXlzXztcbiAgICB2YXIgZmVhdHVyZXMgPSAvKiogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdD59ICovICh0aGlzLmdldEZlYXR1cmVzXygpKTtcblxuICAgIGlmIChjdXJyZW50TWFwKSB7XG4gICAgICBrZXlzLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgICBrZXlzLmxlbmd0aCA9IDA7XG4gICAgICBmZWF0dXJlcy5mb3JFYWNoKHRoaXMuZm9yRWFjaEZlYXR1cmVSZW1vdmVfLmJpbmQodGhpcykpO1xuICAgIH1cbiAgICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlLnNldE1hcC5jYWxsKHRoaXMsIG1hcCk7XG5cbiAgICBpZiAobWFwKSB7XG4gICAgICBpZiAodGhpcy5mZWF0dXJlc18pIHtcbiAgICAgICAga2V5cy5wdXNoKFxuICAgICAgICAgIGxpc3Rlbih0aGlzLmZlYXR1cmVzXywgQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUZlYXR1cmVBZGRfLCB0aGlzKSxcbiAgICAgICAgICBsaXN0ZW4odGhpcy5mZWF0dXJlc18sIENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLFxuICAgICAgICAgICAgdGhpcy5oYW5kbGVGZWF0dXJlUmVtb3ZlXywgdGhpcylcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zb3VyY2VfKSB7XG4gICAgICAgIGtleXMucHVzaChcbiAgICAgICAgICBsaXN0ZW4odGhpcy5zb3VyY2VfLCBWZWN0b3JFdmVudFR5cGUuQURERkVBVFVSRSxcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRmVhdHVyZUFkZF8sIHRoaXMpLFxuICAgICAgICAgIGxpc3Rlbih0aGlzLnNvdXJjZV8sIFZlY3RvckV2ZW50VHlwZS5SRU1PVkVGRUFUVVJFLFxuICAgICAgICAgICAgdGhpcy5oYW5kbGVGZWF0dXJlUmVtb3ZlXywgdGhpcylcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGZlYXR1cmVzLmZvckVhY2godGhpcy5mb3JFYWNoRmVhdHVyZUFkZF8uYmluZCh0aGlzKSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbFxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gcGl4ZWxDb29yZGluYXRlIENvb3JkaW5hdGVcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICogQHJldHVybiB7UmVzdWx0fSBTbmFwIHJlc3VsdFxuICAgKi9cbiAgU25hcC5wcm90b3R5cGUuc25hcFRvID0gZnVuY3Rpb24gc25hcFRvIChwaXhlbCwgcGl4ZWxDb29yZGluYXRlLCBtYXApIHtcblxuICAgIHZhciBsb3dlckxlZnQgPSBtYXAuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbChcbiAgICAgIFtwaXhlbFswXSAtIHRoaXMucGl4ZWxUb2xlcmFuY2VfLCBwaXhlbFsxXSArIHRoaXMucGl4ZWxUb2xlcmFuY2VfXSk7XG4gICAgdmFyIHVwcGVyUmlnaHQgPSBtYXAuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbChcbiAgICAgIFtwaXhlbFswXSArIHRoaXMucGl4ZWxUb2xlcmFuY2VfLCBwaXhlbFsxXSAtIHRoaXMucGl4ZWxUb2xlcmFuY2VfXSk7XG4gICAgdmFyIGJveCA9IGJvdW5kaW5nRXh0ZW50KFtsb3dlckxlZnQsIHVwcGVyUmlnaHRdKTtcblxuICAgIHZhciBzZWdtZW50cyA9IHRoaXMuckJ1c2hfLmdldEluRXh0ZW50KGJveCk7XG5cbiAgICAvLyBJZiBzbmFwcGluZyBvbiB2ZXJ0aWNlcyBvbmx5LCBkb24ndCBjb25zaWRlciBjaXJjbGVzXG4gICAgaWYgKHRoaXMudmVydGV4XyAmJiAhdGhpcy5lZGdlXykge1xuICAgICAgc2VnbWVudHMgPSBzZWdtZW50cy5maWx0ZXIoZnVuY3Rpb24oc2VnbWVudCkge1xuICAgICAgICByZXR1cm4gc2VnbWVudC5mZWF0dXJlLmdldEdlb21ldHJ5KCkuZ2V0VHlwZSgpICE9PVxuICAgICAgICAgICAgR2VvbWV0cnlUeXBlLkNJUkNMRTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciBzbmFwcGVkVG9WZXJ0ZXggPSBmYWxzZTtcbiAgICB2YXIgc25hcHBlZCA9IGZhbHNlO1xuICAgIHZhciB2ZXJ0ZXggPSBudWxsO1xuICAgIHZhciB2ZXJ0ZXhQaXhlbCA9IG51bGw7XG4gICAgdmFyIGRpc3QsIHBpeGVsMSwgcGl4ZWwyLCBzcXVhcmVkRGlzdDEsIHNxdWFyZWREaXN0MjtcbiAgICBpZiAoc2VnbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5waXhlbENvb3JkaW5hdGVfID0gcGl4ZWxDb29yZGluYXRlO1xuICAgICAgc2VnbWVudHMuc29ydCh0aGlzLnNvcnRCeURpc3RhbmNlXyk7XG4gICAgICB2YXIgY2xvc2VzdFNlZ21lbnQgPSBzZWdtZW50c1swXS5zZWdtZW50O1xuICAgICAgdmFyIGlzQ2lyY2xlID0gc2VnbWVudHNbMF0uZmVhdHVyZS5nZXRHZW9tZXRyeSgpLmdldFR5cGUoKSA9PT1cbiAgICAgICAgICBHZW9tZXRyeVR5cGUuQ0lSQ0xFO1xuICAgICAgaWYgKHRoaXMudmVydGV4XyAmJiAhdGhpcy5lZGdlXykge1xuICAgICAgICBwaXhlbDEgPSBtYXAuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZShjbG9zZXN0U2VnbWVudFswXSk7XG4gICAgICAgIHBpeGVsMiA9IG1hcC5nZXRQaXhlbEZyb21Db29yZGluYXRlKGNsb3Nlc3RTZWdtZW50WzFdKTtcbiAgICAgICAgc3F1YXJlZERpc3QxID0gc3F1YXJlZENvb3JkaW5hdGVEaXN0YW5jZShwaXhlbCwgcGl4ZWwxKTtcbiAgICAgICAgc3F1YXJlZERpc3QyID0gc3F1YXJlZENvb3JkaW5hdGVEaXN0YW5jZShwaXhlbCwgcGl4ZWwyKTtcbiAgICAgICAgZGlzdCA9IE1hdGguc3FydChNYXRoLm1pbihzcXVhcmVkRGlzdDEsIHNxdWFyZWREaXN0MikpO1xuICAgICAgICBzbmFwcGVkVG9WZXJ0ZXggPSBkaXN0IDw9IHRoaXMucGl4ZWxUb2xlcmFuY2VfO1xuICAgICAgICBpZiAoc25hcHBlZFRvVmVydGV4KSB7XG4gICAgICAgICAgc25hcHBlZCA9IHRydWU7XG4gICAgICAgICAgdmVydGV4ID0gc3F1YXJlZERpc3QxID4gc3F1YXJlZERpc3QyID8gY2xvc2VzdFNlZ21lbnRbMV0gOiBjbG9zZXN0U2VnbWVudFswXTtcbiAgICAgICAgICB2ZXJ0ZXhQaXhlbCA9IG1hcC5nZXRQaXhlbEZyb21Db29yZGluYXRlKHZlcnRleCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5lZGdlXykge1xuICAgICAgICBpZiAoaXNDaXJjbGUpIHtcbiAgICAgICAgICB2ZXJ0ZXggPSBjbG9zZXN0T25DaXJjbGUocGl4ZWxDb29yZGluYXRlLFxuICAgICAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9nZW9tL0NpcmNsZS5qc1wiKS5kZWZhdWx0fSAqLyAoc2VnbWVudHNbMF0uZmVhdHVyZS5nZXRHZW9tZXRyeSgpKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmVydGV4ID0gY2xvc2VzdE9uU2VnbWVudChwaXhlbENvb3JkaW5hdGUsIGNsb3Nlc3RTZWdtZW50KTtcbiAgICAgICAgfVxuICAgICAgICB2ZXJ0ZXhQaXhlbCA9IG1hcC5nZXRQaXhlbEZyb21Db29yZGluYXRlKHZlcnRleCk7XG4gICAgICAgIGlmIChjb29yZGluYXRlRGlzdGFuY2UocGl4ZWwsIHZlcnRleFBpeGVsKSA8PSB0aGlzLnBpeGVsVG9sZXJhbmNlXykge1xuICAgICAgICAgIHNuYXBwZWQgPSB0cnVlO1xuICAgICAgICAgIGlmICh0aGlzLnZlcnRleF8gJiYgIWlzQ2lyY2xlKSB7XG4gICAgICAgICAgICBwaXhlbDEgPSBtYXAuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZShjbG9zZXN0U2VnbWVudFswXSk7XG4gICAgICAgICAgICBwaXhlbDIgPSBtYXAuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZShjbG9zZXN0U2VnbWVudFsxXSk7XG4gICAgICAgICAgICBzcXVhcmVkRGlzdDEgPSBzcXVhcmVkQ29vcmRpbmF0ZURpc3RhbmNlKHZlcnRleFBpeGVsLCBwaXhlbDEpO1xuICAgICAgICAgICAgc3F1YXJlZERpc3QyID0gc3F1YXJlZENvb3JkaW5hdGVEaXN0YW5jZSh2ZXJ0ZXhQaXhlbCwgcGl4ZWwyKTtcbiAgICAgICAgICAgIGRpc3QgPSBNYXRoLnNxcnQoTWF0aC5taW4oc3F1YXJlZERpc3QxLCBzcXVhcmVkRGlzdDIpKTtcbiAgICAgICAgICAgIHNuYXBwZWRUb1ZlcnRleCA9IGRpc3QgPD0gdGhpcy5waXhlbFRvbGVyYW5jZV87XG4gICAgICAgICAgICBpZiAoc25hcHBlZFRvVmVydGV4KSB7XG4gICAgICAgICAgICAgIHZlcnRleCA9IHNxdWFyZWREaXN0MSA+IHNxdWFyZWREaXN0MiA/IGNsb3Nlc3RTZWdtZW50WzFdIDogY2xvc2VzdFNlZ21lbnRbMF07XG4gICAgICAgICAgICAgIHZlcnRleFBpeGVsID0gbWFwLmdldFBpeGVsRnJvbUNvb3JkaW5hdGUodmVydGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChzbmFwcGVkKSB7XG4gICAgICAgIHZlcnRleFBpeGVsID0gW01hdGgucm91bmQodmVydGV4UGl4ZWxbMF0pLCBNYXRoLnJvdW5kKHZlcnRleFBpeGVsWzFdKV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAoXG4gICAgICAvKiogQHR5cGUge1Jlc3VsdH0gKi8gKHtcbiAgICAgICAgc25hcHBlZDogc25hcHBlZCxcbiAgICAgICAgdmVydGV4OiB2ZXJ0ZXgsXG4gICAgICAgIHZlcnRleFBpeGVsOiB2ZXJ0ZXhQaXhlbFxuICAgICAgfSlcbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBTbmFwLnByb3RvdHlwZS51cGRhdGVGZWF0dXJlXyA9IGZ1bmN0aW9uIHVwZGF0ZUZlYXR1cmVfIChmZWF0dXJlKSB7XG4gICAgdGhpcy5yZW1vdmVGZWF0dXJlKGZlYXR1cmUsIGZhbHNlKTtcbiAgICB0aGlzLmFkZEZlYXR1cmUoZmVhdHVyZSwgZmFsc2UpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9DaXJjbGUuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBTbmFwLnByb3RvdHlwZS53cml0ZUNpcmNsZUdlb21ldHJ5XyA9IGZ1bmN0aW9uIHdyaXRlQ2lyY2xlR2VvbWV0cnlfIChmZWF0dXJlLCBnZW9tZXRyeSkge1xuICAgIHZhciBwb2x5Z29uID0gZnJvbUNpcmNsZShnZW9tZXRyeSk7XG4gICAgdmFyIGNvb3JkaW5hdGVzID0gcG9seWdvbi5nZXRDb29yZGluYXRlcygpWzBdO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aCAtIDE7IGkgPCBpaTsgKytpKSB7XG4gICAgICB2YXIgc2VnbWVudCA9IGNvb3JkaW5hdGVzLnNsaWNlKGksIGkgKyAyKTtcbiAgICAgIHZhciBzZWdtZW50RGF0YSA9IC8qKiBAdHlwZSB7U2VnbWVudERhdGF9ICovICh7XG4gICAgICAgIGZlYXR1cmU6IGZlYXR1cmUsXG4gICAgICAgIHNlZ21lbnQ6IHNlZ21lbnRcbiAgICAgIH0pO1xuICAgICAgdGhpcy5yQnVzaF8uaW5zZXJ0KGJvdW5kaW5nRXh0ZW50KHNlZ21lbnQpLCBzZWdtZW50RGF0YSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9HZW9tZXRyeUNvbGxlY3Rpb24uanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBTbmFwLnByb3RvdHlwZS53cml0ZUdlb21ldHJ5Q29sbGVjdGlvbkdlb21ldHJ5XyA9IGZ1bmN0aW9uIHdyaXRlR2VvbWV0cnlDb2xsZWN0aW9uR2VvbWV0cnlfIChmZWF0dXJlLCBnZW9tZXRyeSkge1xuICAgIHZhciBnZW9tZXRyaWVzID0gZ2VvbWV0cnkuZ2V0R2VvbWV0cmllc0FycmF5KCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBnZW9tZXRyaWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgc2VnbWVudFdyaXRlciA9IHRoaXMuU0VHTUVOVF9XUklURVJTX1tnZW9tZXRyaWVzW2ldLmdldFR5cGUoKV07XG4gICAgICBpZiAoc2VnbWVudFdyaXRlcikge1xuICAgICAgICBzZWdtZW50V3JpdGVyLmNhbGwodGhpcywgZmVhdHVyZSwgZ2VvbWV0cmllc1tpXSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9MaW5lU3RyaW5nLmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgU25hcC5wcm90b3R5cGUud3JpdGVMaW5lU3RyaW5nR2VvbWV0cnlfID0gZnVuY3Rpb24gd3JpdGVMaW5lU3RyaW5nR2VvbWV0cnlfIChmZWF0dXJlLCBnZW9tZXRyeSkge1xuICAgIHZhciBjb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldENvb3JkaW5hdGVzKCk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoIC0gMTsgaSA8IGlpOyArK2kpIHtcbiAgICAgIHZhciBzZWdtZW50ID0gY29vcmRpbmF0ZXMuc2xpY2UoaSwgaSArIDIpO1xuICAgICAgdmFyIHNlZ21lbnREYXRhID0gLyoqIEB0eXBlIHtTZWdtZW50RGF0YX0gKi8gKHtcbiAgICAgICAgZmVhdHVyZTogZmVhdHVyZSxcbiAgICAgICAgc2VnbWVudDogc2VnbWVudFxuICAgICAgfSk7XG4gICAgICB0aGlzLnJCdXNoXy5pbnNlcnQoYm91bmRpbmdFeHRlbnQoc2VnbWVudCksIHNlZ21lbnREYXRhKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmVcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL011bHRpTGluZVN0cmluZy5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIFNuYXAucHJvdG90eXBlLndyaXRlTXVsdGlMaW5lU3RyaW5nR2VvbWV0cnlfID0gZnVuY3Rpb24gd3JpdGVNdWx0aUxpbmVTdHJpbmdHZW9tZXRyeV8gKGZlYXR1cmUsIGdlb21ldHJ5KSB7XG4gICAgdmFyIGxpbmVzID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICBmb3IgKHZhciBqID0gMCwgamogPSBsaW5lcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICB2YXIgY29vcmRpbmF0ZXMgPSBsaW5lc1tqXTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aCAtIDE7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBzZWdtZW50ID0gY29vcmRpbmF0ZXMuc2xpY2UoaSwgaSArIDIpO1xuICAgICAgICB2YXIgc2VnbWVudERhdGEgPSAvKiogQHR5cGUge1NlZ21lbnREYXRhfSAqLyAoe1xuICAgICAgICAgIGZlYXR1cmU6IGZlYXR1cmUsXG4gICAgICAgICAgc2VnbWVudDogc2VnbWVudFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5yQnVzaF8uaW5zZXJ0KGJvdW5kaW5nRXh0ZW50KHNlZ21lbnQpLCBzZWdtZW50RGF0YSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuZGVmYXVsdH0gZmVhdHVyZSBGZWF0dXJlXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9NdWx0aVBvaW50LmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgU25hcC5wcm90b3R5cGUud3JpdGVNdWx0aVBvaW50R2VvbWV0cnlfID0gZnVuY3Rpb24gd3JpdGVNdWx0aVBvaW50R2VvbWV0cnlfIChmZWF0dXJlLCBnZW9tZXRyeSkge1xuICAgIHZhciBwb2ludHMgPSBnZW9tZXRyeS5nZXRDb29yZGluYXRlcygpO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHBvaW50cy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICB2YXIgY29vcmRpbmF0ZXMgPSBwb2ludHNbaV07XG4gICAgICB2YXIgc2VnbWVudERhdGEgPSAvKiogQHR5cGUge1NlZ21lbnREYXRhfSAqLyAoe1xuICAgICAgICBmZWF0dXJlOiBmZWF0dXJlLFxuICAgICAgICBzZWdtZW50OiBbY29vcmRpbmF0ZXMsIGNvb3JkaW5hdGVzXVxuICAgICAgfSk7XG4gICAgICB0aGlzLnJCdXNoXy5pbnNlcnQoZ2VvbWV0cnkuZ2V0RXh0ZW50KCksIHNlZ21lbnREYXRhKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmVcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL011bHRpUG9seWdvbi5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIFNuYXAucHJvdG90eXBlLndyaXRlTXVsdGlQb2x5Z29uR2VvbWV0cnlfID0gZnVuY3Rpb24gd3JpdGVNdWx0aVBvbHlnb25HZW9tZXRyeV8gKGZlYXR1cmUsIGdlb21ldHJ5KSB7XG4gICAgdmFyIHBvbHlnb25zID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICBmb3IgKHZhciBrID0gMCwga2sgPSBwb2x5Z29ucy5sZW5ndGg7IGsgPCBrazsgKytrKSB7XG4gICAgICB2YXIgcmluZ3MgPSBwb2x5Z29uc1trXTtcbiAgICAgIGZvciAodmFyIGogPSAwLCBqaiA9IHJpbmdzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gcmluZ3Nbal07XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aCAtIDE7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgdmFyIHNlZ21lbnQgPSBjb29yZGluYXRlcy5zbGljZShpLCBpICsgMik7XG4gICAgICAgICAgdmFyIHNlZ21lbnREYXRhID0gLyoqIEB0eXBlIHtTZWdtZW50RGF0YX0gKi8gKHtcbiAgICAgICAgICAgIGZlYXR1cmU6IGZlYXR1cmUsXG4gICAgICAgICAgICBzZWdtZW50OiBzZWdtZW50XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5yQnVzaF8uaW5zZXJ0KGJvdW5kaW5nRXh0ZW50KHNlZ21lbnQpLCBzZWdtZW50RGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmVcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL1BvaW50LmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgU25hcC5wcm90b3R5cGUud3JpdGVQb2ludEdlb21ldHJ5XyA9IGZ1bmN0aW9uIHdyaXRlUG9pbnRHZW9tZXRyeV8gKGZlYXR1cmUsIGdlb21ldHJ5KSB7XG4gICAgdmFyIGNvb3JkaW5hdGVzID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICB2YXIgc2VnbWVudERhdGEgPSAvKiogQHR5cGUge1NlZ21lbnREYXRhfSAqLyAoe1xuICAgICAgZmVhdHVyZTogZmVhdHVyZSxcbiAgICAgIHNlZ21lbnQ6IFtjb29yZGluYXRlcywgY29vcmRpbmF0ZXNdXG4gICAgfSk7XG4gICAgdGhpcy5yQnVzaF8uaW5zZXJ0KGdlb21ldHJ5LmdldEV4dGVudCgpLCBzZWdtZW50RGF0YSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBmZWF0dXJlIEZlYXR1cmVcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBTbmFwLnByb3RvdHlwZS53cml0ZVBvbHlnb25HZW9tZXRyeV8gPSBmdW5jdGlvbiB3cml0ZVBvbHlnb25HZW9tZXRyeV8gKGZlYXR1cmUsIGdlb21ldHJ5KSB7XG4gICAgdmFyIHJpbmdzID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICBmb3IgKHZhciBqID0gMCwgamogPSByaW5ncy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICB2YXIgY29vcmRpbmF0ZXMgPSByaW5nc1tqXTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aCAtIDE7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBzZWdtZW50ID0gY29vcmRpbmF0ZXMuc2xpY2UoaSwgaSArIDIpO1xuICAgICAgICB2YXIgc2VnbWVudERhdGEgPSAvKiogQHR5cGUge1NlZ21lbnREYXRhfSAqLyAoe1xuICAgICAgICAgIGZlYXR1cmU6IGZlYXR1cmUsXG4gICAgICAgICAgc2VnbWVudDogc2VnbWVudFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5yQnVzaF8uaW5zZXJ0KGJvdW5kaW5nRXh0ZW50KHNlZ21lbnQpLCBzZWdtZW50RGF0YSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBTbmFwO1xufShQb2ludGVySW50ZXJhY3Rpb24pKTtcblxuXG4vKipcbiAqIFNvcnQgc2VnbWVudHMgYnkgZGlzdGFuY2UsIGhlbHBlciBmdW5jdGlvblxuICogQHBhcmFtIHtTZWdtZW50RGF0YX0gYSBUaGUgZmlyc3Qgc2VnbWVudCBkYXRhLlxuICogQHBhcmFtIHtTZWdtZW50RGF0YX0gYiBUaGUgc2Vjb25kIHNlZ21lbnQgZGF0YS5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGRpZmZlcmVuY2UgaW4gZGlzdGFuY2UuXG4gKiBAdGhpcyB7U25hcH1cbiAqL1xuZnVuY3Rpb24gc29ydEJ5RGlzdGFuY2UoYSwgYikge1xuICB2YXIgZGVsdGFBID0gc3F1YXJlZERpc3RhbmNlVG9TZWdtZW50KHRoaXMucGl4ZWxDb29yZGluYXRlXywgYS5zZWdtZW50KTtcbiAgdmFyIGRlbHRhQiA9IHNxdWFyZWREaXN0YW5jZVRvU2VnbWVudCh0aGlzLnBpeGVsQ29vcmRpbmF0ZV8sIGIuc2VnbWVudCk7XG4gIHJldHVybiBkZWx0YUEgLSBkZWx0YUI7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNuYXA7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNuYXAuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL1RyYW5zbGF0ZVxuICovXG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tICcuLi9Db2xsZWN0aW9uLmpzJztcbmltcG9ydCB7Z2V0Q2hhbmdlRXZlbnRUeXBlfSBmcm9tICcuLi9PYmplY3QuanMnO1xuaW1wb3J0IHtsaXN0ZW59IGZyb20gJy4uL2V2ZW50cy5qcyc7XG5pbXBvcnQgRXZlbnQgZnJvbSAnLi4vZXZlbnRzL0V2ZW50LmpzJztcbmltcG9ydCB7VFJVRX0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7aW5jbHVkZXN9IGZyb20gJy4uL2FycmF5LmpzJztcbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24gZnJvbSAnLi9Qb2ludGVyLmpzJztcbmltcG9ydCBJbnRlcmFjdGlvblByb3BlcnR5IGZyb20gJy4vUHJvcGVydHkuanMnO1xuXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xudmFyIFRyYW5zbGF0ZUV2ZW50VHlwZSA9IHtcbiAgLyoqXG4gICAqIFRyaWdnZXJlZCB1cG9uIGZlYXR1cmUgdHJhbnNsYXRpb24gc3RhcnQuXG4gICAqIEBldmVudCBUcmFuc2xhdGVFdmVudCN0cmFuc2xhdGVzdGFydFxuICAgKiBAYXBpXG4gICAqL1xuICBUUkFOU0xBVEVTVEFSVDogJ3RyYW5zbGF0ZXN0YXJ0JyxcbiAgLyoqXG4gICAqIFRyaWdnZXJlZCB1cG9uIGZlYXR1cmUgdHJhbnNsYXRpb24uXG4gICAqIEBldmVudCBUcmFuc2xhdGVFdmVudCN0cmFuc2xhdGluZ1xuICAgKiBAYXBpXG4gICAqL1xuICBUUkFOU0xBVElORzogJ3RyYW5zbGF0aW5nJyxcbiAgLyoqXG4gICAqIFRyaWdnZXJlZCB1cG9uIGZlYXR1cmUgdHJhbnNsYXRpb24gZW5kLlxuICAgKiBAZXZlbnQgVHJhbnNsYXRlRXZlbnQjdHJhbnNsYXRlZW5kXG4gICAqIEBhcGlcbiAgICovXG4gIFRSQU5TTEFURUVORDogJ3RyYW5zbGF0ZWVuZCdcbn07XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb248aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0Pn0gW2ZlYXR1cmVzXSBPbmx5IGZlYXR1cmVzIGNvbnRhaW5lZCBpbiB0aGlzIGNvbGxlY3Rpb24gd2lsbCBiZSBhYmxlIHRvIGJlIHRyYW5zbGF0ZWQuIElmXG4gKiBub3Qgc3BlY2lmaWVkLCBhbGwgZmVhdHVyZXMgb24gdGhlIG1hcCB3aWxsIGJlIGFibGUgdG8gYmUgdHJhbnNsYXRlZC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdD58ZnVuY3Rpb24oaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59IFtsYXllcnNdIEEgbGlzdCBvZiBsYXllcnMgZnJvbSB3aGljaCBmZWF0dXJlcyBzaG91bGQgYmVcbiAqIHRyYW5zbGF0ZWQuIEFsdGVybmF0aXZlbHksIGEgZmlsdGVyIGZ1bmN0aW9uIGNhbiBiZSBwcm92aWRlZC4gVGhlXG4gKiBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBmb3IgZWFjaCBsYXllciBpbiB0aGUgbWFwIGFuZCBzaG91bGQgcmV0dXJuXG4gKiBgdHJ1ZWAgZm9yIGxheWVycyB0aGF0IHlvdSB3YW50IHRvIGJlIHRyYW5zbGF0YWJsZS4gSWYgdGhlIG9wdGlvbiBpc1xuICogYWJzZW50LCBhbGwgdmlzaWJsZSBsYXllcnMgd2lsbCBiZSBjb25zaWRlcmVkIHRyYW5zbGF0YWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbaGl0VG9sZXJhbmNlPTBdIEhpdC1kZXRlY3Rpb24gdG9sZXJhbmNlLiBQaXhlbHMgaW5zaWRlIHRoZSByYWRpdXMgYXJvdW5kIHRoZSBnaXZlbiBwb3NpdGlvblxuICogd2lsbCBiZSBjaGVja2VkIGZvciBmZWF0dXJlcy4gVGhpcyBvbmx5IHdvcmtzIGZvciB0aGUgY2FudmFzIHJlbmRlcmVyIGFuZFxuICogbm90IGZvciBXZWJHTC5cbiAqL1xuXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9UcmFuc2xhdGV+VHJhbnNsYXRlfSBpbnN0YW5jZXNcbiAqIGFyZSBpbnN0YW5jZXMgb2YgdGhpcyB0eXBlLlxuICovXG5leHBvcnQgdmFyIFRyYW5zbGF0ZUV2ZW50ID0gLypAX19QVVJFX18qLyhmdW5jdGlvbiAoRXZlbnQpIHtcbiAgZnVuY3Rpb24gVHJhbnNsYXRlRXZlbnQodHlwZSwgZmVhdHVyZXMsIGNvb3JkaW5hdGUpIHtcblxuICAgIEV2ZW50LmNhbGwodGhpcywgdHlwZSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZmVhdHVyZXMgYmVpbmcgdHJhbnNsYXRlZC5cbiAgICAgKiBAdHlwZSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICB0aGlzLmZlYXR1cmVzID0gZmVhdHVyZXM7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY29vcmRpbmF0ZSBvZiB0aGUgZHJhZyBldmVudC5cbiAgICAgKiBAY29uc3RcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICB0aGlzLmNvb3JkaW5hdGUgPSBjb29yZGluYXRlO1xuXG4gIH1cblxuICBpZiAoIEV2ZW50ICkgVHJhbnNsYXRlRXZlbnQuX19wcm90b19fID0gRXZlbnQ7XG4gIFRyYW5zbGF0ZUV2ZW50LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoIEV2ZW50ICYmIEV2ZW50LnByb3RvdHlwZSApO1xuICBUcmFuc2xhdGVFdmVudC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBUcmFuc2xhdGVFdmVudDtcblxuICByZXR1cm4gVHJhbnNsYXRlRXZlbnQ7XG59KEV2ZW50KSk7XG5cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBJbnRlcmFjdGlvbiBmb3IgdHJhbnNsYXRpbmcgKG1vdmluZykgZmVhdHVyZXMuXG4gKlxuICogQGZpcmVzIFRyYW5zbGF0ZUV2ZW50XG4gKiBAYXBpXG4gKi9cbnZhciBUcmFuc2xhdGUgPSAvKkBfX1BVUkVfXyovKGZ1bmN0aW9uIChQb2ludGVySW50ZXJhY3Rpb24pIHtcbiAgZnVuY3Rpb24gVHJhbnNsYXRlKG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG5cbiAgICBQb2ludGVySW50ZXJhY3Rpb24uY2FsbCgvKiogQHR5cGUge2ltcG9ydChcIi4vUG9pbnRlci5qc1wiKS5PcHRpb25zfSAqLyB0aGlzLCAob3B0aW9ucykpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGxhc3QgcG9zaXRpb24gd2UgdHJhbnNsYXRlZCB0by5cbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5sYXN0Q29vcmRpbmF0ZV8gPSBudWxsO1xuXG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5mZWF0dXJlc18gPSBvcHRpb25zLmZlYXR1cmVzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmZlYXR1cmVzIDogbnVsbDtcblxuICAgIC8qKiBAdHlwZSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59ICovXG4gICAgdmFyIGxheWVyRmlsdGVyO1xuICAgIGlmIChvcHRpb25zLmxheWVycykge1xuICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmxheWVycyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBsYXllckZpbHRlciA9IG9wdGlvbnMubGF5ZXJzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGxheWVycyA9IG9wdGlvbnMubGF5ZXJzO1xuICAgICAgICBsYXllckZpbHRlciA9IGZ1bmN0aW9uKGxheWVyKSB7XG4gICAgICAgICAgcmV0dXJuIGluY2x1ZGVzKGxheWVycywgbGF5ZXIpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsYXllckZpbHRlciA9IFRSVUU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5sYXllckZpbHRlcl8gPSBsYXllckZpbHRlcjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmhpdFRvbGVyYW5jZV8gPSBvcHRpb25zLmhpdFRvbGVyYW5jZSA/IG9wdGlvbnMuaGl0VG9sZXJhbmNlIDogMDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLmRlZmF1bHR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmxhc3RGZWF0dXJlXyA9IG51bGw7XG5cbiAgICBsaXN0ZW4odGhpcyxcbiAgICAgIGdldENoYW5nZUV2ZW50VHlwZShJbnRlcmFjdGlvblByb3BlcnR5LkFDVElWRSksXG4gICAgICB0aGlzLmhhbmRsZUFjdGl2ZUNoYW5nZWRfLCB0aGlzKTtcblxuICB9XG5cbiAgaWYgKCBQb2ludGVySW50ZXJhY3Rpb24gKSBUcmFuc2xhdGUuX19wcm90b19fID0gUG9pbnRlckludGVyYWN0aW9uO1xuICBUcmFuc2xhdGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUG9pbnRlckludGVyYWN0aW9uICYmIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUgKTtcbiAgVHJhbnNsYXRlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFRyYW5zbGF0ZTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIFRyYW5zbGF0ZS5wcm90b3R5cGUuaGFuZGxlRG93bkV2ZW50ID0gZnVuY3Rpb24gaGFuZGxlRG93bkV2ZW50IChldmVudCkge1xuICAgIHRoaXMubGFzdEZlYXR1cmVfID0gdGhpcy5mZWF0dXJlc0F0UGl4ZWxfKGV2ZW50LnBpeGVsLCBldmVudC5tYXApO1xuICAgIGlmICghdGhpcy5sYXN0Q29vcmRpbmF0ZV8gJiYgdGhpcy5sYXN0RmVhdHVyZV8pIHtcbiAgICAgIHRoaXMubGFzdENvb3JkaW5hdGVfID0gZXZlbnQuY29vcmRpbmF0ZTtcbiAgICAgIHRoaXMuaGFuZGxlTW92ZUV2ZW50KGV2ZW50KTtcblxuICAgICAgdmFyIGZlYXR1cmVzID0gdGhpcy5mZWF0dXJlc18gfHwgbmV3IENvbGxlY3Rpb24oW3RoaXMubGFzdEZlYXR1cmVfXSk7XG5cbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgbmV3IFRyYW5zbGF0ZUV2ZW50KFxuICAgICAgICAgIFRyYW5zbGF0ZUV2ZW50VHlwZS5UUkFOU0xBVEVTVEFSVCwgZmVhdHVyZXMsXG4gICAgICAgICAgZXZlbnQuY29vcmRpbmF0ZSkpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIFRyYW5zbGF0ZS5wcm90b3R5cGUuaGFuZGxlVXBFdmVudCA9IGZ1bmN0aW9uIGhhbmRsZVVwRXZlbnQgKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMubGFzdENvb3JkaW5hdGVfKSB7XG4gICAgICB0aGlzLmxhc3RDb29yZGluYXRlXyA9IG51bGw7XG4gICAgICB0aGlzLmhhbmRsZU1vdmVFdmVudChldmVudCk7XG5cbiAgICAgIHZhciBmZWF0dXJlcyA9IHRoaXMuZmVhdHVyZXNfIHx8IG5ldyBDb2xsZWN0aW9uKFt0aGlzLmxhc3RGZWF0dXJlX10pO1xuXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXG4gICAgICAgIG5ldyBUcmFuc2xhdGVFdmVudChcbiAgICAgICAgICBUcmFuc2xhdGVFdmVudFR5cGUuVFJBTlNMQVRFRU5ELCBmZWF0dXJlcyxcbiAgICAgICAgICBldmVudC5jb29yZGluYXRlKSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgVHJhbnNsYXRlLnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiBoYW5kbGVEcmFnRXZlbnQgKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMubGFzdENvb3JkaW5hdGVfKSB7XG4gICAgICB2YXIgbmV3Q29vcmRpbmF0ZSA9IGV2ZW50LmNvb3JkaW5hdGU7XG4gICAgICB2YXIgZGVsdGFYID0gbmV3Q29vcmRpbmF0ZVswXSAtIHRoaXMubGFzdENvb3JkaW5hdGVfWzBdO1xuICAgICAgdmFyIGRlbHRhWSA9IG5ld0Nvb3JkaW5hdGVbMV0gLSB0aGlzLmxhc3RDb29yZGluYXRlX1sxXTtcblxuICAgICAgdmFyIGZlYXR1cmVzID0gdGhpcy5mZWF0dXJlc18gfHwgbmV3IENvbGxlY3Rpb24oW3RoaXMubGFzdEZlYXR1cmVfXSk7XG5cbiAgICAgIGZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24oZmVhdHVyZSkge1xuICAgICAgICB2YXIgZ2VvbSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcbiAgICAgICAgZ2VvbS50cmFuc2xhdGUoZGVsdGFYLCBkZWx0YVkpO1xuICAgICAgICBmZWF0dXJlLnNldEdlb21ldHJ5KGdlb20pO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMubGFzdENvb3JkaW5hdGVfID0gbmV3Q29vcmRpbmF0ZTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgbmV3IFRyYW5zbGF0ZUV2ZW50KFxuICAgICAgICAgIFRyYW5zbGF0ZUV2ZW50VHlwZS5UUkFOU0xBVElORywgZmVhdHVyZXMsXG4gICAgICAgICAgbmV3Q29vcmRpbmF0ZSkpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIFRyYW5zbGF0ZS5wcm90b3R5cGUuaGFuZGxlTW92ZUV2ZW50ID0gZnVuY3Rpb24gaGFuZGxlTW92ZUV2ZW50IChldmVudCkge1xuICAgIHZhciBlbGVtID0gZXZlbnQubWFwLmdldFZpZXdwb3J0KCk7XG5cbiAgICAvLyBDaGFuZ2UgdGhlIGN1cnNvciB0byBncmFiL2dyYWJiaW5nIGlmIGhvdmVyaW5nIGFueSBvZiB0aGUgZmVhdHVyZXMgbWFuYWdlZFxuICAgIC8vIGJ5IHRoZSBpbnRlcmFjdGlvblxuICAgIGlmICh0aGlzLmZlYXR1cmVzQXRQaXhlbF8oZXZlbnQucGl4ZWwsIGV2ZW50Lm1hcCkpIHtcbiAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmxhc3RDb29yZGluYXRlXyA/ICdvbC1ncmFiJyA6ICdvbC1ncmFiYmluZycpO1xuICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKHRoaXMubGFzdENvb3JkaW5hdGVfID8gJ29sLWdyYWJiaW5nJyA6ICdvbC1ncmFiJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnb2wtZ3JhYicsICdvbC1ncmFiYmluZycpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVGVzdHMgdG8gc2VlIGlmIHRoZSBnaXZlbiBjb29yZGluYXRlcyBpbnRlcnNlY3RzIGFueSBvZiBvdXIgc2VsZWN0ZWRcbiAgICogZmVhdHVyZXMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsIGNvb3JkaW5hdGUgdG8gdGVzdCBmb3IgaW50ZXJzZWN0aW9uLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwIHRvIHRlc3QgdGhlIGludGVyc2VjdGlvbiBvbi5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5kZWZhdWx0fSBSZXR1cm5zIHRoZSBmZWF0dXJlIGZvdW5kIGF0IHRoZSBzcGVjaWZpZWQgcGl4ZWxcbiAgICogY29vcmRpbmF0ZXMuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBUcmFuc2xhdGUucHJvdG90eXBlLmZlYXR1cmVzQXRQaXhlbF8gPSBmdW5jdGlvbiBmZWF0dXJlc0F0UGl4ZWxfIChwaXhlbCwgbWFwKSB7XG4gICAgcmV0dXJuIG1hcC5mb3JFYWNoRmVhdHVyZUF0UGl4ZWwocGl4ZWwsXG4gICAgICBmdW5jdGlvbihmZWF0dXJlKSB7XG4gICAgICAgIGlmICghdGhpcy5mZWF0dXJlc18gfHwgaW5jbHVkZXModGhpcy5mZWF0dXJlc18uZ2V0QXJyYXkoKSwgZmVhdHVyZSkpIHtcbiAgICAgICAgICByZXR1cm4gZmVhdHVyZTtcbiAgICAgICAgfVxuICAgICAgfS5iaW5kKHRoaXMpLCB7XG4gICAgICAgIGxheWVyRmlsdGVyOiB0aGlzLmxheWVyRmlsdGVyXyxcbiAgICAgICAgaGl0VG9sZXJhbmNlOiB0aGlzLmhpdFRvbGVyYW5jZV9cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBIaXQtZGV0ZWN0aW9uIHRvbGVyYW5jZS5cbiAgICogQHJldHVybnMge251bWJlcn0gSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAqIEBhcGlcbiAgICovXG4gIFRyYW5zbGF0ZS5wcm90b3R5cGUuZ2V0SGl0VG9sZXJhbmNlID0gZnVuY3Rpb24gZ2V0SGl0VG9sZXJhbmNlICgpIHtcbiAgICByZXR1cm4gdGhpcy5oaXRUb2xlcmFuY2VfO1xuICB9O1xuXG4gIC8qKlxuICAgKiBIaXQtZGV0ZWN0aW9uIHRvbGVyYW5jZS4gUGl4ZWxzIGluc2lkZSB0aGUgcmFkaXVzIGFyb3VuZCB0aGUgZ2l2ZW4gcG9zaXRpb25cbiAgICogd2lsbCBiZSBjaGVja2VkIGZvciBmZWF0dXJlcy4gVGhpcyBvbmx5IHdvcmtzIGZvciB0aGUgY2FudmFzIHJlbmRlcmVyIGFuZFxuICAgKiBub3QgZm9yIFdlYkdMLlxuICAgKiBAcGFyYW0ge251bWJlcn0gaGl0VG9sZXJhbmNlIEhpdCB0b2xlcmFuY2UgaW4gcGl4ZWxzLlxuICAgKiBAYXBpXG4gICAqL1xuICBUcmFuc2xhdGUucHJvdG90eXBlLnNldEhpdFRvbGVyYW5jZSA9IGZ1bmN0aW9uIHNldEhpdFRvbGVyYW5jZSAoaGl0VG9sZXJhbmNlKSB7XG4gICAgdGhpcy5oaXRUb2xlcmFuY2VfID0gaGl0VG9sZXJhbmNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgVHJhbnNsYXRlLnByb3RvdHlwZS5zZXRNYXAgPSBmdW5jdGlvbiBzZXRNYXAgKG1hcCkge1xuICAgIHZhciBvbGRNYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuc2V0TWFwLmNhbGwodGhpcywgbWFwKTtcbiAgICB0aGlzLnVwZGF0ZVN0YXRlXyhvbGRNYXApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgVHJhbnNsYXRlLnByb3RvdHlwZS5oYW5kbGVBY3RpdmVDaGFuZ2VkXyA9IGZ1bmN0aW9uIGhhbmRsZUFjdGl2ZUNoYW5nZWRfICgpIHtcbiAgICB0aGlzLnVwZGF0ZVN0YXRlXyhudWxsKTtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gb2xkTWFwIE9sZCBtYXAuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBUcmFuc2xhdGUucHJvdG90eXBlLnVwZGF0ZVN0YXRlXyA9IGZ1bmN0aW9uIHVwZGF0ZVN0YXRlXyAob2xkTWFwKSB7XG4gICAgdmFyIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgdmFyIGFjdGl2ZSA9IHRoaXMuZ2V0QWN0aXZlKCk7XG4gICAgaWYgKCFtYXAgfHwgIWFjdGl2ZSkge1xuICAgICAgbWFwID0gbWFwIHx8IG9sZE1hcDtcbiAgICAgIGlmIChtYXApIHtcbiAgICAgICAgdmFyIGVsZW0gPSBtYXAuZ2V0Vmlld3BvcnQoKTtcbiAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdvbC1ncmFiJywgJ29sLWdyYWJiaW5nJyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBUcmFuc2xhdGU7XG59KFBvaW50ZXJJbnRlcmFjdGlvbikpO1xuXG5leHBvcnQgZGVmYXVsdCBUcmFuc2xhdGU7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyYW5zbGF0ZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb25cbiAqL1xuaW1wb3J0IENvbGxlY3Rpb24gZnJvbSAnLi9Db2xsZWN0aW9uLmpzJztcbmltcG9ydCBLaW5ldGljIGZyb20gJy4vS2luZXRpYy5qcyc7XG5pbXBvcnQgRG91YmxlQ2xpY2tab29tIGZyb20gJy4vaW50ZXJhY3Rpb24vRG91YmxlQ2xpY2tab29tLmpzJztcbmltcG9ydCBEcmFnUGFuIGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ1Bhbi5qcyc7XG5pbXBvcnQgRHJhZ1JvdGF0ZSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdSb3RhdGUuanMnO1xuaW1wb3J0IERyYWdab29tIGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ1pvb20uanMnO1xuaW1wb3J0IEtleWJvYXJkUGFuIGZyb20gJy4vaW50ZXJhY3Rpb24vS2V5Ym9hcmRQYW4uanMnO1xuaW1wb3J0IEtleWJvYXJkWm9vbSBmcm9tICcuL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbS5qcyc7XG5pbXBvcnQgTW91c2VXaGVlbFpvb20gZnJvbSAnLi9pbnRlcmFjdGlvbi9Nb3VzZVdoZWVsWm9vbS5qcyc7XG5pbXBvcnQgUGluY2hSb3RhdGUgZnJvbSAnLi9pbnRlcmFjdGlvbi9QaW5jaFJvdGF0ZS5qcyc7XG5pbXBvcnQgUGluY2hab29tIGZyb20gJy4vaW50ZXJhY3Rpb24vUGluY2hab29tLmpzJztcbmltcG9ydCB7Zm9jdXN9IGZyb20gJy4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG5cbmV4cG9ydCB7ZGVmYXVsdCBhcyBEb3VibGVDbGlja1pvb219IGZyb20gJy4vaW50ZXJhY3Rpb24vRG91YmxlQ2xpY2tab29tLmpzJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBEcmFnQW5kRHJvcH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnQW5kRHJvcC5qcyc7XG5leHBvcnQge2RlZmF1bHQgYXMgRHJhZ0JveH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnQm94LmpzJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBEcmFnUGFufSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdQYW4uanMnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIERyYWdSb3RhdGV9IGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZS5qcyc7XG5leHBvcnQge2RlZmF1bHQgYXMgRHJhZ1JvdGF0ZUFuZFpvb219IGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZUFuZFpvb20uanMnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIERyYWdab29tfSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdab29tLmpzJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBEcmF3fSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYXcuanMnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIEV4dGVudH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9FeHRlbnQuanMnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIEludGVyYWN0aW9ufSBmcm9tICcuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBLZXlib2FyZFBhbn0gZnJvbSAnLi9pbnRlcmFjdGlvbi9LZXlib2FyZFBhbi5qcyc7XG5leHBvcnQge2RlZmF1bHQgYXMgS2V5Ym9hcmRab29tfSBmcm9tICcuL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbS5qcyc7XG5leHBvcnQge2RlZmF1bHQgYXMgTW9kaWZ5fSBmcm9tICcuL2ludGVyYWN0aW9uL01vZGlmeS5qcyc7XG5leHBvcnQge2RlZmF1bHQgYXMgTW91c2VXaGVlbFpvb219IGZyb20gJy4vaW50ZXJhY3Rpb24vTW91c2VXaGVlbFpvb20uanMnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIFBpbmNoUm90YXRlfSBmcm9tICcuL2ludGVyYWN0aW9uL1BpbmNoUm90YXRlLmpzJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBQaW5jaFpvb219IGZyb20gJy4vaW50ZXJhY3Rpb24vUGluY2hab29tLmpzJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBQb2ludGVyfSBmcm9tICcuL2ludGVyYWN0aW9uL1BvaW50ZXIuanMnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIFNlbGVjdH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9TZWxlY3QuanMnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIFNuYXB9IGZyb20gJy4vaW50ZXJhY3Rpb24vU25hcC5qcyc7XG5leHBvcnQge2RlZmF1bHQgYXMgVHJhbnNsYXRlfSBmcm9tICcuL2ludGVyYWN0aW9uL1RyYW5zbGF0ZS5qcyc7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBEZWZhdWx0c09wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2FsdFNoaWZ0RHJhZ1JvdGF0ZT10cnVlXSBXaGV0aGVyIEFsdC1TaGlmdC1kcmFnIHJvdGF0ZSBpc1xuICogZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW29uRm9jdXNPbmx5PWZhbHNlXSBJbnRlcmFjdCBvbmx5IHdoZW4gdGhlIG1hcCBoYXMgdGhlXG4gKiBmb2N1cy4gVGhpcyBhZmZlY3RzIHRoZSBgTW91c2VXaGVlbFpvb21gIGFuZCBgRHJhZ1BhbmAgaW50ZXJhY3Rpb25zIGFuZCBpc1xuICogdXNlZnVsIHdoZW4gcGFnZSBzY3JvbGwgaXMgZGVzaXJlZCBmb3IgbWFwcyB0aGF0IGRvIG5vdCBoYXZlIHRoZSBicm93c2VyJ3NcbiAqIGZvY3VzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbY29uc3RyYWluUmVzb2x1dGlvbj1mYWxzZV0gWm9vbSB0byB0aGUgY2xvc2VzdCBpbnRlZ2VyXG4gKiB6b29tIGxldmVsIGFmdGVyIHRoZSB3aGVlbC90cmFja3BhZCBvciBwaW5jaCBnZXN0dXJlIGVuZHMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtkb3VibGVDbGlja1pvb209dHJ1ZV0gV2hldGhlciBkb3VibGUgY2xpY2sgem9vbSBpc1xuICogZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2tleWJvYXJkPXRydWVdIFdoZXRoZXIga2V5Ym9hcmQgaW50ZXJhY3Rpb24gaXMgZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW21vdXNlV2hlZWxab29tPXRydWVdIFdoZXRoZXIgbW91c2V3aGVlbCB6b29tIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzaGlmdERyYWdab29tPXRydWVdIFdoZXRoZXIgU2hpZnQtZHJhZyB6b29tIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtkcmFnUGFuPXRydWVdIFdoZXRoZXIgZHJhZyBwYW4gaXMgZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3BpbmNoUm90YXRlPXRydWVdIFdoZXRoZXIgcGluY2ggcm90YXRlIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtwaW5jaFpvb209dHJ1ZV0gV2hldGhlciBwaW5jaCB6b29tIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pvb21EZWx0YV0gWm9vbSBsZXZlbCBkZWx0YSB3aGVuIHVzaW5nIGtleWJvYXJkIG9yXG4gKiBtb3VzZXdoZWVsIHpvb20uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pvb21EdXJhdGlvbl0gRHVyYXRpb24gb2YgdGhlIHpvb20gYW5pbWF0aW9uIGluXG4gKiBtaWxsaXNlY29uZHMuXG4gKi9cblxuXG4vKipcbiAqIFNldCBvZiBpbnRlcmFjdGlvbnMgaW5jbHVkZWQgaW4gbWFwcyBieSBkZWZhdWx0LiBTcGVjaWZpYyBpbnRlcmFjdGlvbnMgY2FuIGJlXG4gKiBleGNsdWRlZCBieSBzZXR0aW5nIHRoZSBhcHByb3ByaWF0ZSBvcHRpb24gdG8gZmFsc2UgaW4gdGhlIGNvbnN0cnVjdG9yXG4gKiBvcHRpb25zLCBidXQgdGhlIG9yZGVyIG9mIHRoZSBpbnRlcmFjdGlvbnMgaXMgZml4ZWQuICBJZiB5b3Ugd2FudCB0byBzcGVjaWZ5XG4gKiBhIGRpZmZlcmVudCBvcmRlciBmb3IgaW50ZXJhY3Rpb25zLCB5b3Ugd2lsbCBuZWVkIHRvIGNyZWF0ZSB5b3VyIG93blxuICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbn0gaW5zdGFuY2VzIGFuZCBpbnNlcnRcbiAqIHRoZW0gaW50byBhIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn0gaW4gdGhlIG9yZGVyIHlvdSB3YW50XG4gKiBiZWZvcmUgY3JlYXRpbmcgeW91ciB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9IGluc3RhbmNlLiBUaGUgZGVmYXVsdCBzZXQgb2ZcbiAqIGludGVyYWN0aW9ucywgaW4gc2VxdWVuY2UsIGlzOlxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RyYWdSb3RhdGV+RHJhZ1JvdGF0ZX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9Eb3VibGVDbGlja1pvb21+RG91YmxlQ2xpY2tab29tfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RyYWdQYW5+RHJhZ1Bhbn1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9QaW5jaFJvdGF0ZX5QaW5jaFJvdGF0ZX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9QaW5jaFpvb21+UGluY2hab29tfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkUGFufktleWJvYXJkUGFufVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbX5LZXlib2FyZFpvb219XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vTW91c2VXaGVlbFpvb21+TW91c2VXaGVlbFpvb219XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhZ1pvb21+RHJhZ1pvb219XG4gKlxuICogQHBhcmFtIHtEZWZhdWx0c09wdGlvbnM9fSBvcHRfb3B0aW9ucyBEZWZhdWx0cyBvcHRpb25zLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0Pn1cbiAqIEEgY29sbGVjdGlvbiBvZiBpbnRlcmFjdGlvbnMgdG8gYmUgdXNlZCB3aXRoIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9XG4gKiBjb25zdHJ1Y3RvcidzIGBpbnRlcmFjdGlvbnNgIG9wdGlvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRzKG9wdF9vcHRpb25zKSB7XG5cbiAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG5cbiAgdmFyIGludGVyYWN0aW9ucyA9IG5ldyBDb2xsZWN0aW9uKCk7XG5cbiAgdmFyIGtpbmV0aWMgPSBuZXcgS2luZXRpYygtMC4wMDUsIDAuMDUsIDEwMCk7XG5cbiAgdmFyIGFsdFNoaWZ0RHJhZ1JvdGF0ZSA9IG9wdGlvbnMuYWx0U2hpZnREcmFnUm90YXRlICE9PSB1bmRlZmluZWQgP1xuICAgIG9wdGlvbnMuYWx0U2hpZnREcmFnUm90YXRlIDogdHJ1ZTtcbiAgaWYgKGFsdFNoaWZ0RHJhZ1JvdGF0ZSkge1xuICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBEcmFnUm90YXRlKCkpO1xuICB9XG5cbiAgdmFyIGRvdWJsZUNsaWNrWm9vbSA9IG9wdGlvbnMuZG91YmxlQ2xpY2tab29tICE9PSB1bmRlZmluZWQgP1xuICAgIG9wdGlvbnMuZG91YmxlQ2xpY2tab29tIDogdHJ1ZTtcbiAgaWYgKGRvdWJsZUNsaWNrWm9vbSkge1xuICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBEb3VibGVDbGlja1pvb20oe1xuICAgICAgZGVsdGE6IG9wdGlvbnMuem9vbURlbHRhLFxuICAgICAgZHVyYXRpb246IG9wdGlvbnMuem9vbUR1cmF0aW9uXG4gICAgfSkpO1xuICB9XG5cbiAgdmFyIGRyYWdQYW4gPSBvcHRpb25zLmRyYWdQYW4gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHJhZ1BhbiA6IHRydWU7XG4gIGlmIChkcmFnUGFuKSB7XG4gICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IERyYWdQYW4oe1xuICAgICAgY29uZGl0aW9uOiBvcHRpb25zLm9uRm9jdXNPbmx5ID8gZm9jdXMgOiB1bmRlZmluZWQsXG4gICAgICBraW5ldGljOiBraW5ldGljXG4gICAgfSkpO1xuICB9XG5cbiAgdmFyIHBpbmNoUm90YXRlID0gb3B0aW9ucy5waW5jaFJvdGF0ZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5waW5jaFJvdGF0ZSA6XG4gICAgdHJ1ZTtcbiAgaWYgKHBpbmNoUm90YXRlKSB7XG4gICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IFBpbmNoUm90YXRlKCkpO1xuICB9XG5cbiAgdmFyIHBpbmNoWm9vbSA9IG9wdGlvbnMucGluY2hab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnBpbmNoWm9vbSA6IHRydWU7XG4gIGlmIChwaW5jaFpvb20pIHtcbiAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgUGluY2hab29tKHtcbiAgICAgIGNvbnN0cmFpblJlc29sdXRpb246IG9wdGlvbnMuY29uc3RyYWluUmVzb2x1dGlvbixcbiAgICAgIGR1cmF0aW9uOiBvcHRpb25zLnpvb21EdXJhdGlvblxuICAgIH0pKTtcbiAgfVxuXG4gIHZhciBrZXlib2FyZCA9IG9wdGlvbnMua2V5Ym9hcmQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMua2V5Ym9hcmQgOiB0cnVlO1xuICBpZiAoa2V5Ym9hcmQpIHtcbiAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgS2V5Ym9hcmRQYW4oKSk7XG4gICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IEtleWJvYXJkWm9vbSh7XG4gICAgICBkZWx0YTogb3B0aW9ucy56b29tRGVsdGEsXG4gICAgICBkdXJhdGlvbjogb3B0aW9ucy56b29tRHVyYXRpb25cbiAgICB9KSk7XG4gIH1cblxuICB2YXIgbW91c2VXaGVlbFpvb20gPSBvcHRpb25zLm1vdXNlV2hlZWxab29tICE9PSB1bmRlZmluZWQgP1xuICAgIG9wdGlvbnMubW91c2VXaGVlbFpvb20gOiB0cnVlO1xuICBpZiAobW91c2VXaGVlbFpvb20pIHtcbiAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgTW91c2VXaGVlbFpvb20oe1xuICAgICAgY29uZGl0aW9uOiBvcHRpb25zLm9uRm9jdXNPbmx5ID8gZm9jdXMgOiB1bmRlZmluZWQsXG4gICAgICBjb25zdHJhaW5SZXNvbHV0aW9uOiBvcHRpb25zLmNvbnN0cmFpblJlc29sdXRpb24sXG4gICAgICBkdXJhdGlvbjogb3B0aW9ucy56b29tRHVyYXRpb25cbiAgICB9KSk7XG4gIH1cblxuICB2YXIgc2hpZnREcmFnWm9vbSA9IG9wdGlvbnMuc2hpZnREcmFnWm9vbSAhPT0gdW5kZWZpbmVkID9cbiAgICBvcHRpb25zLnNoaWZ0RHJhZ1pvb20gOiB0cnVlO1xuICBpZiAoc2hpZnREcmFnWm9vbSkge1xuICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBEcmFnWm9vbSh7XG4gICAgICBkdXJhdGlvbjogb3B0aW9ucy56b29tRHVyYXRpb25cbiAgICB9KSk7XG4gIH1cblxuICByZXR1cm4gaW50ZXJhY3Rpb25zO1xuXG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVyYWN0aW9uLmpzLm1hcCJdLCJzb3VyY2VSb290IjoiIn0=