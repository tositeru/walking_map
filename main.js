!function(e){function o(o){for(var t,r,l=o[0],i=o[1],a=0,s=[];a<l.length;a++)r=l[a],n[r]&&s.push(n[r][0]),n[r]=0;for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t]);for(c&&c(o);s.length;)s.shift()()}var t={},n={6:0};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(e){var o=[],t=n[e];if(0!==t)if(t)o.push(t[2]);else{var l=new Promise(function(o,r){t=n[e]=[o,r]});o.push(t[2]=l);var i,a=document.createElement("script");a.charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.src=function(e){return r.p+""+({0:"vendors~ol/Geolocation~ol/Map~ol/View~ol/geom/Point~ol/interaction~ol/layer~ol/source~ol/style",1:"vendors~ol/Geolocation~ol/Map~ol/View~ol/geom/Point~ol/interaction~ol/layer~ol/source",2:"vendors~ol/Geolocation~ol/Map~ol/View~ol/geom/Point~ol/interaction~ol/source",3:"vendors~ol/Map~ol/interaction~ol/layer~ol/style",4:"vendors~ol/Geolocation~ol/View",5:"vendors~ol/layer~ol/source",7:"ol/Feature",8:"ol/Geolocation",9:"ol/Map",10:"ol/View",11:"ol/interaction",12:"ol/layer",13:"ol/source",14:"vendors~ol/style"}[e]||e)+".js"}(e),i=function(o){a.onerror=a.onload=null,clearTimeout(c);var t=n[e];if(0!==t){if(t){var r=o&&("load"===o.type?"missing":o.type),l=o&&o.target&&o.target.src,i=new Error("Loading chunk "+e+" failed.\n("+r+": "+l+")");i.type=r,i.request=l,t[1](i)}n[e]=void 0}};var c=setTimeout(function(){i({type:"timeout",target:a})},12e4);a.onerror=a.onload=i,document.head.appendChild(a)}return Promise.all(o)},r.m=e,r.c=t,r.d=function(e,o,t){r.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,o){if(1&o&&(e=r(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var n in e)r.d(t,n,function(o){return e[o]}.bind(null,n));return t},r.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(o,"a",o),o},r.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},r.p="",r.oe=function(e){throw console.error(e),e};var l=window.webpackJsonp=window.webpackJsonp||[],i=l.push.bind(l);l.push=o,l=l.slice();for(var a=0;a<l.length;a++)o(l[a]);var c=i;r(r.s=0)}([function(e,o,t){"use strict";function n(e,o){let t=e;for(const e of o.split("/")){if(!t[e])throw new Error(`Access unknown property name... path=${o}`);t=t[e]}return t}function r(e,o,t){const n=(e,o,t)=>{const r=o[0];1===o.length?e[r]=t:n(e[r]?e[r]:e[r]={},o.slice(1),t)};n(e,o.split("/"),t)}t.r(o);var l={imports:async function(e){const o=[];for(const t of e){const e=n(this,t);o.push(e())}const t=await Promise.all(o),l={};for(let o=0;o<e.length;++o)r(l,e[o],t[o]);return l},Map:()=>Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(9)]).then(t.bind(null,117)),View:()=>Promise.all([t.e(0),t.e(1),t.e(2),t.e(4),t.e(10)]).then(t.bind(null,111)),layer:()=>Promise.all([t.e(0),t.e(1),t.e(3),t.e(5),t.e(12)]).then(t.bind(null,119)),source:()=>Promise.all([t.e(0),t.e(1),t.e(2),t.e(5),t.e(13)]).then(t.bind(null,116)),Feature:()=>t.e(7).then(t.bind(null,48)),Geolocation:()=>Promise.all([t.e(0),t.e(1),t.e(2),t.e(4),t.e(8)]).then(t.bind(null,115)),interaction:()=>Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(11)]).then(t.bind(null,110)),style:()=>Promise.all([t.e(0),t.e(3),t.e(14)]).then(t.bind(null,118)),geom:{Point:()=>Promise.all([t.e(0),t.e(1),t.e(2)]).then(t.bind(null,42))}};!async function(){try{const o=await l.imports(["Map","View","layer","source","Feature","Geolocation","interaction","style","geom/Point"]),t=new o.layer.Tile({source:new o.source.OSM}),n=new o.source.Vector,r=new o.layer.Vector({source:n,style:new o.style.Style({fill:new o.style.Fill({color:"rgba(255, 255, 255, 0.2)"}),image:new o.style.Circle({fill:new o.style.Fill({color:"#ffcc33"}),radius:7}),stroke:new o.style.Stroke({color:"#ffcc33",width:2})})}),i=new o.View.default({center:[-11e6,46e5],maxZoom:28,minZoom:3,zoom:17}),a=new o.Map.default({layers:[t,r],target:"map",view:i}),c=new o.interaction.Modify({source:n});let s,u;a.addInteraction(c);const f=document.getElementById("type");function e(){s=new o.interaction.Draw({source:n,type:f.value}),a.addInteraction(s),u=new o.interaction.Snap({source:n}),a.addInteraction(u)}f.onchange=(()=>{a.removeInteraction(s),a.removeInteraction(u),e()});const d=new o.Feature.default;d.setStyle(new o.style.Style({image:new o.style.Circle({fill:new o.style.Fill({color:"#33CC99"}),radius:6,stroke:new o.style.Stroke({color:"#fff",width:2})})})),e();const y=new o.Geolocation.default({projection:i.getProjection(),trackingOptions:{enableHighAccuracy:!0}});y.setTracking(!0),y.on("change:position",()=>{const e=y.getPosition();d.setGeometry(e?new o.geom.Point.default(e):null),i.animate({center:e,duration:1e3})});const p=new o.Feature.default;y.on("change:accuracyGeometry",()=>{p.setGeometry(y.getAccuracyGeometry())}),new o.layer.Vector({map:a,source:new o.source.Vector({features:[p,d]})})}catch(e){console.error(e)}}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL29sLWR5bmFtaWMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbIndlYnBhY2tKc29ucENhbGxiYWNrIiwiZGF0YSIsIm1vZHVsZUlkIiwiY2h1bmtJZCIsImNodW5rSWRzIiwibW9yZU1vZHVsZXMiLCJpIiwicmVzb2x2ZXMiLCJsZW5ndGgiLCJpbnN0YWxsZWRDaHVua3MiLCJwdXNoIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwibW9kdWxlcyIsInBhcmVudEpzb25wRnVuY3Rpb24iLCJzaGlmdCIsImluc3RhbGxlZE1vZHVsZXMiLCI2IiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJtb2R1bGUiLCJsIiwiZSIsInByb21pc2VzIiwiaW5zdGFsbGVkQ2h1bmtEYXRhIiwicHJvbWlzZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0Iiwib25TY3JpcHRDb21wbGV0ZSIsInNjcmlwdCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNoYXJzZXQiLCJ0aW1lb3V0IiwibmMiLCJzZXRBdHRyaWJ1dGUiLCJzcmMiLCJwIiwiMCIsIjEiLCIyIiwiMyIsIjQiLCI1IiwiNyIsIjgiLCI5IiwiMTAiLCIxMSIsIjEyIiwiMTMiLCIxNCIsImpzb25wU2NyaXB0U3JjIiwiZXZlbnQiLCJvbmVycm9yIiwib25sb2FkIiwiY2xlYXJUaW1lb3V0IiwiY2h1bmsiLCJlcnJvclR5cGUiLCJ0eXBlIiwicmVhbFNyYyIsInRhcmdldCIsImVycm9yIiwiRXJyb3IiLCJyZXF1ZXN0IiwidW5kZWZpbmVkIiwic2V0VGltZW91dCIsImhlYWQiLCJhcHBlbmRDaGlsZCIsImFsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJvZSIsImVyciIsImNvbnNvbGUiLCJqc29ucEFycmF5Iiwid2luZG93Iiwib2xkSnNvbnBGdW5jdGlvbiIsInNsaWNlIiwicyIsIl9nZXRQcm9wZXJ0eSIsIm9iaiIsInBhdGgiLCJwcm9wIiwic3BsaXQiLCJfc2V0UHJvcGVydHkiLCJwcmVkIiwicGF0aExpc3QiLCJvbF9keW5hbWljIiwiaW1wb3J0cyIsImFzeW5jIiwibGlzdCIsImltcG9ydExpc3QiLCJkeW5hbWljSW1wb3J0IiwidGhpcyIsIm9sIiwiTWFwIiwidGhlbiIsIlZpZXciLCJsYXllciIsInNvdXJjZSIsIkZlYXR1cmUiLCJHZW9sb2NhdGlvbiIsImludGVyYWN0aW9uIiwic3R5bGUiLCJnZW9tIiwiUG9pbnQiLCJyYXN0ZXIiLCJUaWxlIiwiT1NNIiwiVmVjdG9yIiwidmVjdG9yIiwiU3R5bGUiLCJmaWxsIiwiRmlsbCIsImNvbG9yIiwiaW1hZ2UiLCJDaXJjbGUiLCJyYWRpdXMiLCJzdHJva2UiLCJTdHJva2UiLCJ3aWR0aCIsInZpZXciLCJkZWZhdWx0IiwiY2VudGVyIiwibWF4Wm9vbSIsIm1pblpvb20iLCJ6b29tIiwibWFwIiwibGF5ZXJzIiwibW9kaWZ5IiwiTW9kaWZ5IiwiZHJhdyIsInNuYXAiLCJhZGRJbnRlcmFjdGlvbiIsInR5cGVTZWxlY3QiLCJnZXRFbGVtZW50QnlJZCIsImFkZEludGVyYWN0aW9ucyIsIkRyYXciLCJTbmFwIiwib25jaGFuZ2UiLCJyZW1vdmVJbnRlcmFjdGlvbiIsInBvc2l0aW9uRmVhdHVyZSIsInNldFN0eWxlIiwiZ2VvbG9jYXRpb24iLCJwcm9qZWN0aW9uIiwiZ2V0UHJvamVjdGlvbiIsInRyYWNraW5nT3B0aW9ucyIsImVuYWJsZUhpZ2hBY2N1cmFjeSIsInNldFRyYWNraW5nIiwib24iLCJjb29yZGluYXRlcyIsImdldFBvc2l0aW9uIiwic2V0R2VvbWV0cnkiLCJhbmltYXRlIiwiZHVyYXRpb24iLCJhY2N1cmFjeUZlYXR1cmUiLCJnZXRBY2N1cmFjeUdlb21ldHJ5IiwiZmVhdHVyZXMiLCJtYWluIl0sIm1hcHBpbmdzIjoiYUFDQSxTQUFBQSxFQUFBQyxHQVFBLElBUEEsSUFNQUMsRUFBQUMsRUFOQUMsRUFBQUgsRUFBQSxHQUNBSSxFQUFBSixFQUFBLEdBS0FLLEVBQUEsRUFBQUMsRUFBQSxHQUNRRCxFQUFBRixFQUFBSSxPQUFvQkYsSUFDNUJILEVBQUFDLEVBQUFFLEdBQ0FHLEVBQUFOLElBQ0FJLEVBQUFHLEtBQUFELEVBQUFOLEdBQUEsSUFFQU0sRUFBQU4sR0FBQSxFQUVBLElBQUFELEtBQUFHLEVBQ0FNLE9BQUFDLFVBQUFDLGVBQUFDLEtBQUFULEVBQUFILEtBQ0FhLEVBQUFiLEdBQUFHLEVBQUFILElBS0EsSUFGQWMsS0FBQWYsR0FFQU0sRUFBQUMsUUFDQUQsRUFBQVUsT0FBQVYsR0FPQSxJQUFBVyxFQUFBLEdBS0FULEVBQUEsQ0FDQVUsRUFBQSxHQVdBLFNBQUFDLEVBQUFsQixHQUdBLEdBQUFnQixFQUFBaEIsR0FDQSxPQUFBZ0IsRUFBQWhCLEdBQUFtQixRQUdBLElBQUFDLEVBQUFKLEVBQUFoQixHQUFBLENBQ0FJLEVBQUFKLEVBQ0FxQixHQUFBLEVBQ0FGLFFBQUEsSUFVQSxPQU5BTixFQUFBYixHQUFBWSxLQUFBUSxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRCxHQUdBRSxFQUFBQyxHQUFBLEVBR0FELEVBQUFELFFBS0FELEVBQUFJLEVBQUEsU0FBQXJCLEdBQ0EsSUFBQXNCLEVBQUEsR0FLQUMsRUFBQWpCLEVBQUFOLEdBQ0EsT0FBQXVCLEVBR0EsR0FBQUEsRUFDQUQsRUFBQWYsS0FBQWdCLEVBQUEsUUFDSyxDQUVMLElBQUFDLEVBQUEsSUFBQUMsUUFBQSxTQUFBQyxFQUFBQyxHQUNBSixFQUFBakIsRUFBQU4sR0FBQSxDQUFBMEIsRUFBQUMsS0FFQUwsRUFBQWYs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LENBQUFGLEVBQUFkLE9BR0csTUFBQXJHLEdBQ0hpQyxRQUFBakMsVUFJQXNIIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbiBcdGZ1bmN0aW9uIHdlYnBhY2tKc29ucENhbGxiYWNrKGRhdGEpIHtcbiBcdFx0dmFyIGNodW5rSWRzID0gZGF0YVswXTtcbiBcdFx0dmFyIG1vcmVNb2R1bGVzID0gZGF0YVsxXTtcblxuXG4gXHRcdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuIFx0XHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcbiBcdFx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMCwgcmVzb2x2ZXMgPSBbXTtcbiBcdFx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG4gXHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG4gXHRcdFx0XHRyZXNvbHZlcy5wdXNoKGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSk7XG4gXHRcdFx0fVxuIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG4gXHRcdH1cbiBcdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcbiBcdFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuIFx0XHRcdH1cbiBcdFx0fVxuIFx0XHRpZihwYXJlbnRKc29ucEZ1bmN0aW9uKSBwYXJlbnRKc29ucEZ1bmN0aW9uKGRhdGEpO1xuXG4gXHRcdHdoaWxlKHJlc29sdmVzLmxlbmd0aCkge1xuIFx0XHRcdHJlc29sdmVzLnNoaWZ0KCkoKTtcbiBcdFx0fVxuXG4gXHR9O1xuXG5cbiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4gXHQvLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbiBcdC8vIFByb21pc2UgPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG4gXHR2YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuIFx0XHQ2OiAwXG4gXHR9O1xuXG5cblxuIFx0Ly8gc2NyaXB0IHBhdGggZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIGpzb25wU2NyaXB0U3JjKGNodW5rSWQpIHtcbiBcdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiXCIgKyAoe1wiMFwiOlwidmVuZG9yc35vbC9HZW9sb2NhdGlvbn5vbC9NYXB+b2wvVmlld35vbC9nZW9tL1BvaW50fm9sL2ludGVyYWN0aW9ufm9sL2xheWVyfm9sL3NvdXJjZX5vbC9zdHlsZVwiLFwiMVwiOlwidmVuZG9yc35vbC9HZW9sb2NhdGlvbn5vbC9NYXB+b2wvVmlld35vbC9nZW9tL1BvaW50fm9sL2ludGVyYWN0aW9ufm9sL2xheWVyfm9sL3NvdXJjZVwiLFwiMlwiOlwidmVuZG9yc35vbC9HZW9sb2NhdGlvbn5vbC9NYXB+b2wvVmlld35vbC9nZW9tL1BvaW50fm9sL2ludGVyYWN0aW9ufm9sL3NvdXJjZVwiLFwiM1wiOlwidmVuZG9yc35vbC9NYXB+b2wvaW50ZXJhY3Rpb25+b2wvbGF5ZXJ+b2wvc3R5bGVcIixcIjRcIjpcInZlbmRvcnN+b2wvR2VvbG9jYXRpb25+b2wvVmlld1wiLFwiNVwiOlwidmVuZG9yc35vbC9sYXllcn5vbC9zb3VyY2VcIixcIjdcIjpcIm9sL0ZlYXR1cmVcIixcIjhcIjpcIm9sL0dlb2xvY2F0aW9uXCIsXCI5XCI6XCJvbC9NYXBcIixcIjEwXCI6XCJvbC9WaWV3XCIsXCIxMVwiOlwib2wvaW50ZXJhY3Rpb25cIixcIjEyXCI6XCJvbC9sYXllclwiLFwiMTNcIjpcIm9sL3NvdXJjZVwiLFwiMTRcIjpcInZlbmRvcnN+b2wvc3R5bGVcIn1bY2h1bmtJZF18fGNodW5rSWQpICsgXCIuanNcIlxuIFx0fVxuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cbiBcdC8vIFRoaXMgZmlsZSBjb250YWlucyBvbmx5IHRoZSBlbnRyeSBjaHVuay5cbiBcdC8vIFRoZSBjaHVuayBsb2FkaW5nIGZ1bmN0aW9uIGZvciBhZGRpdGlvbmFsIGNodW5rc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5lID0gZnVuY3Rpb24gcmVxdWlyZUVuc3VyZShjaHVua0lkKSB7XG4gXHRcdHZhciBwcm9taXNlcyA9IFtdO1xuXG5cbiBcdFx0Ly8gSlNPTlAgY2h1bmsgbG9hZGluZyBmb3IgamF2YXNjcmlwdFxuXG4gXHRcdHZhciBpbnN0YWxsZWRDaHVua0RhdGEgPSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF07XG4gXHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSAhPT0gMCkgeyAvLyAwIG1lYW5zIFwiYWxyZWFkeSBpbnN0YWxsZWRcIi5cblxuIFx0XHRcdC8vIGEgUHJvbWlzZSBtZWFucyBcImN1cnJlbnRseSBsb2FkaW5nXCIuXG4gXHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtEYXRhKSB7XG4gXHRcdFx0XHRwcm9taXNlcy5wdXNoKGluc3RhbGxlZENodW5rRGF0YVsyXSk7XG4gXHRcdFx0fSBlbHNlIHtcbiBcdFx0XHRcdC8vIHNldHVwIFByb21pc2UgaW4gY2h1bmsgY2FjaGVcbiBcdFx0XHRcdHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gXHRcdFx0XHRcdGluc3RhbGxlZENodW5rRGF0YSA9IGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IFtyZXNvbHZlLCByZWplY3RdO1xuIFx0XHRcdFx0fSk7XG4gXHRcdFx0XHRwcm9taXNlcy5wdXNoKGluc3RhbGxlZENodW5rRGF0YVsyXSA9IHByb21pc2UpO1xuXG4gXHRcdFx0XHQvLyBzdGFydCBjaHVuayBsb2FkaW5nXG4gXHRcdFx0XHR2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gXHRcdFx0XHR2YXIgb25TY3JpcHRDb21wbGV0ZTtcblxuIFx0XHRcdFx0c2NyaXB0LmNoYXJzZXQgPSAndXRmLTgnO1xuIFx0XHRcdFx0c2NyaXB0LnRpbWVvdXQgPSAxMjA7XG4gXHRcdFx0XHRpZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5uYykge1xuIFx0XHRcdFx0XHRzY3JpcHQuc2V0QXR0cmlidXRlKFwibm9uY2VcIiwgX193ZWJwYWNrX3JlcXVpcmVfXy5uYyk7XG4gXHRcdFx0XHR9XG4gXHRcdFx0XHRzY3JpcHQuc3JjID0ganNvbnBTY3JpcHRTcmMoY2h1bmtJZCk7XG5cbiBcdFx0XHRcdG9uU2NyaXB0Q29tcGxldGUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiBcdFx0XHRcdFx0Ly8gYXZvaWQgbWVtIGxlYWtzIGluIElFLlxuIFx0XHRcdFx0XHRzY3JpcHQub25lcnJvciA9IHNjcmlwdC5vbmxvYWQgPSBudWxsO1xuIFx0XHRcdFx0XHRjbGVhclRpbWVvdXQodGltZW91dCk7XG4gXHRcdFx0XHRcdHZhciBjaHVuayA9IGluc3RhbGxlZENodW5rc1tjaHVua0lkXTtcbiBcdFx0XHRcdFx0aWYoY2h1bmsgIT09IDApIHtcbiBcdFx0XHRcdFx0XHRpZihjaHVuaykge1xuIFx0XHRcdFx0XHRcdFx0dmFyIGVycm9yVHlwZSA9IGV2ZW50ICYmIChldmVudC50eXBlID09PSAnbG9hZCcgPyAnbWlzc2luZycgOiBldmVudC50eXBlKTtcbiBcdFx0XHRcdFx0XHRcdHZhciByZWFsU3JjID0gZXZlbnQgJiYgZXZlbnQudGFyZ2V0ICYmIGV2ZW50LnRhcmdldC5zcmM7XG4gXHRcdFx0XHRcdFx0XHR2YXIgZXJyb3IgPSBuZXcgRXJyb3IoJ0xvYWRpbmcgY2h1bmsgJyArIGNodW5rSWQgKyAnIGZhaWxlZC5cXG4oJyArIGVycm9yVHlwZSArICc6ICcgKyByZWFsU3JjICsgJyknKTtcbiBcdFx0XHRcdFx0XHRcdGVycm9yLnR5cGUgPSBlcnJvclR5cGU7XG4gXHRcdFx0XHRcdFx0XHRlcnJvci5yZXF1ZXN0ID0gcmVhbFNyYztcbiBcdFx0XHRcdFx0XHRcdGNodW5rWzFdKGVycm9yKTtcbiBcdFx0XHRcdFx0XHR9XG4gXHRcdFx0XHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gdW5kZWZpbmVkO1xuIFx0XHRcdFx0XHR9XG4gXHRcdFx0XHR9O1xuIFx0XHRcdFx0dmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gXHRcdFx0XHRcdG9uU2NyaXB0Q29tcGxldGUoeyB0eXBlOiAndGltZW91dCcsIHRhcmdldDogc2NyaXB0IH0pO1xuIFx0XHRcdFx0fSwgMTIwMDAwKTtcbiBcdFx0XHRcdHNjcmlwdC5vbmVycm9yID0gc2NyaXB0Lm9ubG9hZCA9IG9uU2NyaXB0Q29tcGxldGU7XG4gXHRcdFx0XHRkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gXHRcdFx0fVxuIFx0XHR9XG4gXHRcdHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gXHR9O1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIG9uIGVycm9yIGZ1bmN0aW9uIGZvciBhc3luYyBsb2FkaW5nXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm9lID0gZnVuY3Rpb24oZXJyKSB7IGNvbnNvbGUuZXJyb3IoZXJyKTsgdGhyb3cgZXJyOyB9O1xuXG4gXHR2YXIganNvbnBBcnJheSA9IHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXSA9IHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXSB8fCBbXTtcbiBcdHZhciBvbGRKc29ucEZ1bmN0aW9uID0ganNvbnBBcnJheS5wdXNoLmJpbmQoanNvbnBBcnJheSk7XG4gXHRqc29ucEFycmF5LnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjaztcbiBcdGpzb25wQXJyYXkgPSBqc29ucEFycmF5LnNsaWNlKCk7XG4gXHRmb3IodmFyIGkgPSAwOyBpIDwganNvbnBBcnJheS5sZW5ndGg7IGkrKykgd2VicGFja0pzb25wQ2FsbGJhY2soanNvbnBBcnJheVtpXSk7XG4gXHR2YXIgcGFyZW50SnNvbnBGdW5jdGlvbiA9IG9sZEpzb25wRnVuY3Rpb247XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIi8qKlxuICog5YuV55qE44Kk44Oz44Od44O844OI44GnT3BlbkxheWVyc+OBruODouOCuOODpeODvOODq+OCkuiqreOBv+i+vOOCgFxuICpcbiAqIEBleGFtcGxlXG4gKiBpbXBvcnQgb2xEeW5hbWljIGZyb20gJ29sLWR5bmFtaWMnXG4gKiBjb25zdCBvbCA9IG9sRHluYW1pYy5pbXBvcnRzKFsnTWFwJywgJ1ZpZXcnLCBcImxheWVyXCJdKVxuICpcbiAqIGNvbnN0IG1hcCA9IG5ldyBvbC5NYXAuZGVmYXVsdCh7IC4uLiB9KVxuICovXG5cbi8qKlxuICAqXG4gICogQHBhcmFtIHtPYmplY3R9IG9ialxuICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIHNlcGFyYXRlIGJ5ICcvJ1xuICAqIEByZXR1cm4ge2FueX1cbiAgKi9cbmZ1bmN0aW9uIF9nZXRQcm9wZXJ0eShvYmosIHBhdGgpIHtcbiAgbGV0IHByb3AgPSBvYmo7XG4gIGZvciAoY29uc3QgcCBvZiBwYXRoLnNwbGl0KCcvJykpIHtcbiAgICBpZiAoIXByb3BbcF0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQWNjZXNzIHVua25vd24gcHJvcGVydHkgbmFtZS4uLiBwYXRoPSR7cGF0aH1gKTtcbiAgICB9XG4gICAgcHJvcCA9IHByb3BbcF07XG4gIH1cbiAgcmV0dXJuIHByb3A7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIHNlcGFyYXRlIGJ5ICcvJ1xuICogQHBhcmFtIHthbnl9IHZhbHVlXG4gKi9cbmZ1bmN0aW9uIF9zZXRQcm9wZXJ0eShvYmosIHBhdGgsIHZhbHVlKSB7XG4gIGNvbnN0IHByZWQgPSAocHJvcCwgcGF0aExpc3QsIHZhbHVlKSA9PiB7XG4gICAgY29uc3QgcCA9IHBhdGhMaXN0WzBdO1xuICAgIHBhdGhMaXN0Lmxlbmd0aCA9PT0gMVxuICAgICAgPyBwcm9wW3BdID0gdmFsdWVcbiAgICAgIDogcHJlZChwcm9wW3BdID8gcHJvcFtwXSA6IHByb3BbcF0gPSB7fSwgcGF0aExpc3Quc2xpY2UoMSksIHZhbHVlKTtcbiAgfTtcbiAgcHJlZChvYmosIHBhdGguc3BsaXQoJy8nKSwgdmFsdWUpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIC8qKlxuICAgKiDpmo7lsaTmp4vpgKDjgpLmjIHjgaTjg6Ljgrjjg6Xjg7zjg6vjgpLmjIflrprjgZnjgovjgajjgY3jga9gL2DjgafljLrliIfjgaPjgabjgY/jgaDjgZXjgYRcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogaW1wb3J0IG9sRHluYW1pYyBmcm9tICdvbC1keW5hbWljJ1xuICAgKiBjb25zdCBvbCA9IG9sRHluYW1pYy5pbXBvcnRzKFsnTWFwJywgJ1ZpZXcnLCBcImxheWVyXCJdKVxuICAgKlxuICAgKiBjb25zdCBtYXAgPSBuZXcgb2wuTWFwLmRlZmF1bHQoeyAuLi4gfSlcbiAgICpcbiAgICpcbiAgICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBsaXN0IOiqreOBv+i+vOOCgOODouOCuOODpeODvOODq+OBruODquOCueODiOOAglxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBpbXBvcnRzOiBhc3luYyBmdW5jdGlvbihsaXN0KSB7XG4gICAgY29uc3QgaW1wb3J0TGlzdCA9IFtdO1xuICAgIGZvciAoY29uc3QgbCBvZiBsaXN0KSB7XG4gICAgICBjb25zdCBkeW5hbWljSW1wb3J0ID0gX2dldFByb3BlcnR5KHRoaXMsIGwpO1xuICAgICAgaW1wb3J0TGlzdC5wdXNoKGR5bmFtaWNJbXBvcnQoKSk7XG4gICAgfVxuICAgIGNvbnN0IG1vZHVsZXMgPSBhd2FpdCBQcm9taXNlLmFsbChpbXBvcnRMaXN0KTtcbiAgICBjb25zdCBvbCA9IHt9O1xuICAgIGZvciAobGV0IGk9MDsgaTxsaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgICBfc2V0UHJvcGVydHkob2wsIGxpc3RbaV0sIG1vZHVsZXNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gb2w7XG4gIH0sXG4gIE1hcDogKCkgPT4gaW1wb3J0KC8qIHdlYnBhY2tDaHVua05hbWU6IFwib2wvTWFwXCIgKi8gJ29sL01hcC5qcycpLFxuICBWaWV3OiAoKSA9PiBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJvbC9WaWV3XCIgKi8gJ29sL1ZpZXcuanMnKSxcbiAgbGF5ZXI6ICgpID0+IGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcIm9sL2xheWVyXCIgKi8gJ29sL2xheWVyLmpzJyksXG4gIHNvdXJjZTogKCkgPT4gaW1wb3J0KC8qIHdlYnBhY2tDaHVua05hbWU6IFwib2wvc291cmNlXCIgKi8gJ29sL3NvdXJjZS5qcycpLFxuICBGZWF0dXJlOiAoKSA9PiBpbXBvcnQoLyogd2VicGFja0NodW5rTmFtZTogXCJvbC9GZWF0dXJlXCIgKi8gJ29sL0ZlYXR1cmUuanMnKSxcbiAgR2VvbG9jYXRpb246ICgpID0+XG4gICAgaW1wb3J0KC8qIHdlYnBhY2tDaHVua05hbWU6IFwib2wvR2VvbG9jYXRpb25cIiAqLyAnb2wvR2VvbG9jYXRpb24uanMnKSxcbiAgaW50ZXJhY3Rpb246ICgpID0+XG4gICAgaW1wb3J0KC8qIHdlYnBhY2tDaHVua05hbWU6IFwib2wvaW50ZXJhY3Rpb25cIiAqLyAnb2wvaW50ZXJhY3Rpb24uanMnKSxcbiAgc3R5bGU6ICgpID0+IGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcIm9sL3N0eWxlXCIgKi8gJ29sL3N0eWxlLmpzJyksXG4gIGdlb206IHtcbiAgICBQb2ludDogKCkgPT5cbiAgICAgIGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiBcIm9sL2dlb20vUG9pbnRcIiAqLyAnb2wvZ2VvbS9Qb2ludC5qcycpLFxuICB9LFxufTtcbiIsImltcG9ydCBvbER5bmFtaWMgZnJvbSAnLi9qcy9vbC1keW5hbWljJ1xuXG5hc3luYyBmdW5jdGlvbiBtYWluKCkge1xuICB0cnkge1xuICAgIGNvbnN0IG9sID0gYXdhaXQgb2xEeW5hbWljLmltcG9ydHMoW1xuICAgICAgJ01hcCcsXG4gICAgICAnVmlldycsXG4gICAgICAnbGF5ZXInLFxuICAgICAgJ3NvdXJjZScsXG4gICAgICAnRmVhdHVyZScsXG4gICAgICAnR2VvbG9jYXRpb24nLFxuICAgICAgJ2ludGVyYWN0aW9uJyxcbiAgICAgICdzdHlsZScsXG4gICAgICAnZ2VvbS9Qb2ludCddKVxuICAgIGNvbnN0IHJhc3RlciA9IG5ldyBvbC5sYXllci5UaWxlKHtcbiAgICAgIHNvdXJjZTogbmV3IG9sLnNvdXJjZS5PU00oKSxcbiAgICB9KTtcblxuICAgIGNvbnN0IHNvdXJjZSA9IG5ldyBvbC5zb3VyY2UuVmVjdG9yKCk7XG4gICAgY29uc3QgdmVjdG9yID0gbmV3IG9sLmxheWVyLlZlY3Rvcih7XG4gICAgICBzb3VyY2UsXG4gICAgICBzdHlsZTogbmV3IG9sLnN0eWxlLlN0eWxlKHtcbiAgICAgICAgZmlsbDogbmV3IG9sLnN0eWxlLkZpbGwoe1xuICAgICAgICAgIGNvbG9yOiAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpJyxcbiAgICAgICAgfSksXG4gICAgICAgIGltYWdlOiBuZXcgb2wuc3R5bGUuQ2lyY2xlKHtcbiAgICAgICAgICBmaWxsOiBuZXcgb2wuc3R5bGUuRmlsbCh7XG4gICAgICAgICAgICBjb2xvcjogJyNmZmNjMzMnLFxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHJhZGl1czogNyxcbiAgICAgICAgfSksXG4gICAgICAgIHN0cm9rZTogbmV3IG9sLnN0eWxlLlN0cm9rZSh7XG4gICAgICAgICAgY29sb3I6ICcjZmZjYzMzJyxcbiAgICAgICAgICB3aWR0aDogMixcbiAgICAgICAgfSksXG4gICAgICB9KSxcbiAgICB9KTtcbiAgICBjb25zdCB2aWV3ID0gbmV3IG9sLlZpZXcuZGVmYXVsdCh7XG4gICAgICBjZW50ZXI6IFstMTEwMDAwMDAsIDQ2MDAwMDBdLFxuICAgICAgbWF4Wm9vbTogMjgsXG4gICAgICBtaW5ab29tOiAzLFxuICAgICAgem9vbTogMTcsXG4gICAgfSk7XG5cbiAgICBjb25zdCBtYXAgPSBuZXcgb2wuTWFwLmRlZmF1bHQoe1xuICAgICAgbGF5ZXJzOiBbcmFzdGVyLCB2ZWN0b3JdLFxuICAgICAgdGFyZ2V0OiAnbWFwJyxcbiAgICAgIHZpZXcsXG4gICAgfSk7XG5cbiAgICBjb25zdCBtb2RpZnkgPSBuZXcgb2wuaW50ZXJhY3Rpb24uTW9kaWZ5KHtzb3VyY2V9KTtcbiAgICBtYXAuYWRkSW50ZXJhY3Rpb24obW9kaWZ5KTtcblxuICAgIGxldCBkcmF3O1xuICAgIGxldCBzbmFwOyAvLyBnbG9iYWwgc28gd2UgY2FuIHJlbW92ZSB0aGVtIGxhdGVyXG4gICAgY29uc3QgdHlwZVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eXBlJyk7XG5cbiAgICBmdW5jdGlvbiBhZGRJbnRlcmFjdGlvbnMoKSB7XG4gICAgICBkcmF3ID0gbmV3IG9sLmludGVyYWN0aW9uLkRyYXcoe1xuICAgICAgICBzb3VyY2UsXG4gICAgICAgIHR5cGU6IHR5cGVTZWxlY3QudmFsdWUsXG4gICAgICB9KTtcbiAgICAgIG1hcC5hZGRJbnRlcmFjdGlvbihkcmF3KTtcbiAgICAgIHNuYXAgPSBuZXcgb2wuaW50ZXJhY3Rpb24uU25hcCh7c291cmNlfSk7XG4gICAgICBtYXAuYWRkSW50ZXJhY3Rpb24oc25hcCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIGNoYW5nZSBldmVudC5cbiAgICAgKi9cbiAgICB0eXBlU2VsZWN0Lm9uY2hhbmdlID0gKCkgPT4ge1xuICAgICAgbWFwLnJlbW92ZUludGVyYWN0aW9uKGRyYXcpO1xuICAgICAgbWFwLnJlbW92ZUludGVyYWN0aW9uKHNuYXApO1xuICAgICAgYWRkSW50ZXJhY3Rpb25zKCk7XG4gICAgfTtcblxuICAgIGNvbnN0IHBvc2l0aW9uRmVhdHVyZSA9IG5ldyBvbC5GZWF0dXJlLmRlZmF1bHQoKTtcbiAgICBwb3NpdGlvbkZlYXR1cmUuc2V0U3R5bGUobmV3IG9sLnN0eWxlLlN0eWxlKHtcbiAgICAgIGltYWdlOiBuZXcgb2wuc3R5bGUuQ2lyY2xlKHtcbiAgICAgICAgZmlsbDogbmV3IG9sLnN0eWxlLkZpbGwoe1xuICAgICAgICAgIGNvbG9yOiAnIzMzQ0M5OScsXG4gICAgICAgIH0pLFxuICAgICAgICByYWRpdXM6IDYsXG4gICAgICAgIHN0cm9rZTogbmV3IG9sLnN0eWxlLlN0cm9rZSh7XG4gICAgICAgICAgY29sb3I6ICcjZmZmJyxcbiAgICAgICAgICB3aWR0aDogMixcbiAgICAgICAgfSksXG4gICAgICB9KSxcbiAgICB9KSk7XG5cbiAgICBhZGRJbnRlcmFjdGlvbnMoKTtcbiAgICBcbiAgICBjb25zdCBnZW9sb2NhdGlvbiA9IG5ldyBvbC5HZW9sb2NhdGlvbi5kZWZhdWx0KHtcbiAgICAgIHByb2plY3Rpb246IHZpZXcuZ2V0UHJvamVjdGlvbigpLFxuICAgICAgdHJhY2tpbmdPcHRpb25zOiB7XG4gICAgICAgIGVuYWJsZUhpZ2hBY2N1cmFjeTogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBnZW9sb2NhdGlvbi5zZXRUcmFja2luZyh0cnVlKTsgLy8gaGVyZSB0aGUgYnJvd3NlciBtYXkgYXNrIGZvciBjb25maXJtYXRpb25cbiAgICBnZW9sb2NhdGlvbi5vbignY2hhbmdlOnBvc2l0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29vcmRpbmF0ZXMgPSBnZW9sb2NhdGlvbi5nZXRQb3NpdGlvbigpO1xuICAgICAgcG9zaXRpb25GZWF0dXJlLnNldEdlb21ldHJ5KGNvb3JkaW5hdGVzID9cbiAgICAgICAgbmV3IG9sLmdlb20uUG9pbnQuZGVmYXVsdChjb29yZGluYXRlcykgOiBudWxsKTtcbiAgICBcbiAgICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgIGNlbnRlcjogY29vcmRpbmF0ZXMsXG4gICAgICAgIGR1cmF0aW9uOiAxMDAwLFxuICAgICAgfSk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhnZW9sb2NhdGlvbi5nZXRQb3NpdGlvbigpLCBuZXcgUG9pbnQoY29vcmRpbmF0ZXMpKTtcbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBhY2N1cmFjeUZlYXR1cmUgPSBuZXcgb2wuRmVhdHVyZS5kZWZhdWx0KCk7XG4gICAgZ2VvbG9jYXRpb24ub24oJ2NoYW5nZTphY2N1cmFjeUdlb21ldHJ5JywgKCkgPT4ge1xuICAgICAgYWNjdXJhY3lGZWF0dXJlLnNldEdlb21ldHJ5KGdlb2xvY2F0aW9uLmdldEFjY3VyYWN5R2VvbWV0cnkoKSk7XG4gICAgfSk7XG5cbiAgICBuZXcgb2wubGF5ZXIuVmVjdG9yKHtcbiAgICAgIG1hcCxcbiAgICAgIHNvdXJjZTogbmV3IG9sLnNvdXJjZS5WZWN0b3Ioe1xuICAgICAgICBmZWF0dXJlczogW2FjY3VyYWN5RmVhdHVyZSwgcG9zaXRpb25GZWF0dXJlXSxcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXG4gIH1cbn1cblxubWFpbigpXG5cbiJdLCJzb3VyY2VSb290IjoiIn0=